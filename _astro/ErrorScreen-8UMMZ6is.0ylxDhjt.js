import{d4 as u,d5 as h,dp as m,d6 as r,de as p,da as t,f0 as y,d9 as d,dL as f,dr as w}from"./app.Dbs6V_q1.js";import{h as E}from"./reservoir-0wfhnc0j.e4oV4U26.js";import{n as C}from"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import"./index.Crn7-fJZ.js";import{c as g}from"./createLucideIcon.RSj0tFkk.js";import{L as A}from"./lock.RVFbxoA7.js";import"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import"./Screen-5StC6JLQ.BNbtfsff.js";import"./index-Dq_xe9dz.CYFAvuPJ.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],S=g("phone",x);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],a=g("triangle-alert",_),L=({error:i,allowlistConfig:n,onRetry:c,onCaptchaReset:l,onBack:s})=>{let o=((e,T)=>{if(e instanceof E)return{title:"Transaction failed",detail:r.jsxs(r.Fragment,{children:[r.jsx("span",{children:e.message}),r.jsxs("span",{children:[" ","Check the"," ",r.jsx(I,{href:e.relayLink,target:"_blank",children:"refund status"}),"."]})]}),ctaText:"Try again",icon:a};if(e instanceof p)switch(e.privyErrorCode){case t.CLIENT_REQUEST_TIMEOUT:return{title:"Timed out",detail:e.message,ctaText:"Try again",icon:a};case t.INSUFFICIENT_BALANCE:return{title:"Insufficient balance",detail:e.message,ctaText:"Try again",icon:a};case t.TRANSACTION_FAILURE:return{title:"Transaction failure",detail:e.message,ctaText:"Try again",icon:a};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a}}else{if(e instanceof y&&e.type==="twilio_verification_failed")return{title:"Something went wrong",detail:e.message,ctaText:"Try again",icon:S};if(!(e instanceof d))return e instanceof f&&e.status&&[400,422].includes(e.status)?{title:"Something went wrong",detail:e.message,ctaText:"Try again",icon:a}:{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a};switch(e.privyErrorCode){case t.INVALID_CAPTCHA:return{title:"Something went wrong",detail:"Please try again.",ctaText:"Try again",icon:a};case t.DISALLOWED_LOGIN_METHOD:return{title:"Not allowed",detail:e.message,ctaText:"Try another method",icon:a};case t.ALLOWLIST_REJECTED:return{title:T.errorTitle||"You don't have access to this app",detail:T.errorDetail||"Have you been invited?",ctaText:T.errorCtaText||"Try another account",icon:A};case t.CAPTCHA_FAILURE:return{title:"Something went wrong",detail:"You did not pass CAPTCHA. Please try again.",ctaText:"Try again",icon:null};case t.CAPTCHA_TIMEOUT:return{title:"Something went wrong",detail:"Something went wrong! Please try again later.",ctaText:"Try again",icon:null};case t.LINKED_TO_ANOTHER_USER:return{title:"Authentication failed",detail:"This account has already been linked to another user.",ctaText:"Try again",icon:a};case t.NOT_SUPPORTED:return{title:"This region is not supported",detail:"SMS authentication from this region is not available",ctaText:"Try another method",icon:a};case t.TOO_MANY_REQUESTS:return{title:"Request failed",detail:"Too many attempts.",ctaText:"Try again later",icon:a};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:a}}}})(i,n);return r.jsx(C,{title:o.title,subtitle:o.detail,icon:o.icon,onBack:s,iconVariant:"error",primaryCta:{label:o.ctaText,onClick:()=>{i instanceof d&&(i.privyErrorCode===t.INVALID_CAPTCHA&&l?.(),i.privyErrorCode===t.ALLOWLIST_REJECTED&&n.errorCtaLink)?window.location.href=n.errorCtaLink:c?.()},variant:"error"},watermark:!0})},U={component:()=>{let{navigate:i,data:n,lastScreen:c,currentScreen:l}=u(),s=h(),{reset:o}=m(),e=n?.errorModalData?.previousScreen||(c===l?void 0:c);return r.jsx(L,{error:n?.errorModalData?.error||Error(),allowlistConfig:s.allowlistConfig,onRetry:()=>{i(e||"LandingScreen",!1)},onCaptchaReset:o})}};let I=w.a`
  color: var(--privy-color-accent) !important;
  font-weight: 600;
`;export{U as ErrorScreen,L as ErrorScreenView,U as default};
