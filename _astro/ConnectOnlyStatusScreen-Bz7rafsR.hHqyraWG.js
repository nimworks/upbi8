import{d4 as M,d7 as W,dc as U,dv as E,d6 as y,dw as j,dx as D,dy as O}from"./app.Dbs6V_q1.js";import{r as m}from"./index.Crn7-fJZ.js";import{n as L}from"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import{getErrorDetails as N}from"./ConnectionStatusScreen-_g1A1Dg2.C78MTtz7.js";import"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import"./Screen-5StC6JLQ.BNbtfsff.js";import"./index-Dq_xe9dz.CYFAvuPJ.js";import"./Link-DJ5gq9Di.Cl2blr2u.js";import"./useI18n-VPW2SjZN.Cz-gwxDA.js";import"./shouldProceedtoEmbeddedWalletCreationFlow-BfZwb-3N.vvASFTgn.js";const $=({walletLogo:c,success:r,errorMessage:a,title:w,subtitle:p,onRetry:l,onUseDifferentWallet:d,onBack:e,numRetries:i,maxRetries:t})=>y.jsx(L,{title:w,subtitle:p,icon:c,iconVariant:"loading",iconLoadingStatus:{success:r,fail:!!a},primaryCta:a===O.ERROR_USER_EXISTS?{label:"Use a different wallet",onClick:d}:!r&&a?.retryable&&i<t?{label:"Retry",onClick:l,disabled:!a?.retryable||i>=t}:!r&&a&&i>=t?{label:"Use a different wallet",onClick:d}:void 0,onBack:e,watermark:!0}),H={component:()=>{let c,{navigateBack:r,navigate:a,lastScreen:w,currentScreen:p,data:l,setModalData:d}=M(),{walletConnectionStatus:e,closePrivyModal:i}=W(),[t,C]=m.useState(void 0),[f,R]=m.useState(0),g=U(e?.connector?.walletClientType||"unknown"),s=e?.status==="connected",b=e?.status==="switching_to_supported_chain";m.useEffect((()=>{if(s){let o;if(l?.externalConnectWallet?.onCompleteNavigateTo){let v=l.externalConnectWallet.onCompleteNavigateTo,h=e.connectedWallet?.address;o=setTimeout((()=>{if(l.funding&&e.connector){let _=e.connector.wallets.find((B=>B.address===h));d({...l,funding:{...l.funding,connectedWallet:_}})}a(v({address:h,walletClientType:e.connector?.walletClientType,walletChainType:e.connector?.chainType}))}),E)}else o=setTimeout(i,E);return()=>clearTimeout(o)}}),[s]),m.useEffect((()=>{var o;e?.connectError&&(o=e?.connectError,C(N(o)))}),[e]);let k=e?.connector?.connectorType||"injected",x=e?.connector?.walletClientType||"unknown",u=g?.metadata?.shortName||g?.name||e?.connector?.walletBranding.name||"Browser Extension",T=g?.image_url?.md||e?.connector?.walletBranding.icon||(o=>y.jsx(j,{...o})),S=u==="Browser Extension"?u.toLowerCase():u;c=s?`Successfully connected with ${S}`:t?t.message:b?"Switching networks":`Waiting for ${S}`;let n="Don’t see your wallet? Check your other browser windows.";return s?n="You’re good to go!":f>=2&&t?n="Unable to connect wallet":t?n=t.detail:b?n="Switch your wallet to the requested network.":x==="metamask"&&D.isMobile?n="Click to continue to open and connect MetaMask.":x==="metamask"?n="For the best experience, connect only one wallet at a time.":k==="wallet_connect_v2"?n="Open your mobile wallet app to continue":k==="coinbase_wallet"&&(n="Confirm in the Coinbase app/popup to continue."),y.jsx($,{walletName:u,walletLogo:T,success:s,errorMessage:t,title:c,subtitle:n,onRetry:()=>{R(f+1),C(void 0),e?.connectRetry()},onUseDifferentWallet:r,onBack:p===w?void 0:r,numRetries:f,maxRetries:2})}};export{H as ConnectOnlyStatusScreen,$ as ConnectOnlyStatusScreenView,H as default};
