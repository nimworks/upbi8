import{dz as C,d7 as M,d4 as T,dp as $,e1 as A,d5 as L,d9 as D,da as U,e2 as I,d6 as e,dr as R,e3 as N}from"./app.Dbs6V_q1.js";import{r as i}from"./index.Crn7-fJZ.js";import{V as F,m as V}from"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import{n as W}from"./Chip-D2-wZOHJ.DezdPRVM.js";import{t as _,a as q}from"./EmailInputForm-Dgoii4vf.BrQcx02d.js";import{e as z}from"./ErrorMessage-D8VaAP5m.NPlgZ3Xt.js";import{M as B}from"./mail.CyTFkYLK.js";const ae=i.forwardRef(((s,S)=>{let[a,x]=i.useState(s.defaultValue||""),[t,m]=i.useState(""),[n,p]=i.useState(!1),{authenticated:E}=C(),{initLoginWithEmail:g}=M(),{navigate:o,setModalData:d,currentScreen:j,data:l}=T(),{enabled:y,token:h}=$(),[k,v]=i.useState(!1),{accountType:b}=A(),w=L();i.useEffect((()=>{!a&&w.disablePlusEmails&&l?.inlineError?.error instanceof D&&l?.inlineError?.error.privyErrorCode===U.DISALLOWED_PLUS_EMAIL&&!t&&m("Please enter a valid email address without a '+'."),t&&m("")}),[a]);let P=I(a),f=n||!P,c=()=>{var r;d({login:l?.login,inlineError:void 0}),!y||h||E?(r=h,p(!0),g({email:a,captchaToken:r,disableSignup:l?.login?.disableSignup,withPrivyUi:!0}).then((()=>{o("AwaitingPasswordlessCodeScreen")})).catch((u=>{d({errorModalData:{error:u,previousScreen:j||"LandingScreen"}}),o("ErrorScreen")})).finally((()=>{p(!1)}))):(d({captchaModalData:{callback:u=>g({email:a,captchaToken:u,withPrivyUi:!0}),userIntentRequired:!1,onSuccessNavigateTo:"AwaitingPasswordlessCodeScreen",onErrorNavigateTo:"ErrorScreen"}}),o("CaptchaScreen"))};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[t&&e.jsx(z,{style:{display:"block",marginTop:"0.25rem",textAlign:"left"},children:t}),e.jsxs(K,{stacked:s.stacked,$error:!!t,children:[e.jsx(O,{children:e.jsx(B,{})}),e.jsx("input",{ref:S,id:"email-input",className:"login-method-button",type:"email",placeholder:"your@email.com",onFocus:()=>v(!0),onChange:r=>x(r.target.value),onKeyUp:r=>{r.key==="Enter"&&c()},value:a,autoComplete:"email"}),b!=="email"||k?s.stacked?e.jsx("span",{}):e.jsx(F,{isSubmitting:n,onClick:c,disabled:f,children:"Submit"}):e.jsx(W,{color:"gray",children:"Recent"})]})]}),s.stacked?e.jsx(V,{loadingText:null,loading:n,disabled:f,onClick:c,style:{width:"100%"},children:"Submit"}):null]})}));let H=_,K=q,O=R(N)`
  display: inline-flex;
`;export{ae as j};
