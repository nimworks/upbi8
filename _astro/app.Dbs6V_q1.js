const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/ccip.DE0xvdNq.js","_astro/index.Crn7-fJZ.js","_astro/core.CSdGW7J-.js","_astro/index.D-Tq3YiE.js","_astro/parseSignature.-rrRuN0O.js","_astro/parseUnits.Di_CbW2l.js","_astro/TurnstileWrapper-Co-t5mTh.8sGpBxK9.js","_astro/HCaptchaWrapper-CUi9LJsp.DMsR-ddz.js","_astro/AccountNotFoundScreen-DvDKQEeR.DePqOw3m.js","_astro/ScreenLayout-C2Le_YIv.CCTYs10k.js","_astro/ModalHeader-CSfzkWxZ.KQF0IT9H.js","_astro/Screen-5StC6JLQ.BNbtfsff.js","_astro/index-Dq_xe9dz.CYFAvuPJ.js","_astro/createLucideIcon.RSj0tFkk.js","_astro/AffirmativeConsentScreen-DmjKmR3p.BnFN7MpI.js","_astro/shouldProceedtoEmbeddedWalletCreationFlow-BfZwb-3N.vvASFTgn.js","_astro/external-link.2vjVGgqs.js","_astro/AllowlistRejectionScreen-Dzgqqss9.DCzrD5S0.js","_astro/lock.RVFbxoA7.js","_astro/AuthenticateWithWalletScreen-DqEYmKRq.COSFm11i.js","_astro/ConnectWalletView-rtAY2uds.BDm_0JzF.js","_astro/copy-Bx2Jwc5_.DotTa6qt.js","_astro/Link-DJ5gq9Di.Cl2blr2u.js","_astro/QrCode-BkoTqsec.Ok9nSJBs.js","_astro/dijkstra.COg3n3zL.js","_astro/EmailInputForm-Dgoii4vf.BrQcx02d.js","_astro/ErrorMessage-D8VaAP5m.NPlgZ3Xt.js","_astro/useI18n-VPW2SjZN.Cz-gwxDA.js","_astro/WalletCards-DH1rqayz.BW1b7bRd.js","_astro/AwaitingEvmToSolBridgingScreen-mM0yFabb.BuZgqEUw.js","_astro/CheckCircleIcon.DG4NyxCY.js","_astro/Layouts-BlFm53ED.DNAcEX9b.js","_astro/ScreenHeader-CHmc4-Lu.CDB8Kfz5.js","_astro/FundWalletMethodHeader-Dujd1j7J.DOTw7rnz.js","_astro/useGetTokenPrice-YObgUU6L.Bdidc-9R.js","_astro/useGetSolPrice-DwwjjGbd.Cs3YiPXK.js","_astro/analytics-mkkvFRju.DOXuftJB.js","_astro/reservoir-0wfhnc0j.e4oV4U26.js","_astro/getChainName-DjpPdUSc.c2urPd0g.js","_astro/transaction-CnfuREWo.DxjkYrBU.js","_astro/getFormattedUsdFromLamports-B6EqSEho.C-HCdwKa.js","_astro/BridgeNetworkSelectionView-0VRZoDMv.C8_i9FW3.js","_astro/getErc20Balance-D0MGUaOw.CZLXP-aV.js","_astro/Value-tcJV9e0L.CCQPdIyi.js","_astro/LoadingSkeleton-U6-3yFwI.DhgKuR2U.js","_astro/Subtitle-CV-2yKE4.DJhYHDeo.js","_astro/Title-BnzYV3Is.B74pnAvd.js","_astro/WalletIcon.DW8etFtk.js","_astro/Chip-D2-wZOHJ.DezdPRVM.js","_astro/TransferOrBridgeLoadingScreen-gM_oel5i.B9Paf-ub.js","_astro/InjectedWalletIcon-DLcYOGDj.CyAbXwSp.js","_astro/Address-BuCMjci7.5xYW3BaW.js","_astro/check.BWO2M5QN.js","_astro/copy.Ukg_M5w7.js","_astro/GlobeAltIcon.TtWhTJWd.js","_astro/shared-FM0rljBt.uRznKemR.js","_astro/ChevronDownIcon.zw1eklKi.js","_astro/formatErc20TokenAmount-BuPk9xcy.CkAr4Oc0.js","_astro/ethers-DrSqg5wi.D-a06N_R.js","_astro/styles-C3H3yhVT.DXoQsb_B.js","_astro/LinkPasskeyScreen-jzRj6Yq0.CHUIblrj.js","_astro/TodoList-CgrU7uwu.CdzoNajJ.js","_astro/circle-check-big.BEG3gtjL.js","_astro/fingerprint-pattern.Bk_3pvPW.js","_astro/formatters.DtIZsRmK.js","_astro/custom.BLgW5Lf4.js","_astro/AwaitingExternalEthereumTransferScreen-B8RwfC4k.BnfOO-HA.js","_astro/transfer-6YztDh-t.DU6hH7CZ.js","_astro/parseEther.DWtwDPWT.js","_astro/AwaitingPasswordlessCodeScreen-DiwMdkl1.DRqqhR2L.js","_astro/EnvelopeIcon.INHBpgwr.js","_astro/PhoneIcon.BLDp5Qmc.js","_astro/AwaitingSolToEvmBridgingScreen-DDjqJpxK.BRdj_dbw.js","_astro/CaptchaScreen-DRpV5XFL.XE8FiBbt.js","_astro/circle-x.BeJGwV2A.js","_astro/CoinbaseOnrampStatusScreen-B5SpiCFR.99ZZdimH.js","_astro/ArrowsRightLeftIcon.DgWWyAqp.js","_astro/CheckCircleIcon.BfpESmB8.js","_astro/ConnectLedgerScreen-D54DrxnP.BgyMxybD.js","_astro/ConnectOnlyLandingScreen-Cm10LiWd.jAhfnwNY.js","_astro/ConnectOnlyStatusScreen-Bz7rafsR.hHqyraWG.js","_astro/ConnectionStatusScreen-_g1A1Dg2.C78MTtz7.js","_astro/ConnectOrCreateScreen-aeQK2RJ_.D7dNVQnA.js","_astro/CustomLandingScreenView-Dt4TEi0A.CycrgX-5.js","_astro/ConnectEmailForm-CUfcb4US.pf6l6H81.js","_astro/mail.CyTFkYLK.js","_astro/farcaster-DPlSjvF5.B5S7jE9M.js","_astro/FingerPrintIcon.f1l06IJ0.js","_astro/ConnectPhoneForm-DMcfvHG9.B7vcsMKV.js","_astro/twitch-5IOe4sIQ.ClcMtDaS.js","_astro/telegram-B-JqnkqZ.qaLatBqp.js","_astro/WalletOverflowButton-C0Ysaik4.Dd1V1Kvv.js","_astro/CrossAppAuthScreen-4oQDzYzy.SFf_FSJQ.js","_astro/DelegatedActionsConsentScreen-Cj9bU7Q1.D7at-FDY.js","_astro/WalletInfoCard-TfOxho0A.gLlbiR7I.js","_astro/LabelXs-oqZNqbm_.5zQfQihM.js","_astro/circle-alert.CDkelVMx.js","_astro/DelegatedActionsRevokeScreen-DGFRARuM.D5ISrtkz.js","_astro/EmbeddedWalletConnectingScreen-Cmt8I8TX.DmV-20w5.js","_astro/EmbeddedWalletCreatedScreen-Dj_JuLO5.uu6aD4-j.js","_astro/EmbeddedWalletKeyExportScreen-sjrAvCm3.Bc7_6dkw.js","_astro/WarningBanner-c8L53pJ2.BDeOScMT.js","_astro/ExclamationTriangleIcon.CbWlQoeb.js","_astro/EmbeddedWalletOnAccountCreateScreen-BOS_pyDI.Ciy5F2No.js","_astro/RecoveryPasswordCreateScreen-BDCDfQzo.CVpMFU5C.js","_astro/SetWalletPasswordForm-lzuYpBex.Bg3CM1rE.js","_astro/shared-CQ6jg1BO.YFvMzRPg.js","_astro/Checkbox-BhNoOKjX.CsfsqpBs.js","_astro/EmbeddedWalletPasswordUpdateScreen-DulDjFpp.BUaMyKWa.js","_astro/EmbeddedWalletPasswordUpdateSplashScreen-BkwyRHPS.HQSNhpNI.js","_astro/ErrorScreen-8UMMZ6is.0ylxDhjt.js","_astro/FarcasterConnectStatusScreen-BLgCDUxR.-I9FGFii.js","_astro/OpenLink-DZHy38vr.DdWAbGIl.js","_astro/FarcasterSignerStatusScreen-RHH68QtJ.Cy3v-_GQ.js","_astro/CopyToClipboard-BGTSFnT3.DJJyG0Dp.js","_astro/FundSolWalletWithExternalSolanaWallet-DVgX3EaM.Dorqnwmk.js","_astro/useSolanaRpcClient-BTAchFxj.8tytr2RI.js","_astro/getUsdcMintAddress-DFI1hv05.C_5bLXgZ.js","_astro/FundingEditAmountScreen-D10JPLdP.DOrY_BUw.js","_astro/FundingMethodSelectionScreen-BuWGEgge.BwSqBp1C.js","_astro/ErrorBanner-CQERa7bL.BqgviVhf.js","_astro/ExclamationCircleIcon.CBeQh4pz.js","_astro/InfoBanner-Dk1KghcK.CXxN86kr.js","_astro/getErc20TokenInfo-CZJTqd4c.BNXWnBuE.js","_astro/index-BXKPenEy.D71qkSib.js","_astro/InAppBrowserLoginNotPossible-TigdvlfS.Blpqrll8.js","_astro/InstallWalletScreen-DgyXxk_4.DnKFcQmI.js","_astro/LandingScreen-C6rQCvI5.RfAY_Ffe.js","_astro/LinkConflictScreen-DOsLOvpT.lTIFXDt2.js","_astro/StackedContainer-B2vaEl56.CD0ocOGA.js","_astro/capitalizeFirstLetter-DmLYqXsO.tV1Idewc.js","_astro/LinkEmailScreen-C7CpFuoA.D4N0j1DF.js","_astro/LinkPhoneScreen-BKHv_Kdp.BhONwHHP.js","_astro/LoginFailedScreen-CJgWFc1S.BLQ-fg8Z.js","_astro/ManualTransferScreen-CFNzuajf.DY5eIa5_.js","_astro/useWalletBalance-BDrbQBDX.DKgA2yGD.js","_astro/MfaAuthEnrollmentFlowScreen-DflCQFD5.bAazBxIf.js","_astro/ShieldCheckIcon.C49qVTY6.js","_astro/EnrollTotp-DlnMoeNk.CNEqpKfh.js","_astro/PinInput-3SLvbnQa.DL2jOvCl.js","_astro/MfaAuthVerifyFlowScreen-D0KWDrSF.84QNjuuW.js","_astro/to-ui-error-fYkDcQhz.asSa8VyB.js","_astro/TransactionDetails-BMVu0qlz.59B78Oj6.js","_astro/WalletLink-CZTmkBKu.CwUyBa3G.js","_astro/MfaEnrollmentFlowScreen-B5CTxsyW.BLpn8eY8.js","_astro/MoonpayStatusScreen-BgCvITlM.CltIns2G.js","_astro/OAuthStatusScreen-B9LjQopq.CVXorDsl.js","_astro/PasskeySelectSignupOrLogin-BH-9DnYX.DDYhH64e.js","_astro/PasskeyStatusScreen-B0BMf34N.CP3bInbR.js","_astro/PasswordRecoveryScreen-BGO3xmU6.B51G-lUd.js","_astro/RecoveryOAuthStatusScreen-9ngTLe_q.BUUyQN7x.js","_astro/styles-BsotlekN.C9CSHUEw.js","_astro/RecoverySelectionScreen-0YIfrkiv.DG6jl9qc.js","_astro/LockClosedIcon.BdsZvISU.js","_astro/index-tsoVOGEt.CXpcfCu1.js","_astro/JsonTree-aPaJmPx7.BOS6sB7r.js","_astro/TransactionErrorView-C6AZ1RC0.CHEYFltS.js","_astro/SetAutomaticRecoveryScreen-BAAv--Sk.CKJrcK1f.js","_astro/SignRequestScreen-YrG-iwWX.Bp6FauCx.js","_astro/StandardSignAndSendTransactionScreen-Csw3bRQ4.Dhnzo6AG.js","_astro/TelegramAuthScreen-CXnXpJTY.DB-lyc67.js","_astro/TransferFromWalletScreen-BOOq-OqM.D9HlWRWP.js","_astro/UpdateEmailScreen-B4u7SqtR.BzG09OkW.js","_astro/UpdatePhoneScreen-Dz75pT5l.DNZnLdA6.js","_astro/UserLimitReachedScreen-BEQAxJvA.DiD2LhiO.js","_astro/WalletInterstitialScreen-jHLFeLvC.BHihHPQh.js","_astro/MfaVerifyFlowScreen-Bds0d6wr.CQ6flJpr.js"])))=>i.map(i=>d[i]);
import{r as T,g as Jc,t as Te,a as e3,b as RB,c as iA,d as t3,e as Oi}from"./index.Crn7-fJZ.js";var m0={exports:{}},od={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function $B(){if(aA)return od;aA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,i){var a=null;if(i!==void 0&&(a=""+i),s.key!==void 0&&(a=""+s.key),"key"in s){i={};for(var o in s)o!=="key"&&(i[o]=s[o])}else i=s;return s=i.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:i}}return od.Fragment=e,od.jsx=n,od.jsxs=n,od}var oA;function NB(){return oA||(oA=1,m0.exports=$B()),m0.exports}var R=NB();function n3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=n3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=n3(t))&&(r&&(r+=" "),r+=e);return r}const DB="_notice_umrbb_1",UB="_viz_umrbb_31",BB="_err_umrbb_38",MB="_warn_umrbb_39",LB="_alert_umrbb_46",FB="_ok_umrbb_53",jB="_custom_umrbb_26",Ko={notice:DB,viz:UB,err:BB,warn:MB,alert:LB,ok:FB,custom:jB},hs=T.createContext({notify:(t,e)=>{},close:()=>{}});function zB({children:t}){const[e,n]=T.useState(!1),[r,s]=T.useState(""),[i,a]=T.useState(""),o=T.useRef(null),c=(d,h)=>{!d||typeof d!="string"||d.trim()!=""&&((!h||typeof h!="string")&&(h=""),["err","ok","success","alert","warn"].includes(h)||(h=""),o&&o.current&&clearTimeout(o.current),o.current=window.setTimeout(l,7e3),n(!0),s(d),a(h))},l=()=>{n(!1),o&&o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(u,7e3)},u=()=>{o&&o.current&&window.clearTimeout(o.current),s(""),a("")};return R.jsxs(R.Fragment,{children:[R.jsx(hs.Provider,{value:{notify:c,close:l},children:t}),R.jsx("div",{className:uf(Ko.notice,(i==="ok"||i==="success")&&Ko.ok,i==="err"&&Ko.err,i==="warn"&&Ko.warn,i==="alert"&&Ko.alert,e&&Ko.viz,typeof r=="object"&&Ko.custom),onClick:l,children:r})]})}const di=T.createContext(!1);function WB({children:t}){const[e,n]=T.useState(!0),{notify:r}=T.useContext(hs);return T.useEffect(()=>{n(window.navigator.onLine);function s(){n(!0),r("You are back online!","ok")}function i(){n(!1),r("You are offline! Please check network connection","err")}return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]),R.jsx(di.Provider,{value:e,children:t})}const qB="modulepreload",VB=function(t){return"/"+t},cA={},xe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=a(n.map(l=>{if(l=VB(l),l in cA)return;cA[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":qB,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},HB={path:"/api/v1/analytics_events",method:"POST"},KB={path:"/api/v1/apps/:app_id",method:"GET"},GB={path:"/api/v1/funding/coinbase_on_ramp/init",method:"POST"},YB={path:"/api/v1/funding/coinbase_on_ramp/status",method:"GET"},ZB={path:"/api/v1/apps/:app_id/cross-app/connections",method:"GET"},JB={path:"/api/v1/custom_jwt_account/authenticate",method:"POST"},XB={path:"/api/v1/custom_jwt_account/link",method:"POST"},QB={path:"/api/v1/farcaster/init",method:"POST"},eM={path:"/api/v1/farcaster/authenticate",method:"POST"},tM={path:"/api/v1/farcaster/link",method:"POST"},nM={path:"/api/v1/farcaster/unlink",method:"POST"},rM={path:"/api/v1/farcaster/status",method:"GET"},sM={path:"/api/v2/farcaster/init",method:"POST"},iM={path:"/api/v2/farcaster/authenticate",method:"POST"},aM={path:"/api/v1/guest/authenticate",method:"POST"},oM={path:"/api/v1/mfa/passkeys/init",method:"POST"},cM={path:"/api/v1/mfa/passwordless_sms/init",method:"POST"},lM={path:"/api/v1/oauth/authenticate",method:"POST"},uM={path:"/api/v1/oauth/init",method:"POST"},dM={path:"/api/v1/oauth/link",method:"POST"},hM={path:"/api/v1/oauth/unlink",method:"POST"},fM={path:"/api/v1/passkeys/link",method:"POST"},pM={path:"/api/v1/passkeys/authenticate",method:"POST"},mM={path:"/api/v1/passkeys/register",method:"POST"},gM={path:"/api/v1/passkeys/authenticate/init",method:"POST"},yM={path:"/api/v1/passkeys/register/init",method:"POST"},wM={path:"/api/v1/passkeys/link/init",method:"POST"},bM={path:"/api/v1/passwordless/authenticate",method:"POST"},vM={path:"/api/v1/passwordless/init",method:"POST"},_M={path:"/api/v1/passwordless/link",method:"POST"},EM={path:"/api/v1/passwordless/unlink",method:"POST"},xM={path:"/api/v1/passwordless/update",method:"POST"},AM={path:"/api/v1/passwordless_sms/authenticate",method:"POST"},SM={path:"/api/v1/passwordless_sms/init",method:"POST"},IM={path:"/api/v1/passwordless_sms/link",method:"POST"},TM={path:"/api/v1/passwordless_sms/unlink",method:"POST"},CM={path:"/api/v1/passwordless_sms/update",method:"POST"},kM={path:"/api/v1/embedded_wallets/:address/recovery/key_material",method:"POST"},OM={path:"/api/v1/recovery/oauth/init",method:"POST"},PM={path:"/api/v1/recovery/oauth/authenticate",method:"POST"},RM={path:"/api/v1/recovery/oauth/init_icloud",method:"POST"},$M={path:"/api/v1/recovery/configuration_icloud",method:"POST"},NM=(t,e)=>e?Object.entries(e).reduce(((n,[r,s])=>n.replace(`:${r}`,`${s}`)),t):t,lA={path:"/api/v1/sessions",method:"POST"},DM={path:"/api/v1/sessions/logout",method:"POST"},UM={path:"/api/v1/apps/:app_id/smart_wallets",method:"GET"},r3={path:"/api/v1/siwe/init",method:"POST"},BM={path:"/api/v1/siwe/authenticate",method:"POST"},MM={path:"/api/v1/siwe/link",method:"POST"},LM={path:"/api/v1/siwe/link_smart_wallet",method:"POST"},FM={path:"/api/v1/siwe/unlink",method:"POST"},jM={path:"/api/v1/siws/init",method:"POST"},zM={path:"/api/v1/siws/authenticate",method:"POST"},WM={path:"/api/v1/siws/link",method:"POST"},qM={path:"/api/v1/siws/unlink",method:"POST"},VM={path:"/api/v1/users/me/accept_terms",method:"POST"},HM={path:"/api/v1/plugins/moonpay_on_ramp/sign",method:"POST"},KM={path:"/api/v1/wallets",method:"POST"},g0={path:"/api/v1/wallets/:wallet_id/rpc",method:"POST"},GM={path:"/api/v1/wallets/revoke",method:"POST"};let YM=class{getConfig(){return this._privyInternal.config}async getSmartWalletConfig(){return this._smartWalletConfig||(this._smartWalletConfig=await this._privyInternal.fetch(UM,{params:{app_id:this.appId}})),this._smartWalletConfig}get appId(){return this._privyInternal.appId}constructor(e){this._privyInternal=e}};const ZM=new TextEncoder,s3=new TextDecoder,JM=t=>{let e=t;typeof e=="string"&&(e=ZM.encode(e));const n=32768,r=[];for(let s=0;s<e.length;s+=n)r.push(String.fromCharCode.apply(null,e.subarray(s,s+n)));return btoa(r.join(""))},XM=t=>JM(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),QM=t=>{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},eL=t=>{let e=t;e instanceof Uint8Array&&(e=s3.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return QM(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class tL extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var n;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)===null||n===void 0||n.call(Error,this,this.constructor)}}class Go extends tL{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}function nL(t){return typeof t=="object"&&t!==null}function rL(t){if(!nL(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const Cc=XM,sL=eL;function uv(t){if(typeof t!="string")throw new Go("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:n}=t.split(".");if(n===5)throw new Go("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Go("Invalid JWT");if(!e)throw new Go("JWTs must contain a payload");let r;try{r=sL(e)}catch{throw new Go("Failed to base64url decode the payload")}let s;try{s=JSON.parse(s3.decode(r))}catch{throw new Go("Failed to parse the decoded payload as JSON")}if(!rL(s))throw new Go("Invalid JWT Claims Set");return s}let Dl=class i3{static parse(e){try{return new i3(e)}catch{return null}}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=uv(e)}},a3=class dv{async updateOnCrossAppAuthentication(e,n){let r=n.access_token,s=dv.providerAccessTokenStorageKey(e);await this._storage.put(s,r)}async getProviderAccessToken(e){let n=dv.providerAccessTokenStorageKey(e),r=await this._storage.get(n);if(typeof r!="string")return null;try{if(new Dl(r).isExpired())throw Error("JWT is expired");return r}catch{return await this._storage.del(n),null}}async getCrossAppConnections(){return await this._privyInternal.fetch(ZB,{params:{app_id:this._privyInternal.appId}})}constructor(e,n){this._privyInternal=e,this._storage=n}};a3.providerAccessTokenStorageKey=t=>`privy:cross-app:${t}`;let iL=class{async revoke(){await this._privyInternal.fetch(GM,{})}constructor(e){this._privyInternal=e}};function aL(t,e){return{...t,rpcUrls:{...t.rpcUrls,privy:{http:[e]}}}}const df={id:42161,name:"Arbitrum One",network:"arbitrum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-mainnet.rpc.privy.systems"]},alchemy:{http:["https://arb-mainnet.g.alchemy.com/v2"],webSocket:["wss://arb-mainnet.g.alchemy.com/v2"]},infura:{http:["https://arbitrum-mainnet.infura.io/v3"],webSocket:["wss://arbitrum-mainnet.infura.io/ws/v3"]},default:{http:["https://arb1.arbitrum.io/rpc"]},public:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://arbiscan.io"},default:{name:"Arbiscan",url:"https://arbiscan.io"}}},o3={id:421614,name:"Arbitrum Sepolia",network:"arbitrum-sepolia",nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://arbitrum-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]},public:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Blockscout",url:"https://sepolia-explorer.arbitrum.io"}},testnet:!0},hf={id:43114,name:"Avalanche",network:"avalanche",nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]},public:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://snowtrace.io"},default:{name:"SnowTrace",url:"https://snowtrace.io"}}},c3={id:43113,name:"Avalanche Fuji",network:"avalanche-fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]},public:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{etherscan:{name:"SnowTrace",url:"https://testnet.snowtrace.io"},default:{name:"SnowTrace",url:"https://testnet.snowtrace.io"}},testnet:!0},ff={id:8453,network:"base",name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-mainnet.rpc.privy.systems"]},default:{http:["https://mainnet.base.org"]},public:{http:["https://mainnet.base.org"]}},blockExplorers:{etherscan:{name:"Basescan",url:"https://basescan.org"},default:{name:"Basescan",url:"https://basescan.org"}}},l3={id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://base-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.base.org"]},public:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia.blockscout.com"}},testnet:!0},oL={id:80085,network:"berachain-artio",name:"Berachain Artio",nativeCurrency:{name:"BERA",symbol:"BERA",decimals:18},rpcUrls:{default:{http:["https://berachain-artio.rpc.privy.systems"]},public:{http:["https://berachain-artio.rpc.privy.systems"]}},blockExplorers:{default:{name:"Beratrail",url:"https://artio.beratrail.io"}},testnet:!0},cL={id:56,network:"bsc",name:"Binance Smart Chain",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{privy:{http:["https://bsc-mainnet.rpc.privy.systems"]},default:{http:["https://56.rpc.thirdweb.com"]},public:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{etherscan:{name:"BscScan",url:"https://bscscan.com"},default:{name:"BscScan",url:"https://bscscan.com"}}},sE={id:42220,name:"Celo Mainnet",network:"celo",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://forno.celo.org"]},infura:{http:["https://celo-mainnet.infura.io/v3"]},public:{http:["https://forno.celo.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/mainnet"},etherscan:{name:"CeloScan",url:"https://celoscan.io"}},testnet:!1},lL={id:44787,name:"Celo Alfajores Testnet",network:"celo-alfajores",nativeCurrency:{decimals:18,name:"CELO",symbol:"CELO"},rpcUrls:{default:{http:["https://alfajores-forno.celo-testnet.org"]},infura:{http:["https://celo-alfajores.infura.io/v3"]},public:{http:["https://alfajores-forno.celo-testnet.org"]}},blockExplorers:{default:{name:"Celo Explorer",url:"https://explorer.celo.org/alfajores"},etherscan:{name:"CeloScan",url:"https://alfajores.celoscan.io/"}},testnet:!0},uL={id:314,name:"Filecoin - Mainnet",network:"filecoin-mainnet",nativeCurrency:{decimals:18,name:"filecoin",symbol:"FIL"},rpcUrls:{default:{http:["https://api.node.glif.io/rpc/v1"]},public:{http:["https://api.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filfox",url:"https://filfox.info/en"},filscan:{name:"Filscan",url:"https://filscan.io"},filscout:{name:"Filscout",url:"https://filscout.io/en"},glif:{name:"Glif",url:"https://explorer.glif.io"}}},dL={id:314159,name:"Filecoin - Calibration testnet",network:"filecoin-calibration",nativeCurrency:{decimals:18,name:"testnet filecoin",symbol:"tFIL"},rpcUrls:{default:{http:["https://api.calibration.node.glif.io/rpc/v1"]},public:{http:["https://api.calibration.node.glif.io/rpc/v1"]}},blockExplorers:{default:{name:"Filscan",url:"https://calibration.filscan.io"}}},hL={id:17069,name:"Garnet Holesky",network:"garnet-holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"]},public:{http:["https://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}}},fL={id:17e3,name:"Holesky",network:"holesky",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://ethereum-holesky.publicnode.com"]},public:{http:["https://ethereum-holesky.publicnode.com"]}},blockExplorers:{etherscan:{name:"EtherScan",url:"https://holesky.etherscan.io"},default:{name:"EtherScan",url:"https://holesky.etherscan.io"}}},pL={id:59144,network:"linea-mainnet",name:"Linea Mainnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]},public:{http:["https://rpc.linea.build"],webSocket:["wss://rpc.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://lineascan.build"},etherscan:{name:"Etherscan",url:"https://lineascan.build"}},testnet:!1},mL={id:59140,network:"linea-testnet",name:"Linea Goerli Testnet",nativeCurrency:{name:"Linea Ether",symbol:"ETH",decimals:18},rpcUrls:{infura:{http:["https://linea-goerli.infura.io/v3"],webSocket:["wss://linea-goerli.infura.io/ws/v3"]},default:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]},public:{http:["https://rpc.goerli.linea.build"],webSocket:["wss://rpc.goerli.linea.build"]}},blockExplorers:{default:{name:"Etherscan",url:"https://goerli.lineascan.build"},etherscan:{name:"Etherscan",url:"https://goerli.lineascan.build"}},testnet:!0},gL={id:42,network:"lukso",name:"LUKSO",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.lukso.network"],webSocket:["wss://ws-rpc.mainnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Mainnet Explorer",url:"https://explorer.execution.mainnet.lukso.network"}}},Wu={id:1,network:"homestead",name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://mainnet.rpc.privy.systems"]},alchemy:{http:["https://eth-mainnet.g.alchemy.com/v2"],webSocket:["wss://eth-mainnet.g.alchemy.com/v2"]},infura:{http:["https://mainnet.infura.io/v3"],webSocket:["wss://mainnet.infura.io/ws/v3"]},default:{http:["https://cloudflare-eth.com"]},public:{http:["https://cloudflare-eth.com"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://etherscan.io"},default:{name:"Etherscan",url:"https://etherscan.io"}}},iE={id:10,name:"OP Mainnet",network:"optimism",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-mainnet.rpc.privy.systems"]},alchemy:{http:["https://opt-mainnet.g.alchemy.com/v2"],webSocket:["wss://opt-mainnet.g.alchemy.com/v2"]},infura:{http:["https://optimism-mainnet.infura.io/v3"],webSocket:["wss://optimism-mainnet.infura.io/ws/v3"]},default:{http:["https://mainnet.optimism.io"]},public:{http:["https://mainnet.optimism.io"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://optimistic.etherscan.io"},default:{name:"Optimism Explorer",url:"https://explorer.optimism.io"}}},u3={id:11155420,name:"Optimism Sepolia",network:"optimism-sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{privy:{http:["https://optimism-sepolia.rpc.privy.systems"]},default:{http:["https://sepolia.optimism.io"]},public:{http:["https://sepolia.optimism.io"]},infura:{http:["https://optimism-sepolia.infura.io/v3"]}},blockExplorers:{default:{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com"}},testnet:!0},pf={id:137,name:"Polygon Mainnet",network:"polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-mainnet.rpc.privy.systems"]},alchemy:{http:["https://polygon-mainnet.g.alchemy.com/v2"],webSocket:["wss://polygon-mainnet.g.alchemy.com/v2"]},infura:{http:["https://polygon-mainnet.infura.io/v3"],webSocket:["wss://polygon-mainnet.infura.io/ws/v3"]},default:{http:["https://polygon-rpc.com"]},public:{http:["https://polygon-rpc.com"]}},blockExplorers:{etherscan:{name:"PolygonScan",url:"https://polygonscan.com"},default:{name:"PolygonScan",url:"https://polygonscan.com"}}},d3={id:80002,name:"Polygon Amoy",network:"polygon-amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{privy:{http:["https://polygon-amoy.rpc.privy.systems"]},infura:{http:["https://polygon-amoy.infura.io/v3"],webSocket:["wss://polygon-amoy.infura.io/ws/v3"]},default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"OK LINK",url:"https://www.oklink.com/amoy"}},testnet:!0},yL={id:690,name:"Redstone",network:"redstone",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.redstonechain.com"]},public:{http:["https://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz/"}}},h3={id:11155111,network:"sepolia",name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"SEP",decimals:18},rpcUrls:{privy:{http:["https://sepolia.rpc.privy.systems"]},alchemy:{http:["https://eth-sepolia.g.alchemy.com/v2"],webSocket:["wss://eth-sepolia.g.alchemy.com/v2"]},infura:{http:["https://sepolia.infura.io/v3"],webSocket:["wss://sepolia.infura.io/ws/v3"]},default:{http:["https://rpc.sepolia.org"]},public:{http:["https://rpc.sepolia.org"]}},blockExplorers:{etherscan:{name:"Etherscan",url:"https://sepolia.etherscan.io"},default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}},testnet:!0},wL={id:7777777,name:"Zora",network:"zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]},public:{http:["https://rpc.zora.energy"],webSocket:["wss://rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.zora.energy"}}},bL={id:999999999,name:"Zora Sepolia",network:"zora-sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},rpcUrls:{default:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]},public:{http:["https://sepolia.rpc.zora.energy"],webSocket:["wss://sepolia.rpc.zora.energy"]}},blockExplorers:{default:{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/"}},testnet:!0},vL={id:999,name:"Zora Goerli Testnet",network:"zora-testnet",nativeCurrency:{decimals:18,name:"Zora Goerli",symbol:"ETH"},rpcUrls:{default:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]},public:{http:["https://testnet.rpc.zora.energy"],webSocket:["wss://testnet.rpc.zora.energy"]}},blockExplorers:{default:{name:"Explorer",url:"https://testnet.explorer.zora.energy"}},testnet:!0},Wg=[Wu,h3,fL,df,o3,iE,u3,pf,d3,sE,lL,uL,dL,ff,l3,oL,cL,gL,pL,mL,hf,c3,wL,vL,bL,yL,hL],_L=new Set(Wg.map((t=>t.id))),f3=t=>t.map((e=>{if(e.rpcUrls.privyWalletOverride)return e;let n=Wg.find((s=>s.id===e.id)),r=n?.rpcUrls.privy?.http[0];return r?aL(e,r):e}));let y0=class extends Error{constructor({error:e,code:n}){super(e),this.error=e,this.code=n}},wt=class extends Error{constructor({error:e,code:n}){super(e),this.code=n,this.error=e}},EL=class extends Error{constructor({error:e,code:n,response:r}){super(e),this.code=n,this.error=e,this.response=r}};const wo=t=>!!t.id&&t.recovery_method==="privy-v2";let xL=class{async sign({message:e}){return await this.request({method:"sign",params:{message:new TextDecoder("utf8").decode(e)}})}async signTransaction({psbt:e}){return await this.request({method:"signTransaction",params:{psbt:e}})}async request(e){if(wo(this._account))throw new wt({code:"unsupported_wallet_type",error:"Bitcoin wallet providers are only supported for on-device execution and this app uses TEE execution. Use the useSignRawHash hook from @privy-io/expo/extended-chains to sign over a hash with this wallet. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide"});if(!await this._privyInternal.getAccessTokenInternal())throw new wt({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return this.handleIFrameRpc(e)}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing access token. User must be authenticated.");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),(await this._proxy.rpcWallet({accessToken:n,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:this._account.chain_type})).response.data}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new wt({code:"embedded_wallet_request_error",error:r})}}toJSON(){return`PrivyEmbeddedBitcoinProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i}){this._proxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i}};const AL=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","mfa_timeout","missing_or_invalid_mfa","mfa_verification_max_attempts_reached"];var Cr;(Cr={}).MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Cr.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Cr.INVALID_DATA="invalid_data",Cr.LINKED_TO_ANOTHER_USER="linked_to_another_user",Cr.ALLOWLIST_REJECTED="allowlist_rejected",Cr.OAUTH_USER_DENIED="oauth_user_denied",Cr.UNKNOWN_AUTH_ERROR="unknown_auth_error",Cr.USER_EXITED_AUTH_FLOW="exited_auth_flow",Cr.MUST_BE_AUTHENTICATED="must_be_authenticated",Cr.UNKNOWN_CONNECT_WALLET_ERROR="unknown_connect_wallet_error",Cr.GENERIC_CONNECT_WALLET_ERROR="generic_connect_wallet_error",Cr.CLIENT_REQUEST_TIMEOUT="client_request_timeout",Cr.INVALID_CREDENTIALS="invalid_credentials";let SL=class extends Error{toString(){return`${this.type}${this.privyErrorCode?`-${this.privyErrorCode}`:""}: ${this.message}${this.cause?` [cause: ${this.cause}]`:""}`}constructor(e,n,r){super(e),n instanceof Error&&(this.cause=n),this.privyErrorCode=r}},nm=class extends Error{constructor(e,n){super(n),this.type=e}},p3=class extends SL{constructor(e,n,r){super(e,n,r),this.type="connector_error"}},uA=class extends Error{constructor(e,n,r){super(e),this.code=n,this.data=r}};const Ul={UNKNOWN_ERROR:{eipCode:0,message:"Unknown error",detail:"Unknown error",retryable:!0},E4001_DEFAULT_USER_REJECTED_REQUEST:{eipCode:4001,message:"User Rejected Request",detail:"The user rejected the request.",default:!0,retryable:!0},E4100_DEFAULT_UNAUTHORIZED:{eipCode:4100,message:"Unauthorized",detail:"The requested method and/or account has not been authorized by the user.",default:!0,retryable:!1},E4200_DEFAULT_UNSUPPORTED_METHOD:{eipCode:4200,message:"Unsupported Method",detail:"The Provider does not support the requested method.",default:!0,retryable:!1},E4900_DEFAULT_DISCONNECTED:{eipCode:4900,message:"Disconnected",detail:"The Provider is disconnected from all chains.",default:!0,retryable:!0},E4901_DEFAULT_CHAIN_DISCONNECTED:{eipCode:4901,message:"Chain Disconnected",detail:"The Provider is not connected to the requested chain.",default:!0,retryable:!0},E32700_DEFAULT_PARSE_ERROR:{eipCode:-32700,message:"Parse error",detail:"Invalid JSON",default:!0,retryable:!1},E32600_DEFAULT_INVALID_REQUEST:{eipCode:-32600,message:"Invalid request",detail:"JSON is not a valid request object",default:!0,retryable:!1},E32601_DEFAULT_METHOD_NOT_FOUND:{eipCode:-32601,message:"Method not found",detail:"Method does not exist",default:!0,retryable:!1},E32602_DEFAULT_INVALID_PARAMS:{eipCode:-32602,message:"Invalid params",detail:"Invalid method parameters",default:!0,retryable:!1},E32603_DEFAULT_INTERNAL_ERROR:{eipCode:-32603,message:"Internal error",detail:"Internal JSON-RPC error",default:!0,retryable:!0},E32000_DEFAULT_INVALID_INPUT:{eipCode:-32e3,message:"Invalid input",detail:"Missing or invalid parameters",default:!0,retryable:!1},E32001_DEFAULT_RESOURCE_NOT_FOUND:{eipCode:-32001,message:"Resource not found",detail:"Requested resource not found",default:!0,retryable:!1},E32002_DEFAULT_RESOURCE_UNAVAILABLE:{eipCode:-32002,message:"Resource unavailable",detail:"Requested resource not available",default:!0,retryable:!0},E32003_DEFAULT_TRANSACTION_REJECTED:{eipCode:-32003,message:"Transaction rejected",detail:"Transaction creation failed",default:!0,retryable:!0},E32004_DEFAULT_METHOD_NOT_SUPPORTED:{eipCode:-32004,message:"Method not supported",detail:"Method is not implemented",default:!0,retryable:!1},E32005_DEFAULT_LIMIT_EXCEEDED:{eipCode:-32005,message:"Limit exceeded",detail:"Request exceeds defined limit",default:!0,retryable:!1},E32006_DEFAULT_JSON_RPC_VERSION_NOT_SUPPORTED:{eipCode:-32006,message:"JSON-RPC version not supported",detail:"Version of JSON-RPC protocol is not supported",default:!0,retryable:!1},E32002_CONNECTION_ALREADY_PENDING:{eipCode:-32002,message:"Connection request already pending",detail:"Don’t see your wallet? Check your other browser windows.",retryable:!1},E32002_REQUEST_ALREADY_PENDING:{eipCode:-32002,message:"Resource request already pending",detail:"Don’t see your wallet? Check your other browser windows.",retryable:!1},E32002_WALLET_LOCKED:{eipCode:-32002,message:"Wallet might be locked",detail:"Don’t see your wallet? Check your other browser windows.",retryable:!1},E4001_USER_REJECTED_REQUEST:{eipCode:4001,message:"Signature rejected",detail:"Please try signing again.",retryable:!0}};function IL(t){let e=t.type;return typeof e=="string"&&AL.includes(e)}function aE(t){return IL(t)&&t.type==="wallet_not_on_device"}async function hv(t,{request:e,headers:n}){return await t.fetchPrivyRoute(KM,{body:e,headers:n})}async function w0({context:t,chainType:e,idempotencyKey:n}){return{wallet:await hv(t,{request:{chain_type:e,owner_id:void 0},headers:n?{"privy-idempotency-key":n}:void 0})}}const TL="1.2.3";let Wr=class fv extends Error{constructor(e,n={}){const r=n.cause instanceof fv?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof fv&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${TL}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function za(t,e){return t.exec(e)?.groups}const m3=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,g3=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,y3=/^\(.+?\).*?$/,dA=/^tuple(?<array>(\[(\d*)\])*)$/;function pv(t){let e=t.type;if(dA.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=pv(i),s<n-1&&(e+=", ")}const r=za(dA,t.type);return e+=`)${r?.array||""}`,pv({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Bl(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=pv(s),r!==n-1&&(e+=", ")}return e}function Cm(t){return t.type==="function"?`function ${t.name}(${Bl(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${Bl(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Bl(t.inputs)})`:t.type==="error"?`error ${t.name}(${Bl(t.inputs)})`:t.type==="constructor"?`constructor(${Bl(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const w3=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function CL(t){return w3.test(t)}function kL(t){return za(w3,t)}const b3=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function OL(t){return b3.test(t)}function PL(t){return za(b3,t)}const v3=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function RL(t){return v3.test(t)}function $L(t){return za(v3,t)}const _3=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function qg(t){return _3.test(t)}function NL(t){return za(_3,t)}const E3=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function DL(t){return E3.test(t)}function UL(t){return za(E3,t)}const x3=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function BL(t){return x3.test(t)}function ML(t){return za(x3,t)}const LL=/^receive\(\) external payable$/;function FL(t){return LL.test(t)}const hA=new Set(["memory","indexed","storage","calldata"]),jL=new Set(["indexed"]),mv=new Set(["calldata","memory","storage"]);class zL extends Wr{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class WL extends Wr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class qL extends Wr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class VL extends Wr{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class HL extends Wr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class KL extends Wr{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class GL extends Wr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class YL extends Wr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ZL extends Wr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class qu extends Wr{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class JL extends Wr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class XL extends Wr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class QL extends Wr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class e7 extends Wr{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function t7(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const a of s[1])i+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:`${t}${r}`}const b0=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function gv(t,e={}){if(RL(t))return n7(t,e);if(OL(t))return r7(t,e);if(CL(t))return s7(t,e);if(DL(t))return i7(t,e);if(BL(t))return a7(t);if(FL(t))return{type:"receive",stateMutability:"payable"};throw new JL({signature:t})}function n7(t,e={}){const n=$L(t);if(!n)throw new qu({signature:t,type:"function"});const r=as(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push($a(r[o],{modifiers:mv,structs:e,type:"function"}));const a=[];if(n.returns){const o=as(n.returns),c=o.length;for(let l=0;l<c;l++)a.push($a(o[l],{modifiers:mv,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}function r7(t,e={}){const n=PL(t);if(!n)throw new qu({signature:t,type:"event"});const r=as(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push($a(r[a],{modifiers:jL,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function s7(t,e={}){const n=kL(t);if(!n)throw new qu({signature:t,type:"error"});const r=as(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push($a(r[a],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function i7(t,e={}){const n=UL(t);if(!n)throw new qu({signature:t,type:"constructor"});const r=as(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push($a(r[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function a7(t){const e=ML(t);if(!e)throw new qu({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const o7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,c7=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,l7=/^u?int$/;function $a(t,e){const n=t7(t,e?.type,e?.structs);if(b0.has(n))return b0.get(n);const r=y3.test(t),s=za(r?c7:o7,t);if(!s)throw new HL({param:t});if(s.name&&d7(s.name))throw new KL({param:t,name:s.name});const i=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},o=e?.structs??{};let c,l={};if(r){c="tuple";const d=as(s.type),h=[],f=d.length;for(let p=0;p<f;p++)h.push($a(d[p],{structs:o}));l={components:h}}else if(s.type in o)c="tuple",l={components:o[s.type]};else if(l7.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,e?.type!=="struct"&&!A3(c))throw new qL({type:c});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new GL({param:t,type:e?.type,modifier:s.modifier});if(mv.has(s.modifier)&&!h7(c,!!s.array))throw new YL({param:t,type:e?.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...a,...l};return b0.set(n,u),u}function as(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const a=t[i],o=t.slice(i+1);switch(a){case",":return r===0?as(o,[...e,n.trim()]):as(o,e,`${n}${a}`,r);case"(":return as(o,e,`${n}${a}`,r+1);case")":return as(o,e,`${n}${a}`,r-1);default:return as(o,e,`${n}${a}`,r)}}if(n==="")return e;if(r!==0)throw new e7({current:n,depth:r});return e.push(n.trim()),e}function A3(t){return t==="address"||t==="bool"||t==="function"||t==="string"||m3.test(t)||g3.test(t)}const u7=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function d7(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||m3.test(t)||g3.test(t)||u7.test(t)}function h7(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function oE(t){const e={},n=t.length;for(let a=0;a<n;a++){const o=t[a];if(!qg(o))continue;const c=NL(o);if(!c)throw new qu({signature:o,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const m=$a(p,{type:"struct"});u.push(m)}if(!u.length)throw new XL({signature:o});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let a=0;a<i;a++){const[o,c]=s[a];r[o]=S3(c,e)}return r}const f7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function S3(t=[],e={},n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const a=t[i];if(y3.test(a.type))r.push(a);else{const c=za(f7,a.type);if(!c?.type)throw new ZL({abiParameter:a});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new QL({type:u});r.push({...a,type:`tuple${l??""}`,components:S3(e[u],e,new Set([...n,u]))})}else if(A3(u))r.push(a);else throw new WL({type:u})}}return r}function I3(t){const e=oE(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];qg(i)||n.push(gv(i,e))}return n}function fA(t){let e;if(typeof t=="string")e=gv(t);else{const n=oE(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!qg(i)){e=gv(i,n);break}}}if(!e)throw new zL({signature:t});return e}function pA(t){const e=[];if(typeof t=="string"){const n=as(t),r=n.length;for(let s=0;s<r;s++)e.push($a(n[s],{modifiers:hA}))}else{const n=oE(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(qg(i))continue;const a=as(i),o=a.length;for(let c=0;c<o;c++)e.push($a(a[c],{modifiers:hA,structs:n}))}}if(e.length===0)throw new VL({params:t});return e}function Ae(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function ii(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new I7(t.type);return`${t.name}(${Vg(t.inputs,{includeName:e})})`}function Vg(t,{includeName:e=!1}={}){return t?t.map(n=>p7(n,{includeName:e})).join(e?", ":","):""}function p7(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Vg(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function yr(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Jt(t){return yr(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const T3="2.45.1";let v0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${T3}`},re=class yv extends Error{constructor(e,n={}){const r=n.cause instanceof yv?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof yv&&n.cause.docsPath||n.docsPath,i=v0.getDocsUrl?.({...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...v0.version?[`Version: ${v0.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=T3}walk(e){return C3(this,e)}};function C3(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?C3(t.cause,e):e?null:t}class k3 extends re{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class km extends re{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class O3 extends re{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Vg(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class mf extends re{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class m7 extends re{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class g7 extends re{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Jt(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class y7 extends re{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class w7 extends re{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class mA extends re{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class P3 extends re{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://4byte.sourcify.dev/?q=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class b7 extends re{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class v7 extends re{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://4byte.sourcify.dev/?q=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class gA extends re{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class mu extends re{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class R3 extends re{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class _7 extends re{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://4byte.sourcify.dev/?q=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class E7 extends re{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ii(e.abiItem)}\`, and`,`\`${n.type}\` in \`${ii(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let x7=class extends re{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Om extends re{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Vg(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class cE extends re{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ii(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class A7 extends re{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class S7 extends re{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let $3=class extends re{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class I7 extends re{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class W6e extends re{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class T7 extends re{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let N3=class extends re{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},D3=class extends re{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class yA extends re{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Xc(t,{dir:e,size:n=32}={}){return typeof t=="string"?$o(t,{dir:e,size:n}):C7(t,{dir:e,size:n})}function $o(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new D3({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function C7(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new D3({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let lE=class extends re{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},k7=class extends re{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class O7 extends re{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let P7=class extends re{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function ls(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Bs(t,{size:e}){if(Jt(t)>e)throw new P7({givenSize:Jt(t),maxSize:e})}function xt(t,e={}){const{signed:n}=e;e.size&&Bs(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function R7(t,e={}){let n=t;if(e.size&&(Bs(n,{size:e.size}),n=ls(n)),ls(n)==="0x00")return!1;if(ls(n)==="0x01")return!0;throw new O7(n)}function us(t,e={}){const n=xt(t,e),r=Number(n);if(!Number.isSafeInteger(r))throw new lE({max:`${Number.MAX_SAFE_INTEGER}`,min:`${Number.MIN_SAFE_INTEGER}`,signed:e.signed,size:e.size,value:`${n}n`});return r}function Y6e(t,e={}){let n=wr(t);return e.size&&(Bs(n,{size:e.size}),n=ls(n,{dir:"right"})),new TextDecoder().decode(n)}const $7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ye(t,e={}){return typeof t=="number"||typeof t=="bigint"?he(t,e):typeof t=="string"?gu(t,e):typeof t=="boolean"?U3(t,e):vn(t,e)}function U3(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Bs(n,{size:e.size}),Xc(n,{size:e.size})):n}function vn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=$7[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Bs(r,{size:e.size}),Xc(r,{dir:"right",size:e.size})):r}function he(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof t=="bigint"?"n":"";throw new lE({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${t}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Xc(o,{size:r}):o}const N7=new TextEncoder;function gu(t,e={}){const n=N7.encode(t);return vn(n,e)}const D7=new TextEncoder;function Sa(t,e={}){return typeof t=="number"||typeof t=="bigint"?B7(t,e):typeof t=="boolean"?U7(t,e):yr(t)?wr(t,e):xc(t,e)}function U7(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Bs(n,{size:e.size}),Xc(n,{size:e.size})):n}const Zi={zero:48,nine:57,A:65,F:70,a:97,f:102};function wA(t){if(t>=Zi.zero&&t<=Zi.nine)return t-Zi.zero;if(t>=Zi.A&&t<=Zi.F)return t-(Zi.A-10);if(t>=Zi.a&&t<=Zi.f)return t-(Zi.a-10)}function wr(t,e={}){let n=t;e.size&&(Bs(n,{size:e.size}),n=Xc(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=wA(r.charCodeAt(o++)),l=wA(r.charCodeAt(o++));if(c===void 0||l===void 0)throw new re(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+l}return i}function B7(t,e){const n=he(t,e);return wr(n)}function xc(t,e={}){const n=D7.encode(t);return typeof e.size=="number"?(Bs(n,{size:e.size}),Xc(n,{dir:"right",size:e.size})):n}const dp=BigInt(2**32-1),bA=BigInt(32);function M7(t,e=!1){return e?{h:Number(t&dp),l:Number(t>>bA&dp)}:{h:Number(t>>bA&dp)|0,l:Number(t&dp)|0}}function L7(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=M7(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const F7=(t,e,n)=>t<<n|e>>>32-n,j7=(t,e,n)=>e<<n|t>>>32-n,z7=(t,e,n)=>e<<n-32|t>>>64-n,W7=(t,e,n)=>t<<n-32|e>>>64-n,gl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q7(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function kc(t,...e){if(!q7(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function V7(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");mh(t.outputLen),mh(t.blockLen)}function yu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function B3(t,e){kc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function H7(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function wu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function _0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mi(t,e){return t<<32-e|t>>>e}const K7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function G7(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Y7(t){for(let e=0;e<t.length;e++)t[e]=G7(t[e]);return t}const vA=K7?t=>t:Y7;function Z7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Hg(t){return typeof t=="string"&&(t=Z7(t)),kc(t),t}function J7(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let uE=class{};function M3(t){const e=r=>t().update(Hg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function X7(t=32){if(gl&&typeof gl.getRandomValues=="function")return gl.getRandomValues(new Uint8Array(t));if(gl&&typeof gl.randomBytes=="function")return Uint8Array.from(gl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Q7=BigInt(0),cd=BigInt(1),eF=BigInt(2),tF=BigInt(7),nF=BigInt(256),rF=BigInt(113),L3=[],F3=[],j3=[];for(let t=0,e=cd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],L3.push(2*(5*r+n)),F3.push((t+1)*(t+2)/2%64);let s=Q7;for(let i=0;i<7;i++)e=(e<<cd^(e>>tF)*rF)%nF,e&eF&&(s^=cd<<(cd<<BigInt(i))-cd);j3.push(s)}const z3=L7(j3,!0),sF=z3[0],iF=z3[1],_A=(t,e,n)=>n>32?z7(t,e,n):F7(t,e,n),EA=(t,e,n)=>n>32?W7(t,e,n):j7(t,e,n);function aF(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=n[c],u=n[c+1],d=_A(l,u,1)^n[o],h=EA(l,u,1)^n[o+1];for(let f=0;f<50;f+=10)t[a+f]^=d,t[a+f+1]^=h}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=F3[a],c=_A(s,i,o),l=EA(s,i,o),u=L3[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=sF[r],t[1]^=iF[r]}wu(n)}let oF=class W3 extends uE{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,mh(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=H7(this.state)}clone(){return this._cloneInto()}keccak(){vA(this.state32),aF(this.state32,this.rounds),vA(this.state32),this.posOut=0,this.pos=0}update(e){yu(this),e=Hg(e),kc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){yu(this,!1),kc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(B3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,wu(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new W3(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const cF=(t,e,n)=>M3(()=>new oF(e,t,n)),q3=cF(1,136,256/8);function Mn(t,e){const n=e||"hex",r=q3(yr(t,{strict:!1})?Sa(t):t);return n==="bytes"?r:Ye(r)}const lF=t=>Mn(Sa(t));function uF(t){return lF(t)}function dF(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=o,n+=o}}if(!i)throw new re("Unable to normalize signature.");return s}const hF=t=>{const e=typeof t=="string"?t:Cm(t);return dF(e)};function V3(t){return uF(hF(t))}const Kg=V3;let bn=class extends re{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Vu=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const E0=new Vu(8192);function gf(t,e){if(E0.has(`${t}.${e}`))return E0.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Mn(xc(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return E0.set(`${t}.${e}`,i),i}function Gn(t,e){if(!Dt(t,{strict:!1}))throw new bn({address:t});return gf(t,e)}const fF=/^0x[a-fA-F0-9]{40}$/,x0=new Vu(8192);function Dt(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(x0.has(r))return x0.get(r);const s=fF.test(t)?t.toLowerCase()===t?!0:n?gf(t)===t:!0:!1;return x0.set(r,s),s}function ur(t){return typeof t[0]=="string"?Ms(t):pF(t)}function pF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ms(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Oc(t,e,n,{strict:r}={}){return yr(t,{strict:!1})?wv(t,e,n,{strict:r}):G3(t,e,n,{strict:r})}function H3(t,e){if(typeof e=="number"&&e>0&&e>Jt(t)-1)throw new N3({offset:e,position:"start",size:Jt(t)})}function K3(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Jt(t)!==n-e)throw new N3({offset:n,position:"end",size:Jt(t)})}function G3(t,e,n,{strict:r}={}){H3(t,e);const s=t.slice(e,n);return r&&K3(s,e,n),s}function wv(t,e,n,{strict:r}={}){H3(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&K3(s,e,n),s}const Q6e=/^(.*)\[([0-9]*)\]$/,mF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Y3=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function jo(t,e){if(t.length!==e.length)throw new y7({expectedLength:t.length,givenLength:e.length});const n=gF({params:t,values:e}),r=hE(n);return r.length===0?"0x":r}function gF({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(dE({param:t[r],value:e[r]}));return n}function dE({param:t,value:e}){const n=fE(t.type);if(n){const[r,s]=n;return wF(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return xF(e,{param:t});if(t.type==="address")return yF(e);if(t.type==="bool")return vF(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Y3.exec(t.type)??[];return _F(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return bF(e,{param:t});if(t.type==="string")return EF(e);throw new A7(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function hE(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?e+=32:e+=Jt(o)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?(n.push(he(e+s,{size:32})),r.push(o),s+=Jt(o)):n.push(o)}return ur([...n,...r])}function yF(t){if(!Dt(t))throw new bn({address:t});return{dynamic:!1,encoded:$o(t.toLowerCase())}}function wF(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new $3(t);if(!r&&t.length!==e)throw new m7({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let a=0;a<t.length;a++){const o=dE({param:n,value:t[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=hE(i);if(r){const o=he(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?ur([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:ur(i.map(({encoded:a})=>a))}}function bF(t,{param:e}){const[,n]=e.type.split("bytes"),r=Jt(t);if(!n){let s=t;return r%32!==0&&(s=$o(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ur([$o(he(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new g7({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:$o(t,{dir:"right"})}}function vF(t){if(typeof t!="boolean")throw new re(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$o(U3(t))}}function _F(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new lE({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:he(t,{size:32,signed:e})}}function EF(t){const e=gu(t),n=Math.ceil(Jt(e)/32),r=[];for(let s=0;s<n;s++)r.push($o(Oc(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ur([$o(he(Jt(e),{size:32})),...r])}}function xF(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],a=Array.isArray(t)?s:i.name,o=dE({param:i,value:t[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?hE(r):ur(r.map(({encoded:s})=>s))}}function fE(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const yf=t=>Oc(V3(t),0,4);function Qc(t){const{abi:e,args:n=[],name:r}=t,s=yr(r,{strict:!1}),i=e.filter(o=>s?o.type==="function"?yf(o)===r:o.type==="event"?Kg(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in o&&o.inputs[u];return d?bv(l,d):!1})){if(a&&"inputs"in a&&a.inputs){const l=Z3(o.inputs,a.inputs,n);if(l)throw new E7({abiItem:o,type:l[0]},{abiItem:a,type:l[1]})}a=o}}return a||i[0]}function bv(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Dt(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>n==="object"&&bv(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>bv(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Z3(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Z3(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Dt(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Dt(n[r],{strict:!1}):!1)return a}}const xA="/docs/contract/encodeEventTopics";function wf(t){const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const c=Qc({abi:e,name:n});if(!c)throw new gA(n,{docsPath:xA});s=c}if(s.type!=="event")throw new gA(void 0,{docsPath:xA});const i=ii(s),a=Kg(i);let o=[];if(r&&"inputs"in s){const c=s.inputs?.filter(u=>"indexed"in u&&u.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?c?.map(u=>r[u.name])??[]:[];l.length>0&&(o=c?.map((u,d)=>Array.isArray(l[d])?l[d].map((h,f)=>AA({param:u,value:l[d][f]})):typeof l[d]<"u"&&l[d]!==null?AA({param:u,value:l[d]}):null)??[])}return[a,...o]}function AA({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Mn(Sa(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new T7(t.type);return jo([t],[e])}function Gg(t,{method:e}){const n={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:r,response:s,status:i,transport:a})=>{i==="success"&&e===r&&(n[s]=a.request)}),(r=>n[r]||t.request)}async function J3(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:a,strict:o,toBlock:c}=e,l=Gg(t,{method:"eth_newFilter"}),u=i?wf({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?he(a):a,toBlock:typeof c=="bigint"?he(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!o,type:"event"}}function Ut(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const SA="/docs/contract/encodeFunctionData";function AF(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Qc({abi:e,args:n,name:r});if(!i)throw new mu(r,{docsPath:SA});s=i}if(s.type!=="function")throw new mu(void 0,{docsPath:SA});return{abi:[s],functionName:yf(ii(s))}}function xr(t){const{args:e}=t,{abi:n,functionName:r}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:AF(t),s=n[0],i=r,a="inputs"in s&&s.inputs?jo(s.inputs,e??[]):void 0;return Ms([i,a??"0x"])}const SF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},X3={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},IF={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let IA=class extends re{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},Q3=class extends re{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},TF=class extends re{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const CF={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new TF({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Q3({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new IA({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new IA({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function pE(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(CF);return n.bytes=t,n.dataView=new DataView(t.buffer??t,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function kF(t,e={}){typeof e.size<"u"&&Bs(t,{size:e.size});const n=vn(t,e);return xt(n,e)}function OF(t,e={}){let n=t;if(typeof e.size<"u"&&(Bs(n,{size:e.size}),n=ls(n)),n.length>1||n[0]>1)throw new k7(n);return!!n[0]}function Ia(t,e={}){typeof e.size<"u"&&Bs(t,{size:e.size});const n=vn(t,e);return us(n,e)}function PF(t,e={}){let n=t;return typeof e.size<"u"&&(Bs(n,{size:e.size}),n=ls(n,{dir:"right"})),new TextDecoder().decode(n)}function bf(t,e){const n=typeof e=="string"?wr(e):e,r=pE(n);if(Jt(n)===0&&t.length>0)throw new mf;if(Jt(e)&&Jt(e)<32)throw new O3({data:typeof e=="string"?e:vn(e),params:t,size:Jt(e)});let s=0;const i=[];for(let a=0;a<t.length;++a){const o=t[a];r.setPosition(s);const[c,l]=ru(r,o,{staticPosition:0});s+=l,i.push(c)}return i}function ru(t,e,{staticPosition:n}){const r=fE(e.type);if(r){const[s,i]=r;return $F(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return BF(t,e,{staticPosition:n});if(e.type==="address")return RF(t);if(e.type==="bool")return NF(t);if(e.type.startsWith("bytes"))return DF(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return UF(t,e);if(e.type==="string")return MF(t,{staticPosition:n});throw new S7(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const TA=32,vv=32;function RF(t){const e=t.readBytes(32);return[gf(vn(G3(e,-20))),32]}function $F(t,e,{length:n,staticPosition:r}){if(!n){const a=Ia(t.readBytes(vv)),o=r+a,c=o+TA;t.setPosition(o);const l=Ia(t.readBytes(TA)),u=gh(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,m]=ru(t,e,{staticPosition:c});d+=m,h.push(p)}return t.setPosition(r+32),[h,32]}if(gh(e)){const a=Ia(t.readBytes(vv)),o=r+a,c=[];for(let l=0;l<n;++l){t.setPosition(o+l*32);const[u]=ru(t,e,{staticPosition:o});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=ru(t,e,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function NF(t){return[OF(t.readBytes(32),{size:32}),32]}function DF(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const a=Ia(t.readBytes(32));t.setPosition(n+a);const o=Ia(t.readBytes(32));if(o===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(o);return t.setPosition(n+32),[vn(c),32]}return[vn(t.readBytes(Number.parseInt(s,10),32)),32]}function UF(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?kF(s,{signed:n}):Ia(s,{signed:n}),32]}function BF(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(gh(e)){const a=Ia(t.readBytes(vv)),o=n+a;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(o+i);const[u,d]=ru(t,l,{staticPosition:o});i+=d,s[r?c:l?.name]=u}return t.setPosition(n+32),[s,32]}for(let a=0;a<e.components.length;++a){const o=e.components[a],[c,l]=ru(t,o,{staticPosition:n});s[r?a:o?.name]=c,i+=l}return[s,i]}function MF(t,{staticPosition:e}){const n=Ia(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ia(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),a=PF(ls(i));return t.setPosition(e+32),[a,32]}function gh(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(gh);const n=fE(t.type);return!!(n&&gh({...t,type:n[1]}))}function LF(t){const{abi:e,data:n}=t,r=Oc(n,0,4);if(r==="0x")throw new mf;const i=[...e||[],X3,IF].find(a=>a.type==="error"&&r===yf(ii(a)));if(!i)throw new P3(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?bf(i.inputs,Oc(n,4)):void 0,errorName:i.name}}const Tn=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function e8({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Tn(e[i]):e[i]}`).join(", ")})`}const FF={gwei:9,wei:18},jF={ether:-9,wei:9};function t8(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function mE(t,e="wei"){return t8(t,FF[e])}function Fr(t,e="wei"){return t8(t,jF[e])}class zF extends re{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class WF extends re{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function CA(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function qF(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=CA(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=CA(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function vf(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class VF extends re{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class HF extends re{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",vf(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class KF extends re{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class GF extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){const f=vf({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof h<"u"&&`${mE(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${Fr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${Fr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Fr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class n8 extends re{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let a="Transaction";r&&i!==void 0&&(a=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(a=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(a=`Transaction at block number "${n}" at index "${i}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class r8 extends re{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class s8 extends re{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class YF extends re{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const ZF=t=>t,gE=t=>t;class i8 extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){const p=n?Ut(n):void 0;let m=vf({from:p?.address,to:d,value:typeof h<"u"&&`${mE(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${Fr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${Fr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Fr(l)} gwei`,nonce:u});f&&(m+=`
${qF(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class a8 extends re{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:a,sender:o}){const c=Qc({abi:n,args:r,name:a}),l=c?e8({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?ii(c,{includeName:!0}):void 0,d=vf({address:s&&ZF(s),function:u,args:l&&l!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${l}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=a,this.sender=o}}class _v extends re{constructor({abi:e,data:n,functionName:r,message:s}){let i,a,o,c;if(n&&n!=="0x")try{a=LF({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=a;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=SF[f]}else{const f=u?ii(u,{includeName:!0}):void 0,p=u&&h?e8({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;o=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof P3&&(l=i.signature,o=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://4byte.sourcify.dev/?q=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=n,this.reason=c,this.signature=l}}class JF extends re{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class XF extends re{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Yg extends re{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class eh extends re{constructor({body:e,cause:n,details:r,headers:s,status:i,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${gE(a)}`,e&&`Request body: ${Tn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=a}}class yE extends re{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${gE(r)}`,`Request body: ${Tn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}}class kA extends re{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${gE(n)}`,`Request body: ${Tn(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const QF=-1;class qr extends re{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof yE?e.code:n??QF}}class fs extends qr{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class yh extends qr{constructor(e){super(e,{code:yh.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class wh extends qr{constructor(e){super(e,{code:wh.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(wh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class bh extends qr{constructor(e,{method:n}={}){super(e,{code:bh.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class vh extends qr{constructor(e){super(e,{code:vh.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Pc extends qr{constructor(e){super(e,{code:Pc.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Pc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Uo extends qr{constructor(e){super(e,{code:Uo.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Uo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class _h extends qr{constructor(e){super(e,{code:_h.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(_h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Eh extends qr{constructor(e){super(e,{code:Eh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Eh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class xh extends qr{constructor(e){super(e,{code:xh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fc extends qr{constructor(e,{method:n}={}){super(e,{code:fc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class bu extends qr{constructor(e){super(e,{code:bu.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(bu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ah extends qr{constructor(e){super(e,{code:Ah.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ah,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class su extends fs{constructor(e){super(e,{code:su.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(su,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Sh extends fs{constructor(e){super(e,{code:Sh.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ih extends fs{constructor(e,{method:n}={}){super(e,{code:Ih.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Th extends fs{constructor(e){super(e,{code:Th.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Th,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ch extends fs{constructor(e){super(e,{code:Ch.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class kh extends fs{constructor(e){super(e,{code:kh.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vu extends fs{constructor(e){super(e,{code:vu.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Oh extends fs{constructor(e){super(e,{code:Oh.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Ph extends fs{constructor(e){super(e,{code:Ph.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Ph,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Rh extends fs{constructor(e){super(e,{code:Rh.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Rh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class $h extends fs{constructor(e){super(e,{code:$h.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty($h,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Nh extends fs{constructor(e){super(e,{code:Nh.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Nh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class _u extends fs{constructor(e){super(e,{code:_u.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(_u,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ej extends qr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const tj=3;function Rc(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:a}){const o=t instanceof Yg?t:t instanceof re?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=o,f=t instanceof mf?new JF({functionName:i}):[tj,Pc.code].includes(c)&&(l||u||d||h)||c===Uo.code&&u==="execution reverted"&&l?new _v({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:o instanceof yE?u:h??d}):t;return new a8(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:a})}function o8(t){const e=Mn(`0x${t.substring(4)}`).substring(26);return gf(`0x${e}`)}async function nj({hash:t,signature:e}){const n=yr(t)?t:Ye(t),{secp256k1:r}=await xe(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>Dq);return{secp256k1:a}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=OA(f);return new r.Signature(xt(l),xt(u)).addRecoveryBit(p)}const a=yr(e)?e:Ye(e);if(Jt(a)!==65)throw new Error("invalid signature length");const o=us(`0x${a.slice(130)}`),c=OA(o);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function OA(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function c8({hash:t,signature:e}){return o8(await nj({hash:t,signature:e}))}function Na(t,e="hex"){const n=l8(t),r=pE(new Uint8Array(n.length));return n.encode(r),e==="hex"?vn(r.bytes):r.bytes}function l8(t){return Array.isArray(t)?rj(t.map(e=>l8(e))):sj(t)}function rj(t){const e=t.reduce((s,i)=>s+i.length,0),n=u8(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function sj(t){const e=typeof t=="string"?wr(t):t,n=u8(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function u8(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new re("Length is too large.")}function d8(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Mn(Ms(["0x05",Na([e?he(e):"0x",s,n?he(n):"0x"])]));return r==="bytes"?wr(i):i}async function Zg(t){const{authorization:e,signature:n}=t;return c8({hash:d8(e),signature:n??e})}class ij extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){const f=vf({from:n?.address,to:d,value:typeof h<"u"&&`${mE(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${Fr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${Fr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Fr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ql extends re{constructor({cause:e,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ql,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ql,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class $c extends re{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Fr(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty($c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Ev extends re{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Fr(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Ev,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class xv extends re{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(xv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Av extends re{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Av,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Sv extends re{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Sv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Iv extends re{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Iv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Tv extends re{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Tv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Cv extends re{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Cv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class kv extends re{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(kv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Dh extends re{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Fr(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Fr(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Dh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class _f extends re{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Jg(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof re?t.walk(s=>s?.code===ql.code):t;return r instanceof re?new ql({cause:t,message:r.details}):ql.nodeMessage.test(n)?new ql({cause:t,message:t.details}):$c.nodeMessage.test(n)?new $c({cause:t,maxFeePerGas:e?.maxFeePerGas}):Ev.nodeMessage.test(n)?new Ev({cause:t,maxFeePerGas:e?.maxFeePerGas}):xv.nodeMessage.test(n)?new xv({cause:t,nonce:e?.nonce}):Av.nodeMessage.test(n)?new Av({cause:t,nonce:e?.nonce}):Sv.nodeMessage.test(n)?new Sv({cause:t,nonce:e?.nonce}):Iv.nodeMessage.test(n)?new Iv({cause:t}):Tv.nodeMessage.test(n)?new Tv({cause:t,gas:e?.gas}):Cv.nodeMessage.test(n)?new Cv({cause:t,gas:e?.gas}):kv.nodeMessage.test(n)?new kv({cause:t}):Dh.nodeMessage.test(n)?new Dh({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new _f({cause:t})}function aj(t,{docsPath:e,...n}){const r=(()=>{const s=Jg(t,n);return s instanceof _f?t:s})();return new ij(r,{docsPath:e,...n})}function Hu(t,{format:e}){if(!e)return{};const n={};function r(i){const a=Object.keys(i);for(const o of a)o in t&&(n[o]=t[o]),i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])&&r(i[o])}const s=e(t||{});return r(s),n}function Xg(t,e){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const a=e(s,i);if(n)for(const o of n)delete a[o];return{...a,...r(s,i)}},type:t})}const oj={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Wa(t,e){const n={};return typeof t.authorizationList<"u"&&(n.authorizationList=lj(t.authorizationList)),typeof t.accessList<"u"&&(n.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(n.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?n.blobs=t.blobs.map(r=>vn(r)):n.blobs=t.blobs),typeof t.data<"u"&&(n.data=t.data),t.account&&(n.from=t.account.address),typeof t.from<"u"&&(n.from=t.from),typeof t.gas<"u"&&(n.gas=he(t.gas)),typeof t.gasPrice<"u"&&(n.gasPrice=he(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=he(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(n.maxFeePerGas=he(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=he(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(n.nonce=he(t.nonce)),typeof t.to<"u"&&(n.to=t.to),typeof t.type<"u"&&(n.type=oj[t.type]),typeof t.value<"u"&&(n.value=he(t.value)),n}const cj=Xg("transactionRequest",Wa);function lj(t){return t.map(e=>({address:e.address,r:e.r?he(BigInt(e.r)):e.r,s:e.s?he(BigInt(e.s)):e.s,chainId:he(e.chainId),nonce:he(e.nonce),...typeof e.yParity<"u"?{yParity:he(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:he(e.v)}:{}}))}function PA(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new yA({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new yA({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function uj(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,a={};if(i!==void 0&&(a.code=i),e!==void 0&&(a.balance=he(e)),n!==void 0&&(a.nonce=he(n)),r!==void 0&&(a.state=PA(r)),s!==void 0){if(a.state)throw new WF;a.stateDiff=PA(s)}return a}function wE(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Dt(n,{strict:!1}))throw new bn({address:n});if(e[n])throw new zF({address:n});e[n]=uj(r)}return e}const dj=2n**16n-1n,Qg=2n**256n-1n;function Vi(t){const{account:e,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=t,i=e?Ut(e):void 0;if(i&&!Dt(i.address))throw new bn({address:i.address});if(s&&!Dt(s))throw new bn({address:s});if(n&&n>Qg)throw new $c({maxFeePerGas:n});if(r&&n&&r>n)throw new Dh({maxFeePerGas:n,maxPriorityFeePerGas:r})}class h8 extends re{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class bE extends re{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class hj extends re{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Fr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class f8 extends re{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const p8={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Ef(t,e){const n={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?us(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?us(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?p8[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(n.authorizationList=fj(t.authorizationList)),n.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const m8=Xg("transaction",Ef);function fj(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function vE(t,e){const n=(t.transactions??[]).map(r=>typeof r=="string"?r:Ef(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:n,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const g8=Xg("block",vE);async function Qs(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){const i=s??!1,a=n!==void 0?he(n):void 0;let o=null;if(e?o=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):o=await t.request({method:"eth_getBlockByNumber",params:[a||r,i]},{dedupe:!!a}),!o)throw new f8({blockHash:e,blockNumber:n});return(t.chain?.formatters?.block?.format||vE)(o,"getBlock")}async function _E(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function pj(t,e){return y8(t,e)}async function y8(t,e){const{block:n,chain:r=t.chain,request:s}=e||{};try{const i=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof i=="function"){const o=n||await Ae(t,Qs,"getBlock")({}),c=await i({block:o,client:t,request:s});if(c===null)throw new Error;return c}if(typeof i<"u")return i;const a=await t.request({method:"eth_maxPriorityFeePerGas"});return xt(a)}catch{const[i,a]=await Promise.all([n?Promise.resolve(n):Ae(t,Qs,"getBlock")({}),Ae(t,_E,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new bE;const o=a-i.baseFeePerGas;return o<0n?0n:o}}async function mj(t,e){return Ov(t,e)}async function Ov(t,e){const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},a=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new h8;const c=10**(a.toString().split(".")[1]?.length??0),l=h=>h*BigInt(Math.ceil(a*c))/BigInt(c),u=n||await Ae(t,Qs,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const h=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(h!==null)return h}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new bE;const h=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await y8(t,{block:u,chain:r,request:s}),f=l(u.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??f+h,maxPriorityFeePerGas:h}}return{gasPrice:s?.gasPrice??l(await Ae(t,_E,"getGasPrice")({}))}}async function EE(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?he(r):n]},{dedupe:!!r});return us(s)}function xE(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>wr(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>vn(i))}function AE(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(a=>wr(a)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(a=>wr(a)):t.commitments,i=[];for(let a=0;a<r.length;a++){const o=r[a],c=s[a];i.push(Uint8Array.from(e.computeBlobKzgProof(o,c)))}return n==="bytes"?i:i.map(a=>vn(a))}function gj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}function yj(t,e,n){return t&e^~t&n}function wj(t,e,n){return t&e^t&n^e&n}let bj=class extends uE{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=_0(this.buffer)}update(e){yu(this),e=Hg(e),kc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=_0(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yu(this),B3(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,wu(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;gj(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=_0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ka=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vj=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ga=new Uint32Array(64);let _j=class extends bj{constructor(e=32){super(64,e,8,!1),this.A=Ka[0]|0,this.B=Ka[1]|0,this.C=Ka[2]|0,this.D=Ka[3]|0,this.E=Ka[4]|0,this.F=Ka[5]|0,this.G=Ka[6]|0,this.H=Ka[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ga[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ga[d-15],f=Ga[d-2],p=mi(h,7)^mi(h,18)^h>>>3,m=mi(f,17)^mi(f,19)^f>>>10;Ga[d]=m+Ga[d-7]+p+Ga[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=mi(o,6)^mi(o,11)^mi(o,25),f=u+h+yj(o,c,l)+vj[d]+Ga[d]|0,m=(mi(r,2)^mi(r,13)^mi(r,22))+wj(r,s,i)|0;u=l,l=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){wu(Ga)}destroy(){this.set(0,0,0,0,0,0,0,0),wu(this.buffer)}};const w8=M3(()=>new _j),Ej=w8;function b8(t,e){const n=e||"hex",r=Ej(yr(t,{strict:!1})?Sa(t):t);return n==="bytes"?r:Ye(r)}function xj(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=b8(e,"bytes");return s.set([n],0),r==="bytes"?s:vn(s)}function v8(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(xj({commitment:i,to:r,version:n}));return s}const RA=6,_8=32,SE=4096,E8=_8*SE,$A=E8*RA-1-1*SE*RA,x8=1;class Aj extends re{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class A8 extends re{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class Sj extends re{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class Ij extends re{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${x8}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function Tj(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?wr(t.data):t.data,r=Jt(n);if(!r)throw new A8;if(r>$A)throw new Aj({maxSize:$A,size:r});const s=[];let i=!0,a=0;for(;i;){const o=pE(new Uint8Array(E8));let c=0;for(;c<SE;){const l=n.slice(a,a+(_8-1));if(o.pushByte(0),o.pushBytes(l),l.length<31){o.pushByte(128),i=!1;break}c++,a+=31}s.push(o)}return e==="bytes"?s.map(o=>o.bytes):s.map(o=>vn(o.bytes))}function S8(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Tj({data:e,to:r}),i=t.commitments??xE({blobs:s,kzg:n,to:r}),a=t.proofs??AE({blobs:s,commitments:i,kzg:n,to:r}),o=[];for(let c=0;c<s.length;c++)o.push({blob:s[c],commitment:i[c],proof:a[c]});return o}function I8(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new HF({transaction:t})}function xf(t,{docsPath:e,...n}){const r=(()=>{const s=Jg(t,n);return s instanceof _f?t:s})();return new GF(r,{docsPath:e,...n})}async function Hi(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return us(e)}async function IE(t,e){const{account:n=t.account,accessList:r,authorizationList:s,chain:i=t.chain,blobVersionedHashes:a,blobs:o,data:c,gas:l,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:h,maxPriorityFeePerGas:f,nonce:p,nonceManager:m,to:g,type:_,value:A,...w}=e,y=await(async()=>{if(!n||!m||typeof p<"u")return p;const $=Ut(n),P=i?i.id:await Ae(t,Hi,"getChainId")({});return await m.consume({address:$.address,chainId:P,client:t})})();Vi(e);const E=i?.formatters?.transactionRequest?.format,S=(E||Wa)({...Hu(w,{format:E}),account:n?Ut(n):void 0,accessList:r,authorizationList:s,blobs:o,blobVersionedHashes:a,data:c,gas:l,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:h,maxPriorityFeePerGas:f,nonce:y,to:g,type:_,value:A},"fillTransaction");try{const $=await t.request({method:"eth_fillTransaction",params:[S]}),C=(i?.formatters?.transaction?.format||Ef)($.tx);delete C.blockHash,delete C.blockNumber,delete C.r,delete C.s,delete C.transactionIndex,delete C.v,delete C.yParity,C.data=C.input,C.gas&&(C.gas=e.gas??C.gas),C.gasPrice&&(C.gasPrice=e.gasPrice??C.gasPrice),C.maxFeePerBlobGas&&(C.maxFeePerBlobGas=e.maxFeePerBlobGas??C.maxFeePerBlobGas),C.maxFeePerGas&&(C.maxFeePerGas=e.maxFeePerGas??C.maxFeePerGas),C.maxPriorityFeePerGas&&(C.maxPriorityFeePerGas=e.maxPriorityFeePerGas??C.maxPriorityFeePerGas),C.nonce&&(C.nonce=e.nonce??C.nonce);const B=await(async()=>{if(typeof i?.fees?.baseFeeMultiplier=="function"){const v=await Ae(t,Qs,"getBlock")({});return i.fees.baseFeeMultiplier({block:v,client:t,request:e})}return i?.fees?.baseFeeMultiplier??1.2})();if(B<1)throw new h8;const D=10**(B.toString().split(".")[1]?.length??0),L=v=>v*BigInt(Math.ceil(B*D))/BigInt(D);return C.maxFeePerGas&&!e.maxFeePerGas&&(C.maxFeePerGas=L(C.maxFeePerGas)),C.gasPrice&&!e.gasPrice&&(C.gasPrice=L(C.gasPrice)),{raw:$.raw,transaction:{from:S.from,...C}}}catch($){throw xf($,{...e,chain:t.chain})}}const TE=["blobVersionedHashes","chainId","fees","gas","nonce","type"],NA=new Map,A0=new Vu(128);async function Ku(t,e){let n=e;n.account??=t.account,n.parameters??=TE;const{account:r,chain:s=t.chain,nonceManager:i,parameters:a}=n,o=(()=>{if(typeof s?.prepareTransactionRequest=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s?.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let c;async function l(){return c||(typeof n.chainId<"u"?n.chainId:s?s.id:(c=await Ae(t,Hi,"getChainId")({}),c))}const u=r&&Ut(r);let d=n.nonce;if(a.includes("nonce")&&typeof d>"u"&&u&&i){const y=await l();d=await i.consume({address:u.address,chainId:y,client:t})}o?.fn&&o.runAt?.includes("beforeFillTransaction")&&(n=await o.fn({...n,chain:s},{phase:"beforeFillTransaction"}),d??=n.nonce);const f=((a.includes("blobVersionedHashes")||a.includes("sidecars"))&&n.kzg&&n.blobs||A0.get(t.uid)===!1||!["fees","gas"].some(E=>a.includes(E))?!1:!!(a.includes("chainId")&&typeof n.chainId!="number"||a.includes("nonce")&&typeof d!="number"||a.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||a.includes("gas")&&typeof n.gas!="bigint"))?await Ae(t,IE,"fillTransaction")({...n,nonce:d}).then(y=>{const{chainId:E,from:b,gas:S,gasPrice:$,nonce:P,maxFeePerBlobGas:C,maxFeePerGas:B,maxPriorityFeePerGas:k,type:D,...L}=y.transaction;return A0.set(t.uid,!0),{...n,...b?{from:b}:{},...D?{type:D}:{},...typeof E<"u"?{chainId:E}:{},...typeof S<"u"?{gas:S}:{},...typeof $<"u"?{gasPrice:$}:{},...typeof P<"u"?{nonce:P}:{},...typeof C<"u"?{maxFeePerBlobGas:C}:{},...typeof B<"u"?{maxFeePerGas:B}:{},...typeof k<"u"?{maxPriorityFeePerGas:k}:{},..."nonceKey"in L&&typeof L.nonceKey<"u"?{nonceKey:L.nonceKey}:{}}}).catch(y=>{const E=y;return E.name!=="TransactionExecutionError"||E.walk?.(S=>{const $=S;return $.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError"})&&A0.set(t.uid,!1),n}):n;d??=f.nonce,n={...f,...u?{from:u?.address}:{},...d?{nonce:d}:{}};const{blobs:p,gas:m,kzg:g,type:_}=n;o?.fn&&o.runAt?.includes("beforeFillParameters")&&(n=await o.fn({...n,chain:s},{phase:"beforeFillParameters"}));let A;async function w(){return A||(A=await Ae(t,Qs,"getBlock")({blockTag:"latest"}),A)}if(a.includes("nonce")&&typeof d>"u"&&u&&!i&&(n.nonce=await Ae(t,EE,"getTransactionCount")({address:u.address,blockTag:"pending"})),(a.includes("blobVersionedHashes")||a.includes("sidecars"))&&p&&g){const y=xE({blobs:p,kzg:g});if(a.includes("blobVersionedHashes")){const E=v8({commitments:y,to:"hex"});n.blobVersionedHashes=E}if(a.includes("sidecars")){const E=AE({blobs:p,commitments:y,kzg:g}),b=S8({blobs:p,commitments:y,proofs:E,to:"hex"});n.sidecars=b}}if(a.includes("chainId")&&(n.chainId=await l()),(a.includes("fees")||a.includes("type"))&&typeof _>"u")try{n.type=I8(n)}catch{let y=NA.get(t.uid);typeof y>"u"&&(y=typeof(await w())?.baseFeePerGas=="bigint",NA.set(t.uid,y)),n.type=y?"eip1559":"legacy"}if(a.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const y=await w(),{maxFeePerGas:E,maxPriorityFeePerGas:b}=await Ov(t,{block:y,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<b)throw new hj({maxPriorityFeePerGas:b});n.maxPriorityFeePerGas=b,n.maxFeePerGas=E}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new bE;if(typeof n.gasPrice>"u"){const y=await w(),{gasPrice:E}=await Ov(t,{block:y,chain:s,request:n,type:"legacy"});n.gasPrice=E}}return a.includes("gas")&&typeof m>"u"&&(n.gas=await Ae(t,CE,"estimateGas")({...n,account:u,prepare:u?.type==="local"?[]:["blobVersionedHashes"]})),o?.fn&&o.runAt?.includes("afterFillParameters")&&(n=await o.fn({...n,chain:s},{phase:"afterFillParameters"})),Vi(n),delete n.parameters,n}async function CE(t,e){const{account:n=t.account,prepare:r=!0}=e,s=n?Ut(n):void 0,i=(()=>{if(Array.isArray(r))return r;if(s?.type!=="local")return["blobVersionedHashes"]})();try{const a=await(async()=>{if(e.to)return e.to;if(e.authorizationList&&e.authorizationList.length>0)return await Zg({authorization:e.authorizationList[0]}).catch(()=>{throw new re("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:o,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:_,maxPriorityFeePerGas:A,nonce:w,value:y,stateOverride:E,...b}=r?await Ku(t,{...e,parameters:i,to:a}):e;if(p&&e.gas!==p)return p;const $=(typeof d=="bigint"?he(d):void 0)||h,P=wE(E);Vi(e);const C=t.chain?.formatters?.transactionRequest?.format,k=(C||Wa)({...Hu(b,{format:C}),account:s,accessList:o,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:_,maxPriorityFeePerGas:A,nonce:w,to:a,value:y},"estimateGas");return BigInt(await t.request({method:"eth_estimateGas",params:P?[k,$??t.experimental_blockTag??"latest",P]:$?[k,$]:[k]}))}catch(a){throw aj(a,{...e,account:s,chain:t.chain})}}async function Cj(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:a=typeof t.dataSuffix=="string"?t.dataSuffix:t.dataSuffix?.value,...o}=e,c=xr({abi:n,args:s,functionName:i});try{return await Ae(t,CE,"estimateGas")({data:`${c}${a?a.replace("0x",""):""}`,to:r,...o})}catch(l){const u=o.account?Ut(o.account):void 0;throw Rc(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u?.address})}}function Af(t,e){if(!Dt(t,{strict:!1}))throw new bn({address:t});if(!Dt(e,{strict:!1}))throw new bn({address:e});return t.toLowerCase()===e.toLowerCase()}const DA="/docs/contract/decodeEventLog";function Pm(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[a,...o]=s;if(!a)throw new b7({docsPath:DA});const c=e.find(_=>_.type==="event"&&a===Kg(ii(_)));if(!(c&&"name"in c)||c.type!=="event")throw new v7(a,{docsPath:DA});const{name:l,inputs:u}=c,d=u?.some(_=>!("name"in _&&_.name)),h=d?[]:{},f=u.map((_,A)=>[_,A]).filter(([_])=>"indexed"in _&&_.indexed),p=[];for(let _=0;_<f.length;_++){const[A,w]=f[_],y=o[_];if(!y){if(i)throw new cE({abiItem:c,param:A});p.push([A,w]);continue}h[d?w:A.name||w]=kj({param:A,value:y})}const m=u.filter(_=>!("indexed"in _&&_.indexed)),g=i?m:[...p.map(([_])=>_),...m];if(g.length>0){if(n&&n!=="0x")try{const _=bf(g,n);if(_){let A=0;if(!i)for(const[w,y]of p)h[d?y:w.name||y]=_[A++];if(d)for(let w=0;w<u.length;w++)h[w]===void 0&&A<_.length&&(h[w]=_[A++]);else for(let w=0;w<m.length;w++)h[m[w].name]=_[A++]}}catch(_){if(i)throw _ instanceof O3||_ instanceof Q3?new Om({abiItem:c,data:n,params:g,size:Jt(n)}):_}else if(i)throw new Om({abiItem:c,data:"0x",params:g,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function kj({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(bf([t],e)||[])[0]}function kE(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})(),a=e.filter(o=>o.type==="event").map(o=>({abi:o,selector:Kg(o)}));return r.map(o=>{const c=a.filter(d=>o.topics[0]===d.selector);if(c.length===0)return null;let l,u;for(const d of c)try{l=Pm({...o,abi:[d.abi],strict:!0}),u=d;break}catch{}if(!l&&!s){u=c[0];try{l=Pm({data:o.data,topics:o.topics,abi:[u.abi],strict:!1})}catch{const d=u.abi.inputs?.some(h=>!("name"in h&&h.name));return{...o,args:d?[]:{},eventName:u.abi.name}}}return!l||!u||i&&!i.includes(l.eventName)||!Oj({args:l.args,inputs:u.abi.inputs,matchArgs:n})?null:{...l,...o}}).filter(Boolean)}function Oj(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,a,o){try{return i.type==="address"?Af(a,o):i.type==="string"||i.type==="bytes"?Mn(Sa(a))===o:a===o}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,a)=>{if(i==null)return!0;const o=n[a];return o?(Array.isArray(i)?i:[i]).some(l=>s(o,l,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(a==null)return!0;const o=n.find(l=>l.name===i);return o?(Array.isArray(a)?a:[a]).some(l=>s(o,l,e[i])):!1}):!1}function Fi(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,blockTimestamp:t.blockTimestamp?BigInt(t.blockTimestamp):t.blockTimestamp===null?null:void 0,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function OE(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:a,args:o,strict:c}={}){const l=c??!1,u=a??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(m=>wf({abi:[m],eventName:m.name,args:a?void 0:o}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?he(r):r,toBlock:typeof s=="bigint"?he(s):s}]});const f=h.map(p=>Fi(p));return u?kE({abi:u,args:o,logs:f,strict:l}):f}async function T8(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:a,fromBlock:o,toBlock:c,strict:l}=e,u=a?Qc({abi:n,name:a}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return Ae(t,OE,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:o,toBlock:c,strict:l})}const S0="/docs/contract/decodeFunctionResult";function el(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const o=Qc({abi:e,args:n,name:r});if(!o)throw new mu(r,{docsPath:S0});i=o}if(i.type!=="function")throw new mu(void 0,{docsPath:S0});if(!i.outputs)throw new R3(i.name,{docsPath:S0});const a=bf(i.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const PE=BigInt(0),Pv=BigInt(1);function Sf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function RE(t){if(!Sf(t))throw new Error("Uint8Array expected")}function Uh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function hp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function C8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?PE:BigInt("0x"+t)}const k8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Pj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Bh(t){if(RE(t),k8)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Pj[t[n]];return e}const Ji={_0:48,_9:57,A:65,F:70,a:97,f:102};function UA(t){if(t>=Ji._0&&t<=Ji._9)return t-Ji._0;if(t>=Ji.A&&t<=Ji.F)return t-(Ji.A-10);if(t>=Ji.a&&t<=Ji.f)return t-(Ji.a-10)}function Rm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(k8)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=UA(t.charCodeAt(i)),o=UA(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function Ac(t){return C8(Bh(t))}function O8(t){return RE(t),C8(Bh(Uint8Array.from(t).reverse()))}function If(t,e){return Rm(t.toString(16).padStart(e*2,"0"))}function P8(t,e){return If(t,e).reverse()}function Ts(t,e,n){let r;if(typeof e=="string")try{r=Rm(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Sf(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function $m(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];RE(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const I0=t=>typeof t=="bigint"&&PE<=t;function $E(t,e,n){return I0(t)&&I0(e)&&I0(n)&&e<=t&&t<n}function iu(t,e,n,r){if(!$E(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Rj(t){let e;for(e=0;t>PE;t>>=Pv,e+=1);return e}const ey=t=>(Pv<<BigInt(t))-Pv,T0=t=>new Uint8Array(t),BA=t=>Uint8Array.from(t);function $j(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=T0(t),s=T0(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...d)=>n(s,r,...d),c=(d=T0(0))=>{s=o(BA([0]),d),r=o(),d.length!==0&&(s=o(BA([1]),d),r=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=o();const f=r.slice();h.push(f),d+=r.length}return $m(...h)};return(d,h)=>{a(),c(d);let f;for(;!(f=h(l()));)c();return a(),f}}const Nj={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Sf(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ty(t,e,n={}){const r=(s,i,a)=>{const o=Nj[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!o(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function MA(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Dj="0.1.1";function Uj(){return Dj}let rt=class oa extends Error{static setStaticOptions(e){oa.prototype.docsOrigin=e.docsOrigin,oa.prototype.showVersion=e.showVersion,oa.prototype.version=e.version}constructor(e,n={}){const r=(()=>{if(n.cause instanceof oa){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof oa&&n.cause.docsPath||n.docsPath,i=n.docsOrigin??oa.prototype.docsOrigin,a=`${i}${s??""}`,o=!!(n.version??oa.prototype.showVersion),c=n.version??oa.prototype.version,l=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||o?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0,o?`Version: ${c}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(l,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=a,this.docsOrigin=i,this.docsPath=s,this.shortMessage=e,this.showVersion=o,this.version=c}walk(e){return R8(this,e)}};Object.defineProperty(rt,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${Uj()}`}});rt.setStaticOptions(rt.defaultStaticOptions);function R8(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?R8(t.cause,e):e?null:t}function Tf(t,e){if(Vl(t)>e)throw new Qj({givenSize:Vl(t),maxSize:e})}const Xi={zero:48,nine:57,A:65,F:70,a:97,f:102};function LA(t){if(t>=Xi.zero&&t<=Xi.nine)return t-Xi.zero;if(t>=Xi.A&&t<=Xi.F)return t-(Xi.A-10);if(t>=Xi.a&&t<=Xi.f)return t-(Xi.a-10)}function Bj(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new ez({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const a=n==="right";s[a?i:r-i-1]=t[a?i:t.length-i-1]}return s}function $8(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function ny(t,e){if(ds(t)>e)throw new az({givenSize:ds(t),maxSize:e})}function Mj(t,e){if(typeof e=="number"&&e>0&&e>ds(t)-1)throw new z8({offset:e,position:"start",size:ds(t)})}function Lj(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ds(t)!==n-e)throw new z8({offset:n,position:"end",size:ds(t)})}function N8(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new oz({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Fj="#__bigint";function D8(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Fj:s,n)}const jj=new TextDecoder,zj=new TextEncoder;function Wj(t){return t instanceof Uint8Array?t:typeof t=="string"?U8(t):qj(t)}function qj(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function U8(t,e={}){const{size:n}=e;let r=t;n&&(ny(t,n),r=Dc(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const l=LA(s.charCodeAt(c++)),u=LA(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new rt(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[o]=l<<4|u}return a}function Vj(t,e={}){const{size:n}=e,r=zj.encode(t);return typeof n=="number"?(Tf(r,n),Hj(r,n)):r}function Hj(t,e){return Bj(t,{dir:"right",size:e})}function Vl(t){return t.length}function Kj(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function Gj(t,e={}){const{size:n}=e;typeof n<"u"&&Tf(t,n);const r=oi(t,e);return L8(r,e)}function Yj(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(Tf(r,n),r=B8(r)),r.length>1||r[0]>1)throw new Xj(r);return!!r[0]}function Ta(t,e={}){const{size:n}=e;typeof n<"u"&&Tf(t,n);const r=oi(t,e);return F8(r,e)}function Zj(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(Tf(r,n),r=Jj(r)),jj.decode(r)}function B8(t){return $8(t,{dir:"left"})}function Jj(t){return $8(t,{dir:"right"})}class Xj extends rt{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Qj=class extends rt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},ez=class extends rt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const tz=new TextEncoder,nz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function rz(t,e={}){const{strict:n=!1}=e;if(!t)throw new FA(t);if(typeof t!="string")throw new FA(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new jA(t);if(!t.startsWith("0x"))throw new jA(t)}function ai(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function sz(t){return t instanceof Uint8Array?oi(t):Array.isArray(t)?oi(new Uint8Array(t)):t}function M8(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ny(n,e.size),Nc(n,e.size)):n}function oi(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=nz[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ny(r,e.size),Dc(r,e.size)):r}function gr(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const l=typeof t=="bigint"?"n":"";throw new j8({max:i?`${i}${l}`:void 0,min:`${a}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?Nc(c,r):c}function NE(t,e={}){return oi(tz.encode(t),e)}function Nc(t,e){return N8(t,{dir:"left",size:e})}function Dc(t,e){return N8(t,{dir:"right",size:e})}function Ni(t,e,n,r={}){const{strict:s}=r;Mj(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Lj(i,e,n),i}function ds(t){return Math.ceil((t.length-2)/2)}function L8(t,e={}){const{signed:n}=e;e.size&&ny(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,a=i>>1n;return r<=a?r:r-i-1n}function F8(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:L8(t,e))}function iz(t,e={}){const{strict:n=!1}=e;try{return rz(t,{strict:n}),!0}catch{return!1}}let j8=class extends rt{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},FA=class extends rt{constructor(e){super(`Value \`${typeof e=="object"?D8(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},jA=class extends rt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},az=class extends rt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},z8=class extends rt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},oz=class extends rt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function cz(t){return{address:t.address,amount:gr(t.amount),index:gr(t.index),validatorIndex:gr(t.validatorIndex)}}function W8(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:gr(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:gr(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:gr(t.gasLimit)},...typeof t.number=="bigint"&&{number:gr(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:gr(t.prevRandao)},...typeof t.time=="bigint"&&{time:gr(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(cz)}}}const Nm=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Rv=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],q8=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],V8=[...q8,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],lz=[...q8,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],zA=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],WA=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],H8=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],qA=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],fCe=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],uz="0x82ad56cb",K8="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",dz="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",hz="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",DE="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class $v extends re{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class fz extends re{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class pz extends re{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class G8 extends re{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Cf extends re{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const C0="/docs/contract/encodeDeployData";function ry(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new k3({docsPath:C0});if(!("inputs"in s))throw new km({docsPath:C0});if(!s.inputs||s.inputs.length===0)throw new km({docsPath:C0});const i=jo(s.inputs,n);return Ms([r,i])}function Gu({blockNumber:t,chain:e,contract:n}){const r=e?.contracts?.[n];if(!r)throw new $v({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new $v({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Y8(t,{docsPath:e,...n}){const r=(()=>{const s=Jg(t,n);return s instanceof _f?t:s})();return new i8(r,{docsPath:e,...n})}function UE(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const k0=new Map;function Z8({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();a();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p?.([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p?.(h)}})},a=()=>k0.delete(e),o=()=>c().map(({args:u})=>u),c=()=>k0.get(e)||[],l=u=>k0.set(e,[...c(),u]);return{flush:a,async schedule(u){const{promise:d,resolve:h,reject:f}=UE();return n?.([...o(),u])&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function sy(t,e){const{account:n=t.account,authorizationList:r,batch:s=!!t.batch?.multicall,blockNumber:i,blockTag:a=t.experimental_blockTag??"latest",accessList:o,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:_,maxPriorityFeePerGas:A,nonce:w,to:y,value:E,stateOverride:b,...S}=e,$=n?Ut(n):void 0;if(u&&(h||f))throw new re("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&y)throw new re("Cannot provide both `code` & `to` as parameters.");const P=u&&d,C=h&&f&&y&&d,B=P||C,k=P?J8({code:u,data:d}):C?yz({data:d,factory:h,factoryData:f,to:y}):d;try{Vi(e);const L=(typeof i=="bigint"?he(i):void 0)||a,v=l?W8(l):void 0,x=wE(b),O=t.chain?.formatters?.transactionRequest?.format,I=(O||Wa)({...Hu(S,{format:O}),accessList:o,account:$,authorizationList:r,blobs:c,data:k,gas:p,gasPrice:m,maxFeePerBlobGas:g,maxFeePerGas:_,maxPriorityFeePerGas:A,nonce:w,to:B?void 0:y,value:E},"call");if(s&&mz({request:I})&&!x&&!v)try{return await gz(t,{...I,blockNumber:i,blockTag:a})}catch(q){if(!(q instanceof G8)&&!(q instanceof $v))throw q}const F=(()=>{const q=[I,L];return x&&v?[...q,x,v]:x?[...q,x]:v?[...q,{},v]:q})(),V=await t.request({method:"eth_call",params:F});return V==="0x"?{data:void 0}:{data:V}}catch(D){const L=wz(D),{offchainLookup:v,offchainLookupSignature:x}=await xe(async()=>{const{offchainLookup:O,offchainLookupSignature:U}=await import("./ccip.DE0xvdNq.js");return{offchainLookup:O,offchainLookupSignature:U}},__vite__mapDeps([0,1]));if(t.ccipRead!==!1&&L?.slice(0,10)===x&&y)return{data:await v(t,{data:L,to:y})};throw B&&L?.slice(0,10)==="0x101bb98d"?new XF({factory:h}):Y8(D,{...e,account:$,chain:t.chain})}}function mz({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(uz)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function gz(t,e){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:a=t.experimental_blockTag??"latest",data:o,to:c}=e,l=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Gu({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new G8})(),d=(typeof i=="bigint"?he(i):void 0)||a,{schedule:h}=Z8({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(m){return m.reduce((_,{data:A})=>_+(A.length-2),0)>n*2},fn:async m=>{const g=m.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),_=xr({abi:Nm,args:[g],functionName:"aggregate3"}),A=await t.request({method:"eth_call",params:[{...l===null?{data:J8({code:DE,data:_})}:{to:l,data:_}},d]});return el({abi:Nm,args:[g],functionName:"aggregate3",data:A||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new Yg({data:f});return f==="0x"?{data:void 0}:{data:f}}function J8(t){const{code:e,data:n}=t;return ry({abi:I3(["constructor(bytes, bytes)"]),bytecode:K8,args:[e,n]})}function yz(t){const{data:e,factory:n,factoryData:r,to:s}=t;return ry({abi:I3(["constructor(address, bytes, address, bytes)"]),bytecode:dz,args:[s,e,n,r]})}function wz(t){if(!(t instanceof re))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function ci(t,e){const{abi:n,address:r,args:s,functionName:i,...a}=e,o=xr({abi:n,args:s,functionName:i});try{const{data:c}=await Ae(t,sy,"call")({...a,data:o,to:r});return el({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Rc(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function bz(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:a=typeof t.dataSuffix=="string"?t.dataSuffix:t.dataSuffix?.value,...o}=e,c=o.account?Ut(o.account):t.account,l=xr({abi:n,args:s,functionName:i});try{const{data:u}=await Ae(t,sy,"call")({batch:!1,data:`${l}${a?a.replace("0x",""):""}`,to:r,...o,account:c}),d=el({abi:n,args:s,functionName:i,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:a,functionName:i,...o,account:c}}}catch(u){throw Rc(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}const O0=new Map,VA=new Map;let vz=0;function Da(t,e,n){const r=++vz,s=()=>O0.get(t)||[],i=()=>{const u=s();O0.set(t,u.filter(d=>d.id!==r))},a=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=VA.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},o=s();if(O0.set(t,[...o,{id:r,fns:e}]),o&&o.length>0)return a;const c={};for(const u in e)c[u]=((...d)=>{const h=s();if(h.length!==0)for(const f of h)f.fns[u]?.(...d)});const l=n(c);return typeof l=="function"&&VA.set(t,l),a}async function Nv(t){return new Promise(e=>setTimeout(e,t))}function Yu(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let o;e&&(o=await t({unpoll:i}));const c=await n?.(o)??r;await Nv(c);const l=async()=>{s&&(await t({unpoll:i}),await Nv(r),l())};l()})(),i}const _z=new Map,Ez=new Map;function xz(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:a=>i.set(s,a)}),n=e(t,_z),r=e(t,Ez);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Az(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=xz(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const a=await i;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const Sz=t=>`blockNumber.${t}`;async function kf(t,{cacheTime:e=t.cacheTime}={}){const n=await Az(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Sz(t.uid),cacheTime:e});return BigInt(n)}async function iy(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Fi(i));return!("abi"in e)||!e.abi?s:kE({abi:e.abi,logs:s,strict:n})}async function ay(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Iz(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:a,fromBlock:o,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const g=h??!1,_=Tn(["watchContractEvent",r,s,i,t.uid,a,d,g,o]);return Da(_,{onLogs:l,onError:c},A=>{let w;o!==void 0&&(w=o-1n);let y,E=!1;const b=Yu(async()=>{if(!E){try{y=await Ae(t,J3,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:g,fromBlock:o})}catch{}E=!0;return}try{let S;if(y)S=await Ae(t,iy,"getFilterChanges")({filter:y});else{const $=await Ae(t,kf,"getBlockNumber")({});w&&w<$?S=await Ae(t,T8,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:w+1n,toBlock:$,strict:g}):S=[],w=$}if(S.length===0)return;if(i)A.onLogs(S);else for(const $ of S)A.onLogs([$])}catch(S){y&&S instanceof Uo&&(E=!1),A.onError?.(S)}},{emitOnBegin:!0,interval:d});return async()=>{y&&await Ae(t,ay,"uninstallFilter")({filter:y}),b()}})})():(()=>{const g=h??!1,_=Tn(["watchContractEvent",r,s,i,t.uid,a,d,g]);let A=!0,w=()=>A=!1;return Da(_,{onLogs:l,onError:c},y=>((async()=>{try{const E=(()=>{if(t.transport.type==="fallback"){const $=t.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return $?$.value:t.transport}return t.transport})(),b=a?wf({abi:n,eventName:a,args:s}):[],{unsubscribe:S}=await E.subscribe({params:["logs",{address:r,topics:b}],onData($){if(!A)return;const P=$.result;try{const{eventName:C,args:B}=Pm({abi:n,data:P.data,topics:P.topics,strict:h}),k=Fi(P,{args:B,eventName:C});y.onLogs([k])}catch(C){let B,k;if(C instanceof Om||C instanceof cE){if(h)return;B=C.abiItem.name,k=C.abiItem.inputs?.some(L=>!("name"in L&&L.name))}const D=Fi(P,{args:k?[]:{},eventName:B});y.onLogs([D])}},onError($){y.onError?.($)}});w=S,A||w()}catch(E){c?.(E)}})(),()=>w()))})()}class Ki extends re{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Sc extends re{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Of({chain:t,currentChainId:e}){if(!t)throw new pz;if(e!==t.id)throw new fz({chain:t,currentChainId:e})}async function oy(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const P0=new Vu(128);async function Pf(t,e){const{account:n=t.account,assertChainId:r=!0,chain:s=t.chain,accessList:i,authorizationList:a,blobs:o,data:c,dataSuffix:l=typeof t.dataSuffix=="string"?t.dataSuffix:t.dataSuffix?.value,gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,type:g,value:_,...A}=e;if(typeof n>"u")throw new Ki({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Ut(n):null;try{Vi(e);const y=await(async()=>{if(e.to)return e.to;if(e.to!==null&&a&&a.length>0)return await Zg({authorization:a[0]}).catch(()=>{throw new re("`to` is required. Could not infer from `authorizationList`.")})})();if(w?.type==="json-rpc"||w===null){let E;s!==null&&(E=await Ae(t,Hi,"getChainId")({}),r&&Of({currentChainId:E,chain:s}));const b=t.chain?.formatters?.transactionRequest?.format,$=(b||Wa)({...Hu(A,{format:b}),accessList:i,account:w,authorizationList:a,blobs:o,chainId:E,data:c&&ur([c,l??"0x"]),gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,to:y,type:g,value:_},"sendTransaction"),P=P0.get(t.uid),C=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:C,params:[$]},{retryCount:0})}catch(B){if(P===!1)throw B;const k=B;if(k.name==="InvalidInputRpcError"||k.name==="InvalidParamsRpcError"||k.name==="MethodNotFoundRpcError"||k.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[$]},{retryCount:0}).then(D=>(P0.set(t.uid,!0),D)).catch(D=>{const L=D;throw L.name==="MethodNotFoundRpcError"||L.name==="MethodNotSupportedRpcError"?(P0.set(t.uid,!1),k):L});throw k}}if(w?.type==="local"){const E=await Ae(t,Ku,"prepareTransactionRequest")({account:w,accessList:i,authorizationList:a,blobs:o,chain:s,data:c&&ur([c,l??"0x"]),gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,nonceManager:w.nonceManager,parameters:[...TE,"sidecars"],type:g,value:_,...A,to:y}),b=s?.serializers?.transaction,S=await w.signTransaction(E,{serializer:b});return await Ae(t,oy,"sendRawTransaction")({serializedTransaction:S})}throw w?.type==="smart"?new Sc({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Sc({docsPath:"/docs/actions/wallet/sendTransaction",type:w?.type})}catch(y){throw y instanceof Sc?y:xf(y,{...e,account:w,chain:e.chain||void 0})}}async function Eu(t,e){return Eu.internal(t,Pf,"sendTransaction",e)}(function(t){async function e(n,r,s,i){const{abi:a,account:o=n.account,address:c,args:l,functionName:u,...d}=i;if(typeof o>"u")throw new Ki({docsPath:"/docs/contract/writeContract"});const h=o?Ut(o):null,f=xr({abi:a,args:l,functionName:u});try{return await Ae(n,r,s)({data:f,to:c,account:h,...d})}catch(p){throw Rc(p,{abi:a,address:c,args:l,docsPath:"/docs/contract/writeContract",functionName:u,sender:h?.address})}}t.internal=e})(Eu||(Eu={}));class Tz extends re{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}function Dm(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const a=async({count:o=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:o,error:l}):e;u&&await Nv(u),a({count:o+1})};try{const l=await t();s(l)}catch(l){if(o<n&&await r({count:o,error:l}))return c({error:l});i(l)}};a()})}const X8={"0x0":"reverted","0x1":"success"};function BE(t,e){const n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>Fi(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?us(t.transactionIndex):null,status:t.status?X8[t.status]:null,type:t.type?p8[t.type]||t.type:null};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),n}const Q8=Xg("transactionReceipt",BE),eO="0x5792579257925792579257925792579257925792579257925792579257925792",tO=he(0,{size:32});async function nO(t,e){const{account:n=t.account,chain:r=t.chain,experimental_fallback:s,experimental_fallbackDelay:i=32,forceAtomic:a=!1,id:o,version:c="2.0.0"}=e,l=n?Ut(n):null;let u=e.capabilities;t.dataSuffix&&!e.capabilities?.dataSuffix&&(typeof t.dataSuffix=="string"?u={...e.capabilities,dataSuffix:{value:t.dataSuffix,optional:!0}}:u={...e.capabilities,dataSuffix:{value:t.dataSuffix.value,...t.dataSuffix.required?{}:{optional:!0}}});const d=e.calls.map(h=>{const f=h,p=f.abi?xr({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?ur([p,f.dataSuffix]):p,to:f.to,value:f.value?he(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:u,chainId:he(r.id),from:l?.address,id:o,version:c}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(s&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method")||f.details.toLowerCase().includes("feature toggled misconfigured")||f.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(u&&Object.values(u).some(A=>!A.optional)){const A="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new vu(new re(A,{details:A}))}if(a&&d.length>1){const _="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new _u(new re(_,{details:_}))}const p=[];for(const _ of d){const A=Pf(t,{account:l,chain:r,data:_.data,to:_.to,value:_.value?xt(_.value):void 0});p.push(A),i>0&&await new Promise(w=>setTimeout(w,i))}const m=await Promise.allSettled(p);if(m.every(_=>_.status==="rejected"))throw m[0].reason;const g=m.map(_=>_.status==="fulfilled"?_.value:tO);return{id:ur([...g,he(r.id,{size:32}),eO])}}throw xf(h,{...e,account:l,chain:e.chain})}}async function rO(t,e){async function n(u){if(u.endsWith(eO.slice(2))){const h=ls(wv(u,-64,-32)),f=wv(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(g=>tO.slice(2)!==g?t.request({method:"eth_getTransactionReceipt",params:[`0x${g}`]},{dedupe:!0}):void 0)),m=p.some(g=>g===null)?100:p.every(g=>g?.status==="0x1")?200:p.every(g=>g?.status==="0x0")?500:600;return{atomic:!1,chainId:us(h),receipts:p.filter(Boolean),status:m,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:a="2.0.0",...o}=await n(e.id),[c,l]=(()=>{const u=o.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...o,atomic:r,chainId:s?us(s):void 0,receipts:i?.map(u=>({...u,blockNumber:xt(u.blockNumber),gasUsed:xt(u.gasUsed),status:X8[u.status]}))??[],statusCode:l,status:c,version:a}}async function sO(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:m})=>m===200||m>=300,retryCount:i=4,retryDelay:a=({count:m})=>~~(1<<m)*200,timeout:o=6e4,throwOnFailure:c=!1}=e,l=Tn(["waitForCallsStatus",t.uid,n]),{promise:u,resolve:d,reject:h}=UE();let f;const p=Da(l,{resolve:d,reject:h},m=>{const g=Yu(async()=>{const _=A=>{clearTimeout(f),g(),A(),p()};try{const A=await Dm(async()=>{const w=await Ae(t,rO,"getCallsStatus")({id:n});if(c&&w.status==="failure")throw new Tz(w);return w},{retryCount:i,delay:a});if(!s(A))return;_(()=>m.resolve(A))}catch(A){_(()=>m.reject(A))}},{interval:r,emitOnBegin:!0});return g});return f=o?setTimeout(()=>{p(),clearTimeout(f),h(new Cz({id:n}))},o):void 0,await u}class Cz extends re{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Dv=256;let fp=Dv,pp;function iO(t=11){if(!pp||fp+t>Dv*2){pp="",fp=0;for(let e=0;e<Dv;e++)pp+=(256+Math.random()*256|0).toString(16).substring(1)}return pp.substring(fp,fp+++t)}function aO(t){const{batch:e,chain:n,ccipRead:r,dataSuffix:s,key:i="base",name:a="Base Client",type:o="base"}=t,c=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),l=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(l/2),500),4e3),d=t.pollingInterval??u,h=t.cacheTime??d,f=t.account?Ut(t.account):void 0,{config:p,request:m,value:g}=t.transport({account:f,chain:n,pollingInterval:d}),_={...p,...g},A={account:f,batch:e,cacheTime:h,ccipRead:r,chain:n,dataSuffix:s,key:i,name:a,pollingInterval:d,request:m,transport:_,type:o,uid:iO(),...c?{experimental_blockTag:c}:{}};function w(y){return E=>{const b=E(y);for(const $ in A)delete b[$];const S={...y,...b};return Object.assign(S,{extend:w(S)})}}return Object.assign(A,{extend:w(A)})}function ME(t){if(!(t instanceof re))return!1;const e=t.walk(n=>n instanceof _v);return e instanceof _v?e.data?.errorName==="HttpError"||e.data?.errorName==="ResolverError"||e.data?.errorName==="ResolverNotContract"||e.data?.errorName==="ResolverNotFound"||e.data?.errorName==="ReverseAddressMismatch"||e.data?.errorName==="UnsupportedResolverProfile":!1}function kz(t){const{abi:e,data:n}=t,r=Oc(n,0,4),s=e.find(i=>i.type==="function"&&r===yf(ii(i)));if(!s)throw new _7(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?bf(s.inputs,Oc(n,4)):void 0}}const R0="/docs/contract/encodeErrorResult";function HA(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Qc({abi:e,args:r,name:n});if(!c)throw new mA(n,{docsPath:R0});s=c}if(s.type!=="error")throw new mA(void 0,{docsPath:R0});const i=ii(s),a=yf(i);let o="0x";if(r&&r.length>0){if(!s.inputs)throw new w7(s.name,{docsPath:R0});o=jo(s.inputs,r)}return Ms([a,o])}const $0="/docs/contract/encodeFunctionResult";function Oz(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const a=Qc({abi:e,name:n});if(!a)throw new mu(n,{docsPath:$0});s=a}if(s.type!=="function")throw new mu(void 0,{docsPath:$0});if(!s.outputs)throw new R3(s.name,{docsPath:$0});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new $3(r)})();return jo(s.outputs,i)}const cy="x-batch-gateway:true";async function Pz(t){const{data:e,ccipRequest:n}=t,{args:[r]}=kz({abi:Rv,data:e}),s=[],i=[];return await Promise.all(r.map(async(a,o)=>{try{i[o]=a.urls.includes(cy)?await Pz({data:a.data,ccipRequest:n}):await n(a),s[o]=!1}catch(c){s[o]=!0,i[o]=Rz(c)}})),Oz({abi:Rv,functionName:"query",result:[s,i]})}function Rz(t){return t.name==="HttpRequestError"&&t.status?HA({abi:Rv,errorName:"HttpError",args:[t.status,t.shortMessage]}):HA({abi:[X3],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function oO(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return yr(e)?e:null}function Uv(t){let e=new Uint8Array(32).fill(0);if(!t)return vn(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=oO(n[r]),i=s?Sa(s):Mn(xc(n[r]),"bytes");e=Mn(ur([e,i]),"bytes")}return vn(e)}function $z(t){return`[${t.slice(2)}]`}function Nz(t){const e=new Uint8Array(32).fill(0);return t?oO(t)||Mn(xc(t)):vn(e)}function LE(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(xc(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let a=xc(s[i]);a.byteLength>255&&(a=xc($z(Nz(s[i])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Dz(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:a,strict:o}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Gu({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c?.ensTlds;if(u&&!u.some(h=>i.endsWith(h)))return null;const d=s!=null?[Uv(i),BigInt(s)]:[Uv(i)];try{const h=xr({abi:WA,functionName:"addr",args:d}),f={address:l,abi:V8,functionName:"resolveWithGateways",args:[Ye(LE(i)),h,a??[cy]],blockNumber:n,blockTag:r},m=await Ae(t,ci,"readContract")(f);if(m[0]==="0x")return null;const g=el({abi:WA,args:d,functionName:"addr",data:m[0]});return g==="0x"||ls(g)==="0x00"?null:g}catch(h){if(o)throw h;if(ME(h))return null;throw h}}class Uz extends re{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class ld extends re{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class FE extends re{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Bz extends re{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Mz=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Lz=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Fz=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jz=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function zz(t){try{const e=await fetch(t,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function KA(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function cO({uri:t,gatewayUrls:e}){const n=Fz.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=KA(e?.ipfs,"https://ipfs.io"),s=KA(e?.arweave,"https://arweave.net"),i=t.match(Mz),{protocol:a,subpath:o,target:c,subtarget:l=""}=i?.groups||{},u=a==="ipns:/"||o==="ipns/",d=a==="ipfs:/"||o==="ipfs/"||Lz.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e?.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(jz,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new FE({uri:t})}function lO(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Uz({data:t});return t.image||t.image_url||t.image_data}async function Wz({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await jE({gatewayUrls:t,uri:lO(n)})}catch{throw new FE({uri:e})}}async function jE({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=cO({uri:e,gatewayUrls:t});if(r||await zz(n))return n;throw new FE({uri:e})}function qz(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,a]=n.split(":"),[o,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new ld({reason:"Only EIP-155 supported"});if(!a)throw new ld({reason:"Chain ID not found"});if(!c)throw new ld({reason:"Contract address not found"});if(!s)throw new ld({reason:"Token ID not found"});if(!o)throw new ld({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a,10),namespace:o.toLowerCase(),contractAddress:c,tokenID:s}}async function Vz(t,{nft:e}){if(e.namespace==="erc721")return ci(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return ci(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Bz({namespace:e.namespace})}async function Hz(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Kz(t,{gatewayUrls:e,record:n}):jE({uri:n,gatewayUrls:e})}async function Kz(t,{gatewayUrls:e,record:n}){const r=qz(n),s=await Vz(t,{nft:r}),{uri:i,isOnChain:a,isEncoded:o}=cO({uri:s,gatewayUrls:e});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=o?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return jE({uri:lO(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Wz({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function uO(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:a,strict:o}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Gu({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c?.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:V8,args:[Ye(LE(i)),xr({abi:zA,functionName:"text",args:[Uv(i),s]}),a??[cy]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},f=await Ae(t,ci,"readContract")(d);if(f[0]==="0x")return null;const p=el({abi:zA,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(o)throw d;if(ME(d))return null;throw d}}async function Gz(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:a,universalResolverAddress:o}){const c=await Ae(t,uO,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:o,gatewayUrls:i,strict:a});if(!c)return null;try{return await Hz(t,{record:c,gatewayUrls:r})}catch{return null}}async function Yz(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:a,strict:o}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Gu({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const u={address:l,abi:lz,args:[n,i,a??[cy]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=Ae(t,ci,"readContract"),[h]=await d(u);return h||null}catch(u){if(o)throw u;if(ME(u))return null;throw u}}async function Zz(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,a=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Gu({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),o=i?.ensTlds;if(o&&!o.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${o?.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await Ae(t,ci,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ye(LE(s))],blockNumber:n,blockTag:r});return c}async function dO(t,e){const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,m=n?Ut(n):void 0;try{Vi(e);const _=(typeof r=="bigint"?he(r):void 0)||s,A=t.chain?.formatters?.transactionRequest?.format,y=(A||Wa)({...Hu(p,{format:A}),account:m,blobs:i,data:a,gas:o,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f},"createAccessList"),E=await t.request({method:"eth_createAccessList",params:[y,_]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(g){throw Y8(g,{...e,account:m,chain:t.chain})}}async function Jz(t){const e=Gg(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function hO(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:a,toBlock:o}={}){const c=s??(r?[r]:void 0),l=Gg(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>wf({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?he(i):i,toBlock:typeof o=="bigint"?he(o):o,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!a,toBlock:o,type:"event"}}async function fO(t){const e=Gg(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Xz(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?he(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Qz(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function eW(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?he(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),us(i)}async function Bv(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?he(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class tW extends re{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function nW(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,a,o,c,l,u,d]=await Ae(t,ci,"readContract")({abi:rW,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:o,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const a=i;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new tW({address:n}):a}}const rW=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function sW(t){return{baseFeePerGas:t.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:t.reward?.map(e=>e.map(n=>BigInt(n)))}}async function iW(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?he(n):void 0,a=await t.request({method:"eth_feeHistory",params:[he(e),i||r,s]},{dedupe:!!i});return sW(a)}async function aW(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Fi(i));return e.abi?kE({abi:e.abi,logs:s,strict:n}):s}function oW(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Dt(s))throw new bn({address:s});if(r<0)throw new Cf({chainId:r})}zE(t)}function cW(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new A8;for(const n of e){const r=Jt(n),s=us(Oc(n,0,1));if(r!==32)throw new Sj({hash:n,size:r});if(s!==x8)throw new Ij({hash:n,version:s})}}zE(t)}function zE(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new Cf({chainId:e});if(s&&!Dt(s))throw new bn({address:s});if(r&&r>Qg)throw new $c({maxFeePerGas:r});if(n&&r&&n>r)throw new Dh({maxFeePerGas:r,maxPriorityFeePerGas:n})}function lW(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new Cf({chainId:e});if(i&&!Dt(i))throw new bn({address:i});if(n||s)throw new re("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Qg)throw new $c({maxFeePerGas:r})}function uW(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Dt(i))throw new bn({address:i});if(typeof e<"u"&&e<=0)throw new Cf({chainId:e});if(n||s)throw new re("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Qg)throw new $c({maxFeePerGas:r})}function ly(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new KF({storageKey:s[i]});if(!Dt(r,{strict:!1}))throw new bn({address:r});e.push([r,s])}return e}function WE(t,e){const n=I8(t);return n==="eip1559"?fW(t,e):n==="eip2930"?pW(t,e):n==="eip4844"?hW(t,e):n==="eip7702"?dW(t,e):mW(t,e)}function dW(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:a,value:o,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;oW(t);const h=ly(u),f=gW(n);return Ms(["0x04",Na([he(r),i?he(i):"0x",l?he(l):"0x",c?he(c):"0x",s?he(s):"0x",a??"0x",o?he(o):"0x",d??"0x",h,f,...Rf(t,e)])])}function hW(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerBlobGas:o,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;cW(t);let h=t.blobVersionedHashes,f=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof f>"u")){const w=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(b=>vn(b)),y=t.kzg,E=xE({blobs:w,kzg:y});if(typeof h>"u"&&(h=v8({commitments:E})),typeof f>"u"){const b=AE({blobs:w,commitments:E,kzg:y});f=S8({blobs:w,commitments:E,proofs:b})}}const p=ly(u),m=[he(n),s?he(s):"0x",l?he(l):"0x",c?he(c):"0x",r?he(r):"0x",i??"0x",a?he(a):"0x",d??"0x",p,o?he(o):"0x",h??[],...Rf(t,e)],g=[],_=[],A=[];if(f)for(let w=0;w<f.length;w++){const{blob:y,commitment:E,proof:b}=f[w];g.push(y),_.push(E),A.push(b)}return Ms(["0x03",Na(f?[m,g,_,A]:m)])}function fW(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,accessList:l,data:u}=t;zE(t);const d=ly(l),h=[he(n),s?he(s):"0x",c?he(c):"0x",o?he(o):"0x",r?he(r):"0x",i??"0x",a?he(a):"0x",u??"0x",d,...Rf(t,e)];return Ms(["0x02",Na(h)])}function pW(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:a,value:o,accessList:c,gasPrice:l}=t;lW(t);const u=ly(c),d=[he(n),i?he(i):"0x",l?he(l):"0x",r?he(r):"0x",a??"0x",o?he(o):"0x",s??"0x",u,...Rf(t,e)];return Ms(["0x01",Na(d)])}function mW(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:a,value:o,gasPrice:c}=t;uW(t);let l=[i?he(i):"0x",c?he(c):"0x",r?he(r):"0x",a??"0x",o?he(o):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new VF({v:e.v});return f})(),d=ls(e.r),h=ls(e.s);l=[...l,he(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else n>0&&(l=[...l,he(n),"0x","0x"]);return Na(l)}function Rf(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=ls(n.r),a=ls(n.s);return[typeof s=="number"?s?he(1):"0x":r===0n?"0x":r===1n?he(1):r===27n?"0x":he(1),i==="0x00"?"0x":i,a==="0x00"?"0x":a]}function gW(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,a=n.address;e.push([r?Ye(r):"0x",a,s?Ye(s):"0x",...Rf({},i)])}return e}async function yW({address:t,authorization:e,signature:n}){return Af(Gn(t),await Zg({authorization:e,signature:n}))}const mp=new Vu(8192);function wW(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(mp.get(n))return mp.get(n);const r=t().finally(()=>mp.delete(n));return mp.set(n,r),r}function bW(t,e={}){return async(n,r={})=>{const{dedupe:s=!1,methods:i,retryDelay:a=150,retryCount:o=3,uid:c}={...e,...r},{method:l}=n;if(i?.exclude?.includes(l))throw new fc(new Error("method not supported"),{method:l});if(i?.include&&!i.include.includes(l))throw new fc(new Error("method not supported"),{method:l});const u=s?gu(`${c}.${Tn(n)}`):void 0;return wW(()=>Dm(async()=>{try{return await t(n)}catch(d){const h=d;switch(h.code){case yh.code:throw new yh(h);case wh.code:throw new wh(h);case bh.code:throw new bh(h,{method:n.method});case vh.code:throw new vh(h);case Pc.code:throw new Pc(h);case Uo.code:throw new Uo(h);case _h.code:throw new _h(h);case Eh.code:throw new Eh(h);case xh.code:throw new xh(h);case fc.code:throw new fc(h,{method:n.method});case bu.code:throw new bu(h);case Ah.code:throw new Ah(h);case su.code:throw new su(h);case Sh.code:throw new Sh(h);case Ih.code:throw new Ih(h);case Th.code:throw new Th(h);case Ch.code:throw new Ch(h);case kh.code:throw new kh(h);case vu.code:throw new vu(h);case Oh.code:throw new Oh(h);case Ph.code:throw new Ph(h);case Rh.code:throw new Rh(h);case $h.code:throw new $h(h);case Nh.code:throw new Nh(h);case _u.code:throw new _u(h);case 5e3:throw new su(h);default:throw d instanceof re?d:new ej(h)}}},{delay:({count:d,error:h})=>{if(h&&h instanceof eh){const f=h?.headers?.get("Retry-After");if(f?.match(/\d/))return Number.parseInt(f,10)*1e3}return~~(1<<d)*a},retryCount:o,shouldRetry:({error:d})=>vW(d)}),{enabled:s,id:u})}}function vW(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===bu.code||t.code===Pc.code:t instanceof eh&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Jn(t){const e={formatters:void 0,fees:void 0,serializers:void 0,...t};function n(r){return s=>{const i=typeof s=="function"?s(r):s,a={...r,...i};return Object.assign(a,{extend:n(a)})}}return Object.assign(e,{extend:n(e)})}function _W(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout(()=>{r&&o.abort()},n)),s(await t({signal:o?.signal||null}))}catch(o){o?.name==="AbortError"&&i(e),i(o)}finally{clearTimeout(a)}})()})}function EW(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const GA=EW();function xW(t,e={}){const{url:n,headers:r}=AW(t);return{async request(s){const{body:i,fetchFn:a=e.fetchFn??fetch,onRequest:o=e.onRequest,onResponse:c=e.onResponse,timeout:l=e.timeout??1e4}=s,u={...e.fetchOptions??{},...s.fetchOptions??{}},{headers:d,method:h,signal:f}=u;try{const p=await _W(async({signal:g})=>{const _={...u,body:Array.isArray(i)?Tn(i.map(E=>({jsonrpc:"2.0",id:E.id??GA.take(),...E}))):Tn({jsonrpc:"2.0",id:i.id??GA.take(),...i}),headers:{...r,"Content-Type":"application/json",...d},method:h||"POST",signal:f||(l>0?g:null)},A=new Request(n,_),w=await o?.(A,_)??{..._,url:n};return await a(w.url??n,w)},{errorInstance:new kA({body:i,url:n}),timeout:l,signal:!0});c&&await c(p);let m;if(p.headers.get("Content-Type")?.startsWith("application/json"))m=await p.json();else{m=await p.text();try{m=JSON.parse(m||"{}")}catch(g){if(p.ok)throw g;m={error:m}}}if(!p.ok)throw new eh({body:i,details:Tn(m.error)||p.statusText,headers:p.headers,status:p.status,url:n});return m}catch(p){throw p instanceof eh||p instanceof kA?p:new eh({body:i,cause:p,url:n})}}}}function AW(t){try{const e=new URL(t),n=(()=>{if(e.username){const r=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(r)}`}}}})();return{url:e.toString(),...n}}catch{return{url:t}}}const SW=`Ethereum Signed Message:
`;function IW(t){const e=typeof t=="string"?gu(t):typeof t.raw=="string"?t.raw:vn(t.raw),n=gu(`${SW}${Jt(e)}`);return ur([n,e])}function qE(t,e){return Mn(IW(t),e)}class TW extends re{constructor({domain:e}){super(`Invalid domain "${Tn(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class CW extends re{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class kW extends re{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function OW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},a=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},o=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Tn({domain:a,message:o,primaryType:r,types:s})}function pO(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(a,o)=>{for(const c of a){const{name:l,type:u}=c,d=o[l],h=u.match(Y3);if(h&&(typeof d=="number"||typeof d=="bigint")){const[m,g,_]=h;he(d,{signed:g==="int",size:Number.parseInt(_,10)/8})}if(u==="address"&&typeof d=="string"&&!Dt(d))throw new bn({address:d});const f=u.match(mF);if(f){const[m,g]=f;if(g&&Jt(d)!==Number.parseInt(g,10))throw new x7({expectedSize:Number.parseInt(g,10),givenSize:Jt(d)})}const p=s[u];p&&(PW(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new TW({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new CW({primaryType:r,types:s})}function mO({domain:t}){return[typeof t?.name=="string"&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},(typeof t?.chainId=="number"||typeof t?.chainId=="bigint")&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function PW(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new kW({type:t})}function gO(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:mO({domain:e}),...t.types};pO({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(RW({domain:e,types:s})),r!=="EIP712Domain"&&i.push(yO({data:n,primaryType:r,types:s})),Mn(ur(i))}function RW({domain:t,types:e}){return yO({data:t,primaryType:"EIP712Domain",types:e})}function yO({data:t,primaryType:e,types:n}){const r=wO({data:t,primaryType:e,types:n});return Mn(r)}function wO({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[$W({primaryType:e,types:n})];for(const i of n[e]){const[a,o]=vO({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(a),s.push(o)}return jo(r,s)}function $W({primaryType:t,types:e}){const n=Ye(NW({primaryType:t,types:e}));return Mn(n)}function NW({primaryType:t,types:e}){let n="";const r=bO({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return n}function bO({primaryType:t,types:e},n=new Set){const s=t.match(/^\w*/u)?.[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])bO({primaryType:i.type,types:e},n);return n}function vO({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Mn(wO({data:r,primaryType:n,types:t}))];if(n==="bytes")return[{type:"bytes32"},Mn(r)];if(n==="string")return[{type:"bytes32"},Mn(Ye(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>vO({name:e,type:s,types:t,value:a}));return[{type:"bytes32"},Mn(jo(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}const pCe="0x6492649264926492649264926492649264926492649264926492649264926492",YA="0x0000000000000000000000000000000000000000000000000000000000000000";let DW=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const UW={checksum:new DW(8192)},N0=UW.checksum;function _O(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=q3(Wj(t));return n==="Bytes"?r:oi(r)}const BW=/^0x[a-fA-F0-9]{40}$/;function uy(t,e={}){const{strict:n=!0}=e;if(!BW.test(t))throw new ZA({address:t,cause:new MW});if(n){if(t.toLowerCase()===t)return;if(EO(t)!==t)throw new ZA({address:t,cause:new LW})}}function EO(t){if(N0.has(t))return N0.get(t);uy(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=_O(Vj(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return N0.set(t,s),s}function Mv(t,e={}){const{strict:n=!0}=e??{};try{return uy(t,{strict:n}),!0}catch{return!1}}let ZA=class extends rt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},MW=class extends rt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},LW=class extends rt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};const FW=/^(.*)\[([0-9]*)\]$/,jW=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,xO=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,JA=2n**256n-1n;function au(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=KE(e.type);if(i){const[a,o]=i;return WW(t,{...e,type:o},{checksumAddress:r,length:a,staticPosition:s})}if(e.type==="tuple")return KW(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return zW(t,{checksum:r});if(e.type==="bool")return qW(t);if(e.type.startsWith("bytes"))return VW(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return HW(t,e);if(e.type==="string")return GW(t,{staticPosition:s});throw new YE(e.type)}const XA=32,Lv=32;function zW(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?EO(i):i)(oi(Kj(r,-20))),32]}function WW(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=Ta(t.readBytes(Lv)),l=i+c,u=l+XA;t.setPosition(l);const d=Ta(t.readBytes(XA)),h=Mh(e);let f=0;const p=[];for(let m=0;m<d;++m){t.setPosition(u+(h?m*32:f));const[g,_]=au(t,e,{checksumAddress:r,staticPosition:u});f+=_,p.push(g)}return t.setPosition(i+32),[p,32]}if(Mh(e)){const c=Ta(t.readBytes(Lv)),l=i+c,u=[];for(let d=0;d<s;++d){t.setPosition(l+d*32);const[h]=au(t,e,{checksumAddress:r,staticPosition:l});u.push(h)}return t.setPosition(i+32),[u,32]}let a=0;const o=[];for(let c=0;c<s;++c){const[l,u]=au(t,e,{checksumAddress:r,staticPosition:i+a});a+=u,o.push(l)}return[o,a]}function qW(t){return[Yj(t.readBytes(32),{size:32}),32]}function VW(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const a=Ta(t.readBytes(32));t.setPosition(n+a);const o=Ta(t.readBytes(32));if(o===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(o);return t.setPosition(n+32),[oi(c),32]}return[oi(t.readBytes(Number.parseInt(s,10),32)),32]}function HW(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?Gj(s,{signed:n}):Ta(s,{signed:n}),32]}function KW(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),a=i?[]:{};let o=0;if(Mh(e)){const c=Ta(t.readBytes(Lv)),l=s+c;for(let u=0;u<e.components.length;++u){const d=e.components[u];t.setPosition(l+o);const[h,f]=au(t,d,{checksumAddress:r,staticPosition:l});o+=f,a[i?u:d?.name]=h}return t.setPosition(s+32),[a,32]}for(let c=0;c<e.components.length;++c){const l=e.components[c],[u,d]=au(t,l,{checksumAddress:r,staticPosition:s});a[i?c:l?.name]=u,o+=d}return[a,o]}function GW(t,{staticPosition:e}){const n=Ta(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ta(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),a=Zj(B8(i));return t.setPosition(e+32),[a,32]}function YW({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(VE({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function VE({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=KE(r.type);if(s){const[i,a]=s;return JW(n,{checksumAddress:t,length:i,parameter:{...r,type:a}})}if(r.type==="tuple")return nq(n,{checksumAddress:t,parameter:r});if(r.type==="address")return ZW(n,{checksum:t});if(r.type==="bool")return QW(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,a="256"]=xO.exec(r.type)??[];return eq(n,{signed:i,size:Number(a)})}if(r.type.startsWith("bytes"))return XW(n,{type:r.type});if(r.type==="string")return tq(n);throw new YE(r.type)}function HE(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?e+=32:e+=ds(o)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?(n.push(gr(e+s,{size:32})),r.push(o),s+=ds(o)):n.push(o)}return ai(...n,...r)}function ZW(t,e){const{checksum:n=!1}=e;return uy(t,{strict:n}),{dynamic:!1,encoded:Nc(t.toLowerCase())}}function JW(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new dq(t);if(!i&&t.length!==r)throw new uq({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let a=!1;const o=[];for(let c=0;c<t.length;c++){const l=VE({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(a=!0),o.push(l)}if(i||a){const c=HE(o);if(i){const l=gr(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?ai(l,c):l}}if(a)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ai(...o.map(({encoded:c})=>c))}}function XW(t,{type:e}){const[,n]=e.split("bytes"),r=ds(t);if(!n){let s=t;return r%32!==0&&(s=Dc(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:ai(Nc(gr(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new SO({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Dc(t)}}function QW(t){if(typeof t!="boolean")throw new rt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Nc(M8(t))}}function eq(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new j8({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:gr(t,{size:32,signed:e})}}function tq(t){const e=NE(t),n=Math.ceil(ds(e)/32),r=[];for(let s=0;s<n;s++)r.push(Dc(Ni(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:ai(Dc(gr(ds(e),{size:32})),...r)}}function nq(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let a=0;a<r.components.length;a++){const o=r.components[a],c=Array.isArray(t)?a:o.name,l=VE({checksumAddress:n,parameter:o,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?HE(i):ai(...i.map(({encoded:a})=>a))}}function KE(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Mh(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(Mh);const n=KE(t.type);return!!(n&&Mh({...t,type:n[1]}))}const rq={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new aq({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new iq({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new QA({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new QA({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function sq(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(rq);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class QA extends rt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class iq extends rt{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class aq extends rt{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function oq(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?U8(e):e,a=sq(i);if(Vl(i)===0&&t.length>0)throw new lq;if(Vl(i)&&Vl(i)<32)throw new cq({data:typeof e=="string"?e:oi(e),parameters:t,size:Vl(i)});let o=0;const c=r==="Array"?[]:{};for(let l=0;l<t.length;++l){const u=t[l];a.setPosition(o);const[d,h]=au(a,u,{checksumAddress:s,staticPosition:0});o+=h,r==="Array"?c.push(d):c[u.name??l]=d}return c}function GE(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new IO({expectedLength:t.length,givenLength:e.length});const s=YW({checksumAddress:r,parameters:t,values:e}),i=HE(s);return i.length===0?"0x":i}function Fv(t,e){if(t.length!==e.length)throw new IO({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Fv.encode(s,i))}return ai(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return uy(c),Nc(c.toLowerCase(),s?32:0)}if(n==="string")return NE(r);if(n==="bytes")return r;if(n==="bool")return Nc(M8(r),s?32:1);const i=n.match(xO);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u,10)/8;return gr(r,{size:s?32:d,signed:l==="int"})}const a=n.match(jW);if(a){const[c,l]=a;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new SO({expectedSize:Number.parseInt(l,10),value:r});return Dc(r,s?32:0)}const o=n.match(FW);if(o&&Array.isArray(r)){const[c,l]=o,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":ai(...u)}throw new YE(n)}t.encode=e})(Fv||(Fv={}));function AO(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?pA(t):t}class cq extends rt{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Bl(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class lq extends rt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class uq extends rt{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class SO extends rt{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ds(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class IO extends rt{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class dq extends rt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class YE extends rt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}let TO=class extends uE{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,V7(e);const r=Hg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),wu(i)}update(e){return yu(this),this.iHash.update(e),this}digestInto(e){yu(this),kc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CO=(t,e,n)=>new TO(t,e).update(n).digest();CO.create=(t,e)=>new TO(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Br=BigInt(0),br=BigInt(1),pc=BigInt(2),hq=BigInt(3),kO=BigInt(4),OO=BigInt(5),PO=BigInt(8);function $r(t,e){const n=t%e;return n>=Br?n:e+n}function ws(t,e,n){let r=t;for(;e-- >Br;)r*=r,r%=n;return r}function jv(t,e){if(t===Br)throw new Error("invert: expected non-zero number");if(e<=Br)throw new Error("invert: expected positive modulus, got "+e);let n=$r(t,e),r=e,s=Br,i=br;for(;n!==Br;){const o=r/n,c=r%n,l=s-i*o;r=n,n=c,s=i,i=l}if(r!==br)throw new Error("invert: does not exist");return $r(s,e)}function RO(t,e){const n=(t.ORDER+br)/kO,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function fq(t,e){const n=(t.ORDER-OO)/PO,r=t.mul(e,pc),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,pc),s),o=t.mul(i,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function pq(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-br,n=0;for(;e%pc===Br;)e/=pc,n++;let r=pc;const s=ZE(t);for(;eS(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return RO;let i=s.pow(r,e);const a=(e+br)/pc;return function(c,l){if(c.is0(l))return l;if(eS(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,a);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(p++,m=c.sqr(m),p===u)throw new Error("Cannot find square root");const g=br<<BigInt(u-p-1),_=c.pow(d,g);u=p,d=c.sqr(_),h=c.mul(h,d),f=c.mul(f,_)}return f}}function mq(t){return t%kO===hq?RO:t%PO===OO?fq:pq(t)}const gq=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yq(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=gq.reduce((r,s)=>(r[s]="function",r),e);return ty(t,n)}function wq(t,e,n){if(n<Br)throw new Error("invalid exponent, negatives unsupported");if(n===Br)return t.ONE;if(n===br)return e;let r=t.ONE,s=e;for(;n>Br;)n&br&&(r=t.mul(r,s)),s=t.sqr(s),n>>=br;return r}function $O(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}function eS(t,e){const n=(t.ORDER-br)/pc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function NO(t,e){e!==void 0&&mh(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ZE(t,e,n=!1,r={}){if(t<=Br)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=NO(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ey(s),ZERO:Br,ONE:br,create:c=>$r(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Br<=c&&c<t},is0:c=>c===Br,isOdd:c=>(c&br)===br,neg:c=>$r(-c,t),eql:(c,l)=>c===l,sqr:c=>$r(c*c,t),add:(c,l)=>$r(c+l,t),sub:(c,l)=>$r(c-l,t),mul:(c,l)=>$r(c*l,t),pow:(c,l)=>wq(o,c,l),div:(c,l)=>$r(c*jv(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>jv(c,t),sqrt:r.sqrt||(c=>(a||(a=mq(t)),a(o,c))),toBytes:c=>n?P8(c,i):If(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?O8(c):Ac(c)},invertBatch:c=>$O(o,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(o)}function DO(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function UO(t){const e=DO(t);return e+Math.ceil(e/2)}function bq(t,e,n=!1){const r=t.length,s=DO(e),i=UO(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?O8(t):Ac(t),o=$r(a,e-br)+br;return n?P8(o,s):If(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tS=BigInt(0),zv=BigInt(1);function D0(t,e){const n=e.negate();return t?n:e}function BO(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function U0(t,e){BO(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=ey(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function nS(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),c=t>>a;o>r&&(o-=i,c+=zv);const l=e*r,u=l+Math.abs(o)-1,d=o===0,h=o<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function vq(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function _q(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const B0=new WeakMap,MO=new WeakMap;function M0(t){return MO.get(t)||1}function Eq(t,e){return{constTimeNegate:D0,hasPrecomputes(n){return M0(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>tS;)r&zv&&(s=s.add(i)),i=i.double(),r>>=zv;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=U0(r,e),a=[];let o=n,c=o;for(let l=0;l<s;l++){c=o,a.push(c);for(let u=1;u<i;u++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(n,r,s){let i=t.ZERO,a=t.BASE;const o=U0(n,e);for(let c=0;c<o.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=nS(s,c,o);s=l,d?a=a.add(D0(f,r[p])):i=i.add(D0(h,r[u]))}return{p:i,f:a}},wNAFUnsafe(n,r,s,i=t.ZERO){const a=U0(n,e);for(let o=0;o<a.windows&&s!==tS;o++){const{nextN:c,offset:l,isZero:u,isNeg:d}=nS(s,o,a);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return i},getPrecomputes(n,r,s){let i=B0.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&B0.set(r,s(i))),i},wNAFCached(n,r,s){const i=M0(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=M0(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){BO(r,e),MO.set(n,r),B0.delete(n)}}}function xq(t,e,n,r){vq(n,t),_q(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=Rj(BigInt(s));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const l=ey(c),u=new Array(Number(l)+1).fill(a),d=Math.floor((e.BITS-1)/c)*c;let h=a;for(let f=d;f>=0;f-=c){u.fill(a);for(let m=0;m<i;m++){const g=r[m],_=Number(g>>BigInt(f)&l);u[_]=u[_].add(n[m])}let p=a;for(let m=u.length-1,g=a;m>0;m--)g=g.add(u[m]),p=p.add(g);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function LO(t){return yq(t.Fp),ty(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NO(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rS(t){t.lowS!==void 0&&Uh("lowS",t.lowS),t.prehash!==void 0&&Uh("prehash",t.prehash)}function Aq(t){const e=LO(t);ty(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let Sq=class extends Error{constructor(e=""){super(e)}};const pa={Err:Sq,_tlv:{encode:(t,e)=>{const{Err:n}=pa;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=hp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?hp(s.length/2|128):"";return hp(t)+i+s+e},decode(t,e){const{Err:n}=pa;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=pa;if(t<ba)throw new e("integer: negative integers are not allowed");let n=hp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=pa;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ac(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=pa,s=Ts("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=pa,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function L0(t,e){return Bh(If(t,e))}const ba=BigInt(0),Un=BigInt(1);BigInt(2);const F0=BigInt(3),Iq=BigInt(4);function Tq(t){const e=Aq(t),{Fp:n}=e,r=ZE(e.n,e.nBitLength),s=e.toBytes||((w,y,E)=>{const b=y.toAffine();return $m(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(w=>{const y=w.subarray(1),E=n.fromBytes(y.subarray(0,n.BYTES)),b=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:E,y:b}});function a(w){const{a:y,b:E}=e,b=n.sqr(w),S=n.mul(b,w);return n.add(n.add(S,n.mul(w,y)),E)}function o(w,y){const E=n.sqr(y),b=a(w);return n.eql(E,b)}if(!o(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,F0),Iq),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(w){return $E(w,Un,e.n)}function d(w){const{allowedPrivateKeyLengths:y,nByteLength:E,wrapPrivateKey:b,n:S}=e;if(y&&typeof w!="bigint"){if(Sf(w)&&(w=Bh(w)),typeof w!="string"||!y.includes(w.length))throw new Error("invalid private key");w=w.padStart(E*2,"0")}let $;try{$=typeof w=="bigint"?w:Ac(Ts("private key",w,E))}catch{throw new Error("invalid private key, expected hex or "+E+" bytes, got "+typeof w)}return b&&($=$r($,S)),iu("private key",$,Un,S),$}function h(w){if(!(w instanceof m))throw new Error("ProjectivePoint expected")}const f=MA((w,y)=>{const{px:E,py:b,pz:S}=w;if(n.eql(S,n.ONE))return{x:E,y:b};const $=w.is0();y==null&&(y=$?n.ONE:n.inv(S));const P=n.mul(E,y),C=n.mul(b,y),B=n.mul(S,y);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:P,y:C}}),p=MA(w=>{if(w.is0()){if(e.allowInfinityPoint&&!n.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:y,y:E}=w.toAffine();if(!n.isValid(y)||!n.isValid(E))throw new Error("bad point: x or y not FE");if(!o(y,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(y,E,b){if(y==null||!n.isValid(y))throw new Error("x required");if(E==null||!n.isValid(E)||n.is0(E))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");this.px=y,this.py=E,this.pz=b,Object.freeze(this)}static fromAffine(y){const{x:E,y:b}=y||{};if(!y||!n.isValid(E)||!n.isValid(b))throw new Error("invalid affine point");if(y instanceof m)throw new Error("projective point not allowed");const S=$=>n.eql($,n.ZERO);return S(E)&&S(b)?m.ZERO:new m(E,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const E=$O(n,y.map(b=>b.pz));return y.map((b,S)=>b.toAffine(E[S])).map(m.fromAffine)}static fromHex(y){const E=m.fromAffine(i(Ts("pointHex",y)));return E.assertValidity(),E}static fromPrivateKey(y){return m.BASE.multiply(d(y))}static msm(y,E){return xq(m,r,y,E)}_setWindowSize(y){A.setWindowSize(this,y)}assertValidity(){p(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){h(y);const{px:E,py:b,pz:S}=this,{px:$,py:P,pz:C}=y,B=n.eql(n.mul(E,C),n.mul($,S)),k=n.eql(n.mul(b,C),n.mul(P,S));return B&&k}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:E}=e,b=n.mul(E,F0),{px:S,py:$,pz:P}=this;let C=n.ZERO,B=n.ZERO,k=n.ZERO,D=n.mul(S,S),L=n.mul($,$),v=n.mul(P,P),x=n.mul(S,$);return x=n.add(x,x),k=n.mul(S,P),k=n.add(k,k),C=n.mul(y,k),B=n.mul(b,v),B=n.add(C,B),C=n.sub(L,B),B=n.add(L,B),B=n.mul(C,B),C=n.mul(x,C),k=n.mul(b,k),v=n.mul(y,v),x=n.sub(D,v),x=n.mul(y,x),x=n.add(x,k),k=n.add(D,D),D=n.add(k,D),D=n.add(D,v),D=n.mul(D,x),B=n.add(B,D),v=n.mul($,P),v=n.add(v,v),D=n.mul(v,x),C=n.sub(C,D),k=n.mul(v,L),k=n.add(k,k),k=n.add(k,k),new m(C,B,k)}add(y){h(y);const{px:E,py:b,pz:S}=this,{px:$,py:P,pz:C}=y;let B=n.ZERO,k=n.ZERO,D=n.ZERO;const L=e.a,v=n.mul(e.b,F0);let x=n.mul(E,$),O=n.mul(b,P),U=n.mul(S,C),I=n.add(E,b),F=n.add($,P);I=n.mul(I,F),F=n.add(x,O),I=n.sub(I,F),F=n.add(E,S);let V=n.add($,C);return F=n.mul(F,V),V=n.add(x,U),F=n.sub(F,V),V=n.add(b,S),B=n.add(P,C),V=n.mul(V,B),B=n.add(O,U),V=n.sub(V,B),D=n.mul(L,F),B=n.mul(v,U),D=n.add(B,D),B=n.sub(O,D),D=n.add(O,D),k=n.mul(B,D),O=n.add(x,x),O=n.add(O,x),U=n.mul(L,U),F=n.mul(v,F),O=n.add(O,U),U=n.sub(x,U),U=n.mul(L,U),F=n.add(F,U),x=n.mul(O,F),k=n.add(k,x),x=n.mul(V,F),B=n.mul(I,B),B=n.sub(B,x),x=n.mul(I,O),D=n.mul(V,D),D=n.add(D,x),new m(B,k,D)}subtract(y){return this.add(y.negate())}is0(){return this.equals(m.ZERO)}wNAF(y){return A.wNAFCached(this,y,m.normalizeZ)}multiplyUnsafe(y){const{endo:E,n:b}=e;iu("scalar",y,ba,b);const S=m.ZERO;if(y===ba)return S;if(this.is0()||y===Un)return this;if(!E||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,y,m.normalizeZ);let{k1neg:$,k1:P,k2neg:C,k2:B}=E.splitScalar(y),k=S,D=S,L=this;for(;P>ba||B>ba;)P&Un&&(k=k.add(L)),B&Un&&(D=D.add(L)),L=L.double(),P>>=Un,B>>=Un;return $&&(k=k.negate()),C&&(D=D.negate()),D=new m(n.mul(D.px,E.beta),D.py,D.pz),k.add(D)}multiply(y){const{endo:E,n:b}=e;iu("scalar",y,Un,b);let S,$;if(E){const{k1neg:P,k1:C,k2neg:B,k2:k}=E.splitScalar(y);let{p:D,f:L}=this.wNAF(C),{p:v,f:x}=this.wNAF(k);D=A.constTimeNegate(P,D),v=A.constTimeNegate(B,v),v=new m(n.mul(v.px,E.beta),v.py,v.pz),S=D.add(v),$=L.add(x)}else{const{p:P,f:C}=this.wNAF(y);S=P,$=C}return m.normalizeZ([S,$])[0]}multiplyAndAddUnsafe(y,E,b){const S=m.BASE,$=(C,B)=>B===ba||B===Un||!C.equals(S)?C.multiplyUnsafe(B):C.multiply(B),P=$(this,E).add($(y,b));return P.is0()?void 0:P}toAffine(y){return f(this,y)}isTorsionFree(){const{h:y,isTorsionFree:E}=e;if(y===Un)return!0;if(E)return E(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:E}=e;return y===Un?this:E?E(m,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return Uh("isCompressed",y),this.assertValidity(),s(m,this,y)}toHex(y=!0){return Uh("isCompressed",y),Bh(this.toRawBytes(y))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const{endo:g,nBitLength:_}=e,A=Eq(m,g?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:u}}function Cq(t){const e=LO(t);return ty(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function kq(t){const e=Cq(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,a=n.BYTES+1,o=2*n.BYTES+1;function c(v){return $r(v,r)}function l(v){return jv(v,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=Tq({...e,toBytes(v,x,O){const U=x.toAffine(),I=n.toBytes(U.x),F=$m;return Uh("isCompressed",O),O?F(Uint8Array.from([x.hasEvenY()?2:3]),I):F(Uint8Array.from([4]),I,n.toBytes(U.y))},fromBytes(v){const x=v.length,O=v[0],U=v.subarray(1);if(x===a&&(O===2||O===3)){const I=Ac(U);if(!$E(I,Un,n.ORDER))throw new Error("Point is not on curve");const F=h(I);let V;try{V=n.sqrt(F)}catch(G){const K=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+K)}const q=(V&Un)===Un;return(O&1)===1!==q&&(V=n.neg(V)),{x:I,y:V}}else if(x===o&&O===4){const I=n.fromBytes(U.subarray(0,n.BYTES)),F=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:I,y:F}}else{const I=a,F=o;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+F+", got "+x)}}});function p(v){const x=r>>Un;return v>x}function m(v){return p(v)?c(-v):v}const g=(v,x,O)=>Ac(v.slice(x,O));class _{constructor(x,O,U){iu("r",x,Un,r),iu("s",O,Un,r),this.r=x,this.s=O,U!=null&&(this.recovery=U),Object.freeze(this)}static fromCompact(x){const O=s;return x=Ts("compactSignature",x,O*2),new _(g(x,0,O),g(x,O,2*O))}static fromDER(x){const{r:O,s:U}=pa.toSig(Ts("DER",x));return new _(O,U)}assertValidity(){}addRecoveryBit(x){return new _(this.r,this.s,x)}recoverPublicKey(x){const{r:O,s:U,recovery:I}=this,F=S(Ts("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const V=I===2||I===3?O+e.n:O;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=(I&1)===0?"02":"03",J=u.fromHex(q+L0(V,n.BYTES)),G=l(V),K=c(-F*G),ue=c(U*G),fe=u.BASE.multiplyAndAddUnsafe(J,K,ue);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Rm(this.toDERHex())}toDERHex(){return pa.hexFromSig(this)}toCompactRawBytes(){return Rm(this.toCompactHex())}toCompactHex(){const x=s;return L0(this.r,x)+L0(this.s,x)}}const A={isValidPrivateKey(v){try{return d(v),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const v=UO(e.n);return bq(e.randomBytes(v),e.n)},precompute(v=8,x=u.BASE){return x._setWindowSize(v),x.multiply(BigInt(3)),x}};function w(v,x=!0){return u.fromPrivateKey(v).toRawBytes(x)}function y(v){if(typeof v=="bigint")return!1;if(v instanceof u)return!0;const O=Ts("key",v).length,U=n.BYTES,I=U+1,F=2*U+1;if(!(e.allowedPrivateKeyLengths||s===I))return O===I||O===F}function E(v,x,O=!0){if(y(v)===!0)throw new Error("first arg must be private key");if(y(x)===!1)throw new Error("second arg must be public key");return u.fromHex(x).multiply(d(v)).toRawBytes(O)}const b=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const x=Ac(v),O=v.length*8-i;return O>0?x>>BigInt(O):x},S=e.bits2int_modN||function(v){return c(b(v))},$=ey(i);function P(v){return iu("num < 2^"+i,v,ba,$),If(v,s)}function C(v,x,O=B){if(["recovered","canonical"].some(ce=>ce in O))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:I}=e;let{lowS:F,prehash:V,extraEntropy:q}=O;F==null&&(F=!0),v=Ts("msgHash",v),rS(O),V&&(v=Ts("prehashed msgHash",U(v)));const J=S(v),G=d(x),K=[P(G),P(J)];if(q!=null&&q!==!1){const ce=q===!0?I(n.BYTES):q;K.push(Ts("extraEntropy",ce))}const ue=$m(...K),fe=J;function Ee(ce){const oe=b(ce);if(!f(oe))return;const X=l(oe),Re=u.BASE.multiply(oe).toAffine(),Me=c(Re.x);if(Me===ba)return;const Oe=c(X*c(fe+Me*G));if(Oe===ba)return;let st=(Re.x===Me?0:2)|Number(Re.y&Un),pt=Oe;return F&&p(Oe)&&(pt=m(Oe),st^=1),new _(Me,pt,st)}return{seed:ue,k2sig:Ee}}const B={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function D(v,x,O=B){const{seed:U,k2sig:I}=C(v,x,O),F=e;return $j(F.hash.outputLen,F.nByteLength,F.hmac)(U,I)}u.BASE._setWindowSize(8);function L(v,x,O,U=k){const I=v;x=Ts("msgHash",x),O=Ts("publicKey",O);const{lowS:F,prehash:V,format:q}=U;if(rS(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const J=typeof I=="string"||Sf(I),G=!J&&!q&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!J&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ue;try{if(G&&(K=new _(I.r,I.s)),J){try{q!=="compact"&&(K=_.fromDER(I))}catch(st){if(!(st instanceof pa.Err))throw st}!K&&q!=="der"&&(K=_.fromCompact(I))}ue=u.fromHex(O)}catch{return!1}if(!K||F&&K.hasHighS())return!1;V&&(x=e.hash(x));const{r:fe,s:Ee}=K,ce=S(x),oe=l(Ee),X=c(ce*oe),Re=c(fe*oe),Me=u.BASE.multiplyAndAddUnsafe(ue,X,Re)?.toAffine();return Me?c(Me.x)===fe:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:E,sign:D,verify:L,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Oq(t){return{hash:t,hmac:(e,...n)=>CO(t,e,J7(...n)),randomBytes:X7}}function Pq(t,e){const n=r=>kq({...t,...Oq(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FO=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sS=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rq=BigInt(0),$q=BigInt(1),Wv=BigInt(2),iS=(t,e)=>(t+e/Wv)/e;function Nq(t){const e=FO,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ws(u,n,e)*u%e,h=ws(d,n,e)*u%e,f=ws(h,Wv,e)*l%e,p=ws(f,s,e)*f%e,m=ws(p,i,e)*p%e,g=ws(m,o,e)*m%e,_=ws(g,c,e)*g%e,A=ws(_,o,e)*m%e,w=ws(A,n,e)*u%e,y=ws(w,a,e)*p%e,E=ws(y,r,e)*l%e,b=ws(E,Wv,e);if(!qv.eql(qv.sqr(b),t))throw new Error("Cannot find square root");return b}const qv=ZE(FO,void 0,void 0,{sqrt:Nq}),dy=Pq({a:Rq,b:BigInt(7),Fp:qv,n:sS,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=sS,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-$q*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=iS(i*t,e),c=iS(-r*t,e);let l=$r(t-o*n-c*s,e),u=$r(-o*r-c*i,e);const d=l>a,h=u>a;if(d&&(l=e-l),h&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},w8),Dq=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:dy},Symbol.toStringTag,{value:"Module"}));function jO(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new j0({signature:t});if(typeof t.s>"u")throw new j0({signature:t});if(n&&typeof t.yParity>"u")throw new j0({signature:t});if(t.r<0n||t.r>JA)throw new zq({value:t.r});if(t.s<0n||t.s>JA)throw new Wq({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new XE({value:t.yParity})}function Uq(t){return zO(oi(t))}function zO(t){if(t.length!==130&&t.length!==132)throw new jq({signature:t});const e=BigInt(Ni(t,0,32)),n=BigInt(Ni(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return JE(s)}catch{throw new XE({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function Bq(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return Mq(t)}function Mq(t){const e=typeof t=="string"?zO(t):t instanceof Uint8Array?Uq(t):typeof t.r=="string"?Fq(t):t.v?Lq(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return jO(e),e}function Lq(t){return{r:t.r,s:t.s,yParity:JE(t.v)}}function Fq(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=JE(n)),typeof r!="number")throw new XE({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function JE(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new qq({value:t})}let jq=class extends rt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ds(sz(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}};class j0 extends rt{constructor({signature:e}){super(`Signature \`${D8(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class zq extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Wq extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}let XE=class extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},qq=class extends rt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};function Vq(t,e={}){return typeof t.chainId=="string"?Hq(t):{...t,...e.signature}}function Hq(t){const{address:e,chainId:n,nonce:r}=t,s=Bq(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}const Kq="0x8010801080108010801080108010801080108010801080108010801080108010",Gq=AO("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function WO(t){if(typeof t=="string"){if(Ni(t,-32)!==Kq)throw new Jq(t)}else jO(t.authorization)}function Yq(t){WO(t);const e=F8(Ni(t,-64,-32)),n=Ni(t,-e-64,-64),r=Ni(t,0,-e-64),[s,i,a]=oq(Gq,n);return{authorization:Vq({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...a&&a!=="0x"?{data:a,to:i}:{}}}function Zq(t){try{return WO(t),!0}catch{return!1}}let Jq=class extends rt{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Xq(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Qq(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?us(t.nonce):void 0,storageProof:t.storageProof?Xq(t.storageProof):void 0}}async function eV(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",a=n!==void 0?he(n):void 0,o=await t.request({method:"eth_getProof",params:[e,s,a||i]});return Qq(o)}async function tV(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?he(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function QE(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i,sender:a,nonce:o}){const c=r||"latest",l=n!==void 0?he(n):void 0;let u=null;if(s?u=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?u=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,he(i)]},{dedupe:!0}):typeof i=="number"?u=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,he(i)]},{dedupe:!!l}):a&&typeof o=="number"&&(u=await t.request({method:"eth_getTransactionBySenderAndNonce",params:[a,he(o)]},{dedupe:!0})),!u)throw new n8({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:i});return(t.chain?.formatters?.transaction?.format||Ef)(u,"getTransaction")}async function nV(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([Ae(t,kf,"getBlockNumber")({}),e?Ae(t,QE,"getTransaction")({hash:e}):void 0]),i=n?.blockNumber||s?.blockNumber;return i?r-i+1n:0n}async function rm(t,{hash:e}){const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new r8({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||BE)(n,"getTransactionReceipt")}async function rV(t,e){const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:a,blockTag:o,stateOverride:c}=e,l=e.contracts,{batchSize:u=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},h=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return Gu({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),f=[[]];let p=0,m=0;for(let A=0;A<l.length;A++){const{abi:w,address:y,args:E,functionName:b}=l[A];try{const S=xr({abi:w,args:E,functionName:b});m+=(S.length-2)/2,u>0&&m>u&&f[p].length>0&&(p++,m=(S.length-2)/2,f[p]=[]),f[p]=[...f[p],{allowFailure:!0,callData:S,target:y}]}catch(S){const $=Rc(S,{abi:w,address:y,args:E,docsPath:"/docs/contract/multicall",functionName:b,sender:n});if(!s)throw $;f[p]=[...f[p],{allowFailure:!0,callData:"0x",target:y}]}}const g=await Promise.allSettled(f.map(A=>Ae(t,ci,"readContract")({...h===null?{code:DE}:{address:h},abi:Nm,account:n,args:[A],authorizationList:r,blockNumber:i,blockOverrides:a,blockTag:o,functionName:"aggregate3",stateOverride:c}))),_=[];for(let A=0;A<g.length;A++){const w=g[A];if(w.status==="rejected"){if(!s)throw w.reason;for(let E=0;E<f[A].length;E++)_.push({status:"failure",error:w.reason,result:void 0});continue}const y=w.value;for(let E=0;E<y.length;E++){const{returnData:b,success:S}=y[E],{callData:$}=f[A][E],{abi:P,address:C,functionName:B,args:k}=l[_.length];try{if($==="0x")throw new mf;if(!S)throw new Yg({data:b});const D=el({abi:P,args:k,data:b,functionName:B});_.push(s?{result:D,status:"success"}:D)}catch(D){const L=Rc(D,{abi:P,address:C,args:k,docsPath:"/docs/contract/multicall",functionName:B});if(!s)throw L;_.push({error:L,result:void 0,status:"failure"})}}}if(_.length!==l.length)throw new re("multicall results mismatch");return _}async function Vv(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:a,validation:o}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?W8(h.blockOverrides):void 0,p=h.calls.map(g=>{const _=g,A=_.account?Ut(_.account):void 0,w=_.abi?xr(_):_.data,y={..._,account:A,data:_.dataSuffix?ur([w||"0x",_.dataSuffix]):w,from:_.from??A?.address};return Vi(y),Wa(y)}),m=h.stateOverrides?wE(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:m})}const u=(typeof n=="bigint"?he(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:a,validation:o},u]})).map((h,f)=>({...vE(h),calls:h.calls.map((p,m)=>{const{abi:g,args:_,functionName:A,to:w}=s[f].calls[m],y=p.error?.data??p.returnData,E=BigInt(p.gasUsed),b=p.logs?.map(C=>Fi(C)),S=p.status==="0x1"?"success":"failure",$=g&&S==="success"&&y!=="0x"?el({abi:g,data:y,functionName:A}):null,P=(()=>{if(S==="success")return;let C;if(y==="0x"?C=new mf:y&&(C=new Yg({data:y})),!!C)return Rc(C,{abi:g??[],address:w??"0x",args:_,functionName:A??"<unknown>"})})();return{data:y,gasUsed:E,logs:b,status:S,...S==="success"?{result:$}:{error:P}}})}))}catch(c){const l=c,u=Jg(l,{});throw u instanceof _f?l:u}}function Hv(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function","error",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=o,n+=o}}if(!i)throw new rt("Unable to normalize signature.");return s}function Kv(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Mv(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Kv(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Kv(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function qO(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return qO(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?Mv(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?Mv(n[r],{strict:!1}):!1)return a}}function VO(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?fA(t):t;return{...r,...n?{hash:Hl(r)}:{}}}function hy(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=iz(e,{strict:!1}),a=t.filter(l=>i?l.type==="function"||l.type==="error"?HO(l)===Ni(e,0,4):l.type==="event"?Hl(l)===e:!1:"name"in l&&l.name===e);if(a.length===0)throw new Um({name:e});if(a.length===1)return{...a[0],...s?{hash:Hl(a[0])}:{}};let o;for(const l of a){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Hl(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?Kv(d,f):!1})){if(o&&"inputs"in o&&o.inputs){const d=qO(l.inputs,o.inputs,r);if(d)throw new iV({abiItem:l,type:d[0]},{abiItem:o,type:d[1]})}o=l}}const c=(()=>{if(o)return o;const[l,...u]=a;return{...l,overloads:u}})();if(!c)throw new Um({name:e});return{...c,...s?{hash:Hl(c)}:{}}}function HO(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return hy(n,r)}return t[0]})();return Ni(Hl(e),0,4)}function sV(...t){const e=(()=>{if(Array.isArray(t[0])){const[r,s]=t;return hy(r,s)}return t[0]})(),n=typeof e=="string"?e:Cm(e);return Hv(n)}function Hl(...t){const e=(()=>{if(Array.isArray(t[0])){const[n,r]=t;return hy(n,r)}return t[0]})();return typeof e!="string"&&"hash"in e&&e.hash?e.hash:_O(NE(sV(e)))}class iV extends rt{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Hv(Cm(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Hv(Cm(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Um extends rt{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function aV(...t){const[e,n]=(()=>{if(Array.isArray(t[0])){const[i,a]=t;return[cV(i),a]}return t})(),{bytecode:r,args:s}=n;return ai(r,e.inputs?.length&&s?.length?GE(e.inputs,s):"0x")}function oV(t){return VO(t)}function cV(t){const e=t.find(n=>n.type==="constructor");if(!e)throw new Um({name:"constructor"});return e}function lV(...t){const[e,n=[]]=(()=>{if(Array.isArray(t[0])){const[l,u,d]=t;return[aS(l,u,{args:d}),d]}const[o,c]=t;return[o,c]})(),{overloads:r}=e,s=r?aS([e,...r],e.name,{args:n}):e,i=uV(s),a=n.length>0?GE(s.inputs,n):void 0;return a?ai(i,a):i}function yl(t,e={}){return VO(t,e)}function aS(t,e,n){const r=hy(t,e,n);if(r.type!=="function")throw new Um({name:e,type:"function"});return r}function uV(t){return HO(t)}const dV="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",gi="0x0000000000000000000000000000000000000000",hV="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function fV(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:a,traceTransfers:o,validation:c}=e,l=e.account?Ut(e.account):void 0;if(a&&!l)throw new re("`account` is required when `traceAssetChanges` is true");const u=l?aV(oV("constructor(bytes, bytes)"),{bytecode:K8,args:[hV,lV(yl("function getBalance(address)"),[l.address])]}):void 0,d=a?await Promise.all(e.calls.map(async U=>{if(!U.data&&!U.abi)return;const{accessList:I}=await dO(t,{account:l.address,...U,data:U.abi?xr(U):U.data});return I.map(({address:F,storageKeys:V})=>V.length>0?F:null)})).then(U=>U.flat().filter(Boolean)):[],h=await Vv(t,{blockNumber:n,blockTag:r,blocks:[...a?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((U,I)=>({abi:[yl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:U,from:gi,nonce:I})),stateOverrides:[{address:gi,nonce:0}]}]:[],{calls:[...s,{}].map(U=>({...U,from:l?.address})),stateOverrides:i},...a?[{calls:[{data:u}]},{calls:d.map((U,I)=>({abi:[yl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:U,from:gi,nonce:I})),stateOverrides:[{address:gi,nonce:0}]},{calls:d.map((U,I)=>({to:U,abi:[yl("function decimals() returns (uint256)")],functionName:"decimals",from:gi,nonce:I})),stateOverrides:[{address:gi,nonce:0}]},{calls:d.map((U,I)=>({to:U,abi:[yl("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:gi,nonce:I})),stateOverrides:[{address:gi,nonce:0}]},{calls:d.map((U,I)=>({to:U,abi:[yl("function symbol() returns (string)")],functionName:"symbol",from:gi,nonce:I})),stateOverrides:[{address:gi,nonce:0}]}]:[]],traceTransfers:o,validation:c}),f=a?h[2]:h[0],[p,m,,g,_,A,w,y]=a?h:[],{calls:E,...b}=f,S=E.slice(0,-1)??[],$=p?.calls??[],P=m?.calls??[],C=[...$,...P].map(U=>U.status==="success"?xt(U.data):null),B=g?.calls??[],k=_?.calls??[],D=[...B,...k].map(U=>U.status==="success"?xt(U.data):null),L=(A?.calls??[]).map(U=>U.status==="success"?U.result:null),v=(y?.calls??[]).map(U=>U.status==="success"?U.result:null),x=(w?.calls??[]).map(U=>U.status==="success"?U.result:null),O=[];for(const[U,I]of D.entries()){const F=C[U];if(typeof I!="bigint"||typeof F!="bigint")continue;const V=L[U-1],q=v[U-1],J=x[U-1],G=U===0?{address:dV,decimals:18,symbol:"ETH"}:{address:d[U-1],decimals:J||V?Number(V??1):void 0,symbol:q??void 0};O.some(K=>K.token.address===G.address)||O.push({token:G,value:{pre:F,post:I,diff:I-F}})}return{assetChanges:O,block:b,results:S}}const KO="0x6492649264926492649264926492649264926492649264926492649264926492";function pV(t){if(Ni(t,-32)!==KO)throw new yV(t)}function mV(t){const{data:e,signature:n,to:r}=t;return ai(GE(AO("address, bytes, bytes"),[r,e,n]),KO)}function gV(t){try{return pV(t),!0}catch{return!1}}class yV extends rt{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function GO({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new dy.Signature(xt(t),xt(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?a:wr(a)}async function fy(t,e){const{address:n,chain:r=t.chain,hash:s,erc6492VerifierAddress:i=e.universalSignatureVerifierAddress??r?.contracts?.erc6492Verifier?.address,multicallAddress:a=e.multicallAddress??r?.contracts?.multicall3?.address}=e;if(r?.verifyHash)return await r.verifyHash(t,e);const o=(()=>{const c=e.signature;return yr(c)?c:typeof c=="object"&&"r"in c&&"s"in c?GO(c):vn(c)})();try{return Zq(o)?await wV(t,{...e,multicallAddress:a,signature:o}):await bV(t,{...e,verifierAddress:i,signature:o})}catch(c){try{if(Af(Gn(n),await c8({hash:s,signature:o})))return!0}catch{}if(c instanceof Uc)return!1;throw c}}async function wV(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:a}=e,{authorization:o,data:c,signature:l,to:u}=Yq(e.signature);if(await Bv(t,{address:n,blockNumber:r,blockTag:s})===Ms(["0xef0100",o.address]))return await vV(t,{address:n,blockNumber:r,blockTag:s,hash:i,signature:l});const h={address:o.address,chainId:Number(o.chainId),nonce:Number(o.nonce),r:he(o.r,{size:32}),s:he(o.s,{size:32}),yParity:o.yParity};if(!await yW({address:n,authorization:h}))throw new Uc;const p=await Ae(t,ci,"readContract")({...a?{address:a}:{code:DE},authorizationList:[h],abi:Nm,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:u??n,callData:c}]:[],{allowFailure:!0,target:n,callData:xr({abi:H8,functionName:"isValidSignature",args:[i,l]})}]]});if(p[p.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new Uc}async function bV(t,e){const{address:n,factory:r,factoryData:s,hash:i,signature:a,verifierAddress:o,...c}=e,l=await(async()=>!r&&!s||gV(a)?a:mV({data:s,signature:a,to:r}))(),u=o?{to:o,data:xr({abi:qA,functionName:"isValidSig",args:[n,i,l]}),...c}:{data:ry({abi:qA,args:[n,i,l],bytecode:hz}),...c},{data:d}=await Ae(t,sy,"call")(u).catch(h=>{throw h instanceof i8?new Uc:h});if(R7(d??"0x0"))return!0;throw new Uc}async function vV(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:a}=e;if((await Ae(t,ci,"readContract")({address:n,abi:H8,args:[i,a],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof a8?new Uc:c})).startsWith("0x1626ba7e"))return!0;throw new Uc}class Uc extends Error{}async function _V(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...a}){const o=qE(n);return Ae(t,fy,"verifyHash")({address:e,factory:r,factoryData:s,hash:o,signature:i,...a})}async function EV(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:a,primaryType:o,types:c,domain:l,...u}=e,d=gO({message:a,primaryType:o,types:c,domain:l});return Ae(t,fy,"verifyHash")({address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function YO(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:a=t.pollingInterval}){const o=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return o?(()=>{const d=Tn(["watchBlockNumber",t.uid,e,n,a]);return Da(d,{onBlockNumber:r,onError:s},h=>Yu(async()=>{try{const f=await Ae(t,kf,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(f===c)return;if(f-c>1&&n)for(let p=c+1n;p<f;p++)h.onBlockNumber(p,c),c=p}(c===void 0||f>c)&&(h.onBlockNumber(f,c),c=f)}catch(f){h.onError?.(f)}},{emitOnBegin:e,interval:a}))})():(()=>{const d=Tn(["watchBlockNumber",t.uid,e,n]);return Da(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const _=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return _?_.value:t.transport}return t.transport})(),{unsubscribe:g}=await m.subscribe({params:["newHeads"],onData(_){if(!f)return;const A=xt(_.result?.number);h.onBlockNumber(A,c),c=A},onError(_){h.onError?.(_)}});p=g,f||p()}catch(m){s?.(m)}})(),()=>p()})})()}async function ZO(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:a=6,retryDelay:o=({count:E})=>~~(1<<E)*200,timeout:c=18e4}=e,l=Tn(["waitForTransactionReceipt",t.uid,s]),u=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval;let d,h,f,p=!1,m,g;const{promise:_,resolve:A,reject:w}=UE(),y=c?setTimeout(()=>{g?.(),m?.(),w(new YF({hash:s}))},c):void 0;return m=Da(l,{onReplaced:i,resolve:A,reject:w},async E=>{if(f=await Ae(t,rm,"getTransactionReceipt")({hash:s}).catch(()=>{}),f&&r<=1){clearTimeout(y),E.resolve(f),m?.();return}g=Ae(t,YO,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(b){const S=P=>{clearTimeout(y),g?.(),P(),m?.()};let $=b;if(!p)try{if(f){if(r>1&&(!f.blockNumber||$-f.blockNumber+1n<r))return;S(()=>E.resolve(f));return}if(n&&!d&&(p=!0,await Dm(async()=>{d=await Ae(t,QE,"getTransaction")({hash:s}),d.blockNumber&&($=d.blockNumber)},{delay:o,retryCount:a}),p=!1),f=await Ae(t,rm,"getTransactionReceipt")({hash:s}),r>1&&(!f.blockNumber||$-f.blockNumber+1n<r))return;S(()=>E.resolve(f))}catch(P){if(P instanceof n8||P instanceof r8){if(!d){p=!1;return}try{h=d,p=!0;const C=await Dm(()=>Ae(t,Qs,"getBlock")({blockNumber:$,includeTransactions:!0}),{delay:o,retryCount:a,shouldRetry:({error:D})=>D instanceof f8});p=!1;const B=C.transactions.find(({from:D,nonce:L})=>D===h.from&&L===h.nonce);if(!B||(f=await Ae(t,rm,"getTransactionReceipt")({hash:B.hash}),r>1&&(!f.blockNumber||$-f.blockNumber+1n<r)))return;let k="replaced";B.to===h.to&&B.value===h.value&&B.input===h.input?k="repriced":B.from===B.to&&B.value===0n&&(k="cancelled"),S(()=>{E.onReplaced?.({reason:k,replacedTransaction:h,transaction:B,transactionReceipt:f}),E.resolve(f)})}catch(C){S(()=>E.reject(C))}}else S(()=>E.reject(P))}}})}),_}function xV(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:a,poll:o,pollingInterval:c=t.pollingInterval}){const l=typeof o<"u"?o:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=a??!1;let d;return l?(()=>{const p=Tn(["watchBlocks",t.uid,e,n,r,u,c]);return Da(p,{onBlock:s,onError:i},m=>Yu(async()=>{try{const g=await Ae(t,Qs,"getBlock")({blockTag:e,includeTransactions:u});if(g.number!==null&&d?.number!=null){if(g.number===d.number)return;if(g.number-d.number>1&&n)for(let _=d?.number+1n;_<g.number;_++){const A=await Ae(t,Qs,"getBlock")({blockNumber:_,includeTransactions:u});m.onBlock(A,d),d=A}}(d?.number==null||e==="pending"&&g?.number==null||g.number!==null&&g.number>d.number)&&(m.onBlock(g,d),d=g)}catch(g){m.onError?.(g)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,m=!0,g=()=>p=!1;return(async()=>{try{r&&Ae(t,Qs,"getBlock")({blockTag:e,includeTransactions:u}).then(w=>{p&&m&&(s(w,void 0),m=!1)}).catch(i);const _=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(y=>y.config.type==="webSocket"||y.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:A}=await _.subscribe({params:["newHeads"],async onData(w){if(!p)return;const y=await Ae(t,Qs,"getBlock")({blockNumber:w.result?.number,includeTransactions:u}).catch(()=>{});p&&(s(y,d),m=!1,d=y)},onError(w){i?.(w)}});g=A,p||g()}catch(_){i?.(_)}})(),()=>g()})()}function AV(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:a,onError:o,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const g=Tn(["watchEvent",e,n,r,t.uid,s,u,a]);return Da(g,{onLogs:c,onError:o},_=>{let A;a!==void 0&&(A=a-1n);let w,y=!1;const E=Yu(async()=>{if(!y){try{w=await Ae(t,hO,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:a})}catch{}y=!0;return}try{let b;if(w)b=await Ae(t,iy,"getFilterChanges")({filter:w});else{const S=await Ae(t,kf,"getBlockNumber")({});A&&A!==S?b=await Ae(t,OE,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:A+1n,toBlock:S}):b=[],A=S}if(b.length===0)return;if(r)_.onLogs(b);else for(const S of b)_.onLogs([S])}catch(b){w&&b instanceof Uo&&(y=!1),_.onError?.(b)}},{emitOnBegin:!0,interval:u});return async()=>{w&&await Ae(t,ay,"uninstallFilter")({filter:w}),E()}})})():(()=>{let g=!0,_=()=>g=!1;return(async()=>{try{const A=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return b?b.value:t.transport}return t.transport})(),w=i??(s?[s]:void 0);let y=[];w&&(y=[w.flatMap(S=>wf({abi:[S],eventName:S.name,args:n}))],s&&(y=y[0]));const{unsubscribe:E}=await A.subscribe({params:["logs",{address:e,topics:y}],onData(b){if(!g)return;const S=b.result;try{const{eventName:$,args:P}=Pm({abi:w??[],data:S.data,topics:S.topics,strict:f}),C=Fi(S,{args:P,eventName:$});c([C])}catch($){let P,C;if($ instanceof Om||$ instanceof cE){if(d)return;P=$.abiItem.name,C=$.abiItem.inputs?.some(k=>!("name"in k&&k.name))}const B=Fi(S,{args:C?[]:{},eventName:P});c([B])}},onError(b){o?.(b)}});_=E,g||_()}catch(A){o?.(A)}})(),()=>_()})()}function SV(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Tn(["watchPendingTransactions",t.uid,e,i]);return Da(l,{onTransactions:r,onError:n},u=>{let d;const h=Yu(async()=>{try{if(!d)try{d=await Ae(t,fO,"createPendingTransactionFilter")({});return}catch(p){throw h(),p}const f=await Ae(t,iy,"getFilterChanges")({filter:d});if(f.length===0)return;if(e)u.onTransactions(f);else for(const p of f)u.onTransactions([p])}catch(f){u.onError?.(f)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Ae(t,ay,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n?.(h)}});u=d,l||u()}catch(d){n?.(d)}})(),()=>u()})()}function IV(t){const{scheme:e,statement:n,...r}=t.match(TV)?.groups??{},{chainId:s,expirationTime:i,issuedAt:a,notBefore:o,requestId:c,...l}=t.match(CV)?.groups??{},u=t.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...a?{issuedAt:new Date(a)}:{},...o?{notBefore:new Date(o)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const TV=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,CV=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function kV(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:a=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||!Dt(r.address,{strict:!1})||e&&!Af(r.address,e))return!1}catch{return!1}return!0}async function OV(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:a,signature:o,time:c=new Date,...l}=e,u=IV(s);if(!u.address||!kV({address:n,domain:r,message:u,nonce:i,scheme:a,time:c}))return!1;const h=qE(s);return fy(t,{address:u.address,hash:h,signature:o,...l})}async function e2(t,{serializedTransaction:e,throwOnReceiptRevert:n,timeout:r}){const s=await t.request({method:"eth_sendRawTransactionSync",params:r?[e,he(r)]:[e]},{retryCount:0}),a=(t.chain?.formatters?.transactionReceipt?.format||BE)(s);if(a.status==="reverted"&&n)throw new s8({receipt:a});return a}function Bm(t){return{call:e=>sy(t,e),createAccessList:e=>dO(t,e),createBlockFilter:()=>Jz(t),createContractEventFilter:e=>J3(t,e),createEventFilter:e=>hO(t,e),createPendingTransactionFilter:()=>fO(t),estimateContractGas:e=>Cj(t,e),estimateGas:e=>CE(t,e),getBalance:e=>Xz(t,e),getBlobBaseFee:()=>Qz(t),getBlock:e=>Qs(t,e),getBlockNumber:e=>kf(t,e),getBlockTransactionCount:e=>eW(t,e),getBytecode:e=>Bv(t,e),getChainId:()=>Hi(t),getCode:e=>Bv(t,e),getContractEvents:e=>T8(t,e),getEip712Domain:e=>nW(t,e),getEnsAddress:e=>Dz(t,e),getEnsAvatar:e=>Gz(t,e),getEnsName:e=>Yz(t,e),getEnsResolver:e=>Zz(t,e),getEnsText:e=>uO(t,e),getFeeHistory:e=>iW(t,e),estimateFeesPerGas:e=>mj(t,e),getFilterChanges:e=>iy(t,e),getFilterLogs:e=>aW(t,e),getGasPrice:()=>_E(t),getLogs:e=>OE(t,e),getProof:e=>eV(t,e),estimateMaxPriorityFeePerGas:e=>pj(t,e),fillTransaction:e=>IE(t,e),getStorageAt:e=>tV(t,e),getTransaction:e=>QE(t,e),getTransactionConfirmations:e=>nV(t,e),getTransactionCount:e=>EE(t,e),getTransactionReceipt:e=>rm(t,e),multicall:e=>rV(t,e),prepareTransactionRequest:e=>Ku(t,e),readContract:e=>ci(t,e),sendRawTransaction:e=>oy(t,e),sendRawTransactionSync:e=>e2(t,e),simulate:e=>Vv(t,e),simulateBlocks:e=>Vv(t,e),simulateCalls:e=>fV(t,e),simulateContract:e=>bz(t,e),verifyHash:e=>fy(t,e),verifyMessage:e=>_V(t,e),verifySiweMessage:e=>OV(t,e),verifyTypedData:e=>EV(t,e),uninstallFilter:e=>ay(t,e),waitForTransactionReceipt:e=>ZO(t,e),watchBlocks:e=>xV(t,e),watchBlockNumber:e=>YO(t,e),watchContractEvent:e=>Iz(t,e),watchEvent:e=>AV(t,e),watchPendingTransactions:e=>SV(t,e)}}function t2(t){const{key:e="public",name:n="Public Client"}=t;return aO({...t,key:e,name:n,type:"publicClient"}).extend(Bm)}async function PV(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:a}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:he(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map(({url:o})=>o):void 0}]},{dedupe:!0,retryCount:0})}function RV(t,e){const{abi:n,args:r,bytecode:s,...i}=e,a=ry({abi:n,args:r,bytecode:s});return Pf(t,{...i,...i.authorizationList?{to:null}:{},data:a})}async function $V(t){return t.account?.type==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(n=>gf(n))}async function NV(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ut(n):void 0,i=r?[s?.address,[he(r)]]:[s?.address],a=await t.request({method:"wallet_getCapabilities",params:i}),o={};for(const[c,l]of Object.entries(a)){o[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),o[Number(c)][u]=d}return typeof r=="number"?o[r]:o}async function DV(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function JO(t,e){const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Ki({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ut(n),a=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ut(e.executor)})(),o={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof o.chainId>"u"&&(o.chainId=t.chain?.id??await Ae(t,Hi,"getChainId")({})),typeof o.nonce>"u"&&(o.nonce=await Ae(t,EE,"getTransactionCount")({address:i.address,blockTag:"pending"}),(a==="self"||a?.address&&Af(a.address,i.address))&&(o.nonce+=1)),o}async function UV(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Gn(n))}async function BV(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function MV(t,e){const{chain:n=t.chain}=e,r=e.timeout??Math.max((n?.blockTime??0)*3,5e3),s=await nO(t,e);return await sO(t,{...e,id:s.id,timeout:r})}const z0=new Vu(128);async function XO(t,e){const{account:n=t.account,assertChainId:r=!0,chain:s=t.chain,accessList:i,authorizationList:a,blobs:o,data:c,dataSuffix:l=typeof t.dataSuffix=="string"?t.dataSuffix:t.dataSuffix?.value,gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,pollingInterval:g,throwOnReceiptRevert:_,type:A,value:w,...y}=e,E=e.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new Ki({docsPath:"/docs/actions/wallet/sendTransactionSync"});const b=n?Ut(n):null;try{Vi(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&a&&a.length>0)return await Zg({authorization:a[0]}).catch(()=>{throw new re("`to` is required. Could not infer from `authorizationList`.")})})();if(b?.type==="json-rpc"||b===null){let $;s!==null&&($=await Ae(t,Hi,"getChainId")({}),r&&Of({currentChainId:$,chain:s}));const P=t.chain?.formatters?.transactionRequest?.format,B=(P||Wa)({...Hu(y,{format:P}),accessList:i,account:b,authorizationList:a,blobs:o,chainId:$,data:c&&ur([c,l??"0x"]),gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,to:S,type:A,value:w},"sendTransaction"),k=z0.get(t.uid),D=k?"wallet_sendTransaction":"eth_sendTransaction",L=await(async()=>{try{return await t.request({method:D,params:[B]},{retryCount:0})}catch(x){if(k===!1)throw x;const O=x;if(O.name==="InvalidInputRpcError"||O.name==="InvalidParamsRpcError"||O.name==="MethodNotFoundRpcError"||O.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[B]},{retryCount:0}).then(U=>(z0.set(t.uid,!0),U)).catch(U=>{const I=U;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(z0.set(t.uid,!1),O):I});throw O}})(),v=await Ae(t,ZO,"waitForTransactionReceipt")({checkReplacement:!1,hash:L,pollingInterval:g,timeout:E});if(_&&v.status==="reverted")throw new s8({receipt:v});return v}if(b?.type==="local"){const $=await Ae(t,Ku,"prepareTransactionRequest")({account:b,accessList:i,authorizationList:a,blobs:o,chain:s,data:c&&ur([c,l??"0x"]),gas:u,gasPrice:d,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:m,nonceManager:b.nonceManager,parameters:[...TE,"sidecars"],type:A,value:w,...y,to:S}),P=s?.serializers?.transaction,C=await b.signTransaction($,{serializer:P});return await Ae(t,e2,"sendRawTransactionSync")({serializedTransaction:C,throwOnReceiptRevert:_,timeout:e.timeout})}throw b?.type==="smart"?new Sc({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Sc({docsPath:"/docs/actions/wallet/sendTransactionSync",type:b?.type})}catch(S){throw S instanceof Sc?S:xf(S,{...e,account:b,chain:e.chain||void 0})}}async function LV(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function FV(t,e){const{account:n=t.account}=e;if(!n)throw new Ki({docsPath:"/docs/eip7702/signAuthorization"});const r=Ut(n);if(!r.signAuthorization)throw new Sc({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await JO(t,e);return r.signAuthorization(s)}async function jV(t,{account:e=t.account,message:n}){if(!e)throw new Ki({docsPath:"/docs/actions/wallet/signMessage"});const r=Ut(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?gu(n):n.raw instanceof Uint8Array?Ye(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function QO(t,e){const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Ki({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ut(n);Vi({account:i,...e});const a=await Ae(t,Hi,"getChainId")({});r!==null&&Of({currentChainId:a,chain:r});const c=(r?.formatters||t.chain?.formatters)?.transactionRequest?.format||Wa;return i.signTransaction?i.signTransaction({...s,chainId:a},{serializer:t.chain?.serializers?.transaction}):await t.request({method:"eth_signTransaction",params:[{...c({...s,account:i},"signTransaction"),chainId:he(a),from:i.address}]},{retryCount:0})}async function eP(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Ki({docsPath:"/docs/actions/wallet/signTypedData"});const a=Ut(n),o={EIP712Domain:mO({domain:r}),...e.types};if(pO({domain:r,message:s,primaryType:i,types:o}),a.signTypedData)return a.signTypedData({domain:r,message:s,primaryType:i,types:o});const c=OW({domain:r,message:s,primaryType:i,types:o});return t.request({method:"eth_signTypedData_v4",params:[a.address,c]},{retryCount:0})}async function zV(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:he(e)}]},{retryCount:0})}async function WV(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function qV(t,e){return Eu.internal(t,XO,"sendTransactionSync",e)}function VV(t){return{addChain:e=>PV(t,e),deployContract:e=>RV(t,e),fillTransaction:e=>IE(t,e),getAddresses:()=>$V(t),getCallsStatus:e=>rO(t,e),getCapabilities:e=>NV(t,e),getChainId:()=>Hi(t),getPermissions:()=>DV(t),prepareAuthorization:e=>JO(t,e),prepareTransactionRequest:e=>Ku(t,e),requestAddresses:()=>UV(t),requestPermissions:e=>BV(t,e),sendCalls:e=>nO(t,e),sendCallsSync:e=>MV(t,e),sendRawTransaction:e=>oy(t,e),sendRawTransactionSync:e=>e2(t,e),sendTransaction:e=>Pf(t,e),sendTransactionSync:e=>XO(t,e),showCallsStatus:e=>LV(t,e),signAuthorization:e=>FV(t,e),signMessage:e=>jV(t,e),signTransaction:e=>QO(t,e),signTypedData:e=>eP(t,e),switchChain:e=>zV(t,e),waitForCallsStatus:e=>sO(t,e),watchAsset:e=>WV(t,e),writeContract:e=>Eu(t,e),writeContractSync:e=>qV(t,e)}}function HV(t){const{key:e="wallet",name:n="Wallet Client",transport:r}=t;return aO({...t,key:e,name:n,transport:r,type:"walletClient"}).extend(VV)}function KV({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:a,type:o},c){const l=iO();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:a,type:o},request:bW(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}class GV extends re{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function py(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:a,name:o="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:h,retryCount:f,timeout:p})=>{const{batchSize:m=1e3,wait:g=0}=typeof n=="object"?n:{},_=e.retryCount??f,A=p??e.timeout??1e4,w=t||h?.rpcUrls.default.http[0];if(!w)throw new GV;const y=xW(w,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:A});return KV({key:i,methods:a,name:o,async request({method:E,params:b}){const S={method:E,params:b},{schedule:$}=Z8({id:w,wait:g,shouldSplitBatch(k){return k.length>m},fn:k=>y.request({body:k}),sort:(k,D)=>k.id-D.id}),P=async k=>n?$(k):[await y.request({body:k})],[{error:C,result:B}]=await P(S);if(d)return{error:C,result:B};if(C)throw new yE({body:S,error:C,url:w});return B},retryCount:_,retryDelay:u,timeout:A,type:"http"},{fetchOptions:s,url:w})}}const oS=(t,e,n,r)=>{let s=Number(t),i=e.find((a=>a.id===s));if(!i)throw new p3(`Unsupported chainId ${t}`,4901);return t2({transport:py(YV(i,n,r.appId)),chain:i})},YV=(t,e,n)=>{let r,s=t.id,i=Number(t.id);if(t.rpcUrls.privyWalletOverride&&t.rpcUrls.privyWalletOverride.http[0])r=t.rpcUrls.privyWalletOverride.http[0];else if(e.rpcUrls&&e.rpcUrls[i])r=e.rpcUrls[i];else if(t.rpcUrls.privy?.http[0]){let a=new URL(t.rpcUrls.privy.http[0]);a.searchParams.append("privyAppId",n),r=a.toString()}else r=t.rpcUrls.public?.http[0]?t.rpcUrls.public.http[0]:t.rpcUrls.default?.http[0];if(!r)throw new p3(`No RPC url found for ${s}`);return r};function ZV({currentRecoveryMethod:t,upgradeToRecoveryMethod:e}){switch(t){case"privy":case"user-passcode":case"recovery-encryption-key":return!0;case"icloud":case"google-drive":if(t===e)throw Error("Cannot upgrade to the existing cloud platform");return!0;default:throw Error("Unknown recovery method")}}function JV(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}let XV=class{enqueue(e,n){this.callbacks[e]=n}dequeue(e,n){let r=this.callbacks[n];if(!r)throw Error(`cannot dequeue ${e} event: no event found for id ${n}`);switch(delete this.callbacks[n],e){case"privy:iframe:ready":case"privy:wallets:create":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:wallet:connect":case"privy:wallet:recover":case"privy:wallet:rpc":case"privy:solana-wallet:create":case"privy:solana-wallet:create-additional":case"privy:solana-wallet:connect":case"privy:solana-wallet:recover":case"privy:solana-wallet:rpc":case"privy:delegated-actions:consent":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":return r;default:throw Error(`invalid wallet event type ${e}`)}}constructor(){this.callbacks={}}};async function QV(t,e,n,r,s=!1,i,a){let o=s,c=async u=>{if(o){u===(s?0:1)?r():n.current?.reject(new nm("missing_or_invalid_mfa","MFA verification failed, retry."));let d=await new Promise(((h,f)=>{e.current={resolve:h,reject:f},setTimeout((()=>{let p=new nm("mfa_timeout","Timed out waiting for MFA code");n.current?.reject(p),f(p)}),a)}));return await t(d)}return await t()},l=null;for(let u=0;u<i;u++)try{l=await c(u),n.current?.resolve(void 0);break}catch(d){if(d.type!=="missing_or_invalid_mfa")throw n.current?.resolve(void 0),d;o=!0}if(l===null){let u=new nm("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw n.current?.reject(u),u}return l}var cS;let eH=(cS=0,()=>"id-"+cS++),tH=(t,e)=>typeof e=="bigint"?e.toString():e,Ya=async(t,{ms:e,msg:n})=>{let r,s=new Promise(((i,a)=>{r=setTimeout((()=>{a(Error(n))}),e??15e3)}));try{return await Promise.race([t,s])}finally{r!==void 0&&clearTimeout(r)}},lS=new XV,uS=class{invokeWithMfa(e,n){return Ya(QV((r=>Ya(this.waitForReady().then((()=>e(r))),{msg:n.timeoutMsg,ms:n.timeoutMs})),this.mfa.rootPromise,this.mfa.submitPromise,(()=>this.mfa.emit("mfaRequired")),n.mfaAlwaysRequired??!1,4,3e5),{msg:"Operation reached timeout: MFA verification",ms:126e4})}reload(){return this.ready=!1,this._embeddedWalletMessagePoster.reload()}ping(e=15e3){return Ya(this.invoke("privy:iframe:ready",{}),{msg:"Ping reached timeout",ms:e})}create(e){return Ya(this.waitForReady().then((()=>this.invoke("privy:wallet:create",e))),{msg:"Operation reached timeout: create"})}rpc(e){return this.invokeWithMfa((n=>this.invoke("privy:wallet:rpc",{...n,...e})),{timeoutMsg:"Operation reached timeout: rpc"})}createSolana(e){return this.invokeWithMfa((n=>this.invoke("privy:solana-wallet:create",{...n,...e})),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}createAdditionalSolana(e){return Ya(this.waitForReady().then((()=>this.invoke("privy:solana-wallet:create-additional",e))),{msg:"Operation reached timeout: create"})}solanaRpc(e){return this.invokeWithMfa((n=>this.invoke("privy:solana-wallet:rpc",{...n,...e})),{timeoutMsg:"Operation reached timeout: solana-rpc"})}delegateWallets(e){return this.invokeWithMfa((n=>this.invoke("privy:delegated-actions:consent",{...n,...e})),{timeoutMsg:"Operation reached timeout: delegated-actions:consent"})}verifyMfa(e){return this.invokeWithMfa((n=>this.invoke("privy:mfa:verify",{...n,...e})),{timeoutMsg:"Operation reached timeout: mfa:verify",mfaAlwaysRequired:!0})}initEnrollMfa(e){return this.invokeWithMfa((n=>this.invoke("privy:mfa:init-enrollment",{...n,...e})),{timeoutMsg:"Operation reached timeout: mfa:init-enrollment"})}submitEnrollMfa(e){return this.invokeWithMfa((n=>this.invoke("privy:mfa:submit-enrollment",{...n,...e})),{timeoutMsg:"Operation reached timeout: mfa:submit-enrollment"})}unenrollMfa(e){return this.invokeWithMfa((n=>this.invoke("privy:mfa:unenroll",{...n,...e})),{timeoutMsg:"Operation reached timeout: mfa:unenroll",mfaAlwaysRequired:!0})}clearMfa(e){return Ya(this.waitForReady().then((()=>this.invoke("privy:mfa:clear",e))),{msg:"Operation reached timeout: mfa:clear"})}createWallet(e){return this.invokeWithMfa((n=>this.invoke("privy:wallets:create",{...n,...e})),{timeoutMsg:"Operation reached timeout: create",timeoutMs:6e4})}signWithUserSigner(e){return this.invokeWithMfa((n=>this.invoke("privy:user-signer:sign",{...n,...e})),{timeoutMsg:"Operation reached timeout: user-signer:sign"})}addWallet(e){return Ya(this.waitForReady().then((()=>this.invoke("privy:wallets:add",e))),{msg:"Operation reached timeout: wallets:add"})}setRecovery(e){return this.invokeWithMfa((n=>this.invoke("privy:wallets:set-recovery",{...n,...e})),{timeoutMsg:"Operation reached timeout: wallets:set-recovery",timeoutMs:6e4})}connect(e){return Ya(this.waitForReady().then((()=>this.invoke("privy:wallets:connect",e))),{msg:"Operation reached timeout: wallets:connect"})}recover(e){return this.invokeWithMfa((n=>this.invoke("privy:wallets:recover",{...n,...e})),{timeoutMsg:"Operation reached timeout: wallets:recover",timeoutMs:6e4})}rpcWallet(e){return this.invokeWithMfa((n=>this.invoke("privy:wallets:rpc",{...n,...e})),{timeoutMsg:"Operation reached timeout: wallets:rpc"})}handleEmbeddedWalletMessages(e){if(!e.event.startsWith("privy:"))return void console.warn(`Unsupported event type: ${e.event}`);let{reject:n,resolve:r}=lS.dequeue(e.event,e.id);return e.error!==void 0?n(new nm(e.error.type,e.error.message)):r(e.data)}waitForReady(){return this.ready?Promise.resolve():new Promise((async(e,n)=>{for(;!this.ready;)this.invoke("privy:iframe:ready",{}).then((()=>{this.ready=!0,e()})).catch(n),await JV(150)}))}invoke(e,n){let r=((i,a)=>`${i}${JSON.stringify(a,tH)}`)(e,n);if(e==="privy:wallet:create"||e==="privy:solana-wallet:create"){let i=this.cache.get(r);if(i)return i}let s=new Promise(((i,a)=>{let o=eH();lS.enqueue(o,{resolve:i,reject:a}),this._embeddedWalletMessagePoster.postMessage(JSON.stringify({id:o,event:e,data:n}),"*")})).finally((()=>{this.cache.delete(r)}));return this.cache.set(r,s),s}constructor(e,n){this.ready=!1,this.cache=new Map,this._embeddedWalletMessagePoster=e,this.mfa=n}};var W0={exports:{}},dS;function nH(){return dS||(dS=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(l,u,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var g=this._events[m],_=arguments.length,A,w;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),_){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,h),!0;case 5:return g.fn.call(g.context,u,d,h,f),!0;case 6:return g.fn.call(g.context,u,d,h,f,p),!0}for(w=1,A=new Array(_-1);w<_;w++)A[w-1]=arguments[w];g.fn.apply(g.context,A)}else{var y=g.length,E;for(w=0;w<y;w++)switch(g[w].once&&this.removeListener(l,g[w].fn,void 0,!0),_){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,d);break;case 4:g[w].fn.call(g[w].context,u,d,h);break;default:if(!A)for(E=1,A=new Array(_-1);E<_;E++)A[E-1]=arguments[E];g[w].fn.apply(g[w].context,A)}}return!0},o.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},o.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},o.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,g=[],_=p.length;m<_;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(W0)),W0.exports}var rH=nH();const tl=Jc(rH);let q0={0:"legacy",1:"eip2930",2:"eip1559",3:"eip4844",4:"eip7702"};const tP={legacy:0,eip2930:1,eip1559:2,eip4844:3,eip7702:4};let wl=t=>t!==void 0?BigInt(t):void 0;function Mm(t){let e,{type:n=2,...r}=typeof t=="string"?JSON.parse(t):t;r.accessList&&Array.isArray(r.accessList)?e=r.accessList.map((l=>Array.isArray(l)?{address:l[0],storageKeys:l[1]}:l)):r.accessList&&(e=Object.entries(r.accessList).map((l=>({address:l[0],storageKeys:l[1]}))));let s=Number(r.chainId??1),i=yr(r.data)?r.data:r.data?Ye(Uint8Array.from(r.data)):void 0,a=r.nonce?Number(r.nonce):void 0,o={chainId:s,data:i,nonce:a,value:wl(r.value),gas:wl(r.gas??r.gasLimit)},c=Number(n);if(c===0)return{...r,type:q0[c],...o,gasPrice:wl(r.gasPrice),accessList:void 0,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(c===1)return{...r,type:q0[c],...o,gasPrice:wl(r.gasPrice),accessList:e,maxFeePerGas:void 0,maxPriorityFeePerGas:void 0};if(c===2)return{...r,type:q0[c],...o,nonce:a,accessList:e,maxFeePerGas:wl(r.maxFeePerGas),maxPriorityFeePerGas:wl(r.maxPriorityFeePerGas),gasPrice:void 0,maxFeePerBlobGas:void 0};throw Error(`Unsupported transaction type: ${n}`)}const Lm=t=>/^0x[0-9a-fA-F]*$/.test(t),Fm=t=>Buffer.from(t,"utf8"),Lh=t=>`0x${t.toString("hex")}`;var V0,hS;function sH(){return hS||(hS=1,V0=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,a)=>`${s}${a===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((r,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return r;const i=r.length===0?"":",";return`${r}${i}${t(s)}:${t(e[s])}`},"")}}`}),V0}var iH=sH();const aH=Jc(iH);async function oH(t,e){let n=aH(e);if(n===void 0)throw new wt({error:"Failed to prepare the payload for signing",code:"invalid_input"});let r=Buffer.from(n).toString("base64"),{signature:s}=await t({message:r});return{signature:s}}async function Js(t,e,{wallet_id:n,...r}){let s={version:1,url:t.getCompiledPath(g0,{params:{wallet_id:n}}),method:g0.method,headers:{"privy-app-id":t.app.appId},body:{...r}},{signature:i}=await oH(e,s);return await t.fetchPrivyRoute(g0,{body:r,params:{wallet_id:n},headers:{"privy-authorization-signature":i}})}function cH(t){return{from:t.from,to:t.to??void 0,nonce:Yo(t.nonce),chain_id:Yo(t.chainId),data:(function(e){if(e!==void 0)return typeof e=="string"?Lm(e)?e:Lh(Fm(e)):Lh(Buffer.from(Uint8Array.from(e)))})(t.data),value:Yo(t.value),type:t.type,gas_limit:Yo(t.gasLimit),gas_price:Yo(t.gasPrice),max_fee_per_gas:Yo(t.maxFeePerGas),max_priority_fee_per_gas:Yo(t.maxPriorityFeePerGas)}}function Yo(t){if(typeof t=="number"||typeof t=="bigint")return`0x${BigInt(t).toString(16)}`;if(typeof t=="string")return Lm(t)?t:Lh(Fm(t))}function lH(t){return typeof t=="string"&&(t=JSON.parse(t)),{types:t.types,primary_type:String(t.primaryType),domain:t.domain,message:t.message}}async function nP({context:t,account:e,rpcRequest:n}){switch(n.chainType){case"ethereum":return(async function({context:r,account:s,rpcRequest:i}){switch(i.method){case"personal_sign":{let[a]=i.params,o=await Js(r,r.signRequest,{chain_type:"ethereum",method:"personal_sign",wallet_id:s.id,params:a.startsWith("0x")?{message:a.slice(2),encoding:"hex"}:{message:a,encoding:"utf-8"}});if(o.method!=="personal_sign")throw Error("Unable to sign message");return{data:o.data.signature}}case"eth_signTransaction":{let[a]=i.params,o=await Js(r,r.signRequest,{chain_type:"ethereum",method:"eth_signTransaction",wallet_id:s.id,params:{transaction:cH(a)}});if(o.method!=="eth_signTransaction")throw Error("Unable to sign transaction");return{data:o.data.signed_transaction}}case"eth_signTypedData_v4":{let[,a]=i.params,o=await Js(r,r.signRequest,{chain_type:"ethereum",method:i.method,wallet_id:s.id,params:{typed_data:lH(a)}});if(o.method!=="eth_signTypedData_v4")throw Error("Unable to sign typed data");return{data:o.data.signature}}case"eth_sign":{let[,a]=i.params,o=await Js(r,r.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:s.id,params:{hash:Lm(a)?a:Lh(Fm(a))}});if(o.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:o.data.signature}}case"secp256k1_sign":{let[a]=i.params,o=await Js(r,r.signRequest,{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:s.id,params:{hash:Lm(a)?a:Lh(Fm(a))}});if(o.method!=="secp256k1_sign")throw Error("Unable to sign message");return{data:o.data.signature}}case"csw_signUserOperation":case"eth_sendTransaction":case"eth_populateTransactionRequest":throw Error(`This wallet does not support the method: ${i.method}`)}})({context:t,account:e,rpcRequest:n.request});case"solana":return(async function({context:r,account:s,rpcRequest:i}){if(i.method==="signMessage"){let{message:a}=i.params,o=await Js(r,r.signRequest,{chain_type:"solana",method:"signMessage",wallet_id:s.id,params:{message:a,encoding:"base64"}});if(o.method!=="signMessage")throw Error("Unable to sign message");return{data:o.data.signature}}})({context:t,account:e,rpcRequest:n.request})}}let uH=new Set(["eth_sign","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"]),H0=class extends tl{async request(e){if(uH.has(e.method))return this.handleIFrameRpc(e);switch(e.method){case"eth_accounts":case"eth_requestAccounts":return this._account.address?[this._account.address]:[];case"eth_chainId":return`0x${this._chainId.toString(16)}`;case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_signTransaction":{let n=e.params?.[0];return this.handleSignTransaction(n)}case"eth_sendTransaction":{let n=e.params?.[0];return this.handleSendTransaction(n)}case"eth_populateTransactionRequest":{let n=e.params?.[0];return this.handlePopulateTransaction(n)}default:return this.handleJsonRpc(e)}}ensureChainId(e){let n={chainId:this._chainId,...e};return this.internalSwitchEthereumChain(n.chainId),n}internalSwitchEthereumChain(e){e&&Number(e)!==this._chainId&&(this._chainId=Number(e),this._client=oS(this._chainId,this._chains,{rpcUrls:[]},{appId:this._privyInternal.appId}),this.emit("chainChanged",e))}async handlePopulateTransaction(e){let n=this.ensureChainId(e),r=Mm(n),{type:s,...i}=await this._client.prepareTransactionRequest({account:n.from??this._account.address,...r});return{...i,type:tP[s]}}async handleSignTransaction(e){let n={...e};for(let r of Object.keys(n)){let s=n[r];s&&typeof s=="bigint"&&(n[r]=Ye(s))}return await this.handleIFrameRpc({method:"eth_signTransaction",params:[n]})}async handleSendTransaction(e){let n=await this.handlePopulateTransaction(e),r=await this.handleSignTransaction(n);return await this.handleJsonRpc({method:"eth_sendRawTransaction",params:[r]})}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");let n=e.params?.[0],r=this.ensureChainId(n),s=Mm(r);return await this._client.estimateGas({account:r.from??this._account.address,...s})}handleSwitchEthereumChain(e){let n;if(!e.params||!Array.isArray(e.params))throw new uA(`Invalid params for ${e.method}`,4200);if(typeof e.params[0]=="string")n=e.params[0];else{if(!("chainId"in e.params[0])||typeof e.params[0].chainId!="string")throw new uA(`Invalid params for ${e.method}`,4200);n=e.params[0].chainId}this.internalSwitchEthereumChain(n)}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address});let r=this._account;if(wo(r)){let{data:s}=await nP({context:{app:this._appApi,fetchPrivyRoute:(...i)=>this._privyInternal.fetch(...i),getCompiledPath:(...i)=>this._privyInternal.getPath(...i),signRequest:({message:i})=>this._walletProxy.signWithUserSigner({accessToken:n,message:i})},account:r,rpcRequest:{chainType:"ethereum",request:e}});return s}try{await this._walletProxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:n})}catch(s){let i=aE(s);if(i&&this._account.recovery_method==="privy")await this._walletProxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:n});else{if(!i||!this._onNeedsRecovery)throw s;{let a;await new Promise((async(o,c)=>{a=setTimeout((()=>c(new wt({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"}))),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>o(!0)})})).finally((()=>clearTimeout(a)))}}}return(await this._walletProxy.rpcWallet({accessToken:n,request:e,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,hdWalletIndex:this._account.wallet_index,chainType:"ethereum"})).response.data}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new wt({code:"embedded_wallet_request_error",error:r})}}async handleJsonRpc(e){return this._client.request(e)}toJSON(){return`PrivyEIP1193Provider { address: '${this._account.address}', chainId: ${this._chainId}, request: [Function] }`}constructor({walletProxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i,chains:a,onNeedsRecovery:o,chainId:c=a[0].id,appApi:l}){super(),this._walletProxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i,this._chainId=c,this._chains=a,this._onNeedsRecovery=o,this._client=oS(c,a,{rpcUrls:[]},{appId:l.appId}),this._appApi=l}};function Gv(t){return"version"in t}function fS(t,e){let n=(Gv(t)?t.message:t.compileMessage()).staticAccountKeys.find((r=>r.toBase58()===e));if(!n)throw Error(`Transaction does not contain public key ${e}`);return n}let dH=class{async request(e){if(!await this._privyInternal.getAccessTokenInternal())throw new wt({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});switch(e.method){case"signAndSendTransaction":return await this.handleSignAndSendTransaction(e);case"signTransaction":return await this.handleSignTransaction(e);default:return await this.handleIFrameRpc(e)}}get _publicKey(){return this._account.address}async connectAndRecover(e){if(this._account.recovery_method!=="privy-v2")try{await this._proxy.connect({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e})}catch(n){let r=aE(n);if(r&&this._account.recovery_method==="privy")await this._proxy.recover({entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier,accessToken:e});else{if(!r||!this._onNeedsRecovery)throw n;{let s;await new Promise((async(i,a)=>{s=setTimeout((()=>a(new wt({code:"embedded_wallet_recovery_error",error:"User-owned recovery timed out"}))),12e4),await this._onNeedsRecovery?.({recoveryMethod:this._account.recovery_method,onRecovered:()=>i(!0)})})).finally((()=>clearTimeout(s)))}}}}async signMessageRpc(e,n){let r=this._account;if(!wo(r))return(await this._proxy.rpcWallet({accessToken:n,request:e,chainType:"solana",hdWalletIndex:this._account.wallet_index,entropyId:this._entropyId,entropyIdVerifier:this._entropyIdVerifier})).response.data;{let{data:s}=await nP({context:{app:this._app,fetchPrivyRoute:(...i)=>this._privyInternal.fetch(...i),getCompiledPath:(...i)=>this._privyInternal.getPath(...i),signRequest:({message:i})=>this._proxy.signWithUserSigner({accessToken:n,message:i})},account:r,rpcRequest:{chainType:"solana",request:e}});return{signature:s}}}async handleIFrameRpc(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n),await this.signMessageRpc(e,n)}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new wt({code:"embedded_wallet_request_error",error:r})}}async handleSignAndSendTransaction(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n);let{transaction:r,connection:s,options:i}=e.params,a=fS(r,this._account.address),o=Gv(r)?Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:c}=await this.signMessageRpc({method:"signMessage",params:{message:o.toString("base64")}},n);return r.addSignature(a,Buffer.from(c,"base64")),{signature:await s.sendRawTransaction(r.serialize(),i)}}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.address,error:r}),new wt({code:"embedded_wallet_request_error",error:r})}}async handleSignTransaction(e){try{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw Error("Missing privy token. User must be logged in");this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_started",{method:e.method,address:this._account.address}),await this.connectAndRecover(n);let{transaction:r}=e.params,s=fS(r,this._account.address),i=Gv(r)?Buffer.from(r.message.serialize()):r.serializeMessage(),{signature:a}=await this.signMessageRpc({method:"signMessage",params:{message:i.toString("base64")}},n);return r.addSignature(s,Buffer.from(a,"base64")),{signedTransaction:r}}catch(n){console.error(n);let r=n instanceof Error?n.message:"Unable to make wallet request";throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_rpc_failed",{method:e.method,address:this._account.wallet_index,error:r}),new wt({code:"embedded_wallet_request_error",error:r})}}toJSON(){return`PrivyEmbeddedSolanaProvider { address: '${this._account.address}', request: [Function] }`}constructor({proxy:e,privyInternal:n,account:r,entropyId:s,entropyIdVerifier:i,onNeedsRecovery:a,app:o}){this._proxy=e,this._privyInternal=n,this._account=r,this._entropyId=s,this._entropyIdVerifier=i,this._onNeedsRecovery=a,this._app=o}},hH=class{setMessagePoster(e){this._proxy=new uS(e,this._mfaPromises),this._mfa.setProxy(this._proxy)}async signWithUserSigner(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw new wt({error:"User must be logged in to sign a message with the user signer",code:"user_signer_sign_error"});let{signature:r}=await this._proxy.signWithUserSigner({accessToken:n,message:e.message});return{signature:r}}async add(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await w0({context:{app:this._appApi,fetchPrivyRoute:(...r)=>this._privyInternal.fetch(...r),getCompiledPath:(...r)=>this._privyInternal.getPath(...r)},chainType:e.chainType});else{let r=await this._privyInternal.getAccessTokenInternal();if(!r)throw new wt({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.addWallet({accessToken:r,...e})}let{user:n}=await this._privyInternal.refreshSession();return{user:n}}async getBitcoinProvider({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:a}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return wo(e)||await this._load({entropyId:n,entropyIdVerifier:r,wallet:e,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:a}),new xL({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:n,entropyIdVerifier:r})}async create({password:e,recoveryMethod:n,recoveryToken:r,recoveryKey:s,recoverySecretOverride:i,iCloudRecordNameOverride:a,solanaAccount:o,skipCallbacks:c,idempotencyKey:l}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only"){if(n&&!n.startsWith("privy"))throw new wt({error:"User-controlled server wallets do not support custom recovery methods",code:"embedded_wallet_creation_error"});await w0({context:{app:this._appApi,fetchPrivyRoute:(...u)=>this._privyInternal.fetch(...u),getCompiledPath:(...u)=>this._privyInternal.getPath(...u)},chainType:"ethereum",idempotencyKey:l})}else{let u;if(u=n||(e?"user-passcode":"privy"),e&&typeof e!="string")throw Error("Invalid recovery password, must be a string");if(u==="privy"&&this._privyInternal.config?.embedded_wallet_config.require_user_password_on_create)throw Error("Password not provided yet is required by App configuration");let d=await this._privyInternal.getAccessTokenInternal();if(!d)throw Error("User must be logged in to create an embedded wallet");let{address:h}=await this._proxy.create({accessToken:d,recoveryMethod:u,recoveryKey:s,recoveryPassword:e,recoveryAccessToken:r,recoverySecretOverride:i,iCloudRecordNameOverride:a,solanaAddress:o?.address});if(!h)throw Error("Failed to create wallet")}return await this._privyInternal.refreshSession(c)}async createSolana(e){if(!this._proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});if(this._privyInternal.config?.embedded_wallet_config.mode==="user-controlled-server-wallets-only")await w0({context:{app:this._appApi,fetchPrivyRoute:(...n)=>this._privyInternal.fetch(...n),getCompiledPath:(...n)=>this._privyInternal.getPath(...n)},chainType:"solana",idempotencyKey:e?.idempotencyKey});else{let n=await this._privyInternal.getAccessTokenInternal();if(!n)throw new wt({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});e?.ethereumAccount&&await this.getProvider(e.ethereumAccount);let{publicKey:r}=await this._proxy.createSolana({accessToken:n,ethereumAddress:e?.ethereumAccount?.address});if(!r)throw new wt({error:"Failed to create wallet",code:"embedded_wallet_creation_error"})}return await this._privyInternal.refreshSession()}async delegateWallets({delegatedWallets:e,rootWallet:n}){if(!this._proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_creation_error"});let r=await this._privyInternal.getAccessTokenInternal();if(!r)throw new wt({error:"User must be logged in to create an embedded wallet",code:"embedded_wallet_creation_error"});await this._proxy.delegateWallets({accessToken:r,delegatedWallets:e,rootWallet:n})}async getProvider(e,n,r,s,i){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return wo(e)||await this._load({wallet:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",recoveryPassword:n,recoveryKey:i,recoveryAccessToken:r,recoverySecretOverride:s}),new H0({account:e,entropyId:e.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}async getEthereumProvider({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:a,recoveryKey:o,onNeedsRecovery:c}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(!await this._privyInternal.getAccessTokenInternal())throw Error("User must be logged in to create an embedded wallet");return wo(e)||(!c||s||i||a||o)&&await this._load({entropyId:n,entropyIdVerifier:r,wallet:e,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:a,recoveryKey:o}),new H0({account:e,entropyId:n,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,onNeedsRecovery:c,appApi:this._appApi})}async getSolanaProvider(e,n,r,s,i,a,o){if(!this._proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return wo(e)||(!o||s||i||a)&&await this._load({wallet:e,entropyId:n,entropyIdVerifier:r,recoveryPassword:s,recoveryAccessToken:i,recoverySecretOverride:a}),new dH({account:e,privyInternal:this._privyInternal,proxy:this._proxy,entropyId:n,entropyIdVerifier:r,onNeedsRecovery:o,app:this._appApi})}async setRecovery(e){let{wallet:n,...r}=e;if(!this._proxy)throw Error("Embedded wallet proxy not initialized");if(wo(n))throw new wt({error:"This wallet does not support setting recovery methods",code:"unsupported_recovery_method"});ZV({currentRecoveryMethod:n.recovery_method,upgradeToRecoveryMethod:r.recoveryMethod==="icloud-native"?"icloud":r.recoveryMethod}),await this._load(n.chain_type==="solana"?{wallet:n,entropyId:n.address,entropyIdVerifier:"solana-address-verifier"}:{wallet:n,entropyId:n.address,entropyIdVerifier:"ethereum-address-verifier"});let s=await this._privyInternal.getAccessTokenInternal();if(!s)throw Error("User must be logged in to interact with embedded wallets");let i=n.recovery_method;this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_started",{address:n.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});try{let a;if(r.recoveryMethod==="user-passcode")a={recoveryMethod:"user-passcode",recoveryPassword:r.password};else if(r.recoveryMethod==="google-drive")a={recoveryMethod:"google-drive",recoveryAccessToken:r.recoveryAccessToken};else if(r.recoveryMethod==="icloud")a={recoveryMethod:"icloud",recoveryAccessToken:r.recoveryAccessToken};else if(r.recoveryMethod==="icloud-native")a={recoveryMethod:"icloud-native",iCloudRecordNameOverride:r.iCloudRecordNameOverride,recoverySecretOverride:r.recoverySecretOverride};else if(r.recoveryMethod==="recovery-encryption-key")a={recoveryMethod:"recovery-encryption-key",recoveryKey:r.recoveryKey};else{if(r.recoveryMethod!=="privy")throw Error(`Unknown recovery method: ${r.recoveryMethod}`);a={recoveryMethod:"privy"}}await this._proxy.setRecovery({accessToken:s,entropyId:n.address,entropyIdVerifier:n.chain_type==="solana"?"solana-address-verifier":"ethereum-address-verifier",...a}),this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_completed",{address:n.address,target_recovery_method:r.recoveryMethod,existing_recovery_method:i});let{user:o}=await this._privyInternal.refreshSession();return{user:o,provider:n.chain_type!=="ethereum"?null:new H0({account:n,entropyId:n.address,entropyIdVerifier:"ethereum-address-verifier",privyInternal:this._privyInternal,chains:this._chains,walletProxy:this._proxy,appApi:this._appApi})}}catch(a){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_set_recovery_failed",{address:n.address,recovery_method:n.recovery_method,error:a instanceof Error?a.message:"Unable to recover wallet"}),a}}getURL(){let e=new URL(`${this._privyInternal.baseUrl}/apps/${this._privyInternal.appId}/embedded-wallets`);return this._privyInternal.caid&&e.searchParams.append("caid",this._privyInternal.caid),this._privyInternal.appClientId&&e.searchParams.append("client_id",this._privyInternal.appClientId),e.href}get chains(){return this._chains}onMessage(e){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return this._proxy.handleEmbeddedWalletMessages(e)}reload(){this._proxy?this._proxy.reload():console.warn("Attempted to reload proxy before initialized")}async ping(e){try{if(!this._proxy)throw Error("Embedded wallet proxy not initialized");return await this._proxy.ping(e),!0}catch(n){return console.error(n),!1}}async _load({entropyId:e,entropyIdVerifier:n,wallet:r,recoveryPassword:s,recoveryKey:i,recoveryAccessToken:a,recoverySecretOverride:o}){if(!this._proxy)throw Error("Embedded wallet proxy not initialized");let c=await this._privyInternal.getAccessTokenInternal();if(!c)throw Error("User must be logged in to interact with embedded wallets");try{return await this._proxy.connect({accessToken:c,entropyId:e,entropyIdVerifier:n}),e}catch(l){if(aE(l))try{if(r.recovery_method==="privy"){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let u=await this._proxy.recover({accessToken:c,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),u.entropyId}if(r.recovery_method==="user-passcode"&&s){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryPassword:s,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),u.entropyId}if(["google-drive","icloud"].includes(r.recovery_method)&&a){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryAccessToken:a,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),u.entropyId}if(r.recovery_method==="icloud"&&o){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:"icloud-native"});let u=await this._proxy.recover({accessToken:c,recoverySecretOverride:o,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:"icloud-native"}),u.entropyId}if(r.recovery_method==="recovery-encryption-key"&&i){this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_started",{address:r.address,recovery_method:r.recovery_method});let u=await this._proxy.recover({accessToken:c,recoveryKey:i,entropyId:e,entropyIdVerifier:n});return this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_completed",{address:r.address,recovery_method:r.recovery_method}),u.entropyId}}catch(u){throw this._privyInternal.createAnalyticsEvent("embedded_wallet_sdk_recovery_failed",{address:r.address,recovery_method:r.recovery_method,error:u instanceof Error?u.message:`Unable to recover wallet: ${e}`}),u}throw l}}constructor(e,n,r,s,i,a){if(this._chains=Array.from(Wg),this._privyInternal=e,n&&(this._proxy=new uS(n,i),s.setProxy(this._proxy)),r){let o=f3(r);this._chains=o}this._mfa=s,this._mfaPromises=i,this._appApi=a}},fH=class extends tl{constructor(){super(),this.rootPromise={current:null},this.submitPromise={current:null}}};var sm={exports:{}},pH=sm.exports,pS;function mH(){return pS||(pS=1,(function(t,e){(function(n,r){t.exports=r()})(pH,(function(){var n=function(i,a){if(a=a||{},typeof i!="function")throw new s("fetch must be a function");if(typeof a!="object")throw new s("defaults must be an object");if(a.retries!==void 0&&!r(a.retries))throw new s("retries must be a positive integer");if(a.retryDelay!==void 0&&!r(a.retryDelay)&&typeof a.retryDelay!="function")throw new s("retryDelay must be a positive integer or a function returning a positive integer");if(a.retryOn!==void 0&&!Array.isArray(a.retryOn)&&typeof a.retryOn!="function")throw new s("retryOn property expects an array or function");var o={retries:3,retryDelay:1e3,retryOn:[]};return a=Object.assign(o,a),function(l,u){var d=a.retries,h=a.retryDelay,f=a.retryOn;if(u&&u.retries!==void 0)if(r(u.retries))d=u.retries;else throw new s("retries must be a positive integer");if(u&&u.retryDelay!==void 0)if(r(u.retryDelay)||typeof u.retryDelay=="function")h=u.retryDelay;else throw new s("retryDelay must be a positive integer or a function returning a positive integer");if(u&&u.retryOn)if(Array.isArray(u.retryOn)||typeof u.retryOn=="function")f=u.retryOn;else throw new s("retryOn property expects an array or function");return new Promise(function(p,m){var g=function(A){var w=typeof Request<"u"&&l instanceof Request?l.clone():l;i(w,u).then(function(y){if(Array.isArray(f)&&f.indexOf(y.status)===-1)p(y);else if(typeof f=="function")try{return Promise.resolve(f(A,null,y)).then(function(E){E?_(A,null,y):p(y)}).catch(m)}catch(E){m(E)}else A<d?_(A,null,y):p(y)}).catch(function(y){if(typeof f=="function")try{Promise.resolve(f(A,y,null)).then(function(E){E?_(A,y,null):m(y)}).catch(function(E){m(E)})}catch(E){m(E)}else A<d?_(A,y,null):m(y)})};function _(A,w,y){var E=typeof h=="function"?h(A,w,y):h;setTimeout(function(){g(++A)},E)}g(0)})}};function r(i){return Number.isInteger(i)&&i>=0}function s(i){this.name="ArgumentError",this.message=i}return n}))})(sm)),sm.exports}var gH=mH();const rP=Jc(gH);let gp;const yH=new Uint8Array(16);function wH(){if(!gp&&(gp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gp(yH)}const Hn=[];for(let t=0;t<256;++t)Hn.push((t+256).toString(16).slice(1));function bH(t,e=0){return Hn[t[e+0]]+Hn[t[e+1]]+Hn[t[e+2]]+Hn[t[e+3]]+"-"+Hn[t[e+4]]+Hn[t[e+5]]+"-"+Hn[t[e+6]]+Hn[t[e+7]]+"-"+Hn[t[e+8]]+Hn[t[e+9]]+"-"+Hn[t[e+10]]+Hn[t[e+11]]+Hn[t[e+12]]+Hn[t[e+13]]+Hn[t[e+14]]+Hn[t[e+15]]}const vH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mS={randomUUID:vH};function Yv(t,e,n){if(mS.randomUUID&&!t)return mS.randomUUID();t=t||{};const r=t.random||(t.rng||wH)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,bH(r)}var De,gS=((De={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",De.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",De.MISSING_OR_INVALID_PRIVY_CLIENT_ID="missing_or_invalid_privy_client_id",De.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",De.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",De.MISSING_MFA_ENROLLMENT="missing_mfa_enrollment",De.MISSING_OR_INVALID_MFA="missing_or_invalid_mfa",De.EXPIRED_OR_INVALID_MFA_TOKEN="expired_or_invalid_mfa_token",De.INVALID_DATA="invalid_data",De.INVALID_CREDENTIALS="invalid_credentials",De.INVALID_CAPTCHA="invalid_captcha",De.LINKED_TO_ANOTHER_USER="linked_to_another_user",De.ALLOWLIST_REJECTED="allowlist_rejected",De.CANNOT_UNLINK_EMBEDDED_WALLET="cannot_unlink_embedded_wallet",De.CANNOT_UNLINK_SOLE_ACCOUNT="cannot_unlink_sole_account",De.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",De.LINKED_ACCOUNT_NOT_FOUND="linked_account_not_found",De.TOO_MANY_REQUESTS="too_many_requests",De.RESOURCE_CONFLICT="resource_conflict",De.INVALID_ORIGIN="invalid_origin",De.MISSING_ORIGIN="missing_origin",De.INVALID_NATIVE_APP_ID="invalid_native_app_id",De.TOKEN_ALREADY_USED="token_already_used",De.ALREADY_LOGGED_OUT="already_logged_out",De.NOT_SUPPORTED="not_supported",De.USER_UNSUBSCRIBED="user_unsubscribed",De.MAX_APPS_REACHED="max_apps_reached",De.USER_LIMIT_REACHED="max_accounts_reached",De.DEVICE_REVOKED="device_revoked",De.WALLET_PASSWORD_EXISTS="wallet_password_exists",De.OAUTH_STATE_MISMATCH="oauth_state_mismatch",De.MAX_DENYLIST_ENTRIES_REACHED="max_denylist_entries_reached",De.MAX_TEST_ACCOUNTS_REACHED="max_test_accounts_reached",De.DISALLOWED_LOGIN_METHOD="disallowed_login_method",De.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",De.DISALLOWED_RECOVERY_METHOD="disallowed_recovery_method",De.LEGACY_DASHBOARD_LOGIN_CONFIGURATION="legacy_dashboard_login_configuration",De.CANNOT_SET_PASSWORD="cannot_set_password",De.INVALID_PKCE_PARAMETERS="invalid_pkce_parameters",De.INVALID_APP_URL_SCHEME_CONFIGURATION="invalid_app_url_scheme_configuration",De.CROSS_APP_CONNECTION_NOT_ALLOWED="cross_app_connection_not_allowed",De.USER_DOES_NOT_EXIST="user_does_not_exist",De.ALREADY_EXISTS="resource_already_exists",De.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",De.USER_HAS_NOT_DELEGATED_WALLET="user_has_not_delegated_wallet",De.FEATURE_NOT_ENABLED="feature_not_enabled",De.INSUFFICIENT_FUNDS="insufficient_funds",De.TRANSACTION_BROADCAST_FAILURE="transaction_broadcast_failure",De.TRANSACTION_EXECUTION_FAILURE="transaction_execution_failure",De.INVALID_SOLANA_TRANSACTION="invalid_solana_transaction",De.INVALID_POLICY_FORMAT="invalid_policy_format",De.INVALID_AGGREGATION_FORMAT="invalid_aggregation_format",De.POLICY_VIOLATION="policy_violation",De.AUTHORIZATION_KEY_HAS_ASSOCIATED_WALLETS="authorization_key_has_associated_wallets",De.INVALID_REQUEST="invalid_request",De.SIGNUP_DISABLED="signup_disabled",De),ft;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ft||(ft={}));var yS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yS||(yS={}));const ke=ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fo=t=>{switch(typeof t){case"undefined":return ke.undefined;case"string":return ke.string;case"number":return Number.isNaN(t)?ke.nan:ke.number;case"boolean":return ke.boolean;case"function":return ke.function;case"bigint":return ke.bigint;case"symbol":return ke.symbol;case"object":return Array.isArray(t)?ke.array:t===null?ke.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ke.promise:typeof Map<"u"&&t instanceof Map?ke.map:typeof Set<"u"&&t instanceof Set?ke.set:typeof Date<"u"&&t instanceof Date?ke.date:ke.object;default:return ke.unknown}},me=ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ua extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(n(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof Ua))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ua.create=t=>new Ua(t);const Zv=(t,e)=>{let n;switch(t.code){case me.invalid_type:t.received===ke.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ft.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:n=`Unrecognized key(s) in object: ${ft.joinValues(t.keys,", ")}`;break;case me.invalid_union:n="Invalid input";break;case me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ft.joinValues(t.options)}`;break;case me.invalid_enum_value:n=`Invalid enum value. Expected ${ft.joinValues(t.options)}, received '${t.received}'`;break;case me.invalid_arguments:n="Invalid function arguments";break;case me.invalid_return_type:n="Invalid function return type";break;case me.invalid_date:n="Invalid date";break;case me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ft.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case me.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case me.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case me.custom:n="Invalid input";break;case me.invalid_intersection_types:n="Intersection results could not be merged";break;case me.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case me.not_finite:n="Number must be finite";break;default:n=e.defaultError,ft.assertNever(t)}return{message:n}};let _H=Zv;function EH(){return _H}const xH=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}};function _e(t,e){const n=EH(),r=xH({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Zv?void 0:Zv].filter(s=>!!s)});t.common.issues.push(r)}class Ar{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return ze;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Ar.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return ze;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const ze=Object.freeze({status:"aborted"}),Ld=t=>({status:"dirty",value:t}),Ls=t=>({status:"valid",value:t}),wS=t=>t.status==="aborted",bS=t=>t.status==="dirty",xu=t=>t.status==="valid",jm=t=>typeof Promise<"u"&&t instanceof Promise;var $e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})($e||($e={}));class ji{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vS=(t,e)=>{if(xu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ua(t.common.issues);return this._error=n,this._error}}};function Je(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{const{message:c}=t;return a.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:c??n??o.defaultError}},description:s}}class at{get description(){return this._def.description}_getType(e){return fo(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ar,ctx:{common:e.parent.common,data:e.data,parsedType:fo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(jm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},s=this._parseSync({data:e,path:r.path,parent:r});return vS(r,s)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return xu(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>xu(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fo(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(jm(s)?s:Promise.resolve(s));return vS(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:me.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new jc({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ca.create(this,this._def)}nullable(){return zc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Di.create(this)}promise(){return Km.create(this,this._def)}or(e){return Wm.create([this,e],this._def)}and(e){return qm.create(this,e,this._def)}transform(e){return new jc({...Je(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Gm({...Je(this._def),innerType:this,defaultValue:n,typeName:We.ZodDefault})}brand(){return new oP({typeName:We.ZodBranded,type:this,...Je(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ym({...Je(this._def),innerType:this,catchValue:n,typeName:We.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return r2.create(this,e)}readonly(){return Zm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AH=/^c[^\s-]{8,}$/i,SH=/^[0-9a-z]+$/,IH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,TH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CH=/^[a-z0-9_-]{21}$/i,kH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,OH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,PH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let K0;const $H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,UH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,BH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,MH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,sP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",LH=new RegExp(`^${sP}$`);function iP(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function FH(t){return new RegExp(`^${iP(t)}$`)}function jH(t){let e=`${sP}T${iP(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function zH(t,e){return!!((e==="v4"||!e)&&$H.test(t)||(e==="v6"||!e)&&DH.test(t))}function WH(t,e){if(!kH.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function qH(t,e){return!!((e==="v4"||!e)&&NH.test(t)||(e==="v6"||!e)&&UH.test(t))}class Ri extends at{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ke.string){const i=this._getOrReturnCtx(e);return _e(i,{code:me.invalid_type,expected:ke.string,received:i.parsedType}),ze}const r=new Ar;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?_e(s,{code:me.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&_e(s,{code:me.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")PH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"email",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")K0||(K0=new RegExp(RH,"u")),K0.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"emoji",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")TH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"uuid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")CH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"nanoid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")AH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cuid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")SH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cuid2",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")IH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"ulid",code:me.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),_e(s,{validation:"url",code:me.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"regex",code:me.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?jH(i).test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?LH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?FH(i).test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{code:me.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?OH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"duration",code:me.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?zH(e.data,i.version)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"ip",code:me.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?WH(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"jwt",code:me.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?qH(e.data,i.version)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"cidr",code:me.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?BH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"base64",code:me.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?MH.test(e.data)||(s=this._getOrReturnCtx(e,s),_e(s,{validation:"base64url",code:me.invalid_string,message:i.message}),r.dirty()):ft.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:me.invalid_string,...$e.errToObj(r)})}_addCheck(e){return new Ri({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$e.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...$e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...$e.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...$e.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...$e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$e.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...$e.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...$e.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...$e.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...$e.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...$e.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...$e.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...$e.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...$e.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...$e.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...$e.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...$e.errToObj(n)})}nonempty(e){return this.min(1,$e.errToObj(e))}trim(){return new Ri({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ri({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ri({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ri.create=t=>new Ri({checks:[],typeName:We.ZodString,coerce:t?.coerce??!1,...Je(t)});function VH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class Bc extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ke.number){const i=this._getOrReturnCtx(e);return _e(i,{code:me.invalid_type,expected:ke.number,received:i.parsedType}),ze}let r;const s=new Ar;for(const i of this._def.checks)i.kind==="int"?ft.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:me.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?VH(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:me.not_finite,message:i.message}),s.dirty()):ft.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,$e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,$e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,$e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,$e.toString(n))}setLimit(e,n,r,s){return new Bc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:$e.toString(s)}]})}_addCheck(e){return new Bc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:$e.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:$e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$e.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ft.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Bc.create=t=>new Bc({checks:[],typeName:We.ZodNumber,coerce:t?.coerce||!1,...Je(t)});class Mc extends at{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ke.bigint)return this._getInvalidInput(e);let r;const s=new Ar;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:me.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ft.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return _e(n,{code:me.invalid_type,expected:ke.bigint,received:n.parsedType}),ze}gte(e,n){return this.setLimit("min",e,!0,$e.toString(n))}gt(e,n){return this.setLimit("min",e,!1,$e.toString(n))}lte(e,n){return this.setLimit("max",e,!0,$e.toString(n))}lt(e,n){return this.setLimit("max",e,!1,$e.toString(n))}setLimit(e,n,r,s){return new Mc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:$e.toString(s)}]})}_addCheck(e){return new Mc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$e.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:$e.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mc.create=t=>new Mc({checks:[],typeName:We.ZodBigInt,coerce:t?.coerce??!1,...Je(t)});class zm extends at{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ke.boolean){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.boolean,received:r.parsedType}),ze}return Ls(e.data)}}zm.create=t=>new zm({typeName:We.ZodBoolean,coerce:t?.coerce||!1,...Je(t)});class Au extends at{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ke.date){const i=this._getOrReturnCtx(e);return _e(i,{code:me.invalid_type,expected:ke.date,received:i.parsedType}),ze}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return _e(i,{code:me.invalid_date}),ze}const r=new Ar;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:me.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),_e(s,{code:me.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ft.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Au({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:$e.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:$e.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Au.create=t=>new Au({checks:[],coerce:t?.coerce||!1,typeName:We.ZodDate,...Je(t)});class _S extends at{_parse(e){if(this._getType(e)!==ke.symbol){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.symbol,received:r.parsedType}),ze}return Ls(e.data)}}_S.create=t=>new _S({typeName:We.ZodSymbol,...Je(t)});class Jv extends at{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.undefined,received:r.parsedType}),ze}return Ls(e.data)}}Jv.create=t=>new Jv({typeName:We.ZodUndefined,...Je(t)});class Xv extends at{_parse(e){if(this._getType(e)!==ke.null){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.null,received:r.parsedType}),ze}return Ls(e.data)}}Xv.create=t=>new Xv({typeName:We.ZodNull,...Je(t)});class Qv extends at{constructor(){super(...arguments),this._any=!0}_parse(e){return Ls(e.data)}}Qv.create=t=>new Qv({typeName:We.ZodAny,...Je(t)});class ES extends at{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ls(e.data)}}ES.create=t=>new ES({typeName:We.ZodUnknown,...Je(t)});class Bo extends at{_parse(e){const n=this._getOrReturnCtx(e);return _e(n,{code:me.invalid_type,expected:ke.never,received:n.parsedType}),ze}}Bo.create=t=>new Bo({typeName:We.ZodNever,...Je(t)});class xS extends at{_parse(e){if(this._getType(e)!==ke.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.void,received:r.parsedType}),ze}return Ls(e.data)}}xS.create=t=>new xS({typeName:We.ZodVoid,...Je(t)});class Di extends at{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ke.array)return _e(n,{code:me.invalid_type,expected:ke.array,received:n.parsedType}),ze;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(_e(n,{code:a?me.too_big:me.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(_e(n,{code:me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(_e(n,{code:me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new ji(n,a,n.path,o)))).then(a=>Ar.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new ji(n,a,n.path,o)));return Ar.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Di({...this._def,minLength:{value:e,message:$e.toString(n)}})}max(e,n){return new Di({...this._def,maxLength:{value:e,message:$e.toString(n)}})}length(e,n){return new Di({...this._def,exactLength:{value:e,message:$e.toString(n)}})}nonempty(e){return this.min(1,e)}}Di.create=(t,e)=>new Di({type:t,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...Je(e)});function Ml(t){if(t instanceof pn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ca.create(Ml(r))}return new pn({...t._def,shape:()=>e})}else return t instanceof Di?new Di({...t._def,type:Ml(t.element)}):t instanceof Ca?Ca.create(Ml(t.unwrap())):t instanceof zc?zc.create(Ml(t.unwrap())):t instanceof Lc?Lc.create(t.items.map(e=>Ml(e))):t}class pn extends at{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ft.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ke.object){const l=this._getOrReturnCtx(e);return _e(l,{code:me.invalid_type,expected:ke.object,received:l.parsedType}),ze}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Bo&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ji(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Bo){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")o.length>0&&(_e(s,{code:me.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ji(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,h=await u.value;l.push({key:d,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>Ar.mergeObjectSync(r,l)):Ar.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return $e.errToObj,new pn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const s=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:$e.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new pn({...this._def,unknownKeys:"strip"})}passthrough(){return new pn({...this._def,unknownKeys:"passthrough"})}extend(e){return new pn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new pn({...this._def,catchall:e})}pick(e){const n={};for(const r of ft.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new pn({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ft.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new pn({...this._def,shape:()=>n})}deepPartial(){return Ml(this)}partial(e){const n={};for(const r of ft.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new pn({...this._def,shape:()=>n})}required(e){const n={};for(const r of ft.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ca;)i=i._def.innerType;n[r]=i}return new pn({...this._def,shape:()=>n})}keyof(){return aP(ft.objectKeys(this.shape))}}pn.create=(t,e)=>new pn({shape:()=>t,unknownKeys:"strip",catchall:Bo.create(),typeName:We.ZodObject,...Je(e)});pn.strictCreate=(t,e)=>new pn({shape:()=>t,unknownKeys:"strict",catchall:Bo.create(),typeName:We.ZodObject,...Je(e)});pn.lazycreate=(t,e)=>new pn({shape:t,unknownKeys:"strip",catchall:Bo.create(),typeName:We.ZodObject,...Je(e)});class Wm extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Ua(o.ctx.common.issues));return _e(n,{code:me.invalid_union,unionErrors:a}),ze}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new Ua(c));return _e(n,{code:me.invalid_union,unionErrors:o}),ze}}get options(){return this._def.options}}Wm.create=(t,e)=>new Wm({options:t,typeName:We.ZodUnion,...Je(e)});const ca=t=>t instanceof t1?ca(t.schema):t instanceof jc?ca(t.innerType()):t instanceof Hm?[t.value]:t instanceof Fc?t.options:t instanceof n1?ft.objectValues(t.enum):t instanceof Gm?ca(t._def.innerType):t instanceof Jv?[void 0]:t instanceof Xv?[null]:t instanceof Ca?[void 0,...ca(t.unwrap())]:t instanceof zc?[null,...ca(t.unwrap())]:t instanceof oP||t instanceof Zm?ca(t.unwrap()):t instanceof Ym?ca(t._def.innerType):[];class n2 extends at{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.object)return _e(n,{code:me.invalid_type,expected:ke.object,received:n.parsedType}),ze;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(_e(n,{code:me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ze)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const a=ca(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new n2({typeName:We.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Je(r)})}}function e1(t,e){const n=fo(t),r=fo(e);if(t===e)return{valid:!0,data:t};if(n===ke.object&&r===ke.object){const s=ft.objectKeys(e),i=ft.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const c=e1(t[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(n===ke.array&&r===ke.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],c=e1(a,o);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ke.date&&r===ke.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qm extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(wS(i)||wS(a))return ze;const o=e1(i.value,a.value);return o.valid?((bS(i)||bS(a))&&n.dirty(),{status:n.value,value:o.data}):(_e(r,{code:me.invalid_intersection_types}),ze)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qm.create=(t,e,n)=>new qm({left:t,right:e,typeName:We.ZodIntersection,...Je(n)});class Lc extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.array)return _e(r,{code:me.invalid_type,expected:ke.array,received:r.parsedType}),ze;if(r.data.length<this._def.items.length)return _e(r,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ze;!this._def.rest&&r.data.length>this._def.items.length&&(_e(r,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ji(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Ar.mergeArray(n,a)):Ar.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Lc({...this._def,rest:e})}}Lc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lc({items:t,typeName:We.ZodTuple,rest:null,...Je(e)})};class Vm extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.object)return _e(r,{code:me.invalid_type,expected:ke.object,received:r.parsedType}),ze;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new ji(r,o,r.path,o)),value:a._parse(new ji(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Ar.mergeObjectAsync(n,s):Ar.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof at?new Vm({keyType:e,valueType:n,typeName:We.ZodRecord,...Je(r)}):new Vm({keyType:Ri.create(),valueType:e,typeName:We.ZodRecord,...Je(n)})}}class AS extends at{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.map)return _e(r,{code:me.invalid_type,expected:ke.map,received:r.parsedType}),ze;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,c],l)=>({key:s._parse(new ji(r,o,r.path,[l,"key"])),value:i._parse(new ji(r,c,r.path,[l,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return ze;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return ze;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(l.value,u.value)}return{status:n.value,value:o}}}}AS.create=(t,e,n)=>new AS({valueType:e,keyType:t,typeName:We.ZodMap,...Je(n)});class Fh extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ke.set)return _e(r,{code:me.invalid_type,expected:ke.set,received:r.parsedType}),ze;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(_e(r,{code:me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(_e(r,{code:me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return ze;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const o=[...r.data.values()].map((c,l)=>i._parse(new ji(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,n){return new Fh({...this._def,minSize:{value:e,message:$e.toString(n)}})}max(e,n){return new Fh({...this._def,maxSize:{value:e,message:$e.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Fh.create=(t,e)=>new Fh({valueType:t,minSize:null,maxSize:null,typeName:We.ZodSet,...Je(e)});class t1 extends at{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}t1.create=(t,e)=>new t1({getter:t,typeName:We.ZodLazy,...Je(e)});class Hm extends at{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return _e(n,{received:n.data,code:me.invalid_literal,expected:this._def.value}),ze}return{status:"valid",value:e.data}}get value(){return this._def.value}}Hm.create=(t,e)=>new Hm({value:t,typeName:We.ZodLiteral,...Je(e)});function aP(t,e){return new Fc({values:t,typeName:We.ZodEnum,...Je(e)})}class Fc extends at{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return _e(n,{expected:ft.joinValues(r),received:n.parsedType,code:me.invalid_type}),ze}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return _e(n,{received:n.data,code:me.invalid_enum_value,options:r}),ze}return Ls(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Fc.create(e,{...this._def,...n})}exclude(e,n=this._def){return Fc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Fc.create=aP;class n1 extends at{_parse(e){const n=ft.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ke.string&&r.parsedType!==ke.number){const s=ft.objectValues(n);return _e(r,{expected:ft.joinValues(s),received:r.parsedType,code:me.invalid_type}),ze}if(this._cache||(this._cache=new Set(ft.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ft.objectValues(n);return _e(r,{received:r.data,code:me.invalid_enum_value,options:s}),ze}return Ls(e.data)}get enum(){return this._def.values}}n1.create=(t,e)=>new n1({values:t,typeName:We.ZodNativeEnum,...Je(e)});class Km extends at{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ke.promise&&n.common.async===!1)return _e(n,{code:me.invalid_type,expected:ke.promise,received:n.parsedType}),ze;const r=n.parsedType===ke.promise?n.data:Promise.resolve(n.data);return Ls(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Km.create=(t,e)=>new Km({type:t,typeName:We.ZodPromise,...Je(e)});class jc extends at{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{_e(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return ze;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?ze:c.status==="dirty"||n.value==="dirty"?Ld(c.value):c});{if(n.value==="aborted")return ze;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?ze:o.status==="dirty"||n.value==="dirty"?Ld(o.value):o}}if(s.type==="refinement"){const a=o=>{const c=s.refinement(o,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ze:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?ze:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xu(a))return ze;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>xu(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):ze);ft.assertNever(s)}}jc.create=(t,e,n)=>new jc({schema:t,typeName:We.ZodEffects,effect:e,...Je(n)});jc.createWithPreprocess=(t,e,n)=>new jc({schema:e,effect:{type:"preprocess",transform:t},typeName:We.ZodEffects,...Je(n)});class Ca extends at{_parse(e){return this._getType(e)===ke.undefined?Ls(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ca.create=(t,e)=>new Ca({innerType:t,typeName:We.ZodOptional,...Je(e)});class zc extends at{_parse(e){return this._getType(e)===ke.null?Ls(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zc.create=(t,e)=>new zc({innerType:t,typeName:We.ZodNullable,...Je(e)});class Gm extends at{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gm.create=(t,e)=>new Gm({innerType:t,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Je(e)});class Ym extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return jm(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ua(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ua(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ym.create=(t,e)=>new Ym({innerType:t,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Je(e)});class SS extends at{_parse(e){if(this._getType(e)!==ke.nan){const r=this._getOrReturnCtx(e);return _e(r,{code:me.invalid_type,expected:ke.nan,received:r.parsedType}),ze}return{status:"valid",value:e.data}}}SS.create=t=>new SS({typeName:We.ZodNaN,...Je(t)});class oP extends at{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class r2 extends at{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ze:i.status==="dirty"?(n.dirty(),Ld(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ze:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new r2({in:e,out:n,typeName:We.ZodPipeline})}}class Zm extends at{_parse(e){const n=this._def.innerType._parse(e),r=s=>(xu(s)&&(s.value=Object.freeze(s.value)),s);return jm(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Zm.create=(t,e)=>new Zm({innerType:t,typeName:We.ZodReadonly,...Je(e)});var We;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(We||(We={}));const Nt=Ri.create,Rs=Bc.create;Mc.create;const cP=zm.create,HH=Au.create,Su=Qv.create;Bo.create;const my=Di.create,Fn=pn.create,lP=Wm.create,KH=n2.create;qm.create;Lc.create;const Ic=Vm.create,GH=Hm.create,Gi=Fc.create;Km.create;Ca.create;zc.create;const YH={string:(t=>Ri.create({...t,coerce:!0})),number:(t=>Bc.create({...t,coerce:!0})),boolean:(t=>zm.create({...t,coerce:!0})),bigint:(t=>Mc.create({...t,coerce:!0})),date:(t=>Au.create({...t,coerce:!0}))};/*! js-cookie v3.0.5 | MIT */function yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var ZH={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function r1(t,e){function n(s,i,a){if(!(typeof document>"u")){a=yp({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in a)a[c]&&(o+="; "+c,a[c]!==!0&&(o+="="+a[c].split(";")[0]));return document.cookie=s+"="+t.write(i,s)+o}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],a={},o=0;o<i.length;o++){var c=i[o].split("="),l=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(a[u]=t.read(l,u),s===u)break}catch{}}return s?a[s]:a}}return Object.create({set:n,get:r,remove:function(s,i){n(s,"",yp({},i,{expires:-1}))},withAttributes:function(s){return r1(this.converter,yp({},this.attributes,s))},withConverter:function(s){return r1(yp({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var nn=r1(ZH,{path:"/"});const IS=Promise.allSettled.bind(Promise)??(t=>Promise.all(t.map((e=>e.then((n=>({status:"fulfilled",value:n}))).catch((n=>({status:"rejected",reason:n})))))));let bl="privy:token",G0="privy-token",Y0="privy:pat",wp="privy:refresh_token",Z0="privy-refresh-token",vl="privy:id-token",J0="privy-id-token",bp="privy-session",uP=class extends tl{set isUsingServerCookies(e){this._isUsingServerCookies=e}async getCustomerAccessToken(){let e=await this._storage.get(bl);try{return typeof e=="string"?new Dl(e).value:null}catch(n){return console.error(n),await this.destroyLocalState({reason:"getToken_error"}),null}}async getPrivyAccessToken(){let e=await this._storage.get(Y0);try{return typeof e=="string"?new Dl(e).value:null}catch(n){return console.error(n),await this.destroyLocalState({reason:"getToken_error"}),null}}async getRefreshToken(){let e=await this._storage.get(wp);return typeof e=="string"?e:null}async getIdentityToken(){let e=await this._storage.get(vl);return typeof e=="string"?e:null}get mightHaveServerCookies(){try{let e=nn.get(bp);return e!==void 0&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e,n){return this.mightHaveServerCookies||typeof e=="string"&&typeof n=="string"}tokenIsActive(e){if(!e)return!1;let n=Dl.parse(e);return n!==null&&!n.isExpired(30)}async destroyLocalState(e){await IS([this._storage.del(bl),this._storage.del(wp),this._storage.del(vl),this._storage.del(this.GUEST_CREDENTIAL_STORAGE_KEY)]),nn.remove(G0),nn.remove(Z0),nn.remove(J0),nn.remove(bp),e?.reason&&this.emit("storage_cleared",{reason:e.reason})}async storeCustomerAccessToken(e){if(typeof e=="string"){let n=await this._storage.get(bl);if(await this._storage.put(bl,e),!this._isUsingServerCookies){let r=Dl.parse(e)?.expiration;nn.set(G0,e,{sameSite:"Strict",secure:!0,expires:r?new Date(1e3*r):void 0})}n!==e&&this.emit("token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let n=await this._storage.get(bl);await this._storage.del(bl),nn.remove(G0),n!==null&&this.emit("token_cleared",{reason:"set_with_non_string_value"})}}async storePrivyAccessToken(e){typeof e=="string"?await this._storage.put(Y0,e):await this._storage.del(Y0)}async storeRefreshToken(e){typeof e=="string"?(await this._storage.put(wp,e),this._isUsingServerCookies||(nn.set(bp,"t",{sameSite:"Strict",secure:!0,expires:30}),nn.set(Z0,e,{sameSite:"Strict",secure:!0,expires:30})),this.emit("refresh_token_stored",{cookiesEnabled:this._isUsingServerCookies})):(await this._storage.del(wp),nn.remove(Z0),nn.remove(bp),this.emit("refresh_token_cleared",{reason:"set_with_non_string_value"}))}async updateWithTokensResponse(e){let n=(await IS([this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token),this.storeRefreshToken(e.refresh_token),this.storeIdentityToken(e.identity_token),this.processOAuthTokens(e.oauth_tokens)])).filter((r=>r.status==="rejected"));n.length>0&&this.emit("error_storing_tokens",n.map((r=>String(r.reason))).join(", "))}async processOAuthTokens(e){e&&this.emit("oauth_tokens_granted",e)}async storeIdentityToken(e){if(typeof e=="string"){let n=await this._storage.get(vl);if(await this._storage.put(vl,e),!this._isUsingServerCookies){let r=Dl.parse(e)?.expiration;nn.set(J0,e,{sameSite:"Strict",secure:!0,expires:r?new Date(1e3*r):void 0})}n!==e&&this.emit("identity_token_stored",{cookiesEnabled:this._isUsingServerCookies})}else{let n=await this._storage.get(vl);await this._storage.del(vl),nn.remove(J0),n!==null&&this.emit("identity_token_cleared",{reason:"set_with_non_string_value"})}}async getOrCreateGuestCredential(){let e=this._storage.get(this.GUEST_CREDENTIAL_STORAGE_KEY);if(e&&typeof e=="string")return e;let n=Cc(crypto.getRandomValues(new Uint8Array(32)));return await this._storage.put(this.GUEST_CREDENTIAL_STORAGE_KEY,n),n}constructor(e){super(),this._isUsingServerCookies=!1,this._storage=e.storage,this.GUEST_CREDENTIAL_STORAGE_KEY=`privy:guest:${e.appId}`}};uP.events=["storage_cleared","token_cleared","refresh_token_cleared","identity_token_cleared","token_stored","refresh_token_stored","identity_token_stored","oauth_tokens_granted","error_storing_tokens"];var JH=t=>{let e=new AbortController;return setTimeout((()=>e.abort()),t),e.signal};function XH(t){let e=new URLSearchParams;for(let n in t)t[n]!=null&&e.append(n,String(t[n]));return Array.from(e).length?"?"+e.toString():""}const vp=()=>{};let Za={NONE:Number.NEGATIVE_INFINITY,ERROR:1,WARN:2,INFO:3,DEBUG:Number.POSITIVE_INFINITY};const QH=({level:t}={level:"ERROR"})=>({get level(){return t},error:Za[t]>=Za.ERROR?console.error:vp,warn:Za[t]>=Za.WARN?console.warn:vp,info:Za[t]>=Za.INFO?console.info:vp,debug:Za[t]>=Za.DEBUG?console.debug:vp});let X0="privy:caid",eK=class{setCallbacks(e){this.callbacks={...this.callbacks,...e}}get isReady(){return!!this._config}get config(){return this._config}get caid(){return this._analyticsId}async _initialize(){if(this.isReady)this.callbacks?.setIsReady?.(!0);else{if(!await this.isStorageAccessible())throw new wt({code:"storage_error",error:"Unable to access storage"});this._config=await this.getAppConfig(),this._config?.custom_api_url&&(this.baseUrl=this._config.custom_api_url,this.session.isUsingServerCookies=!0),this.callbacks?.setIsReady?.(!0),this._sdkVersion.startsWith("react-auth:")||this.createAnalyticsEvent("sdk_initialize",{})}}getPath(e,{params:n,query:r}){return`${this.baseUrl}${NM(e.path,n)}${XH(r)}`}async fetch(e,{body:n,params:r,query:s,headers:i,onRequest:a=this._beforeRequest.bind(this)}){let o=new Request(this.getPath(e,{params:r,query:s}),{method:e.method,body:JSON.stringify(n),headers:i}),c=await a(o),l=await this._fetch(o,c),u=await l.json();if(l.status>299)throw new y0(u);return u}async _beforeRequestWithoutInitialize(e){let n=await this.session.getPrivyAccessToken()??await this.session.getCustomerAccessToken(),r=new Headers(e.headers);r.set("privy-app-id",this.appId),this.appClientId&&r.set("privy-client-id",this.appClientId),r.set("privy-client",this._sdkVersion),n&&r.set("Authorization",`Bearer ${n}`),r.set("Content-Type","application/json"),r.set("Accept","application/json");let s=await this._getOrGenerateClientAnalyticsId();return s&&r.set("privy-ca-id",s),this.nativeAppIdentifier&&r.set("x-native-app-identifier",this.nativeAppIdentifier),{signal:JH(2e4),headers:r,credentials:"include"}}async beforeRequestWithoutRefresh(e){return await this._initialize(),this._beforeRequestWithoutInitialize(e)}async _beforeRequest(e){return await this._initialize(),await this.getAccessTokenInternal(),this.beforeRequestWithoutRefresh(e)}async getAppConfig(){return await this.fetch(KB,{params:{app_id:this.appId},onRequest:this._beforeRequestWithoutInitialize.bind(this)})}async _getOrGenerateClientAnalyticsId(){if(this._analyticsId)return this._analyticsId;try{let e=await this._storage.get(X0);if(typeof e=="string"&&e.length>0)return this._analyticsId=e,e}catch(e){this.logger.error("Unable to load clientId",e)}try{this._analyticsId=Yv()}catch(e){this.logger.error("Unable to generate uuidv4",e)}if(this._analyticsId){try{await this._storage.put(X0,this._analyticsId)}catch(e){this.logger.error(`Unable to store clientId: ${this._analyticsId}`,e)}return this._analyticsId}}async destroyClientAnalyticsId(){try{return await this._storage.del(X0)}catch(e){this.logger.error("Unable to delete clientId",e)}}async createAnalyticsEvent(e,n){try{await this.fetch(HB,{body:{event_name:e,client_id:await this._getOrGenerateClientAnalyticsId(),payload:n},onRequest:this.beforeRequestWithoutRefresh.bind(this)})}catch{}}async refreshSession(e=!1){if(!await this.isStorageAccessible())throw new wt({code:"storage_error",error:"Unable to access storage"});let n=await this.session.getRefreshToken()??void 0,r=n??"key",s=this._cache.get(r);if(s)return this.logger.debug("[privy:refresh] found in-flight session refresh request, deduping"),await s;let i=this._refreshSession(n,e);this._cache.set(r,i);try{return await i}finally{this._cache.delete(r)}}async _refreshSession(e,n){let r=await this.session.getCustomerAccessToken();if(!this.session.hasRefreshCredentials(r,e??null))throw this.logger.debug("[privy:refresh] missing tokens, skipping request"),await this._initialize(),new y0({code:gS.MISSING_OR_INVALID_TOKEN,error:"No tokens found in storage"});try{this.logger.debug(`[privy:refresh] fetching: ${lA.path}`);let s=await this.fetch(lA,{body:{refresh_token:e},onRequest:this.beforeRequestWithoutRefresh.bind(this)}),i=s.session_update_action;return this.logger.debug(`[privy:refresh] response: ${i}`),i==="set"&&(await this.session.updateWithTokensResponse(s),this.logger.debug("[privy:refresh] tokens stored")),i==="clear"&&(await this.session.destroyLocalState(),this.logger.debug("[privy:refresh] tokens cleared"),n||this.callbacks?.setUser?.(null)),i==="ignore"&&(s.token&&(await this.session.storeCustomerAccessToken(s.token),this.logger.debug("[privy:refresh] token stored (CAT)")),s.privy_access_token&&(await this.session.storePrivyAccessToken(s.privy_access_token),this.logger.debug("[privy:refresh] token stored (PAT)")),s.identity_token&&(this.logger.debug("[privy:refresh] token stored (IDT)"),await this.session.storeIdentityToken(s.identity_token))),this.logger.debug("[privy:refresh] returning response"),n||this.callbacks?.setUser?.(s.user),s}catch(s){throw this.logger.debug(`[privy:refresh] error: ${s.message??"unknown error"}`),s instanceof y0&&s.code===gS.MISSING_OR_INVALID_TOKEN&&(await this.session.destroyLocalState(),n||this.callbacks?.setUser?.(null)),s}}async getAccessToken(){let[e,n]=await Promise.all([this.session.getCustomerAccessToken(),this.session.getRefreshToken()]);if(!this.session.tokenIsActive(e)&&this.session.hasRefreshCredentials(e,n)){let r=await this.refreshSession(),s=await this.session.getCustomerAccessToken();return r.token||this.logger.debug("[privy:getAccessToken] expected token received null"),r.token===e&&this.logger.debug("[privy:getAccessToken] expected new token in response received existing"),s===e&&this.logger.debug("[privy:getAccessToken] expected new token in storage received existing"),r.token??s}return e}async getAccessTokenInternal(){let e=await this.getAccessToken();return await this.session.getPrivyAccessToken()??e}async getIdentityToken(){return await this.session.getIdentityToken()}async isStorageAccessible(){try{let e=`privy:__storage__test-${Yv()}`,n="blobby";await this._storage.put(e,n);let r=await this._storage.get(e);return await this._storage.del(e),r===n}catch(e){return this.logger.error(e),!1}}constructor(e){this._sdkVersion="js-sdk-core:0.60.0",this._cache=new Map,this.logger=QH({level:e.logLevel??"ERROR"}),this._storage=e.storage,this._analyticsId=null,this._getOrGenerateClientAnalyticsId(),this.baseUrl=e.baseUrl??"https://auth.privy.io",this.appId=e.appId,this.appClientId=e.appClientId,this._sdkVersion=e.sdkVersion??this._sdkVersion,this.callbacks=e.callbacks,this.nativeAppIdentifier=e.nativeAppIdentifier,this.session=new uP({storage:this._storage,isUsingServerCookies:!1,appId:e.appId}),this._fetch=rP(globalThis.fetch,{retries:3,retryDelay:n=>3**n*500,retryOn:[408,409,425,500,502,503,504]}),this.session.on("error_storing_tokens",(n=>{this.createAnalyticsEvent("error_updating_tokens_in_storage",{reason:n})}))}},tK=class{async get(){let{user:e}=await this._privyInternal.refreshSession();return{user:e}}async acceptTerms(){return{user:await this._privyInternal.fetch(VM,{})}}constructor(e){this._privyInternal=e}};const dP=t=>t.type==="wallet"&&t.wallet_client_type==="privy"&&t.connector_type==="embedded",hP=t=>t?t.linked_accounts.filter(dP).filter((e=>e.chain_type==="ethereum")).sort(((e,n)=>e.wallet_index-n.wallet_index)):[],TS=t=>hP(t).find((e=>e.wallet_index===0))??null,fP=t=>t?t.linked_accounts.filter(dP).filter((e=>e.chain_type==="solana")).sort(((e,n)=>e.wallet_index-n.wallet_index)):[],nK=t=>fP(t).find((e=>e.wallet_index===0))??null,rK=(t,e)=>!(e==="off"||hP(t).length>0||t.linked_accounts.filter((n=>n.type==="wallet"&&n.chain_type==="ethereum")).length>0&&e!=="all-users"),sK=(t,e)=>!(e==="off"||fP(t).length>0||t.linked_accounts.filter((n=>n.type==="wallet"&&n.chain_type==="solana")).length>0&&e!=="all-users"),li=async(t,e,n)=>{let r=rK(e.user,n?.ethereum?.createOnLogin??"off"),s=sK(e.user,n?.solana?.createOnLogin??"off");if(r&&s){let i=await t.create({recoveryMethod:"privy",skipCallbacks:!0});return{...await t.createSolana({ethereumAccount:TS(i.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}}return r?{...await t.create({recoveryMethod:"privy",solanaAccount:nK(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:s?{...await t.createSolana({ethereumAccount:TS(e.user)??void 0}),is_new_user:e.is_new_user,oauth_tokens:e.oauth_tokens}:e};let iK=class{async syncWithToken(e,n,r){let s=await this._privyInternal.fetch(JB,{body:{token:e,mode:r}});await this._privyInternal.session.updateWithTokensResponse(s);let i=await li(this._embedded,s,n?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async linkWithToken(e){await this._privyInternal.fetch(XB,{body:{token:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},aK=class{async sendCode(e,n){return this._privyInternal.fetch(vM,{body:{email:e,token:n}})}async loginWithCode(e,n,r,s){let i=await this._privyInternal.fetch(bM,{body:{email:e,code:n,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await li(this._embedded,i,s?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async linkWithCode(e,n){await this._privyInternal.fetch(_M,{body:{email:e,code:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updateEmail({oldEmailAddress:e,newEmailAddress:n,code:r}){await this._privyInternal.fetch(xM,{body:{oldAddress:e,newAddress:n,code:r}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink(e){await this._privyInternal.fetch(EM,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},oK=class{async initializeAuth({relyingParty:e,redirectUrl:n,token:r}){return await this._privyInternal.fetch(QB,{body:{relying_party:e,redirect_url:n,token:r}})}async getFarcasterStatus({channel_token:e}){return await this._privyInternal.fetch(rM,{headers:{"farcaster-channel-token":e}})}async authenticate({channel_token:e,message:n,signature:r,fid:s,mode:i},a){let o=await this._privyInternal.fetch(eM,{body:{channel_token:e,message:n,signature:r,fid:s,mode:i}});await this._privyInternal.session.updateWithTokensResponse(o);let c=await li(this._embedded,o,a?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async link({channel_token:e,message:n,signature:r,fid:s}){await this._privyInternal.fetch(tM,{body:{channel_token:e,message:n,signature:r,fid:s}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async unlink({fid:e}){await this._privyInternal.fetch(nM,{body:{fid:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},cK=class{async initializeAuth(){return await this._privyInternal.fetch(sM,{body:{}})}async authenticate({message:e,signature:n,fid:r},s){let i=await this._privyInternal.fetch(iM,{body:{message:e,signature:n,fid:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await li(this._embedded,i,s?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}constructor(e,n){this._privyInternal=e,this._embedded=n}},lK=class{async create(e){let n=await this._privyInternal.session.getOrCreateGuestCredential(),r=await this._privyInternal.fetch(aM,{body:{guest_credential:n}});await this._privyInternal.session.updateWithTokensResponse(r);let s=await li(this._embedded,r,e?.embedded);return this._privyInternal.callbacks?.setUser?.(s.user),s}constructor(e,n){this._privyInternal=e,this._embedded=n}};const bo="privy:state_code",vo="privy:code_verifier";async function uK(t,e){let n=new TextEncoder().encode(t);return new Uint8Array(await e("SHA-256",n))}function dK(t){return crypto.getRandomValues(new Uint8Array(t))}function s2(){return Cc(dK(36))}function pP(){return s2()}async function mP({codeVerifier:t,method:e="S256",digest:n=crypto.subtle.digest.bind(crypto.subtle)}){if(e!="S256")return t;{let r=await uK(t,n);return Cc(r)}}let hK=class{async generateURL(e,n){let r=s2(),s=pP(),i=await mP({codeVerifier:r,digest:this._crypto?.digest});return await Promise.all([this._storage.put(vo,r),this._storage.put(bo,s)]),this._privyInternal.fetch(uM,{body:{redirect_to:n,provider:e,code_challenge:i,state_code:s}})}async loginWithCode(e,n,r,s,i,a){let[o,c]=await Promise.all([this._storage.get(vo),this._storage.get(bo)]);if(c!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:c??"",returnedStateCode:n??""}),new wt({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let l=await this._privyInternal.fetch(lM,{body:{authorization_code:e,code_type:s,state_code:c,code_verifier:o,mode:i}});await this._privyInternal.session.updateWithTokensResponse(l);let u=await li(this._embedded,l,a?.embedded);return await Promise.all([this._storage.del(vo),this._storage.del(bo)]),this._privyInternal.callbacks?.setUser?.(u.user),u}async linkWithCode(e,n,r,s){let[i,a]=await Promise.all([this._storage.get(vo),this._storage.get(bo)]);if(a!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"oauth",provider:r,storedStateCode:a??"",returnedStateCode:n??""}),new wt({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let o=await this._privyInternal.fetch(dM,{body:{authorization_code:e,code_type:s,state_code:a,code_verifier:i}});await this._privyInternal.session.processOAuthTokens(o.oauth_tokens);let c=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(vo),this._storage.del(bo)]),{user:c.user,identity_token:c.identity_token}}async unlink(e,n){await this._privyInternal.fetch(hM,{body:{provider:e,subject:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}constructor(e,n,r,s){this._privyInternal=e,this._embedded=n,this._storage=r,this._crypto=s}},fK=class{async generateRegistrationOptions(e){return await this._privyInternal.fetch(wM,{body:{relying_party:e}})}async generateAuthenticationOptions(e){return await this._privyInternal.fetch(gM,{body:{relying_party:e}})}async generateSignupOptions(e){return await this._privyInternal.fetch(yM,{body:{relying_party:e}})}async loginWithPasskey(e,n,r,s){let i=await this._privyInternal.fetch(pM,{body:{relying_party:r,challenge:n,authenticator_response:this._transformAuthenticationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await li(this._embedded,i,s?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async signupWithPasskey(e,n,r){let s=await this._privyInternal.fetch(mM,{body:{relying_party:n,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});await this._privyInternal.session.updateWithTokensResponse(s);let i=await li(this._embedded,s,r?.embedded);return this._privyInternal.callbacks?.setUser?.(i.user),i}async linkWithPasskey(e,n){await this._privyInternal.fetch(fM,{body:{relying_party:n,authenticator_response:this._transformRegistrationResponseToSnakeCase(e)}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}_transformRegistrationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData||void 0,transports:e.response.transports||void 0,public_key:e.response.publicKey||void 0,public_key_algorithm:e.response.publicKeyAlgorithm||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}_transformAuthenticationResponseToSnakeCase(e){return{type:e.type,id:e.id,raw_id:e.rawId,response:{signature:e.response.signature,client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,user_handle:e.response.userHandle||void 0},authenticator_attachment:e.authenticatorAttachment||void 0,client_extension_results:{app_id:e.clientExtensionResults.appid||void 0,cred_props:e.clientExtensionResults.credProps||void 0,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret||void 0}}}constructor(e,n){this._privyInternal=e,this._embedded=n}},pK=class{async sendCode(e,n){return this._privyInternal.fetch(SM,{body:{phoneNumber:e,token:n}})}async loginWithCode(e,n,r,s){let i=await this._privyInternal.fetch(AM,{body:{phoneNumber:e,code:n,mode:r}});await this._privyInternal.session.updateWithTokensResponse(i);let a=await li(this._embedded,i,s?.embedded);return this._privyInternal.callbacks?.setUser?.(a.user),a}async linkWithCode(e,n){await this._privyInternal.fetch(IM,{body:{phoneNumber:e,code:n}});let r=await this._privyInternal.refreshSession();return{user:r.user,identity_token:r.identity_token}}async updatePhone({oldPhoneNumber:e,newPhoneNumber:n,code:r}){await this._privyInternal.fetch(CM,{body:{old_phone_number:e,new_phone_number:n,code:r}});let s=await this._privyInternal.refreshSession();return{user:s.user,identity_token:s.identity_token}}async unlink(e){await this._privyInternal.fetch(TM,{body:{phoneNumber:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}constructor(e,n){this._privyInternal=e,this._embedded=n}},mK=class{async unlinkWallet(e){await this._privyInternal.fetch(FM,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async linkWithSiwe(e,n,r){let s=n||this._wallet,i=r||this._preparedMessage;if(!s)throw Error("A wallet must be provided in the init step or as an argument to linkWithSiwe");if(!i)throw Error("A message must be generated and signed before being used to link a wallet to privy");await this._privyInternal.fetch(MM,{body:{message:i,signature:e,chainId:s.chainId,walletClientType:s.walletClientType??null,connectorType:s.connectorType??null}});let a=await this._privyInternal.refreshSession();return{user:a.user,identity_token:a.identity_token}}async loginWithSiwe(e,n,r,s,i){let a=n||this._wallet,o=r||this._preparedMessage;if(!a)throw Error("A wallet must be provided in the init step or as an argument to loginWithSiwe");if(!o)throw Error("A message must be generated and signed before being used to login to privy with a wallet");let c=await this._privyInternal.fetch(BM,{body:{signature:e,message:o,chainId:a.chainId,walletClientType:a.walletClientType??null,connectorType:a.connectorType??null,mode:s}});await this._privyInternal.session.updateWithTokensResponse(c);let l=await li(this._embedded,c,i?.embedded);return this._privyInternal.callbacks?.setUser?.(l.user),l}async init(e,n,r){var s;this._wallet=e;let{nonce:i}=await this._privyInternal.fetch(r3,{body:{address:e.address}}),a=`${(s={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:n,nonce:i,uri:r}).domain} wants you to sign in with your Ethereum account:
${s.address}

${s.statement}

URI: ${s.uri}
Version: 1
Chain ID: ${s.chainId}
Nonce: ${s.nonce}
Issued At: ${s.issuedAt}
Resources:
- https://privy.io`;return this._preparedMessage=a,{nonce:i,message:a}}constructor(e,n){this._wallet=void 0,this._privyInternal=e,this._embedded=n}},gK=class{async unlink({address:e}){await this._privyInternal.fetch(qM,{body:{address:e}});let n=await this._privyInternal.refreshSession();return{user:n.user,identity_token:n.identity_token}}async link({message:e,signature:n,walletClientType:r,connectorType:s}){await this._privyInternal.fetch(WM,{body:{message:e,signature:n,walletClientType:r??null,connectorType:s??null}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async login({mode:e,message:n,signature:r,walletClientType:s,connectorType:i,opts:a}){let o=await this._privyInternal.fetch(zM,{body:{signature:r,message:n,walletClientType:s??null,connectorType:i??null,mode:e}});await this._privyInternal.session.updateWithTokensResponse(o);let c=await li(this._embedded,o,a?.embedded);return this._privyInternal.callbacks?.setUser?.(c.user),c}async fetchNonce({address:e}){let{nonce:n}=await this._privyInternal.fetch(jM,{body:{address:e}});return{nonce:n}}constructor(e,n){this._privyInternal=e,this._embedded=n}},yK=class{async link(e,n,r,s){await this._privyInternal.fetch(LM,{body:{message:e,signature:n,smart_wallet_type:r,smart_wallet_version:s}});let i=await this._privyInternal.refreshSession();return{user:i.user,identity_token:i.identity_token}}async init(e){var n;let{nonce:r}=await this._privyInternal.fetch(r3,{body:{address:e.address}});return{nonce:r,message:`${(n={chainId:e.chainId.toString().replace("eip155:",""),address:e.address,issuedAt:new Date().toISOString(),statement:"By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.",domain:"privy.io",uri:"https://auth.privy.io",nonce:r}).domain} wants you to sign in with your Ethereum account:
${n.address}

${n.statement}

URI: ${n.uri}
Version: 1
Chain ID: ${n.chainId}
Nonce: ${n.nonce}
Issued At: ${n.issuedAt}
Resources:
- https://privy.io`}}constructor(e){this._privyInternal=e}},wK=class{async logout(e){try{let n=await this._privyInternal.session.getRefreshToken()??void 0;await this._privyInternal.fetch(DM,{body:{refresh_token:n}})}catch{console.warn("Error destroying session")}await Promise.all([this._privyInternal.session.destroyLocalState({reason:"logout"}),this._privyInternal.destroyClientAnalyticsId(),e?.userId&&this._mfa.clearMfa({userId:e.userId})]),this._privyInternal.callbacks?.setUser?.(null)}constructor(e,n,r,s,i){this._privyInternal=e,this._mfa=i,this.customProvider=new iK(this._privyInternal,n),this.phone=new pK(this._privyInternal,n),this.email=new aK(this._privyInternal,n),this.oauth=new hK(this._privyInternal,n,r,s),this.guest=new lK(this._privyInternal,n),this.siwe=new mK(this._privyInternal,n),this.siws=new gK(this._privyInternal,n),this.smartWallet=new yK(this._privyInternal),this.passkey=new fK(this._privyInternal,n),this.farcaster=new oK(this._privyInternal,n),this.farcasterV2=new cK(this._privyInternal,n)}},bK=class{async initOnRampSession(e){return await this._privyInternal.fetch(GB,{body:e})}async getStatus(e){return await this._privyInternal.fetch(YB,{query:{partnerUserId:e}})}constructor(e){this._privyInternal=e}};const vK={prod:{url:"https://api.moonpay.com/v1",key:"pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL"},sandbox:{url:"https://api.moonpay.com/v1",key:"pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI"}};let _K=new Set([Wu.id,df.id,ff.id,pf.id,hf.id,sE.id]),EK=new Set([Wu.id,df.id,iE.id,ff.id,pf.id,hf.id]);function KCe(t,e){switch(e){case"native-currency":return _K.has(t);case"USDC":return EK.has(t);default:return console.warn("Unknown asset passed to MoonPay Onramp"),!1}}function GCe(t,e){switch(t){case df.id:return e==="native-currency"?"ETH_ARBITRUM":"USDC_ARBITRUM";case hf.id:return e==="native-currency"?"AVAX_CCHAIN":"USDC_CCHAIN";case ff.id:return e==="native-currency"?"ETH_BASE":"USDC_BASE";case sE.id:return"CELO_CELO";case pf.id:return e==="native-currency"?"MATIC_POLYGON":"USDC_POLYGON";case Wu.id:return e==="native-currency"?"ETH_ETHEREUM":"USDC_ETHEREUM";default:return console.warn(`Chain ${t} not supported by Moonpay, defaulting to Ethereum mainnet`),"ETH_ETHEREUM"}}let xK=class{async sign(e){return await this._privyInternal.fetch(HM,{body:e})}async getTransactionStatus({transactionId:e,useSandbox:n}){let{url:r,key:s}=vK[n?"sandbox":"prod"],i=await rP(fetch,{retries:3,retryDelay:500})(`${r}/transactions/ext/${e}?apiKey=${s}`);if(!i.ok)throw new EL({error:`Failed to fetch transaction status for Transaction ${e}`,code:"failed_to_fetch_moonpay_transaction_status",response:i});let a=await i.json();return Array.isArray(a)?a.at(0):void 0}constructor(e){this._privyInternal=e}},AK=class{constructor(e){this.moonpay=new xK(e),this.coinbase=new bK(e)}},SK=class{async generateAuthenticationOptions(e){return await this._privyInternal.fetch(oM,{body:e})}constructor(e){this._privyInternal=e}},IK=class{async sendCode(e){return await this._privyInternal.fetch(cM,{body:e})}constructor(e){this._privyInternal=e}},TK=class{setProxy(e){this.proxy=e}async getAccessTokenInternal(){let e=await this.privyInternal.getAccessTokenInternal();if(!e)throw new wt({error:"Missing access token",code:"attempted_rpc_call_before_logged_in"});return e}async verifyMfa(){if(!this.proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.verifyMfa({accessToken:await this.getAccessTokenInternal()})}async initEnrollMfa(e){if(!this.proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.initEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()})}async submitEnrollMfa(e){if(!this.proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let n=await this.proxy.submitEnrollMfa({...e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),n}async unenrollMfa(e){if(!this.proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});let n=await this.proxy.unenrollMfa({method:e,accessToken:await this.getAccessTokenInternal()});return await this.privyInternal.refreshSession(),n}async clearMfa(e){if(!this.proxy)throw new wt({error:"Embedded wallet proxy not initialized",code:"embedded_wallet_webview_not_loaded"});return await this.proxy.clearMfa(e)}constructor(e,n){this.proxy=n,this.privyInternal=e,this.sms=new IK(e),this.passkey=new SK(e)}},CK=class{async init(e){return this._privyInternal.fetch(RM,{body:{client_type:e}})}async getICloudConfiguration(e){return this._privyInternal.fetch($M,{body:{client_type:e}})}constructor(e){this._privyInternal=e}},kK=class{async generateURL(e){let n=s2(),r=pP(),s=await mP({codeVerifier:n,digest:this._crypto?.digest});return await Promise.all([this._storage.put(vo,n),this._storage.put(bo,r)]),this._privyInternal.fetch(OM,{body:{redirect_to:e,code_challenge:s,state_code:r}})}async authorize(e,n){let[r,s]=await Promise.all([this._storage.get(vo),this._storage.get(bo)]);if(s!==n)throw this._privyInternal.createAnalyticsEvent("possible_phishing_attempt",{flow:"recovery_oauth",storedStateCode:s??"",returnedStateCode:n??""}),new wt({code:"pkce_state_code_mismatch",error:"Unexpected auth flow. This may be a phishing attempt."});let i=await this._privyInternal.fetch(PM,{body:{authorization_code:e,state_code:s,code_verifier:r}});return await Promise.all([this._storage.del(vo),this._storage.del(bo)]),i}constructor(e,n,r){this._privyInternal=e,this._storage=n,this._crypto=r}},OK=class{async getRecoveryKeyMaterial(e,n){return this._privyInternal.fetch(kM,{body:{chain_type:n},params:{address:e}})}constructor(e,n,r){this._privyInternal=e,this.auth=new kK(this._privyInternal,n,r),this.icloudAuth=new CK(this._privyInternal)}},PK=class{async initialize(){await this._privyInternal._initialize()}setMessagePoster(e){this.embeddedWallet.setMessagePoster(e)}addOAuthTokensListener(e){return this._privyInternal.session.on("oauth_tokens_granted",e),{unsubscribe:()=>{this._privyInternal.session.removeListener("oauth_tokens_granted",e)}}}setCallbacks(e){this._privyInternal.setCallbacks(e)}getAccessToken(){return this._privyInternal.getAccessToken()}getIdentityToken(){return this._privyInternal.getIdentityToken()}getCompiledPath(e,n){return this._privyInternal.getPath(e,n)}async fetchPrivyRoute(e,n){return this._privyInternal.fetch(e,n)}get logger(){return this._privyInternal.logger}constructor({clientId:e,...n}){this._privyInternal=new eK({...n,appClientId:e}),this.mfa=new TK(this._privyInternal),this.mfaPromises=new fH,this.app=new YM(this._privyInternal),this.embeddedWallet=new hH(this._privyInternal,n.embeddedWalletMessagePoster,n.supportedChains,this.mfa,this.mfaPromises,this.app),this.user=new tK(this._privyInternal),this.auth=new wK(this._privyInternal,this.embeddedWallet,n.storage,n.crypto,this.mfa),this.recovery=new OK(this._privyInternal,n.storage,n.crypto),this.funding=new AK(this._privyInternal),this.delegated=new iL(this._privyInternal),this.crossApp=new a3(this._privyInternal,n.storage)}};function Pn(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw TypeError("attempted to use private field on non-instance");return t}var RK=0;function gP(t){return"__private_"+RK+++"_"+t}var Lt=gP("_wallet"),Jr=gP("_account");let $K=class{get standardWallet(){return Pn(this,Lt)[Lt]}get address(){return Pn(this,Jr)[Jr].address}async disconnect(){if(!Pn(this,Lt)[Lt].features["standard:disconnect"]?.disconnect)throw Error("Wallet does not support disconnect");await Pn(this,Lt)[Lt].features["standard:disconnect"].disconnect()}async signMessage(...e){if(!Pn(this,Lt)[Lt].features["solana:signMessage"]?.signMessage)throw Error("Wallet does not support signMessage");let n=await Pn(this,Lt)[Lt].features["solana:signMessage"].signMessage(...e.map((r=>({...r,account:Pn(this,Jr)[Jr]}))));return e.length===1?n[0]:[...n]}async signTransaction(...e){if(!Pn(this,Lt)[Lt].features["solana:signTransaction"]?.signTransaction)throw Error("Wallet does not support signTransaction");let n=await Pn(this,Lt)[Lt].features["solana:signTransaction"].signTransaction(...e.map((r=>({...r,account:Pn(this,Jr)[Jr]}))));return e.length===1?n[0]:[...n]}async signAndSendTransaction(...e){if(!Pn(this,Lt)[Lt].features["solana:signAndSendTransaction"]?.signAndSendTransaction)throw Error("Wallet does not support signAndSendTransaction");let n=await Pn(this,Lt)[Lt].features["solana:signAndSendTransaction"].signAndSendTransaction(...e.map((r=>({...r,account:Pn(this,Jr)[Jr]}))));return e.length===1?n[0]:[...n]}async signAndSendAllTransactions(e){if(!Pn(this,Lt)[Lt].features["solana:signAndSendTransaction"]?.signAndSendTransaction)throw Error("Wallet does not support signAndSendTransaction");return[...await Pn(this,Lt)[Lt].features["solana:signAndSendTransaction"].signAndSendTransaction(...e.map((n=>({...n,account:Pn(this,Jr)[Jr]}))))]}constructor({wallet:e,account:n}){Object.defineProperty(this,Lt,{writable:!0,value:void 0}),Object.defineProperty(this,Jr,{writable:!0,value:void 0}),Pn(this,Lt)[Lt]=e,Pn(this,Jr)[Jr]=n}};function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}var NK=/^\s+/,DK=/\s+$/;function Se(t,e){if(t=t||"",e=e||{},t instanceof Se)return t;if(!(this instanceof Se))return new Se(t,e);var n=UK(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Se.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,s,i,a,o;return n=e.r/255,r=e.g/255,s=e.b/255,n<=.03928?i=n/12.92:i=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),.2126*i+.7152*a+.0722*o},setAlpha:function(e){return this._a=yP(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=kS(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=kS(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+s+"%)":"hsva("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=CS(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=CS(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+s+"%)":"hsla("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return OS(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return FK(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Gt(this._r,255)*100)+"%",g:Math.round(Gt(this._g,255)*100)+"%",b:Math.round(Gt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Gt(this._r,255)*100)+"%, "+Math.round(Gt(this._g,255)*100)+"%, "+Math.round(Gt(this._b,255)*100)+"%)":"rgba("+Math.round(Gt(this._r,255)*100)+"%, "+Math.round(Gt(this._g,255)*100)+"%, "+Math.round(Gt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:XK[OS(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+PS(this._r,this._g,this._b,this._a),r=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var i=Se(e);r="#"+PS(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,s=this._a<1&&this._a>=0,i=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Se(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(qK,arguments)},brighten:function(){return this._applyModification(VK,arguments)},darken:function(){return this._applyModification(HK,arguments)},desaturate:function(){return this._applyModification(jK,arguments)},saturate:function(){return this._applyModification(zK,arguments)},greyscale:function(){return this._applyModification(WK,arguments)},spin:function(){return this._applyModification(KK,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(ZK,arguments)},complement:function(){return this._applyCombination(GK,arguments)},monochromatic:function(){return this._applyCombination(JK,arguments)},splitcomplement:function(){return this._applyCombination(YK,arguments)},triad:function(){return this._applyCombination(RS,[3])},tetrad:function(){return this._applyCombination(RS,[4])}};Se.fromRatio=function(t,e){if(Jm(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=Fd(t[r]));t=n}return Se(t,e)};function UK(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,a=!1,o=!1;return typeof t=="string"&&(t=nG(t)),Jm(t)=="object"&&(Qi(t.r)&&Qi(t.g)&&Qi(t.b)?(e=BK(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Qi(t.h)&&Qi(t.s)&&Qi(t.v)?(r=Fd(t.s),s=Fd(t.v),e=LK(t.h,r,s),a=!0,o="hsv"):Qi(t.h)&&Qi(t.s)&&Qi(t.l)&&(r=Fd(t.s),i=Fd(t.l),e=MK(t.h,r,i),a=!0,o="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=yP(n),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function BK(t,e,n){return{r:Gt(t,255)*255,g:Gt(e,255)*255,b:Gt(n,255)*255}}function CS(t,e,n){t=Gt(t,255),e=Gt(e,255),n=Gt(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=(r+s)/2;if(r==s)i=a=0;else{var c=r-s;switch(a=o>.5?c/(2-r-s):c/(r+s),r){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4;break}i/=6}return{h:i,s:a,l:o}}function MK(t,e,n){var r,s,i;t=Gt(t,360),e=Gt(e,100),n=Gt(n,100);function a(l,u,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?l+(u-l)*6*d:d<1/2?u:d<2/3?l+(u-l)*(2/3-d)*6:l}if(e===0)r=s=i=n;else{var o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;r=a(c,o,t+1/3),s=a(c,o,t),i=a(c,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function kS(t,e,n){t=Gt(t,255),e=Gt(e,255),n=Gt(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=r,c=r-s;if(a=r===0?0:c/r,r==s)i=0;else{switch(r){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4;break}i/=6}return{h:i,s:a,v:o}}function LK(t,e,n){t=Gt(t,360)*6,e=Gt(e,100),n=Gt(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),a=n*(1-s*e),o=n*(1-(1-s)*e),c=r%6,l=[n,a,i,i,o,n][c],u=[o,n,n,a,i,i][c],d=[i,i,o,n,n,a][c];return{r:l*255,g:u*255,b:d*255}}function OS(t,e,n,r){var s=[ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function FK(t,e,n,r,s){var i=[ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16)),ei(wP(r))];return s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function PS(t,e,n,r){var s=[ei(wP(r)),ei(Math.round(t).toString(16)),ei(Math.round(e).toString(16)),ei(Math.round(n).toString(16))];return s.join("")}Se.equals=function(t,e){return!t||!e?!1:Se(t).toRgbString()==Se(e).toRgbString()};Se.random=function(){return Se.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function jK(t,e){e=e===0?0:e||10;var n=Se(t).toHsl();return n.s-=e/100,n.s=gy(n.s),Se(n)}function zK(t,e){e=e===0?0:e||10;var n=Se(t).toHsl();return n.s+=e/100,n.s=gy(n.s),Se(n)}function WK(t){return Se(t).desaturate(100)}function qK(t,e){e=e===0?0:e||10;var n=Se(t).toHsl();return n.l+=e/100,n.l=gy(n.l),Se(n)}function VK(t,e){e=e===0?0:e||10;var n=Se(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),Se(n)}function HK(t,e){e=e===0?0:e||10;var n=Se(t).toHsl();return n.l-=e/100,n.l=gy(n.l),Se(n)}function KK(t,e){var n=Se(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Se(n)}function GK(t){var e=Se(t).toHsl();return e.h=(e.h+180)%360,Se(e)}function RS(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Se(t).toHsl(),r=[Se(t)],s=360/e,i=1;i<e;i++)r.push(Se({h:(n.h+i*s)%360,s:n.s,l:n.l}));return r}function YK(t){var e=Se(t).toHsl(),n=e.h;return[Se(t),Se({h:(n+72)%360,s:e.s,l:e.l}),Se({h:(n+216)%360,s:e.s,l:e.l})]}function ZK(t,e,n){e=e||6,n=n||30;var r=Se(t).toHsl(),s=360/n,i=[Se(t)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(Se(r));return i}function JK(t,e){e=e||6;for(var n=Se(t).toHsv(),r=n.h,s=n.s,i=n.v,a=[],o=1/e;e--;)a.push(Se({h:r,s,v:i})),i=(i+o)%1;return a}Se.mix=function(t,e,n){n=n===0?0:n||50;var r=Se(t).toRgb(),s=Se(e).toRgb(),i=n/100,a={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return Se(a)};Se.readability=function(t,e){var n=Se(t),r=Se(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Se.isReadable=function(t,e,n){var r=Se.readability(t,e),s,i;switch(i=!1,s=rG(n),s.level+s.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7;break}return i};Se.mostReadable=function(t,e,n){var r=null,s=0,i,a,o,c;n=n||{},a=n.includeFallbackColors,o=n.level,c=n.size;for(var l=0;l<e.length;l++)i=Se.readability(t,e[l]),i>s&&(s=i,r=Se(e[l]));return Se.isReadable(t,r,{level:o,size:c})||!a?r:(n.includeFallbackColors=!1,Se.mostReadable(t,["#fff","#000"],n))};var s1=Se.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},XK=Se.hexNames=QK(s1);function QK(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function yP(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Gt(t,e){eG(t)&&(t="100%");var n=tG(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function gy(t){return Math.min(1,Math.max(0,t))}function es(t){return parseInt(t,16)}function eG(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function tG(t){return typeof t=="string"&&t.indexOf("%")!=-1}function ei(t){return t.length==1?"0"+t:""+t}function Fd(t){return t<=1&&(t=t*100+"%"),t}function wP(t){return Math.round(parseFloat(t)*255).toString(16)}function $S(t){return es(t)/255}var Ks=(function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Qi(t){return!!Ks.CSS_UNIT.exec(t)}function nG(t){t=t.replace(NK,"").replace(DK,"").toLowerCase();var e=!1;if(s1[t])t=s1[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Ks.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=Ks.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Ks.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=Ks.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Ks.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=Ks.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Ks.hex8.exec(t))?{r:es(n[1]),g:es(n[2]),b:es(n[3]),a:$S(n[4]),format:e?"name":"hex8"}:(n=Ks.hex6.exec(t))?{r:es(n[1]),g:es(n[2]),b:es(n[3]),format:e?"name":"hex"}:(n=Ks.hex4.exec(t))?{r:es(n[1]+""+n[1]),g:es(n[2]+""+n[2]),b:es(n[3]+""+n[3]),a:$S(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=Ks.hex3.exec(t))?{r:es(n[1]+""+n[1]),g:es(n[2]+""+n[2]),b:es(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function rG(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}const i1="https://auth.privy.io",sG=2e4,ike=1400,ake=2500,oke=4e3,iG="3.13.0",jd="privy:token",NS="privy-token",Q0="privy:refresh_token",aG="privy-refresh-token",im="privy:pat",a1="privy:id_token",DS="privy-id-token",ew="privy-session",o1="privy:caid",bP=t=>`privy:guest:${t}`,_p=t=>`privy:cross-app:${t}`,Xm="privy:state_code",ud="privy:code_verifier",Qm="privy:headless_oauth",th="privy:oauth_disable_signup",tw=t=>`privy:wallet:${t}`,vP="privy:connections",yy=12e4,cke=1,US="0x1",oG=3e4,lke="https://api.moonpay.com/v1",uke="https://api.moonpay.com/v1",dke="pk_live_hirbpu0cVcLHrjktC9l7fbc9ctjv0SL",hke="pk_test_fqWjXZMSFwloh7orvJsRfjiUHXJqFzI",cG="deprecated",uo={appearance:{landingHeader:"Log in or sign up",theme:"light",walletList:["detected_ethereum_wallets","detected_solana_wallets","metamask","coinbase_wallet","rainbow","base_account","wallet_connect","phantom"]},walletConnectCloudProjectId:"34357d3c125c2bcf2ce2bc3309d98715",_render:{standalone:!1},fundingMethodConfig:{moonpay:{useSandbox:!1}}};let lG=new Set(["coinbase_wallet","base_account","cryptocom","metamask","okx_wallet","phantom","rainbow","uniswap","zerion","universal_profile","bybit_wallet","ronin_wallet","haha_wallet","wallet_connect","wallet_connect_qr","wallet_connect_qr_solana","detected_solana_wallets","detected_ethereum_wallets","rabby_wallet","safe","solflare","backpack","jupiter","binance","binanceus","bitget_wallet","kraken_wallet"]),BS=t=>lG.has(t),MS=(t,e,n)=>n.indexOf(t)===e;const uG=({input:t,overrides:e})=>e?e.primary.concat(e.overflow??[]).filter(BS).filter(MS):t?t.filter(BS).filter(MS):uo.appearance.walletList;let dG=/paymaster\.biconomy\.io\/api/i,hG={mode:"SPONSORED",calculateGasLimits:!0,expiryDuration:300,sponsorshipInfo:{webhookData:{},smartAccountInfo:{name:"BICONOMY",version:"2.0.0"}}};const fG=(t,e)=>t&&dG.test(t)?hG:e&&e.policy_id?{policyId:e.policy_id}:void 0;function Ep(t,e){let n=Math.max(0,Math.min(1,t.toHsl().l+e));return Se({...t.toHsl(),l:n})}function nw(t,e){let n=t.getLuminance(),r=e.getLuminance();return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function pG(t,e){if(!t){let r=e?zd:am;return{accent:Se(r.background.interactive),accentLight:Se(r.background.interactive),accentHover:Se(r.background["interactive-hover"]),accentDark:Se(r.background["interactive-clicked"]),accentDarkest:Se(r.background["interactive-disabled"])}}let n=Se(t);return{accent:n,accentLight:Ep(n,.15),accentHover:Ep(n,.3),accentDark:Ep(n,-.06),accentDarkest:Ep(n,-.6)}}function mG({backgroundTheme:t,accentHex:e}){let n,r;t==="light"?n=!1:t==="dark"?n=!0:(n=.5>=Se(t).getLuminance(),r=Se(t).toHslString());let s=n?"dark":"light",i=n?zd:am,{accent:a,accentLight:o,accentHover:c,accentDark:l,accentDarkest:u}=pG(e,n),d=(function(p){let m=Se(am.text.default),g=Se(zd.text.default),_=nw(p,m),A=nw(p,g),w=p.toHsl();return w.h>=220&&w.h<=300&&A>=3?zd.text.default:_>A?am.text.default:zd.text.default})(a),h=Se(d),f=nw(a,Se(i.background.default))>=3;return{colorScheme:s,background:r||i.background.default,background2:i.background.elevated,background3:i.background.interactive,foreground:i.text.default,foreground2:i.text.muted,foreground3:i.text.placeholder,foreground4:i.border.default,accent:a.toHslString(),accentLight:o.toHslString(),accentHover:c.toHslString(),accentDark:l.toHslString(),accentDarkest:u.toHslString(),foregroundAccent:h.toHslString(),success:i.background.success,successDark:i.text.success,successLight:i.background.success,error:i.text.error,errorLight:i.background.error,warn:i.background.warning,warnLight:i.background.warning,warningDark:i.text.warning,errorDark:i.text.error,successBg:i.background.success,errorBg:i.background.error,errorBgHover:i.background["error-hover"],warnBg:i.background.warning,infoBg:i.background.info,infoBgHover:i.background["info-hover"],borderDefault:i.border.default,borderHover:i.border["default-hover"],borderFocus:i.border.focused,borderError:i.border.error,borderSuccess:i.border.success,borderWarning:i.border.warning,borderInfo:i.border.info,borderInteractive:i.border.interactive,borderInteractiveHover:i.border["interactive-hover"],backgroundHover:i.background["default-hover"],backgroundClicked:i.background["default-clicked"],backgroundDisabled:i.background["default-disabled"],backgroundInteractive:i.background.interactive,backgroundInteractiveHover:i.background["interactive-hover"],backgroundInteractiveClicked:i.background["interactive-clicked"],backgroundInteractiveDisabled:i.background["interactive-disabled"],foregroundHover:i.text.default,foregroundClicked:i.text.default,foregroundDisabled:i.text["default-disabled"],foregroundInteractive:i.text.interactive,foregroundInteractiveHover:i.text["interactive-hover"],accentHasGoodContrast:f?"1":"0",linkNavigationColor:f?a.toHslString():i.text.default,linkNavigationDecoration:f?"none":"underline",iconDefault:i.icon.default,iconMuted:i.icon.muted,iconSubtle:i.icon.subtle,iconInverse:i.icon.inverse,iconSuccess:i.icon.success,iconWarning:i.icon.warning,iconError:i.icon.error,iconInteractive:i.icon.interactive,iconDefaultHover:i.icon["default-hover"],iconMutedHover:i.icon["muted-hover"],iconSubtleHover:i.icon["subtle-hover"],iconDefaultClicked:i.icon["default-clicked"],iconMutedClicked:i.icon["muted-clicked"],iconSubtleClicked:i.icon["subtle-clicked"],iconDefaultDisabled:i.icon["default-disabled"],iconMutedDisabled:i.icon["muted-disabled"],iconSubtleDisabled:i.icon["subtle-disabled"],iconErrorHover:i.icon["error-hover"],iconInteractiveHover:i.icon["interactive-hover"],iconErrorClicked:i.icon["error-clicked"],iconInteractiveClicked:i.icon["interactive-clicked"],iconMutedDisabledAlt:i.icon["muted-disabled"],iconSubtleDisabledAlt:i.icon["subtle-disabled"]}}const zd={background:{default:"#020713",elevated:"#1A2230","default-hover":"#101724","default-clicked":"#1A2230","default-disabled":"#020713",success:"#0E3E2D",warning:"#373827",error:"#2E0C18",interactive:"#8B86FF","error-hover":"#441821","interactive-hover":"#7B73E5","interactive-clicked":"#6560CC","interactive-disabled":"#141824",info:"#1F2937","info-hover":"#141824"},icon:{default:"#F8F8F8",muted:"#9BA2AE",subtle:"#7B8491",inverse:"#020713",success:"#88E3B5",warning:"#FDF27B",error:"#EF4444",interactive:"#88B6FF","default-hover":"#F8F8F8","muted-hover":"#AEB3BD","subtle-hover":"#8B939E","default-clicked":"#F8F8F8","muted-clicked":"#9097A5","subtle-clicked":"#78818E","default-disabled":"#404452","muted-disabled":"#404452","subtle-disabled":"#404452","error-hover":"#F05555","interactive-hover":"#7B73E5","error-clicked":"#EF4444","interactive-clicked":"#6560CC"},text:{default:"#F8F8F8",muted:"#9BA2AE",placeholder:"#7B8491",success:"#ACEECB",warning:"#FEF9A0",error:"#FCA5A5",interactive:"#A29EFF","default-disabled":"#404452","interactive-hover":"#8C88E5"},border:{default:"#1F2937",interactive:"#88B0FF",focused:"#F8F8FC",info:"#5B83D3",success:"#317056",warning:"#FBBF24",error:"#F87171","default-hover":"#34304A","interactive-hover":"#88B0FF"}},am={background:{default:"#FFFFFF",elevated:"#F1F2F9","default-hover":"#F8F9FC","default-clicked":"#F1F2F9","default-disabled":"#FFFFFF",success:"#DCFCE7",warning:"#FEF3C7",error:"#FEE2E2",interactive:"#5B4FFF","error-hover":"#FECACA","interactive-hover":"#4F46E5","interactive-clicked":"#4338CA","interactive-disabled":"#F1F2F9",info:"#E0E7FF","info-hover":"#EEF2FF"},icon:{default:"#110F2A",muted:"#64668B",subtle:"#9498B8",inverse:"#FFFFFF",success:"#33B287",warning:"#F59E0B",error:"#EF4444",interactive:"#564FFF","default-hover":"#1D1B35","muted-hover":"#64668B","subtle-hover":"#888AAE","default-clicked":"#060C23","muted-clicked":"#64668B","subtle-clicked":"#788804","default-disabled":"#CBCDE1","muted-disabled":"#CBCDE1","subtle-disabled":"#CBCDE1","error-hover":"#F06060","interactive-hover":"#4F46E5","error-clicked":"#DC3838","interactive-clicked":"#2BA482"},text:{default:"#040217",muted:"#64668B",placeholder:"#9498B8",success:"#135638",warning:"#906218",error:"#991B1B",interactive:"#5B4FFF","default-disabled":"#CBCDE1","interactive-hover":"#5B4FFF"},border:{default:"#E2E3F0",interactive:"#5B4FFF",focused:"#949DF9",info:"#F1F2F9",success:"#87D7B7",warning:"#FACD63",error:"#F69393","default-hover":"#E2E3F0","interactive-hover":"#5B4FFF"}};function _P(t,e,n,r,s){let i,a,o,c,l,u,d,h,f,p,m,g,_,A,w,y,E,b,S=n?console.warn:()=>{},$=[];if(e?.loginMethods)for(let oe of(i=e.loginMethods.includes("email"),a=e.loginMethods.includes("sms"),c=e.loginMethods.includes("wallet"),l=e.loginMethods.includes("google"),u=e.loginMethods.includes("twitter"),d=e.loginMethods.includes("discord"),m=e.loginMethods.includes("spotify"),g=e.loginMethods.includes("instagram"),h=e.loginMethods.includes("tiktok"),f=e.loginMethods.includes("line"),p=e.loginMethods.includes("twitch"),A=e.loginMethods.includes("github"),_=e.loginMethods.includes("linkedin"),w=e.loginMethods.includes("apple"),y=e.loginMethods.includes("farcaster"),E=e.loginMethods.includes("telegram"),o=e.loginMethods.includes("passkey"),e.loginMethods))typeof oe=="string"&&oe.startsWith("privy:")&&$.push(oe);else i=t.email_auth,a=t.sms_auth,c=t.wallet_auth||t.solana_wallet_auth,l=t.google_oauth,u=t.twitter_oauth,d=t.discord_oauth,A=t.github_oauth,m=t.spotify_oauth,g=t.instagram_oauth,h=t.tiktok_oauth,f=t.line_oauth,p=t.twitch_oauth,_=t.linkedin_oauth,w=t.apple_oauth,y=t.farcaster_auth,E=t.telegram_auth,o=t.passkey_auth,b=t.custom_jwt_auth;t.passkey_auth&&(o=!0),typeof window<"u"&&typeof window.PublicKeyCredential!="function"&&(o=!1);let P=[i,a].filter(Boolean),C=[l,u,d,A,m,g,h,f,p,_,w,y,E].filter(Boolean),B=[c].filter(Boolean),k=e?.loginMethods?.includes("passkey")??!1,D=t.passkeys_for_signup_enabled??!1,L=[o&&(D||k)].filter(Boolean),v=[b].filter(Boolean);if(P.length+C.length+B.length+L.length+v.length+$.length===0)throw Error("You must enable at least one login method");let x=e?.appearance?.showWalletLoginFirst!==void 0?e?.appearance?.showWalletLoginFirst:t.show_wallet_login_first;x&&B.length===0?(S("You should only enable `showWalletLoginFirst` when `wallet` logins are also enabled. `showWalletLoginFirst` has been set to false"),x=!1):x||C.length+P.length!==0||(S("You should only disable `showWalletLoginFirst` when `email`, `sms`, or social logins are also enabled. `showWalletLoginFirst` has been set to true"),x=!0);let O=e?.externalWallets?.walletConnect?.enabled??!0;e?.loginMethods&&e.loginMethodsAndOrder&&S("You should only configure one of `loginMethods` or `loginMethodsAndOrder`");let U=uG({input:e?.appearance?.walletList,overrides:e?.loginMethodsAndOrder});if((U.includes("wallet_connect_qr")||U.includes("wallet_connect"))&&U.includes("wallet_connect_qr_solana"))throw Error("wallet_connect_qr and wallet_connect_qr_solana cannot both be present in walletList due to WalletConnect session conflicts.");let I=(({input:oe})=>{if(!oe||!oe.primary[0])return;let X=[oe.primary[0]],Re=[];for(let Me of(oe.primary.length>4&&console.warn("You should not specify greater than 4 login methods in `loginMethodsAndOrder.primary`"),oe.primary.slice(1)))X.includes(Me)?console.warn(`Duplicated login method: ${Me}`):X.push(Me);for(let Me of oe.overflow??[])X.includes(Me)||Re.includes(Me)?console.warn(`Duplicated login method: ${Me}`):Re.push(Me);return{primary:X,overflow:Re}})({input:e?.loginMethodsAndOrder}),F=e?.intl?.defaultCountry??"US",{chains:V,defaultChain:q}=(function({supportedChains:oe,defaultChainFromConfig:X}){let Re;if(oe){if(oe.length===0)throw Error("`supportedChains` must contain at least one chain");Re=f3(oe)}else Re=[...Wg];let Me=oe?Re[0]:Wu,Oe=X??Me;if(!Re.find((st=>st.id===Oe.id)))throw Error("`defaultChain` must be included in `supportedChains`");return{chains:Re,defaultChain:Oe}})({supportedChains:e?.supportedChains,defaultChainFromConfig:e?.defaultChain}),J=!!e?.defaultChain,G=e?.customAuth?.getCustomAccessToken&&e?.customAuth?.enabled!==!1,K=G?"all-users":t.embedded_wallet_config.ethereum.create_on_login,ue=t.embedded_wallet_config.solana.create_on_login;t.solana_wallet_auth&&!e?.externalWallets?.solana?.connectors&&console.warn("App configuration has Solana wallet login enabled, but no Solana wallet connectors have been passed to Privy. Make sure to pass Solana connectors to the `config.externalWallets.solana.connectors` field of the `PrivyProvider`");let fe=t.telegram_auth_config?{botId:t.telegram_auth_config.bot_id,botName:t.telegram_auth_config.bot_name,linkEnabled:t.telegram_auth_config.link_enabled,seamlessAuthEnabled:t.telegram_auth_config.seamless_auth_enabled}:void 0,Ee=t.funding_config?{methods:t.funding_config.methods,options:t.funding_config.options,defaultRecommendedAmount:t.funding_config.default_recommended_amount,defaultRecommendedCurrency:t.funding_config.default_recommended_currency,promptFundingOnWalletCreation:t.funding_config.prompt_funding_on_wallet_creation,crossChainBridgingEnabled:t.funding_config.cross_chain_bridging_enabled}:void 0,ce=t.smart_wallet_config;return{id:t.id,appClientId:s,name:t.name,allowlistConfig:{errorTitle:t.allowlist_config.error_title,errorDetail:t.allowlist_config.error_detail,errorCtaText:t.allowlist_config.cta_text,errorCtaLink:t.allowlist_config.cta_link},legacyWalletUiConfig:t.legacy_wallet_ui_config,appearance:{logo:e?.appearance?.logo??t.logo_url??void 0,landingHeader:e?.appearance?.landingHeader??uo.appearance.landingHeader,loginMessage:typeof e?.appearance?.loginMessage=="string"?e?.appearance?.loginMessage.slice(0,100):e?.appearance?.loginMessage,footerLogo:e?.appearance?.footerLogo,palette:mG({backgroundTheme:e?.appearance?.theme??uo.appearance.theme,accentHex:e?.appearance?.accentColor??t.accent_color}),loginGroupPriority:x?"web3-first":"web2-first",hideDirectWeb2Inputs:!!e?.appearance?.hideDirectWeb2Inputs,walletList:U,walletChainType:e?.appearance?.walletChainType??(({evmWalletAuth:oe,solanaWalletAuth:X})=>oe&&X?"ethereum-and-solana":oe?"ethereum-only":X?"solana-only":"ethereum-only")({evmWalletAuth:t.wallet_auth??!1,solanaWalletAuth:t.solana_wallet_auth??!1})},loginMethods:{wallet:c,email:i,sms:a,passkey:o,google:l,twitter:u,discord:d,github:A,spotify:m,instagram:g,tiktok:h,line:f,twitch:p,linkedin:_,apple:w,farcaster:y,telegram:E},globalDisablePasskeys:e?.globalDisablePasskeys??!1,customOAuthProviders:(t.custom_oauth_providers??[]).filter((oe=>oe.enabled!==!1)),crossAppProviders:$,disablePlusEmails:t.disable_plus_emails,loginMethodsAndOrder:I,legal:{termsAndConditionsUrl:e?.legal?.termsAndConditionsUrl??t.terms_and_conditions_url,privacyPolicyUrl:e?.legal?.privacyPolicyUrl??t.privacy_policy_url,requireUsersAcceptTerms:t.require_users_accept_terms??!1},walletConnectCloudProjectId:e?.walletConnectCloudProjectId??t.wallet_connect_cloud_project_id??uo.walletConnectCloudProjectId,rpcConfig:{rpcUrls:{},rpcTimeouts:e?.externalWallets?.signatureRequestTimeouts??{}},chains:V,defaultChain:q,intl:{defaultCountry:F,textLocalization:e?.intl?.textLocalization},shouldEnforceDefaultChainOnConnect:J,captcha:{enabledProvider:t.enabled_captcha_provider??null,siteKey:t.captcha_site_key},externalWallets:{coinbaseWallet:{config:{appName:t.name,appLogoUrl:t.logo_url,preference:{options:"all",...e?.externalWallets?.coinbaseWallet?.config?.preference},...e?.externalWallets?.coinbaseWallet?.config}},baseAccount:{config:{appName:t.name,appLogoUrl:t.logo_url,...e?.externalWallets?.baseAccount?.config,preference:{...e?.externalWallets?.baseAccount?.config?.preference,telemetry:!1}}},walletConnect:{enabled:O},solana:{connectors:e?.externalWallets?.solana?.connectors},disableAllExternalWallets:e?.externalWallets?.disableAllExternalWallets??!1},embeddedWallets:{requireUserOwnedRecoveryOnCreate:!G&&(t.embedded_wallet_config.require_user_owned_recovery_on_create??!1),userOwnedRecoveryOptions:G?["user-passcode"]:t.embedded_wallet_config.user_owned_recovery_options,priceDisplay:e?.embeddedWallets?.priceDisplay??{primary:"fiat-currency",secondary:"native-token"},ethereum:{createOnLogin:e?.embeddedWallets?.ethereum?.createOnLogin??K},solana:{createOnLogin:e?.embeddedWallets?.solana?.createOnLogin??ue},disableAutomaticMigration:e?.embeddedWallets?.disableAutomaticMigration??!1,mode:t.embedded_wallet_config.mode,showWalletUIs:e?.embeddedWallets?.showWalletUIs??t.enforce_wallet_uis??!0,extendedCalldataDecoding:e?.embeddedWallets?.extendedCalldataDecoding??!1,transactionScanning:{enabled:e?.embeddedWallets?.transactionScanning?.enabled??!1,domain:e?.embeddedWallets?.transactionScanning?.domain??r??"https://auth.privy.io"}},mfa:{methods:t.mfa_methods??[],noPromptOnMfaRequired:e?.mfa?.noPromptOnMfaRequired??!1},passkeys:{shouldUnlinkOnUnenrollMfa:e?.passkeys?.shouldUnlinkOnUnenrollMfa,shouldUnenrollMfaOnUnlink:e?.passkeys?.shouldUnenrollMfaOnUnlink,registration:e?.passkeys?.registration},customAuth:G?{enabled:!0,...e.customAuth}:void 0,loginConfig:{telegramAuthConfiguration:fe,passkeysForSignupEnabled:t.passkeys_for_signup_enabled},headless:!!e?.headless,render:{standalone:e?._render?.standalone??uo._render.standalone},fundingConfig:Ee,fundingMethodConfig:{...e?.fundingMethodConfig??uo.fundingMethodConfig,moonpay:{...e?.fundingMethodConfig?.moonpay??uo.fundingMethodConfig.moonpay,useSandbox:e?.fundingMethodConfig?.moonpay.useSandbox??uo.fundingMethodConfig.moonpay.useSandbox}},whatsAppEnabled:!!t.whatsapp_enabled,customOAuthRedirectUrl:e?.customOAuthRedirectUrl,allowOAuthInEmbeddedBrowsers:e?.allowOAuthInEmbeddedBrowsers??!1,solanaRpcs:{"solana:mainnet":e?.solana?.rpcs?.["solana:mainnet"]??null,"solana:devnet":e?.solana?.rpcs?.["solana:devnet"]??null,"solana:testnet":e?.solana?.rpcs?.["solana:testnet"]??null},smartWallets:ce?.enabled?{enabled:ce.enabled,smartWalletVersion:ce.smart_wallet_version,smartWalletType:ce.smart_wallet_type,configuredNetworks:ce.configured_networks.map((oe=>({chainId:oe.chain_id,bundlerUrl:oe.bundler_url,paymasterUrl:oe.paymaster_url,paymasterContext:fG(oe.paymaster_url,oe.paymaster_context)})))}:{enabled:ce?.enabled??!1}}}const EP={show_wallet_login_first:!0,allowlist_config:{error_title:null,error_detail:null,cta_text:null,cta_link:null},wallet_auth:!0,email_auth:!0,sms_auth:!1,google_oauth:!1,twitter_oauth:!1,discord_oauth:!1,github_oauth:!1,linkedin_oauth:!1,apple_oauth:!1,disable_plus_emails:!1,terms_and_conditions_url:null,privacy_policy_url:null,embedded_wallet_config:{create_on_login:"off",ethereum:{create_on_login:"off"},solana:{create_on_login:"off"},require_user_owned_recovery_on_create:!1,user_owned_recovery_options:["user-passcode"],mode:"user-controlled-server-wallets-only"},captcha_site_key:"",enforce_wallet_uis:!1,legacy_wallet_ui_config:!1,id:"",name:"",passkeys_for_signup_enabled:!1,whatsapp_enabled:!1};let i2=T.createContext({appConfig:_P(EP,void 0,!1),isServerConfigLoaded:!1});const gG=({children:t,client:e,legacyClient:n,clientConfig:r,appClientId:s})=>{let[i,a]=T.useState(null),o=T.useMemo((()=>_P(i??EP,r,!!i,typeof window<"u"?window.location.origin:void 0,s)),[i,r,s]);return T.useEffect((()=>{if(!i)return;let c=(function(d){if(!d)return{};let{appearance:h,supportedChains:f,defaultChain:p,externalWallets:m,...g}=d;return{...g,...f?{supportedChains:f.map((_=>_.id))}:void 0,...p?{defaultChain:p.id}:void 0,...m?{walletConnect:m.walletConnect?{enabled:m.walletConnect.enabled}:void 0,coinbaseWallet:m.coinbaseWallet,solana:{connectors:m.solana?.connectors?.get().map((_=>_.walletClientType))}}:void 0}})(r),l=(function(d,h=0){let f=3735928559^h,p=1103547991^h;for(let m,g=0;g<d.length;g++)f=Math.imul(f^(m=d.charCodeAt(g)),2654435761),p=Math.imul(p^m,1597334677);return f=Math.imul(f^f>>>16,2246822507)^Math.imul(p^p>>>13,3266489909),4294967296*(2097151&(p=Math.imul(p^p>>>16,2246822507)^Math.imul(f^f>>>13,3266489909)))+(f>>>0)})(JSON.stringify(c)).toString(),u=`privy:sent:${i.id}:${l}`;localStorage.getItem(u)||(n.createAnalyticsEvent({eventName:"sdk_initialize",payload:c}),localStorage.setItem(u,"t"))}),[r,i]),T.useEffect((()=>{i||(async()=>{try{await e.initialize();let c=e.app.getConfig();c.custom_api_url&&n.updateApiUrl(c.custom_api_url),a(c)}catch(c){console.warn("Error generating app config: ",c)}})()}),[]),R.jsx(i2.Provider,{value:{appConfig:o,isServerConfigLoaded:!!i},children:t})},ps=()=>{let{appConfig:t}=T.useContext(i2);return t},xP=()=>{let{isServerConfigLoaded:t}=T.useContext(i2);return t},yG=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,wG=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,bG=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function vG(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){_G(t);return}return e}function _G(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Wd(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!bG.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(yG.test(t)||wG.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,vG)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}const EG=/#/g,xG=/&/g,AG=/\//g,SG=/=/g,a2=/\+/g,IG=/%5e/gi,TG=/%60/gi,CG=/%7c/gi,kG=/%20/gi;function OG(t){return encodeURI(""+t).replace(CG,"|")}function c1(t){return OG(typeof t=="string"?t:JSON.stringify(t)).replace(a2,"%2B").replace(kG,"+").replace(EG,"%23").replace(xG,"%26").replace(TG,"`").replace(IG,"^").replace(AG,"%2F")}function rw(t){return c1(t).replace(SG,"%3D")}function AP(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function PG(t){return AP(t.replace(a2," "))}function RG(t){return AP(t.replace(a2," "))}function $G(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const r=n.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const s=PG(r[1]);if(s==="__proto__"||s==="constructor")continue;const i=RG(r[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function NG(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${rw(t)}=${c1(n)}`).join("&"):`${rw(t)}=${c1(e)}`:rw(t)}function DG(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>NG(e,t[e])).filter(Boolean).join("&")}const UG=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,BG=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,MG=/^([/\\]\s*){2,}[^/\\]/,LG=/^\.?\//;function SP(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?UG.test(t):BG.test(t)||(e.acceptRelative?MG.test(t):!1)}function FG(t="",e){return t.endsWith("/")}function jG(t="",e){return(FG(t)?t.slice(0,-1):t)||"/"}function zG(t="",e){return t.endsWith("/")?t:t+"/"}function WG(t,e){if(VG(e)||SP(t))return t;const n=jG(e);if(t.startsWith(n)){const r=t[n.length];if(!r||r==="/"||r==="?")return t}return KG(n,t)}function qG(t,e){const n=GG(t),r={...$G(n.search),...e};return n.search=DG(r),YG(n)}function VG(t){return!t||t==="/"}function HG(t){return t&&t!=="/"}function KG(t,...e){let n=t||"";for(const r of e.filter(s=>HG(s)))if(n){const s=r.replace(LG,"");n=zG(n)+s}else n=r;return n}const IP=Symbol.for("ufo:protocolRelative");function GG(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,d,h=""]=n;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!SP(t,{acceptRelative:!0}))return LS(t);const[,r="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,a="",o=""]=i.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(o=o.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:u}=LS(o);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:a,pathname:c,search:l,hash:u,[IP]:!r}}function LS(t=""){const[e="",n="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:r}}function YG(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol||t[IP]?(t.protocol||"")+"//":"")+s+i+e+n+r}class TP extends Error{constructor(e,n){super(e,n),this.name="FetchError",n?.cause&&!this.cause&&(this.cause=n.cause)}}function ZG(t){const e=t.error?.message||t.error?.toString()||"",n=t.request?.method||t.options?.method||"GET",r=t.request?.url||String(t.request)||"/",s=`[${n}] ${JSON.stringify(r)}`,i=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",a=`${s}: ${i}${e?` ${e}`:""}`,o=new TP(a,t.error?{cause:t.error}:void 0);for(const c of["request","options","response"])Object.defineProperty(o,c,{get(){return t[c]}});for(const[c,l]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,c,{get(){return t.response&&t.response[l]}});return o}const JG=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function FS(t="GET"){return JG.has(t.toUpperCase())}function XG(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer||t instanceof FormData||t instanceof URLSearchParams?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const QG=new Set(["image/svg","application/xml","application/xhtml","application/html"]),eY=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function tY(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return eY.test(e)?"json":e==="text/event-stream"?"stream":QG.has(e)||e.startsWith("text/")?"text":"blob"}function nY(t,e,n,r){const s=rY(e?.headers??t?.headers,n?.headers,r);let i;return(n?.query||n?.params||e?.params||e?.query)&&(i={...n?.params,...n?.query,...e?.params,...e?.query}),{...n,...e,query:i,params:i,headers:s}}function rY(t,e,n){if(!e)return new n(t);const r=new n(e);if(t)for(const[s,i]of Symbol.iterator in t||Array.isArray(t)?t:new n(t))r.set(s,i);return r}async function xp(t,e){if(e)if(Array.isArray(e))for(const n of e)await n(t);else await e(t)}const sY=new Set([408,409,425,429,500,502,503,504]),iY=new Set([101,204,205,304]);function CP(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:r=globalThis.AbortController}=t;async function s(o){const c=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!c){let u;typeof o.options.retry=="number"?u=o.options.retry:u=FS(o.options.method)?0:1;const d=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(d):sY.has(d))){const h=typeof o.options.retryDelay=="function"?o.options.retryDelay(o):o.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),i(o.request,{...o.options,retry:u-1})}}const l=ZG(o);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(c,l={}){const u={request:c,options:nY(c,l,t.defaults,n),response:void 0,error:void 0};if(u.options.method&&(u.options.method=u.options.method.toUpperCase()),u.options.onRequest&&(await xp(u,u.options.onRequest),u.options.headers instanceof n||(u.options.headers=new n(u.options.headers||{}))),typeof u.request=="string"&&(u.options.baseURL&&(u.request=WG(u.request,u.options.baseURL)),u.options.query&&(u.request=qG(u.request,u.options.query),delete u.options.query),"query"in u.options&&delete u.options.query,"params"in u.options&&delete u.options.params),u.options.body&&FS(u.options.method))if(XG(u.options.body)){const f=u.options.headers.get("content-type");typeof u.options.body!="string"&&(u.options.body=f==="application/x-www-form-urlencoded"?new URLSearchParams(u.options.body).toString():JSON.stringify(u.options.body)),f||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")}else("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half"));let d;if(!u.options.signal&&u.options.timeout){const f=new r;d=setTimeout(()=>{const p=new Error("[TimeoutError]: The operation was aborted due to timeout");p.name="TimeoutError",p.code=23,f.abort(p)},u.options.timeout),u.options.signal=f.signal}try{u.response=await e(u.request,u.options)}catch(f){return u.error=f,u.options.onRequestError&&await xp(u,u.options.onRequestError),await s(u)}finally{d&&clearTimeout(d)}if((u.response.body||u.response._bodyInit)&&!iY.has(u.response.status)&&u.options.method!=="HEAD"){const f=(u.options.parseResponse?"json":u.options.responseType)||tY(u.response.headers.get("content-type")||"");switch(f){case"json":{const p=await u.response.text(),m=u.options.parseResponse||Wd;u.response._data=m(p);break}case"stream":{u.response._data=u.response.body||u.response._bodyInit;break}default:u.response._data=await u.response[f]()}}return u.options.onResponse&&await xp(u,u.options.onResponse),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await xp(u,u.options.onResponseError),await s(u)):u.response},a=async function(c,l){return(await i(c,l))._data};return a.raw=i,a.native=(...o)=>e(...o),a.create=(o={},c={})=>CP({...t,...c,defaults:{...t.defaults,...c.defaults,...o}}),a}const eg=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),aY=eg.fetch?(...t)=>eg.fetch(...t):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),oY=eg.Headers,cY=eg.AbortController,lY=CP({fetch:aY,Headers:oY,AbortController:cY});var Be;let zo=class extends Error{toString(){return`${this.type}${this.privyErrorCode?`-${this.privyErrorCode}`:""}: ${this.message}${this.cause?` [cause: ${this.cause}]`:""}`}constructor(e,n,r){super(e),n instanceof Error&&(this.cause=n),this.privyErrorCode=r}},tg=class extends zo{constructor(e,n,r,s,i,a){super(r,s,i),this.type=e,this.status=n,this.data=a}},Y=class extends zo{constructor(e,n,r){super(e,n,r),this.type="client_error"}},uY=class extends Y{constructor(){super("Request timed out",void 0,"client_request_timeout")}},qt=class extends zo{constructor(e,n,r){super(e,n,r),this.type="connector_error"}};const dt=t=>{if(t instanceof zo)return t;if(!(t instanceof TP))return Kt(t);if(!t.response)return new tg("api_error",null,t.message,t);let{type:e,message:n,error:r,code:s}=t.data;return new tg(e||"ApiError",t.response.status,n||r,t,s,t.data)},Kt=t=>t instanceof zo?t:t instanceof Error?new Y(t.message,t):new Y(`Internal error: ${t}`);var ie=((Be={}).OAUTH_ACCOUNT_SUSPENDED="oauth_account_suspended",Be.MISSING_OR_INVALID_PRIVY_APP_ID="missing_or_invalid_privy_app_id",Be.MISSING_OR_INVALID_PRIVY_ACCOUNT_ID="missing_or_invalid_privy_account_id",Be.MISSING_OR_INVALID_TOKEN="missing_or_invalid_token",Be.INVALID_DATA="invalid_data",Be.INVALID_CAPTCHA="invalid_captcha",Be.LINKED_TO_ANOTHER_USER="linked_to_another_user",Be.CANNOT_LINK_MORE_OF_TYPE="cannot_link_more_of_type",Be.FAILED_TO_LINK_ACCOUNT="failed_to_link_account",Be.FAILED_TO_UPDATE_ACCOUNT="failed_to_update_account",Be.USER_EXITED_UPDATE_FLOW="exited_update_flow",Be.ALLOWLIST_REJECTED="allowlist_rejected",Be.OAUTH_USER_DENIED="oauth_user_denied",Be.OAUTH_UNEXPECTED="oauth_unexpected",Be.UNKNOWN_AUTH_ERROR="unknown_auth_error",Be.USER_EXITED_AUTH_FLOW="exited_auth_flow",Be.USER_EXITED_LINK_FLOW="exited_link_flow",Be.USER_EXITED_SET_PASSWORD_FLOW="user_exited_set_password_flow",Be.MUST_BE_AUTHENTICATED="must_be_authenticated",Be.UNKNOWN_CONNECT_WALLET_ERROR="unknown_connect_wallet_error",Be.GENERIC_CONNECT_WALLET_ERROR="generic_connect_wallet_error",Be.CLIENT_REQUEST_TIMEOUT="client_request_timeout",Be.INVALID_CREDENTIALS="invalid_credentials",Be.MISSING_MFA_CREDENTIALS="missing_or_invalid_mfa",Be.UNKNOWN_MFA_ERROR="unknown_mfa_error",Be.EMBEDDED_WALLET_ALREADY_EXISTS="embedded_wallet_already_exists",Be.EMBEDDED_WALLET_NOT_FOUND="embedded_wallet_not_found",Be.EMBEDDED_WALLET_CREATE_ERROR="embedded_wallet_create_error",Be.UNKNOWN_EMBEDDED_WALLET_ERROR="unknown_embedded_wallet_error",Be.EMBEDDED_WALLET_PASSWORD_UNCONFIRMED="embedded_wallet_password_unconfirmed",Be.EMBEDDED_WALLET_PASSWORD_ALREADY_EXISTS="embedded_wallet_password_already_exists",Be.EMBEDDED_WALLET_RECOVERY_ALREADY_EXISTS="embedded_wallet_recovery_already_exists",Be.TRANSACTION_FAILURE="transaction_failure",Be.UNSUPPORTED_CHAIN_ID="unsupported_chain_id",Be.NOT_SUPPORTED="not_supported",Be.CAPTCHA_TIMEOUT="captcha_timeout",Be.INVALID_MESSAGE="invalid_message",Be.UNABLE_TO_SIGN="unable_to_sign",Be.CAPTCHA_FAILURE="captcha_failure",Be.CAPTCHA_DISABLED="captcha_disabled",Be.SESSION_STORAGE_UNAVAILABLE="session_storage_unavailable",Be.TOO_MANY_REQUESTS="too_many_requests",Be.USER_LIMIT_REACHED="max_accounts_reached",Be.DISALLOWED_LOGIN_METHOD="disallowed_login_method",Be.DISALLOWED_PLUS_EMAIL="disallowed_plus_email",Be.PASSKEY_NOT_ALLOWED="passkey_not_allowed",Be.USER_DOES_NOT_EXIST="user_does_not_exist",Be.INSUFFICIENT_BALANCE="insufficient_balance",Be.ACCOUNT_TRANSFER_REQUIRED="account_transfer_required",Be.BUFFER_NOT_DEFINED="buffer_not_defined",Be.UNSUPPORTED_WALLET_TYPE="unsupported_wallet_type",Be.NO_SOLANA_ACCOUNTS="no_solana_accounts",Be.UNKNOWN_FUNDING_ERROR="unknown_funding_error",Be);let Zo=class extends Y{constructor(){super("Method called before `ready`. Ensure you wait until `ready` is true before calling.")}},bke=class extends Y{constructor(e="Embedded wallet error",n){super(e,n,"unknown_embedded_wallet_error")}},_ke=class extends Y{constructor(e="User must be authenticated"){super(e,void 0,"must_be_authenticated")}},xke=class extends Y{constructor(e){super("This application is in development mode and must be upgraded to production to log in new users.",e,"max_accounts_reached")}},jS=class extends qt{constructor(){super("No Solana accounts found in wallet",void 0,"no_solana_accounts")}};const te=()=>{throw Error("You need to wrap your application with the <PrivyProvider> initialized with your app id.")},Ike=t=>()=>{throw Error(t.trim())},kP=()=>{},OP=T.createContext({setAuthenticated:te,setUser:te,setIsNewUser:te,isNewUserThisSession:!1,walletConnectionStatus:null,setWalletConnectionStatus:te,connectors:[],rpcConfig:{rpcUrls:{}},showFiatPrices:!0,chains:[],clientAnalyticsId:null,pendingTransaction:null,client:null,privy:null,appId:"notAdded",hideWalletUIs:{current:!1},nativeTokenSymbolForChainId:te,initializeWalletProxy:te,getAuthMeta:te,getAuthFlow:te,closePrivyModal:te,openPrivyModal:te,connectWallet:te,initLoginWithWallet:te,loginWithWallet:te,initLoginWithFarcaster:te,loginWithFarcaster:te,loginWithCode:te,initLoginWithEmail:te,initLoginWithSms:te,initUpdateEmail:te,initUpdatePhone:te,resendEmailCode:te,resendSmsCode:te,initLoginWithHeadlessOAuth:te,loginWithHeadlessOAuth:te,crossAppAuthFlow:te,initLoginWithOAuth:te,loginWithOAuth:te,passkeyAuthState:{status:"initial"},setPasskeyAuthState:te,initSignupWithPasskey:te,signupWithPasskey:te,initLoginWithPasskey:te,loginWithPasskey:te,initLinkWithPasskey:te,linkWithPasskey:te,refreshSessionAndUser:te,walletProxy:null,createAnalyticsEvent:te,acceptTerms:te,getUsdTokenPrice:te,getUsdPriceForSol:te,getSplTokenMetadata:te,recoverEmbeddedWallet:te,updateWallets:te,fundWallet:te,openModal:te,setReadyToTrue:te,requestFarcasterSignerStatus:te,initLoginWithTelegram:te,loginWithTelegram:te,generateSiweMessage:te,generateSiweMessageForSmartWallet:te,loginWithSiwe:te,linkWithSiwe:te,linkSmartWallet:te,delegateWallet:te,revokeDelegatedWallets:te,connectCoinbaseSmartWallet:te,connectBaseAccount:te,initiateAccountTransfer:te,emailOtpState:{status:"initial"},setEmailOtpState:te,smsOtpState:{status:"initial"},setSmsOtpState:te,siweState:{status:"initial"},setSiweState:te,oAuthState:{status:"initial"},setOAuthState:te,telegramAuthState:{status:"initial"},setTelegramAuthState:te,isHeadlessOAuthLoading:!1,isHeadlessSigning:te,inProgressAuthFlowRef:{current:null},inProgressLoginOrLinkMethodRef:{current:null},baseAccountSdk:void 0,setBaseAccountSdk:te}),qa=()=>T.useContext(OP);function PP(t){return typeof t=="string"&&/^custom:[a-zA-Z0-9_-]+$/i.test(t)}function Ve(t){return t?new Date(1e3*t):null}function zn(t,e){return t.slice().sort(((n,r)=>(n.firstVerifiedAt?.getTime()??0)-(r.firstVerifiedAt?.getTime()??0))).find((n=>n.type===e))}const To=t=>t?RP(t).find((e=>e.walletIndex===0))??null:null,RP=t=>t?$P(t,"ethereum"):[],$P=(t,e)=>t.linkedAccounts.filter((n=>n.type==="wallet"&&n.walletClientType==="privy"&&!n.imported&&n.chainType===e)),dY=t=>t?$P(t,"solana"):[],o2=t=>t?dY(t).find((e=>e.walletIndex===0))??null:null,l1=t=>(t?.linkedAccounts??[]).filter((e=>e.type==="wallet"&&e.walletClientType==="privy"&&e.imported&&e.chainType==="ethereum")),hY=t=>(t?.linkedAccounts??[]).filter((e=>e.type==="wallet"&&e.imported&&e.walletClientType==="privy"&&e.chainType==="solana")),NP=(t,e)=>t===e||!(!t.startsWith("0x")||!e.startsWith("0x"))&&t.length===42&&e.length===42&&Gn(t)===Gn(e),Ll=(t,e)=>t?.linkedAccounts.find((n=>n.type==="wallet"&&n.walletClientType==="privy"&&NP(n.address,e)))||null,sw=(t,e)=>t.find((n=>NP(n.address,e)))||null,jh=t=>To(t)??o2(t);function Kn(t){if(!t)return null;let e=(function(y){let E=[];for(let b of y){let S=b.type;switch(b.type){case"wallet":let $={id:b.id,address:b.address,type:b.type,imported:b.imported,delegated:b.delegated,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at),chainType:b.chain_type,walletClientType:b.wallet_client_type,connectorType:b.connector_type,recoveryMethod:b.recovery_method,walletIndex:b.wallet_index,publicKey:b.public_key};E.push($);break;case"smart_wallet":let P={address:b.address,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at),smartWalletType:b.smart_wallet_type,smartWalletVersion:b.smart_wallet_version};E.push(P);break;case"cross_app":let C={type:b.type,subject:b.subject,embeddedWallets:b.embedded_wallets,smartWallets:b.smart_wallets,providerApp:{id:b.provider_app_id},firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(C);break;case"email":let B={address:b.address,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(B);break;case"phone":let k={number:b.phoneNumber,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(k);break;case"google_oauth":let D={subject:b.subject,email:b.email,name:b.name,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(D);break;case"spotify_oauth":let L={subject:b.subject,email:b.email,name:b.name,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(L);break;case"instagram_oauth":let v={subject:b.subject,username:b.username,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(v);break;case"twitter_oauth":let x={subject:b.subject,username:b.username,name:b.name,type:b.type,profilePictureUrl:b.profile_picture_url,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(x);break;case"discord_oauth":let O={subject:b.subject,username:b.username,email:b.email,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(O);break;case"github_oauth":let U={subject:b.subject,username:b.username,name:b.name,email:b.email,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(U);break;case"tiktok_oauth":let I={subject:b.subject,username:b.username,name:b.name,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(I);break;case"line_oauth":let F={subject:b.subject,name:b.name,email:b.email,profilePictureUrl:b.profile_picture_url,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(F);break;case"twitch_oauth":let V={subject:b.subject,username:b.username,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(V);break;case"linkedin_oauth":let q={subject:b.subject,name:b.name,email:b.email,vanityName:b.vanity_name,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(q);break;case"apple_oauth":let J={subject:b.subject,email:b.email,type:b.type,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(J);break;case"custom_auth":E.push({type:b.type,customUserId:b.custom_user_id,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)});break;case"farcaster":let G={type:b.type,fid:b.fid,ownerAddress:b.owner_address,displayName:b.display_name,username:b.username,bio:b.bio,pfp:b.profile_picture_url,url:b.homepage_url,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at),signerPublicKey:b.signer_public_key};E.push(G);break;case"passkey":let K={type:b.type,enrolledInMfa:b.enrolled_in_mfa,credentialId:b.credential_id,publicKey:b.public_key,authenticatorName:b.authenticator_name,createdWithDevice:b.created_with_device,createdWithOs:b.created_with_os,createdWithBrowser:b.created_with_browser,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(K);break;case"telegram":let ue={type:b.type,telegramUserId:b.telegram_user_id,firstName:b.first_name,lastName:b.last_name,username:b.username,photoUrl:b.photo_url,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(ue);break;default:if(PP(b.type)){let fe={type:b.type,subject:b.subject,name:b.name,username:b.username,email:b.email,profilePictureUrl:b.profile_picture_url,firstVerifiedAt:Ve(b.first_verified_at),latestVerifiedAt:Ve(b.latest_verified_at)};E.push(fe);break}console.warn(`Unrecognized account type: ${S}. Please consider upgrading the Privy SDK.`)}}return E})(t.linked_accounts),n=zn(e,"wallet"),r=zn(e,"smart_wallet"),s=zn(e,"email"),i=zn(e,"phone"),a=zn(e,"google_oauth"),o=zn(e,"twitter_oauth"),c=zn(e,"discord_oauth"),l=zn(e,"github_oauth"),u=zn(e,"spotify_oauth"),d=zn(e,"instagram_oauth"),h=zn(e,"tiktok_oauth"),f=zn(e,"line_oauth"),p=zn(e,"twitch_oauth"),m=zn(e,"linkedin_oauth"),g=zn(e,"apple_oauth"),_=zn(e,"farcaster"),A=zn(e,"telegram"),w=t.mfa_methods.map((({type:y,verified_at:E})=>({type:y,verifiedAt:Ve(E)})));return{id:t.id,createdAt:Ve(t.created_at),linkedAccounts:e,email:s&&{address:s?.address},phone:i&&{number:i?.number},wallet:n&&{id:n.id,address:n.address,chainType:n.chainType,walletClientType:n.walletClientType,connectorType:n.connectorType,recoveryMethod:n.recoveryMethod,imported:n.imported,delegated:n.delegated,walletIndex:n.walletIndex,publicKey:n.publicKey},smartWallet:r&&{address:r.address,smartWalletType:r.smartWalletType,smartWalletVersion:r.smartWalletVersion},google:a&&{subject:a.subject,email:a.email,name:a.name},twitter:o&&{subject:o.subject,username:o.username,name:o.name,profilePictureUrl:o.profilePictureUrl},discord:c&&{subject:c.subject,username:c.username,email:c.email},github:l&&{subject:l.subject,username:l.username,name:l.name,email:l.email},spotify:u&&{subject:u.subject,email:u.email,name:u.name},instagram:d&&{subject:d.subject,username:d.username},tiktok:h&&{subject:h.subject,username:h.username,name:h.name},line:f&&{subject:f.subject,name:f.name,email:f.email,profilePictureUrl:f.profilePictureUrl},twitch:p&&{subject:p.subject,username:p.username},linkedin:m&&{subject:m.subject,name:m.name,email:m.email,vanityName:m.vanityName},apple:g&&{subject:g.subject,email:g.email},farcaster:_&&{fid:_.fid,ownerAddress:_.ownerAddress,displayName:_.displayName,username:_.username,bio:_.bio,pfp:_.pfp,url:_.url,signerPublicKey:_.signerPublicKey},telegram:A&&{telegramUserId:A.telegramUserId,firstName:A.firstName,lastName:A.lastName,username:A.username,photoUrl:A.photoUrl},delegatedWallets:[],mfaMethods:w.map((y=>y.type)),hasAcceptedTerms:t.has_accepted_terms??!1,isGuest:t.is_guest,customMetadata:t.custom_metadata}}function fY({src:t,...e}){return R.jsx("img",{src:t,...e,style:{display:"none"}})}const DP=T.createContext({currentScreen:null,lastScreen:null,navigate:te,navigateBack:te,resetNavigation:te,setModalData:te,onUserCloseViaDialogOrKeybindRef:void 0}),pY=t=>{let e=ps(),[n,r]=T.useState(t.initialScreen),s=T.useRef(null);T.useEffect((()=>{t.open||(s.current=null)}),[t.open]),T.useEffect((()=>{s.current=null}),[t.initialScreen]);let i={data:t.data,setModalData:t.setModalData,currentScreen:t.initialScreen,lastScreen:n,navigate:(a,o=!0)=>{t.setInitialScreen(a),o&&r(t.initialScreen)},navigateBack:()=>{t.setInitialScreen(n)},resetNavigation:()=>{t.setInitialScreen(null),r(null)},onUserCloseViaDialogOrKeybindRef:s};return R.jsxs(DP.Provider,{value:i,children:[(typeof e.appearance.logo=="string"||e.appearance.logo?.type==="img")&&R.jsx(fY,{src:typeof e.appearance.logo=="string"?e.appearance.logo:e.appearance.logo.props.src}),t.children]})},Iu=()=>T.useContext(DP),nl=T.createContext({ready:!1,authenticated:!1,user:null,walletConnectors:null,connectWallet:te,login:te,connectOrCreateWallet:te,linkEmail:te,linkPhone:te,linkFarcaster:te,linkWallet:te,startCrossAppAuthFlow:te,linkGoogle:te,linkTwitter:te,linkTwitch:te,linkDiscord:te,linkGithub:te,linkSpotify:te,linkInstagram:te,linkTelegram:te,linkTiktok:te,linkLine:te,linkLinkedIn:te,linkApple:te,linkPasskey:te,updateEmail:te,updatePhone:te,logout:te,getAccessToken:te,unlinkEmail:te,unlinkPhone:te,unlinkWallet:te,unlinkGoogle:te,unlinkTwitter:te,unlinkTwitch:te,unlinkDiscord:te,unlinkGithub:te,unlinkSpotify:te,unlinkInstagram:te,unlinkTiktok:te,unlinkLine:te,unlinkLinkedIn:te,unlinkApple:te,unlinkCrossAppAccount:te,unlinkFarcaster:te,unlinkTelegram:te,unlinkPasskey:te,signMessage:te,signTypedData:te,enrollInMfa:te,initEnrollmentWithSms:te,initEnrollmentWithTotp:te,initEnrollmentWithPasskey:te,promptMfa:te,init:te,submitEnrollmentWithSms:te,submitEnrollmentWithTotp:te,submitEnrollmentWithPasskey:te,unenroll:te,submit:te,cancel:te,sendTransaction:te,signTransaction:te,setWalletPassword:te,setWalletRecovery:te,requestFarcasterSignerFromWarpcast:te,getFarcasterSignerPublicKey:te,signFarcasterMessage:te,signMessageWithCrossAppWallet:te,signTypedDataWithCrossAppWallet:te,sendTransactionWithCrossAppWallet:te,signTransactionWithCrossAppWallet:te,isModalOpen:!1,mfaMethods:[]}),Zu=()=>T.useContext(nl),ns=t=>!!t.id&&t.recoveryMethod==="privy-v2",zS=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,o={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,o);return o},mY=(t=>t?zS(t):zS),gY=t=>t;function yY(t,e=gY){const n=Te.useSyncExternalStore(t.subscribe,Te.useCallback(()=>e(t.getState()),[t,e]),Te.useCallback(()=>e(t.getInitialState()),[t,e]));return Te.useDebugValue(n),n}const WS=t=>{const e=mY(t),n=r=>yY(e,r);return Object.assign(n,e),n},rl=(t=>t?WS(t):WS);var lr=function(){return lr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lr.apply(this,arguments)};function Tu(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ft="-ms-",nh="-moz-",bt="-webkit-",UP="comm",wy="rule",c2="decl",wY="@import",bY="@namespace",BP="@keyframes",vY="@layer",MP=Math.abs,l2=String.fromCharCode,u1=Object.assign;function _Y(t,e){return An(t,0)^45?(((e<<2^An(t,0))<<2^An(t,1))<<2^An(t,2))<<2^An(t,3):0}function LP(t){return t.trim()}function ha(t,e){return(t=e.exec(t))?t[0]:t}function et(t,e,n){return t.replace(e,n)}function om(t,e,n){return t.indexOf(e,n)}function An(t,e){return t.charCodeAt(e)|0}function Wc(t,e,n){return t.slice(e,n)}function Zs(t){return t.length}function FP(t){return t.length}function qd(t,e){return e.push(t),t}function EY(t,e){return t.map(e).join("")}function qS(t,e){return t.filter(function(n){return!ha(n,e)})}var by=1,Cu=1,jP=0,Ds=0,yn=0,Ju="";function vy(t,e,n,r,s,i,a,o){return{value:t,root:e,parent:n,type:r,props:s,children:i,line:by,column:Cu,length:a,return:"",siblings:o}}function ho(t,e){return u1(vy("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function _l(t){for(;t.root;)t=ho(t.root,{children:[t]});qd(t,t.siblings)}function xY(){return yn}function AY(){return yn=Ds>0?An(Ju,--Ds):0,Cu--,yn===10&&(Cu=1,by--),yn}function ri(){return yn=Ds<jP?An(Ju,Ds++):0,Cu++,yn===10&&(Cu=1,by++),yn}function Co(){return An(Ju,Ds)}function cm(){return Ds}function _y(t,e){return Wc(Ju,t,e)}function zh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function SY(t){return by=Cu=1,jP=Zs(Ju=t),Ds=0,[]}function IY(t){return Ju="",t}function iw(t){return LP(_y(Ds-1,d1(t===91?t+2:t===40?t+1:t)))}function TY(t){for(;(yn=Co())&&yn<33;)ri();return zh(t)>2||zh(yn)>3?"":" "}function CY(t,e){for(;--e&&ri()&&!(yn<48||yn>102||yn>57&&yn<65||yn>70&&yn<97););return _y(t,cm()+(e<6&&Co()==32&&ri()==32))}function d1(t){for(;ri();)switch(yn){case t:return Ds;case 34:case 39:t!==34&&t!==39&&d1(yn);break;case 40:t===41&&d1(t);break;case 92:ri();break}return Ds}function kY(t,e){for(;ri()&&t+yn!==57;)if(t+yn===84&&Co()===47)break;return"/*"+_y(e,Ds-1)+"*"+l2(t===47?t:ri())}function OY(t){for(;!zh(Co());)ri();return _y(t,Ds)}function PY(t){return IY(lm("",null,null,null,[""],t=SY(t),0,[0],t))}function lm(t,e,n,r,s,i,a,o,c){for(var l=0,u=0,d=a,h=0,f=0,p=0,m=1,g=1,_=1,A=0,w="",y=s,E=i,b=r,S=w;g;)switch(p=A,A=ri()){case 40:if(p!=108&&An(S,d-1)==58){om(S+=et(iw(A),"&","&\f"),"&\f",MP(l?o[l-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:S+=iw(A);break;case 9:case 10:case 13:case 32:S+=TY(p);break;case 92:S+=CY(cm()-1,7);continue;case 47:switch(Co()){case 42:case 47:qd(RY(kY(ri(),cm()),e,n,c),c),(zh(p||1)==5||zh(Co()||1)==5)&&Zs(S)&&Wc(S,-1,void 0)!==" "&&(S+=" ");break;default:S+="/"}break;case 123*m:o[l++]=Zs(S)*_;case 125*m:case 59:case 0:switch(A){case 0:case 125:g=0;case 59+u:_==-1&&(S=et(S,/\f/g,"")),f>0&&(Zs(S)-d||m===0&&p===47)&&qd(f>32?HS(S+";",r,n,d-1,c):HS(et(S," ","")+";",r,n,d-2,c),c);break;case 59:S+=";";default:if(qd(b=VS(S,e,n,l,u,s,o,w,y=[],E=[],d,i),i),A===123)if(u===0)lm(S,e,b,b,y,i,d,o,E);else{switch(h){case 99:if(An(S,3)===110)break;case 108:if(An(S,2)===97)break;default:u=0;case 100:case 109:case 115:}u?lm(t,b,b,r&&qd(VS(t,b,b,0,0,s,o,w,s,y=[],d,E),E),s,E,d,o,r?y:E):lm(S,b,b,b,[""],E,0,o,E)}}l=u=f=0,m=_=1,w=S="",d=a;break;case 58:d=1+Zs(S),f=p;default:if(m<1){if(A==123)--m;else if(A==125&&m++==0&&AY()==125)continue}switch(S+=l2(A),A*m){case 38:_=u>0?1:(S+="\f",-1);break;case 44:o[l++]=(Zs(S)-1)*_,_=1;break;case 64:Co()===45&&(S+=iw(ri())),h=Co(),u=d=Zs(w=S+=OY(cm())),A++;break;case 45:p===45&&Zs(S)==2&&(m=0)}}return i}function VS(t,e,n,r,s,i,a,o,c,l,u,d){for(var h=s-1,f=s===0?i:[""],p=FP(f),m=0,g=0,_=0;m<r;++m)for(var A=0,w=Wc(t,h+1,h=MP(g=a[m])),y=t;A<p;++A)(y=LP(g>0?f[A]+" "+w:et(w,/&\f/g,f[A])))&&(c[_++]=y);return vy(t,e,n,s===0?wy:o,c,l,u,d)}function RY(t,e,n,r){return vy(t,e,n,UP,l2(xY()),Wc(t,2,-2),0,r)}function HS(t,e,n,r,s){return vy(t,e,n,c2,Wc(t,0,r),Wc(t,r+1,-1),r,s)}function zP(t,e,n){switch(_Y(t,e)){case 5103:return bt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:case 6391:case 5879:case 5623:case 6135:case 4599:return bt+t+t;case 4855:return bt+t.replace("add","source-over").replace("substract","source-out").replace("intersect","source-in").replace("exclude","xor")+t;case 4789:return nh+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return bt+t+nh+t+Ft+t+t;case 5936:switch(An(t,e+11)){case 114:return bt+t+Ft+et(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return bt+t+Ft+et(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return bt+t+Ft+et(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return bt+t+Ft+t+t;case 6165:return bt+t+Ft+"flex-"+t+t;case 5187:return bt+t+et(t,/(\w+).+(:[^]+)/,bt+"box-$1$2"+Ft+"flex-$1$2")+t;case 5443:return bt+t+Ft+"flex-item-"+et(t,/flex-|-self/g,"")+(ha(t,/flex-|baseline/)?"":Ft+"grid-row-"+et(t,/flex-|-self/g,""))+t;case 4675:return bt+t+Ft+"flex-line-pack"+et(t,/align-content|flex-|-self/g,"")+t;case 5548:return bt+t+Ft+et(t,"shrink","negative")+t;case 5292:return bt+t+Ft+et(t,"basis","preferred-size")+t;case 6060:return bt+"box-"+et(t,"-grow","")+bt+t+Ft+et(t,"grow","positive")+t;case 4554:return bt+et(t,/([^-])(transform)/g,"$1"+bt+"$2")+t;case 6187:return et(et(et(t,/(zoom-|grab)/,bt+"$1"),/(image-set)/,bt+"$1"),t,"")+t;case 5495:case 3959:return et(t,/(image-set\([^]*)/,bt+"$1$`$1");case 4968:return et(et(t,/(.+:)(flex-)?(.*)/,bt+"box-pack:$3"+Ft+"flex-pack:$3"),/space-between/,"justify")+bt+t+t;case 4200:if(!ha(t,/flex-|baseline/))return Ft+"grid-column-align"+Wc(t,e)+t;break;case 2592:case 3360:return Ft+et(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,s){return e=s,ha(r.props,/grid-\w+-end/)})?~om(t+(n=n[e].value),"span",0)?t:Ft+et(t,"-start","")+t+Ft+"grid-row-span:"+(~om(n,"span",0)?ha(n,/\d+/):+ha(n,/\d+/)-+ha(t,/\d+/))+";":Ft+et(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return ha(r.props,/grid-\w+-start/)})?t:Ft+et(et(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return et(t,/(.+)-inline(.+)/,bt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zs(t)-1-e>6)switch(An(t,e+1)){case 109:if(An(t,e+4)!==45)break;case 102:return et(t,/(.+:)(.+)-([^]+)/,"$1"+bt+"$2-$3$1"+nh+(An(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~om(t,"stretch",0)?zP(et(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return et(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,i,a,o,c,l){return Ft+s+":"+i+l+(a?Ft+s+"-span:"+(o?c:+c-+i)+l:"")+t});case 4949:if(An(t,e+6)===121)return et(t,":",":"+bt)+t;break;case 6444:switch(An(t,An(t,14)===45?18:11)){case 120:return et(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+bt+(An(t,14)===45?"inline-":"")+"box$3$1"+bt+"$2$3$1"+Ft+"$2box$3")+t;case 100:return et(t,":",":"+Ft)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return et(t,"scroll-","scroll-snap-")+t}return t}function ng(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function $Y(t,e,n,r){switch(t.type){case vY:if(t.children.length)break;case wY:case bY:case c2:return t.return=t.return||t.value;case UP:return"";case BP:return t.return=t.value+"{"+ng(t.children,r)+"}";case wy:if(!Zs(t.value=t.props.join(",")))return""}return Zs(n=ng(t.children,r))?t.return=t.value+"{"+n+"}":""}function NY(t){var e=FP(t);return function(n,r,s,i){for(var a="",o=0;o<e;o++)a+=t[o](n,r,s,i)||"";return a}}function DY(t){return function(e){e.root||(e=e.return)&&t(e)}}function UY(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case c2:t.return=zP(t.value,t.length,n);return;case BP:return ng([ho(t,{value:et(t.value,"@","@"+bt)})],r);case wy:if(t.length)return EY(n=t.props,function(s){switch(ha(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":_l(ho(t,{props:[et(s,/:(read-\w+)/,":"+nh+"$1")]})),_l(ho(t,{props:[s]})),u1(t,{props:qS(n,r)});break;case"::placeholder":_l(ho(t,{props:[et(s,/:(plac\w+)/,":"+bt+"input-$1")]})),_l(ho(t,{props:[et(s,/:(plac\w+)/,":"+nh+"$1")]})),_l(ho(t,{props:[et(s,/:(plac\w+)/,Ft+"input-$1")]})),_l(ho(t,{props:[s]})),u1(t,{props:qS(n,r)});break}return""})}}var BY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rs={},ku=typeof process<"u"&&rs!==void 0&&(rs.REACT_APP_SC_ATTR||rs.SC_ATTR)||"data-styled",WP="active",qP="data-styled-version",Ey="6.3.8",u2=`/*!sc*/
`,rg=typeof window<"u"&&typeof document<"u",ka=Te.createContext===void 0,MY=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&rs!==void 0&&rs.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&rs.REACT_APP_SC_DISABLE_SPEEDY!==""?rs.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&rs.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&rs!==void 0&&rs.SC_DISABLE_SPEEDY!==void 0&&rs.SC_DISABLE_SPEEDY!==""&&rs.SC_DISABLE_SPEEDY!=="false"&&rs.SC_DISABLE_SPEEDY),LY={},xy=Object.freeze([]),Ou=Object.freeze({});function VP(t,e,n){return n===void 0&&(n=Ou),t.theme!==n.theme&&t.theme||e||n.theme}var HP=new Set(["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","body","button","br","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","slot","small","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use"]),FY=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,jY=/(^-|-$)/g;function KS(t){return t.replace(FY,"-").replace(jY,"")}var zY=/(a)(d)/gi,GS=function(t){return String.fromCharCode(t+(t>25?39:97))};function h1(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=GS(e%52)+n;return(GS(e%52)+n).replace(zY,"$1-$2")}var aw,Kl=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},KP=function(t){return Kl(5381,t)};function d2(t){return h1(KP(t)>>>0)}function WY(t){return t.displayName||t.name||"Component"}function ow(t){return typeof t=="string"&&!0}var GP=typeof Symbol=="function"&&Symbol.for,YP=GP?Symbol.for("react.memo"):60115,qY=GP?Symbol.for("react.forward_ref"):60112,VY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},HY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ZP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KY=((aw={})[qY]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},aw[YP]=ZP,aw);function YS(t){return("type"in(e=t)&&e.type.$$typeof)===YP?ZP:"$$typeof"in t?KY[t.$$typeof]:VY;var e}var GY=Object.defineProperty,YY=Object.getOwnPropertyNames,ZS=Object.getOwnPropertySymbols,ZY=Object.getOwnPropertyDescriptor,JY=Object.getPrototypeOf,JS=Object.prototype;function JP(t,e,n){if(typeof e!="string"){if(JS){var r=JY(e);r&&r!==JS&&JP(t,r,n)}var s=YY(e);ZS&&(s=s.concat(ZS(e)));for(var i=YS(t),a=YS(e),o=0;o<s.length;++o){var c=s[o];if(!(c in HY||n&&n[c]||a&&c in a||i&&c in i)){var l=ZY(e,c);try{GY(t,c,l)}catch{}}}}return t}function Pu(t){return typeof t=="function"}function h2(t){return typeof t=="object"&&"styledComponentId"in t}function mc(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function sg(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function Wh(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function f1(t,e,n){if(n===void 0&&(n=!1),!n&&!Wh(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=f1(t[r],e[r]);else if(Wh(e))for(var r in e)t[r]=f1(t[r],e[r]);return t}function f2(t,e){Object.defineProperty(t,"toString",{value:e})}function $f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var XY=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,i=s;e>=i;)if((i<<=1)<0)throw $f(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var a=s;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),c=(a=0,n.length);a<c;a++)this.tag.insertRule(o,n[a])&&(this.groupSizes[e]++,o++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),s=r+n;this.groupSizes[e]=0;for(var i=r;i<s;i++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],s=this.indexOfGroup(e),i=s+r,a=s;a<i;a++)n+="".concat(this.tag.getRule(a)).concat(u2);return n},t})(),um=new Map,ig=new Map,dm=1,Gl=function(t){if(um.has(t))return um.get(t);for(;ig.has(dm);)dm++;var e=dm++;return um.set(t,e),ig.set(e,t),e},QY=function(t,e){dm=e+1,um.set(t,e),ig.set(e,t)},eZ="style[".concat(ku,"][").concat(qP,'="').concat(Ey,'"]'),tZ=new RegExp("^".concat(ku,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),nZ=function(t,e,n){for(var r,s=n.split(","),i=0,a=s.length;i<a;i++)(r=s[i])&&t.registerName(e,r)},rZ=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(u2),s=[],i=0,a=r.length;i<a;i++){var o=r[i].trim();if(o){var c=o.match(tZ);if(c){var l=0|parseInt(c[1],10),u=c[2];l!==0&&(QY(u,l),nZ(t,u,c[3]),t.getTag().insertRules(l,s)),s.length=0}else s.push(o)}}},XS=function(t){for(var e=document.querySelectorAll(eZ),n=0,r=e.length;n<r;n++){var s=e[n];s&&s.getAttribute(ku)!==WP&&(rZ(t,s),s.parentNode&&s.parentNode.removeChild(s))}};function sZ(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var XP=function(t){var e=document.head,n=t||e,r=document.createElement("style"),s=(function(o){var c=Array.from(o.querySelectorAll("style[".concat(ku,"]")));return c[c.length-1]})(n),i=s!==void 0?s.nextSibling:null;r.setAttribute(ku,WP),r.setAttribute(qP,Ey);var a=sZ();return a&&r.setAttribute("nonce",a),n.insertBefore(r,i),r},iZ=(function(){function t(e){this.element=XP(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,s=0,i=r.length;s<i;s++){var a=r[s];if(a.ownerNode===n)return a}throw $f(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),aZ=(function(){function t(e){this.element=XP(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),oZ=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),QS=rg,cZ={isServer:!rg,useCSSOMInjection:!MY},ag=(function(){function t(e,n,r){e===void 0&&(e=Ou),n===void 0&&(n={});var s=this;this.options=lr(lr({},cZ),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&rg&&QS&&(QS=!1,XS(this)),f2(this,function(){return(function(i){for(var a=i.getTag(),o=a.length,c="",l=function(d){var h=(function(_){return ig.get(_)})(d);if(h===void 0)return"continue";var f=i.names.get(h),p=a.getGroup(d);if(f===void 0||!f.size||p.length===0)return"continue";var m="".concat(ku,".g").concat(d,'[id="').concat(h,'"]'),g="";f!==void 0&&f.forEach(function(_){_.length>0&&(g+="".concat(_,","))}),c+="".concat(p).concat(m,'{content:"').concat(g,'"}').concat(u2)},u=0;u<o;u++)l(u);return c})(s)})}return t.registerId=function(e){return Gl(e)},t.prototype.rehydrate=function(){!this.server&&rg&&XS(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(lr(lr({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,s=n.target;return n.isServer?new oZ(s):r?new iZ(s):new aZ(s)})(this.options),new XY(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Gl(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Gl(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Gl(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),lZ=/&/g,Yl=47;function eI(t){if(t.indexOf("}")===-1)return!1;for(var e=t.length,n=0,r=0,s=!1,i=0;i<e;i++){var a=t.charCodeAt(i);if(r!==0||s||a!==Yl||t.charCodeAt(i+1)!==42)if(s)a===42&&t.charCodeAt(i+1)===Yl&&(s=!1,i++);else if(a!==34&&a!==39||i!==0&&t.charCodeAt(i-1)===92){if(r===0){if(a===123)n++;else if(a===125&&--n<0)return!0}}else r===0?r=a:r===a&&(r=0);else s=!0,i++}return n!==0||r!==0}function QP(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=QP(n.children,e)),n})}function uZ(t){var e,n,r,s=Ou,i=s.options,a=i===void 0?Ou:i,o=s.plugins,c=o===void 0?xy:o,l=function(h,f,p){return p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):h},u=c.slice();u.push(function(h){h.type===wy&&h.value.includes("&")&&(h.props[0]=h.props[0].replace(lZ,n).replace(r,l))}),a.prefix&&u.push(UY),u.push($Y);var d=function(h,f,p,m){f===void 0&&(f=""),p===void 0&&(p=""),m===void 0&&(m="&"),e=m,n=f,r=new RegExp("\\".concat(n,"\\b"),"g");var g=(function(w){if(!eI(w))return w;for(var y=w.length,E="",b=0,S=0,$=0,P=!1,C=0;C<y;C++){var B=w.charCodeAt(C);if($!==0||P||B!==Yl||w.charCodeAt(C+1)!==42)if(P)B===42&&w.charCodeAt(C+1)===Yl&&(P=!1,C++);else if(B!==34&&B!==39||C!==0&&w.charCodeAt(C-1)===92){if($===0)if(B===123)S++;else if(B===125){if(--S<0){for(var k=C+1;k<y;){var D=w.charCodeAt(k);if(D===59||D===10)break;k++}k<y&&w.charCodeAt(k)===59&&k++,S=0,C=k-1,b=k;continue}S===0&&(E+=w.substring(b,C+1),b=C+1)}else B===59&&S===0&&(E+=w.substring(b,C+1),b=C+1)}else $===0?$=B:$===B&&($=0);else P=!0,C++}if(b<y){var L=w.substring(b);eI(L)||(E+=L)}return E})((function(w){if(w.indexOf("//")===-1)return w;for(var y=w.length,E=[],b=0,S=0,$=0,P=0;S<y;){var C=w.charCodeAt(S);if(C!==34&&C!==39||S!==0&&w.charCodeAt(S-1)===92)if($===0)if(C===40&&S>=3&&(32|w.charCodeAt(S-1))==108&&(32|w.charCodeAt(S-2))==114&&(32|w.charCodeAt(S-3))==117)P=1,S++;else if(P>0)C===41?P--:C===40&&P++,S++;else if(C===Yl&&S+1<y&&w.charCodeAt(S+1)===Yl){for(S>b&&E.push(w.substring(b,S));S<y&&w.charCodeAt(S)!==10;)S++;b=S}else S++;else S++;else $===0?$=C:$===C&&($=0),S++}return b===0?w:(b<y&&E.push(w.substring(b)),E.join(""))})(h)),_=PY(p||f?"".concat(p," ").concat(f," { ").concat(g," }"):g);a.namespace&&(_=QP(_,a.namespace));var A=[];return ng(_,NY(u.concat(DY(function(w){return A.push(w)})))),A};return d.hash=c.length?c.reduce(function(h,f){return f.name||$f(15),Kl(h,f.name)},5381).toString():"",d}var dZ=new ag,p1=uZ(),m1={shouldForwardProp:void 0,styleSheet:dZ,stylis:p1},eR=ka?{Provider:function(t){return t.children},Consumer:function(t){return(0,t.children)(m1)}}:Te.createContext(m1);eR.Consumer;ka||Te.createContext(void 0);function g1(){return ka?m1:Te.useContext(eR)}var tR=(function(){function t(e,n){var r=this;this.inject=function(s,i){i===void 0&&(i=p1);var a=r.name+i.hash;s.hasNameForId(r.id,a)||s.insertRules(r.id,a,i(r.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,f2(this,function(){throw $f(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=p1),this.name+e.hash},t})();function hZ(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in BY||t.startsWith("--")?String(e).trim():"".concat(e,"px")}var fZ=function(t){return t>="A"&&t<="Z"};function tI(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;fZ(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var nR=function(t){return t==null||t===!1||t===""},rR=function(t){var e=[];for(var n in t){var r=t[n];t.hasOwnProperty(n)&&!nR(r)&&(Array.isArray(r)&&r.isCss||Pu(r)?e.push("".concat(tI(n),":"),r,";"):Wh(r)?e.push.apply(e,Tu(Tu(["".concat(n," {")],rR(r),!1),["}"],!1)):e.push("".concat(tI(n),": ").concat(hZ(n,r),";")))}return e};function No(t,e,n,r){if(nR(t))return[];if(h2(t))return[".".concat(t.styledComponentId)];if(Pu(t)){if(!Pu(i=t)||i.prototype&&i.prototype.isReactComponent||!e)return[t];var s=t(e);return No(s,e,n,r)}var i;return t instanceof tR?n?(t.inject(n,r),[t.getName(r)]):[t]:Wh(t)?rR(t):Array.isArray(t)?Array.prototype.concat.apply(xy,t.map(function(a){return No(a,e,n,r)})):[t.toString()]}function sR(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Pu(n)&&!h2(n))return!1}return!0}var pZ=KP(Ey),mZ=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&sR(e),this.componentId=n,this.baseHash=Kl(pZ,n),this.baseStyle=r,ag.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r).className:"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))s=mc(s,this.staticRulesId);else{var i=sg(No(this.rules,e,n,r)),a=h1(Kl(this.baseHash,i)>>>0);if(!n.hasNameForId(this.componentId,a)){var o=r(i,".".concat(a),void 0,this.componentId);n.insertRules(this.componentId,a,o)}s=mc(s,a),this.staticRulesId=a}else{for(var c=Kl(this.baseHash,r.hash),l="",u=0;u<this.rules.length;u++){var d=this.rules[u];if(typeof d=="string")l+=d;else if(d){var h=sg(No(d,e,n,r));c=Kl(c,h+u),l+=h}}if(l){var f=h1(c>>>0);if(!n.hasNameForId(this.componentId,f)){var p=r(l,".".concat(f),void 0,this.componentId);n.insertRules(this.componentId,f,p)}s=mc(s,f)}}return{className:s,css:typeof window>"u"?n.getTag().getGroup(Gl(this.componentId)):""}},t})(),p2=ka?{Provider:function(t){return t.children},Consumer:function(t){return(0,t.children)(void 0)}}:Te.createContext(void 0);p2.Consumer;var cw={};function gZ(t,e,n){var r=h2(t),s=t,i=!ow(t),a=e.attrs,o=a===void 0?xy:a,c=e.componentId,l=c===void 0?(function(y,E){var b=typeof y!="string"?"sc":KS(y);cw[b]=(cw[b]||0)+1;var S="".concat(b,"-").concat(d2(Ey+b+cw[b]));return E?"".concat(E,"-").concat(S):S})(e.displayName,e.parentComponentId):c,u=e.displayName,d=u===void 0?(function(y){return ow(y)?"styled.".concat(y):"Styled(".concat(WY(y),")")})(t):u,h=e.displayName&&e.componentId?"".concat(KS(e.displayName),"-").concat(e.componentId):e.componentId||l,f=r&&s.attrs?s.attrs.concat(o).filter(Boolean):o,p=e.shouldForwardProp;if(r&&s.shouldForwardProp){var m=s.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;p=function(y,E){return m(y,E)&&g(y,E)}}else p=m}var _=new mZ(n,h,r?s.componentStyle:void 0);function A(y,E){return(function(b,S,$){var P=b.attrs,C=b.componentStyle,B=b.defaultProps,k=b.foldedComponentIds,D=b.styledComponentId,L=b.target,v=ka?void 0:Te.useContext(p2),x=g1(),O=b.shouldForwardProp||x.shouldForwardProp,U=VP(S,v,B)||Ou,I=(function(Ee,ce,oe){for(var X,Re=lr(lr({},ce),{className:void 0,theme:oe}),Me=0;Me<Ee.length;Me+=1){var Oe=Pu(X=Ee[Me])?X(Re):X;for(var st in Oe)st==="className"?Re.className=mc(Re.className,Oe[st]):st==="style"?Re.style=lr(lr({},Re.style),Oe[st]):Re[st]=Oe[st]}return"className"in ce&&typeof ce.className=="string"&&(Re.className=mc(Re.className,ce.className)),Re})(P,S,U),F=I.as||L,V={};for(var q in I)I[q]===void 0||q[0]==="$"||q==="as"||q==="theme"&&I.theme===U||(q==="forwardedAs"?V.as=I.forwardedAs:O&&!O(q,F)||(V[q]=I[q]));var J=(function(Ee,ce){var oe=g1(),X=Ee.generateAndInjectStyles(ce,oe.styleSheet,oe.stylis);return X})(C,I),G=J.className,K=J.css,ue=mc(k,D);G&&(ue+=" "+G),I.className&&(ue+=" "+I.className),V[ow(F)&&!HP.has(F)?"class":"className"]=ue,$&&(V.ref=$);var fe=T.createElement(F,V);return ka&&K?Te.createElement(Te.Fragment,null,Te.createElement("style",{precedence:"styled-components",href:"sc-".concat(D,"-").concat(G),children:K}),fe):fe})(w,y,E)}A.displayName=d;var w=Te.forwardRef(A);return w.attrs=f,w.componentStyle=_,w.displayName=d,w.shouldForwardProp=p,w.foldedComponentIds=r?mc(s.foldedComponentIds,s.styledComponentId):"",w.styledComponentId=h,w.target=r?s.target:t,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(y){this._foldedDefaultProps=r?(function(E){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];for(var $=0,P=b;$<P.length;$++)f1(E,P[$],!0);return E})({},s.defaultProps,y):y}}),f2(w,function(){return".".concat(w.styledComponentId)}),i&&JP(w,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function nI(t,e){for(var n=[t[0]],r=0,s=e.length;r<s;r+=1)n.push(e[r],t[r+1]);return n}var rI=function(t){return Object.assign(t,{isCss:!0})};function Nf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pu(t)||Wh(t))return rI(No(nI(xy,Tu([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?No(r):rI(No(nI(r,e)))}function y1(t,e,n){if(n===void 0&&(n=Ou),!e)throw $f(1,e);var r=function(s){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return t(e,n,Nf.apply(void 0,Tu([s],i,!1)))};return r.attrs=function(s){return y1(t,e,lr(lr({},n),{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return y1(t,e,lr(lr({},n),s))},r}var iR=function(t){return y1(gZ,t)},Bt=iR;HP.forEach(function(t){Bt[t]=iR(t)});var yZ=(function(){function t(e,n){this.rules=e,this.componentId=n,this.isStatic=sR(e),ag.registerId(this.componentId+1)}return t.prototype.createStyles=function(e,n,r,s){var i=s(sg(No(this.rules,n,r,s)),""),a=this.componentId+e;r.insertRules(a,a,i)},t.prototype.removeStyles=function(e,n){n.clearRules(this.componentId+e)},t.prototype.renderStyles=function(e,n,r,s){e>2&&ag.registerId(this.componentId+e);var i=this.componentId+e;this.isStatic?r.hasNameForId(i,i)||this.createStyles(e,n,r,s):(this.removeStyles(e,r),this.createStyles(e,n,r,s))},t})();function wZ(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Nf.apply(void 0,Tu([t],e,!1)),s="sc-global-".concat(d2(JSON.stringify(r))),i=new yZ(r,s),a=new WeakMap,o=function(c){var l=g1(),u=ka?void 0:Te.useContext(p2),d=a.get(l.styleSheet);if(d===void 0&&(d=l.styleSheet.allocateGSInstance(s),a.set(l.styleSheet,d)),(typeof window>"u"||!l.styleSheet.server)&&(function(g,_,A,w,y){if(i.isStatic)i.renderStyles(g,LY,A,y);else{var E=lr(lr({},_),{theme:VP(_,w,o.defaultProps)});i.renderStyles(g,E,A,y)}})(d,c,l.styleSheet,u,l.stylis),!ka){var h=Te.useRef(!0);Te.useLayoutEffect(function(){return h.current=!1,function(){h.current=!0,queueMicrotask(function(){h.current&&(i.removeStyles(d,l.styleSheet),typeof document<"u"&&document.querySelectorAll('style[data-styled-global="'.concat(s,'"]')).forEach(function(g){return g.remove()}))})}},[d,l.styleSheet])}if(ka){var f=s+d,p=typeof window>"u"?l.styleSheet.getTag().getGroup(Gl(f)):"";if(p){var m="".concat(s,"-").concat(d);return Te.createElement("style",{key:m,"data-styled-global":s,precedence:"styled-components",href:m,children:p})}}return null};return Te.memo(o)}function Tke(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=sg(Nf.apply(void 0,Tu([t],e,!1))),s=d2(r);return new tR(s,r)}var Ie={},Vd={exports:{}},bZ=Vd.exports,sI;function vZ(){return sI||(sI=1,(function(t,e){(function(n,r){var s="1.0.41",i="",a="?",o="function",c="undefined",l="object",u="string",d="major",h="model",f="name",p="type",m="vendor",g="version",_="architecture",A="console",w="mobile",y="tablet",E="smarttv",b="wearable",S="embedded",$=500,P="Amazon",C="Apple",B="ASUS",k="BlackBerry",D="Browser",L="Chrome",v="Edge",x="Firefox",O="Google",U="Honor",I="Huawei",F="Lenovo",V="LG",q="Microsoft",J="Motorola",G="Nvidia",K="OnePlus",ue="Opera",fe="OPPO",Ee="Samsung",ce="Sharp",oe="Sony",X="Xiaomi",Re="Zebra",Me="Facebook",Oe="Chromium OS",st="Mac OS",pt=" Browser",be=function(Ke,tt){var Fe={};for(var lt in Ke)tt[lt]&&tt[lt].length%2===0?Fe[lt]=tt[lt].concat(Ke[lt]):Fe[lt]=Ke[lt];return Fe},Ce=function(Ke){for(var tt={},Fe=0;Fe<Ke.length;Fe++)tt[Ke[Fe].toUpperCase()]=Ke[Fe];return tt},Sr=function(Ke,tt){return typeof Ke===u?tr(tt).indexOf(tr(Ke))!==-1:!1},tr=function(Ke){return Ke.toLowerCase()},He=function(Ke){return typeof Ke===u?Ke.replace(/[^\d\.]/g,i).split(".")[0]:r},js=function(Ke,tt){if(typeof Ke===u)return Ke=Ke.replace(/^\s\s*/,i),typeof tt===c?Ke:Ke.substring(0,$)},Kr=function(Ke,tt){for(var Fe=0,lt,At,kn,nt,Le,nr;Fe<tt.length&&!Le;){var Ze=tt[Fe],Va=tt[Fe+1];for(lt=At=0;lt<Ze.length&&!Le&&Ze[lt];)if(Le=Ze[lt++].exec(Ke),Le)for(kn=0;kn<Va.length;kn++)nr=Le[++At],nt=Va[kn],typeof nt===l&&nt.length>0?nt.length===2?typeof nt[1]==o?this[nt[0]]=nt[1].call(this,nr):this[nt[0]]=nt[1]:nt.length===3?typeof nt[1]===o&&!(nt[1].exec&&nt[1].test)?this[nt[0]]=nr?nt[1].call(this,nr,nt[2]):r:this[nt[0]]=nr?nr.replace(nt[1],nt[2]):r:nt.length===4&&(this[nt[0]]=nr?nt[3].call(this,nr.replace(nt[1],nt[2])):r):this[nt]=nr||r;Fe+=2}},hr=function(Ke,tt){for(var Fe in tt)if(typeof tt[Fe]===l&&tt[Fe].length>0){for(var lt=0;lt<tt[Fe].length;lt++)if(Sr(tt[Fe][lt],Ke))return Fe===a?r:Fe}else if(Sr(tt[Fe],Ke))return Fe===a?r:Fe;return tt.hasOwnProperty("*")?tt["*"]:Ke},Ir={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Gr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ys={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,g],[/opios[\/ ]+([\w\.]+)/i],[g,[f,ue+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[g,[f,ue+" GX"]],[/\bopr\/([\w\.]+)/i],[g,[f,ue]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[f,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[g,[f,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,g],[/quark(?:pc)?\/([-\w\.]+)/i],[g,[f,"Quark"]],[/\bddg\/([\w\.]+)/i],[g,[f,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[f,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[f,"Smart Lenovo "+D]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+D],g],[/\bfocus\/([\w\.]+)/i],[g,[f,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[f,ue+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[f,ue+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[f,"MIUI"+pt]],[/fxios\/([\w\.-]+)/i],[g,[f,x]],[/\bqihoobrowser\/?([\w\.]*)/i],[g,[f,"360"]],[/\b(qq)\/([\w\.]+)/i],[[f,/(.+)/,"$1Browser"],g],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1"+pt],g],[/samsungbrowser\/([\w\.]+)/i],[g,[f,Ee+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[g,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[f,g],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[f],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[g,f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,Me],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[f,L+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,L+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[f,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[g,hr,Ir]],[/(webkit|khtml)\/([\w\.]+)/i],[f,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],g],[/(wolvic|librewolf)\/([\w\.]+)/i],[f,g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[f,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[f,[g,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[f,[g,/master.|lts./,""]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[_,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[_,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[_,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[_,/ower/,i,tr]],[/ sun4\w[;\)]/i],[[_,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[_,tr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[m,Ee],[p,y]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[h,[m,Ee],[p,w]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[m,C],[p,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[m,C],[p,y]],[/(macintosh);/i],[h,[m,C]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[m,ce],[p,w]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[h,[m,U],[p,y]],[/honor([-\w ]+)[;\)]/i],[h,[m,U],[p,w]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[h,[m,I],[p,y]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[m,I],[p,w]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[h,/_/g," "],[m,X],[p,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[h,/_/g," "],[m,X],[p,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[m,fe],[p,w]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[h,[m,hr,{OnePlus:["304","403","203"],"*":fe}],[p,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[m,"Vivo"],[p,w]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[m,"Realme"],[p,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[m,J],[p,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[m,J],[p,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[m,V],[p,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[m,V],[p,w]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[h,[m,F],[p,y]],[/(nokia) (t[12][01])/i],[m,h,[p,y]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[h,/_/g," "],[p,w],[m,"Nokia"]],[/(pixel (c|tablet))\b/i],[h,[m,O],[p,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[m,O],[p,w]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[m,oe],[p,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[m,oe],[p,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[m,K],[p,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[m,P],[p,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[m,P],[p,w]],[/(playbook);[-\w\),; ]+(rim)/i],[h,m,[p,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[m,k],[p,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[m,B],[p,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[m,B],[p,w]],[/(nexus 9)/i],[h,[m,"HTC"],[p,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[h,/_/g," "],[p,w]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[h,[m,"TCL"],[p,y]],[/(itel) ((\w+))/i],[[m,tr],h,[p,hr,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[m,"Acer"],[p,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[m,"Meizu"],[p,w]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[m,"Ulefone"],[p,w]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[h,[m,"Energizer"],[p,w]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[h,[m,"Cat"],[p,w]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[h,[m,"Smartfren"],[p,w]],[/droid.+; (a(?:015|06[35]|142p?))/i],[h,[m,"Nothing"],[p,w]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[h,[m,"Archos"],[p,y]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[h,[m,"Archos"],[p,w]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[m,h,[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[m,h,[p,w]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,h,[p,y]],[/(surface duo)/i],[h,[m,q],[p,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[m,"Fairphone"],[p,w]],[/(u304aa)/i],[h,[m,"AT&T"],[p,w]],[/\bsie-(\w*)/i],[h,[m,"Siemens"],[p,w]],[/\b(rct\w+) b/i],[h,[m,"RCA"],[p,y]],[/\b(venue[\d ]{2,7}) b/i],[h,[m,"Dell"],[p,y]],[/\b(q(?:mv|ta)\w+) b/i],[h,[m,"Verizon"],[p,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[m,"Barnes & Noble"],[p,y]],[/\b(tm\d{3}\w+) b/i],[h,[m,"NuVision"],[p,y]],[/\b(k88) b/i],[h,[m,"ZTE"],[p,y]],[/\b(nx\d{3}j) b/i],[h,[m,"ZTE"],[p,w]],[/\b(gen\d{3}) b.+49h/i],[h,[m,"Swiss"],[p,w]],[/\b(zur\d{3}) b/i],[h,[m,"Swiss"],[p,y]],[/\b((zeki)?tb.*\b) b/i],[h,[m,"Zeki"],[p,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],h,[p,y]],[/\b(ns-?\w{0,9}) b/i],[h,[m,"Insignia"],[p,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[m,"NextBook"],[p,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],h,[p,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],h,[p,w]],[/\b(ph-1) /i],[h,[m,"Essential"],[p,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[m,"Envizen"],[p,y]],[/\b(trio[-\w\. ]+) b/i],[h,[m,"MachSpeed"],[p,y]],[/\btu_(1491) b/i],[h,[m,"Rotor"],[p,y]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[h,[m,G],[p,y]],[/(sprint) (\w+)/i],[m,h,[p,w]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[m,q],[p,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[m,Re],[p,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[m,Re],[p,w]],[/smart-tv.+(samsung)/i],[m,[p,E]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[m,Ee],[p,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,V],[p,E]],[/(apple) ?tv/i],[m,[h,C+" TV"],[p,E]],[/crkey/i],[[h,L+"cast"],[m,O],[p,E]],[/droid.+aft(\w+)( bui|\))/i],[h,[m,P],[p,E]],[/(shield \w+ tv)/i],[h,[m,G],[p,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[m,ce],[p,E]],[/(bravia[\w ]+)( bui|\))/i],[h,[m,oe],[p,E]],[/(mi(tv|box)-?\w+) bui/i],[h,[m,X],[p,E]],[/Hbbtv.*(technisat) (.*);/i],[m,h,[p,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,js],[h,js],[p,E]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[h,[p,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,h,[p,A]],[/droid.+; (shield)( bui|\))/i],[h,[m,G],[p,A]],[/(playstation \w+)/i],[h,[m,oe],[p,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[m,q],[p,A]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[h,[m,Ee],[p,b]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[m,h,[p,b]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[h,[m,fe],[p,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[m,C],[p,b]],[/(opwwe\d{3})/i],[h,[m,K],[p,b]],[/(moto 360)/i],[h,[m,J],[p,b]],[/(smartwatch 3)/i],[h,[m,oe],[p,b]],[/(g watch r)/i],[h,[m,V],[p,b]],[/droid.+; (wt63?0{2,3})\)/i],[h,[m,Re],[p,b]],[/droid.+; (glass) \d/i],[h,[m,O],[p,b]],[/(pico) (4|neo3(?: link|pro)?)/i],[m,h,[p,b]],[/; (quest( \d| pro)?)/i],[h,[m,Me],[p,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,S]],[/(aeobc)\b/i],[h,[m,P],[p,S]],[/(homepod).+mac os/i],[h,[m,C],[p,S]],[/windows iot/i],[[p,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[p,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[p,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,w]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[h,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[f,v+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[f,g],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,g],[/ladybird\//i],[[f,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,g],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[f,[g,hr,Gr]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,hr,Gr],[f,"Windows"]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,st],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,f],[/(ubuntu) ([\w\.]+) like android/i],[[f,/(.+)/,"$1 Touch"],g],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[f,g],[/\(bb(10);/i],[g,[f,k]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[g,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[f,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[f,L+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,Oe],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,g],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,g]]},Cn=function(Ke,tt){if(typeof Ke===l&&(tt=Ke,Ke=r),!(this instanceof Cn))return new Cn(Ke,tt).getResult();var Fe=typeof n!==c&&n.navigator?n.navigator:r,lt=Ke||(Fe&&Fe.userAgent?Fe.userAgent:i),At=Fe&&Fe.userAgentData?Fe.userAgentData:r,kn=tt?be(ys,tt):ys,nt=Fe&&Fe.userAgent==lt;return this.getBrowser=function(){var Le={};return Le[f]=r,Le[g]=r,Kr.call(Le,lt,kn.browser),Le[d]=He(Le[g]),nt&&Fe&&Fe.brave&&typeof Fe.brave.isBrave==o&&(Le[f]="Brave"),Le},this.getCPU=function(){var Le={};return Le[_]=r,Kr.call(Le,lt,kn.cpu),Le},this.getDevice=function(){var Le={};return Le[m]=r,Le[h]=r,Le[p]=r,Kr.call(Le,lt,kn.device),nt&&!Le[p]&&At&&At.mobile&&(Le[p]=w),nt&&Le[h]=="Macintosh"&&Fe&&typeof Fe.standalone!==c&&Fe.maxTouchPoints&&Fe.maxTouchPoints>2&&(Le[h]="iPad",Le[p]=y),Le},this.getEngine=function(){var Le={};return Le[f]=r,Le[g]=r,Kr.call(Le,lt,kn.engine),Le},this.getOS=function(){var Le={};return Le[f]=r,Le[g]=r,Kr.call(Le,lt,kn.os),nt&&!Le[f]&&At&&At.platform&&At.platform!="Unknown"&&(Le[f]=At.platform.replace(/chrome os/i,Oe).replace(/macos/i,st)),Le},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return lt},this.setUA=function(Le){return lt=typeof Le===u&&Le.length>$?js(Le,$):Le,this},this.setUA(lt),this};Cn.VERSION=s,Cn.BROWSER=Ce([f,g,d]),Cn.CPU=Ce([_]),Cn.DEVICE=Ce([h,m,p,A,w,E,y,b,S]),Cn.ENGINE=Cn.OS=Ce([f,g]),t.exports&&(e=t.exports=Cn),e.UAParser=Cn;var mt=typeof n!==c&&(n.jQuery||n.Zepto);if(mt&&!mt.ua){var zs=new Cn;mt.ua=zs.getResult(),mt.ua.get=function(){return zs.getUA()},mt.ua.set=function(Ke){zs.setUA(Ke);var tt=zs.getResult();for(var Fe in tt)mt.ua[Fe]=tt[Fe]}}})(typeof window=="object"?window:bZ)})(Vd,Vd.exports)),Vd.exports}var iI;function _Z(){if(iI)return Ie;iI=1,Object.defineProperty(Ie,"__esModule",{value:!0});function t(Q){return Q&&typeof Q=="object"&&"default"in Q?Q.default:Q}var e=e3(),n=t(e),r=vZ(),s=new r,i=s.getBrowser(),a=s.getCPU(),o=s.getDevice(),c=s.getEngine(),l=s.getOS(),u=s.getUA(),d=function(j){return s.setUA(j)},h=function(j){if(!j){console.error("No userAgent string was provided");return}var z=new r(j);return{UA:z,browser:z.getBrowser(),cpu:z.getCPU(),device:z.getDevice(),engine:z.getEngine(),os:z.getOS(),ua:z.getUA(),setUserAgent:function(de){return z.setUA(de)}}},f=Object.freeze({ClientUAInstance:s,browser:i,cpu:a,device:o,engine:c,os:l,ua:u,setUa:d,parseUserAgent:h});function p(Q,j){var z=Object.keys(Q);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(Q);j&&(ne=ne.filter(function(de){return Object.getOwnPropertyDescriptor(Q,de).enumerable})),z.push.apply(z,ne)}return z}function m(Q){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?p(Object(z),!0).forEach(function(ne){y(Q,ne,z[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(z)):p(Object(z)).forEach(function(ne){Object.defineProperty(Q,ne,Object.getOwnPropertyDescriptor(z,ne))})}return Q}function g(Q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(j){return typeof j}:g=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},g(Q)}function _(Q,j){if(!(Q instanceof j))throw new TypeError("Cannot call a class as a function")}function A(Q,j){for(var z=0;z<j.length;z++){var ne=j[z];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}}function w(Q,j,z){return j&&A(Q.prototype,j),Q}function y(Q,j,z){return j in Q?Object.defineProperty(Q,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):Q[j]=z,Q}function E(){return E=Object.assign||function(Q){for(var j=1;j<arguments.length;j++){var z=arguments[j];for(var ne in z)Object.prototype.hasOwnProperty.call(z,ne)&&(Q[ne]=z[ne])}return Q},E.apply(this,arguments)}function b(Q,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(j&&j.prototype,{constructor:{value:Q,writable:!0,configurable:!0}}),j&&$(Q,j)}function S(Q){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)},S(Q)}function $(Q,j){return $=Object.setPrototypeOf||function(ne,de){return ne.__proto__=de,ne},$(Q,j)}function P(Q,j){if(Q==null)return{};var z={},ne=Object.keys(Q),de,it;for(it=0;it<ne.length;it++)de=ne[it],!(j.indexOf(de)>=0)&&(z[de]=Q[de]);return z}function C(Q,j){if(Q==null)return{};var z=P(Q,j),ne,de;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Q);for(de=0;de<it.length;de++)ne=it[de],!(j.indexOf(ne)>=0)&&Object.prototype.propertyIsEnumerable.call(Q,ne)&&(z[ne]=Q[ne])}return z}function B(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function k(Q,j){if(j&&(typeof j=="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(Q)}function D(Q,j){return L(Q)||v(Q,j)||x(Q,j)||U()}function L(Q){if(Array.isArray(Q))return Q}function v(Q,j){var z=Q==null?null:typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(z!=null){var ne=[],de=!0,it=!1,ln,Tr;try{for(z=z.call(Q);!(de=(ln=z.next()).done)&&(ne.push(ln.value),!(j&&ne.length===j));de=!0);}catch(up){it=!0,Tr=up}finally{try{!de&&z.return!=null&&z.return()}finally{if(it)throw Tr}}return ne}}function x(Q,j){if(Q){if(typeof Q=="string")return O(Q,j);var z=Object.prototype.toString.call(Q).slice(8,-1);if(z==="Object"&&Q.constructor&&(z=Q.constructor.name),z==="Map"||z==="Set")return Array.from(Q);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return O(Q,j)}}function O(Q,j){(j==null||j>Q.length)&&(j=Q.length);for(var z=0,ne=new Array(j);z<j;z++)ne[z]=Q[z];return ne}function U(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},F={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},V={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},q={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},J=function(j){switch(j){case I.Mobile:return{isMobile:!0};case I.Tablet:return{isTablet:!0};case I.SmartTv:return{isSmartTV:!0};case I.Console:return{isConsole:!0};case I.Wearable:return{isWearable:!0};case I.Browser:return{isBrowser:!0};case I.Embedded:return{isEmbedded:!0};default:return q}},G=function(j){return d(j)},K=function(j){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return j||z},ue=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},fe=function(j){var z=ue();return z&&z.platform&&(z.platform.indexOf(j)!==-1||z.platform==="MacIntel"&&z.maxTouchPoints>1&&!window.MSStream)},Ee=function(j,z,ne,de,it){return{isBrowser:j,browserMajorVersion:K(z.major),browserFullVersion:K(z.version),browserName:K(z.name),engineName:K(ne.name),engineVersion:K(ne.version),osName:K(de.name),osVersion:K(de.version),userAgent:K(it)}},ce=function(j,z,ne,de){return m({},j,{vendor:K(z.vendor),model:K(z.model),os:K(ne.name),osVersion:K(ne.version),ua:K(de)})},oe=function(j,z,ne,de){return{isSmartTV:j,engineName:K(z.name),engineVersion:K(z.version),osName:K(ne.name),osVersion:K(ne.version),userAgent:K(de)}},X=function(j,z,ne,de){return{isConsole:j,engineName:K(z.name),engineVersion:K(z.version),osName:K(ne.name),osVersion:K(ne.version),userAgent:K(de)}},Re=function(j,z,ne,de){return{isWearable:j,engineName:K(z.name),engineVersion:K(z.version),osName:K(ne.name),osVersion:K(ne.version),userAgent:K(de)}},Me=function(j,z,ne,de,it){return{isEmbedded:j,vendor:K(z.vendor),model:K(z.model),engineName:K(ne.name),engineVersion:K(ne.version),osName:K(de.name),osVersion:K(de.version),userAgent:K(it)}};function Oe(Q){var j=Q?h(Q):f,z=j.device,ne=j.browser,de=j.engine,it=j.os,ln=j.ua,Tr=J(z.type),up=Tr.isBrowser,OB=Tr.isMobile,PB=Tr.isTablet,tA=Tr.isSmartTV,nA=Tr.isConsole,rA=Tr.isWearable,sA=Tr.isEmbedded;if(up)return Ee(up,ne,de,it,ln);if(tA)return oe(tA,de,it,ln);if(nA)return X(nA,de,it,ln);if(OB||PB)return ce(Tr,z,it,ln);if(rA)return Re(rA,de,it,ln);if(sA)return Me(sA,z,de,it,ln)}var st=function(j){var z=j.type;return z===I.Mobile},pt=function(j){var z=j.type;return z===I.Tablet},be=function(j){var z=j.type;return z===I.Mobile||z===I.Tablet},Ce=function(j){var z=j.type;return z===I.SmartTv},Sr=function(j){var z=j.type;return z===I.Browser},tr=function(j){var z=j.type;return z===I.Wearable},He=function(j){var z=j.type;return z===I.Console},js=function(j){var z=j.type;return z===I.Embedded},Kr=function(j){var z=j.vendor;return K(z)},hr=function(j){var z=j.model;return K(z)},Ir=function(j){var z=j.type;return K(z,"browser")},Gr=function(j){var z=j.name;return z===V.Android},ys=function(j){var z=j.name;return z===V.Windows},Cn=function(j){var z=j.name;return z===V.MAC_OS},mt=function(j){var z=j.name;return z===V.WindowsPhone},zs=function(j){var z=j.name;return z===V.IOS},Ke=function(j){var z=j.version;return K(z)},tt=function(j){var z=j.name;return K(z)},Fe=function(j){var z=j.name;return z===F.Chrome},lt=function(j){var z=j.name;return z===F.Firefox},At=function(j){var z=j.name;return z===F.Chromium},kn=function(j){var z=j.name;return z===F.Edge},nt=function(j){var z=j.name;return z===F.Yandex},Le=function(j){var z=j.name;return z===F.Safari||z===F.MobileSafari},nr=function(j){var z=j.name;return z===F.MobileSafari},Ze=function(j){var z=j.name;return z===F.Opera},Va=function(j){var z=j.name;return z===F.InternetExplorer||z===F.Ie},ap=function(j){var z=j.name;return z===F.MIUI},op=function(j){var z=j.name;return z===F.SamsungBrowser},ad=function(j){var z=j.version;return K(z)},cp=function(j){var z=j.major;return K(z)},N=function(j){var z=j.name;return K(z)},M=function(j){var z=j.name;return K(z)},H=function(j){var z=j.version;return K(z)},W=function(){var j=ue(),z=j&&j.userAgent&&j.userAgent.toLowerCase();return typeof z=="string"?/electron/.test(z):!1},Z=function(j){return typeof j=="string"&&j.indexOf("Edg/")!==-1},ee=function(){var j=ue();return j&&(/iPad|iPhone|iPod/.test(j.platform)||j.platform==="MacIntel"&&j.maxTouchPoints>1)&&!window.MSStream},se=function(){return fe("iPad")},ge=function(){return fe("iPhone")},qe=function(){return fe("iPod")},Xe=function(j){return K(j)};function St(Q){var j=Q||f,z=j.device,ne=j.browser,de=j.os,it=j.engine,ln=j.ua;return{isSmartTV:Ce(z),isConsole:He(z),isWearable:tr(z),isEmbedded:js(z),isMobileSafari:nr(ne)||se(),isChromium:At(ne),isMobile:be(z)||se(),isMobileOnly:st(z),isTablet:pt(z)||se(),isBrowser:Sr(z),isDesktop:Sr(z),isAndroid:Gr(de),isWinPhone:mt(de),isIOS:zs(de)||se(),isChrome:Fe(ne),isFirefox:lt(ne),isSafari:Le(ne),isOpera:Ze(ne),isIE:Va(ne),osVersion:Ke(de),osName:tt(de),fullBrowserVersion:ad(ne),browserVersion:cp(ne),browserName:N(ne),mobileVendor:Kr(z),mobileModel:hr(z),engineName:M(it),engineVersion:H(it),getUA:Xe(ln),isEdge:kn(ne)||Z(ln),isYandex:nt(ne),deviceType:Ir(z),isIOS13:ee(),isIPad13:se(),isIPhone13:ge(),isIPod13:qe(),isElectron:W(),isEdgeChromium:Z(ln),isLegacyEdge:kn(ne)&&!Z(ln),isWindows:ys(de),isMacOs:Cn(de),isMIUI:ap(ne),isSamsungBrowser:op(ne)}}var _t=Ce(o),Mt=He(o),Ue=tr(o),It=js(o),Qt=nr(i)||se(),cn=At(i),fr=be(o)||se(),pr=st(o),jn=pt(o)||se(),Yr=Sr(o),Zt=Sr(o),On=Gr(l),pl=mt(l),ml=zs(l)||se(),lp=Fe(i),ut=lt(i),Ht=Le(i),Ge=Ze(i),en=Va(i),Zr=Ke(l),pi=tt(l),Ha=ad(i),f0=cp(i),p0=N(i),YU=Kr(o),ZU=hr(o),JU=M(c),XU=H(c),QU=Xe(u),eB=kn(i)||Z(u),tB=nt(i),nB=Ir(o),rB=ee(),sB=se(),iB=ge(),aB=qe(),oB=W(),cB=Z(u),lB=kn(i)&&!Z(u),uB=ys(l),dB=Cn(l),hB=ap(i),fB=op(i),pB=function(j){if(!j||typeof j!="string"){console.error("No valid user agent string was provided");return}var z=h(j),ne=z.device,de=z.browser,it=z.os,ln=z.engine,Tr=z.ua;return St({device:ne,browser:de,os:it,engine:ln,ua:Tr})},mB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return On?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},gB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return Yr?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},yB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return en?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},wB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return ml?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},bB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return fr?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},vB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return jn?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},_B=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return pl?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},EB=function(j){var z=j.renderWithFragment,ne=j.children;j.viewClassName,j.style;var de=C(j,["renderWithFragment","children","viewClassName","style"]);return pr?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},xB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return _t?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},AB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return Mt?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},SB=function(j){var z=j.renderWithFragment,ne=j.children,de=C(j,["renderWithFragment","children"]);return Ue?z?n.createElement(e.Fragment,null,ne):n.createElement("div",de,ne):null},IB=function(j){var z=j.renderWithFragment,ne=j.children;j.viewClassName,j.style;var de=j.condition,it=C(j,["renderWithFragment","children","viewClassName","style","condition"]);return de?z?n.createElement(e.Fragment,null,ne):n.createElement("div",it,ne):null};function TB(Q){return(function(j){b(z,j);function z(ne){var de;return _(this,z),de=k(this,S(z).call(this,ne)),de.isEventListenerAdded=!1,de.handleOrientationChange=de.handleOrientationChange.bind(B(de)),de.onOrientationChange=de.onOrientationChange.bind(B(de)),de.onPageLoad=de.onPageLoad.bind(B(de)),de.state={isLandscape:!1,isPortrait:!1},de}return w(z,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var de=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:de===0,isLandscape:de===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":g(window))!==void 0&&fr&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return n.createElement(Q,E({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),z})(n.Component)}function CB(){var Q=e.useState(function(){var it=window.innerWidth>window.innerHeight?90:0;return{isPortrait:it===0,isLandscape:it===90,orientation:it===0?"portrait":"landscape"}}),j=D(Q,2),z=j[0],ne=j[1],de=e.useCallback(function(){var it=window.innerWidth>window.innerHeight?90:0,ln={isPortrait:it===0,isLandscape:it===90,orientation:it===0?"portrait":"landscape"};z.orientation!==ln.orientation&&ne(ln)},[z.orientation]);return e.useEffect(function(){return(typeof window>"u"?"undefined":g(window))!==void 0&&fr&&(de(),window.addEventListener("load",de,!1),window.addEventListener("resize",de,!1)),function(){window.removeEventListener("resize",de,!1),window.removeEventListener("load",de,!1)}},[de]),z}function eA(Q){var j=Q||window.navigator.userAgent;return h(j)}function kB(Q){var j=Q||window.navigator.userAgent,z=eA(j),ne=St(z);return[ne,z]}return Ie.AndroidView=mB,Ie.BrowserTypes=F,Ie.BrowserView=gB,Ie.ConsoleView=AB,Ie.CustomView=IB,Ie.IEView=yB,Ie.IOSView=wB,Ie.MobileOnlyView=EB,Ie.MobileView=bB,Ie.OsTypes=V,Ie.SmartTVView=xB,Ie.TabletView=vB,Ie.WearableView=SB,Ie.WinPhoneView=_B,Ie.browserName=p0,Ie.browserVersion=f0,Ie.deviceDetect=Oe,Ie.deviceType=nB,Ie.engineName=JU,Ie.engineVersion=XU,Ie.fullBrowserVersion=Ha,Ie.getSelectorsByUserAgent=pB,Ie.getUA=QU,Ie.isAndroid=On,Ie.isBrowser=Yr,Ie.isChrome=lp,Ie.isChromium=cn,Ie.isConsole=Mt,Ie.isDesktop=Zt,Ie.isEdge=eB,Ie.isEdgeChromium=cB,Ie.isElectron=oB,Ie.isEmbedded=It,Ie.isFirefox=ut,Ie.isIE=en,Ie.isIOS=ml,Ie.isIOS13=rB,Ie.isIPad13=sB,Ie.isIPhone13=iB,Ie.isIPod13=aB,Ie.isLegacyEdge=lB,Ie.isMIUI=hB,Ie.isMacOs=dB,Ie.isMobile=fr,Ie.isMobileOnly=pr,Ie.isMobileSafari=Qt,Ie.isOpera=Ge,Ie.isSafari=Ht,Ie.isSamsungBrowser=fB,Ie.isSmartTV=_t,Ie.isTablet=jn,Ie.isWearable=Ue,Ie.isWinPhone=pl,Ie.isWindows=uB,Ie.isYandex=tB,Ie.mobileModel=ZU,Ie.mobileVendor=YU,Ie.osName=pi,Ie.osVersion=Zr,Ie.parseUserAgent=h,Ie.setUserAgent=G,Ie.useDeviceData=eA,Ie.useDeviceSelectors=kB,Ie.useMobileOrientation=CB,Ie.withOrientationChange=TB,Ie}var Ba=_Z();const og=t=>{if(t.chainType==="ethereum")return{entropyId:t.address,entropyIdVerifier:"ethereum-address-verifier"};if(t.chainType==="solana")return{entropyId:t.address,entropyIdVerifier:"solana-address-verifier"};throw Error("Failed to get account entropy details")},_o=(t,e)=>{if(e?.imported)return og(e);let n=jh(t);if(!n)throw Error("Failed to find primary wallet");return og(n)},aR=T.createContext(null);function EZ(){let t=T.useContext(aR);return t===null?(console.warn("`useWallets` was called outside the PrivyProvider component"),{wallets:[],ready:!1}):t}let xZ=class extends qt{constructor(){super("Wallet timeout"),this.type="wallet_error"}};const Wo=t=>t instanceof qt?t:t?.code?new Si(t):new qt("Unknown connector error",t);let AZ=class extends zo{constructor(e,n,r){super(e),this.type="provider_error",this.code=n,this.data=r}},Si=class extends AZ{constructor(e){super(e.message,e.code,e.data);let n=Object.values(Ul).find((r=>r.eipCode===e.code));this.details=n||Ul.UNKNOWN_ERROR,e.code===-32002&&(e.message?.includes("already pending for origin")?e.message?.includes("wallet_requestPermissions")?this.details=Ul.E32002_CONNECTION_ALREADY_PENDING:this.details=Ul.E32002_REQUEST_ALREADY_PENDING:e.message?.includes("Already processing")&&e.message.includes("eth_requestAccounts")&&(this.details=Ul.E32002_WALLET_LOCKED))}};const Pke={ERROR_USER_EXISTS:{message:"User already exists for this address",detail:"Try another address!",retryable:!1},ERROR_TIMED_OUT:{message:"Wallet request timed out",detail:"Please try connecting again.",retryable:!0},ERROR_WALLET_CONNECTION:{message:"Could not log in with wallet",detail:"Please try connecting again.",retryable:!0},ERROR_USER_LIMIT_REACHED:{message:"Unable to link",detail:"You've reached the maximum number of linked wallets.",retryable:!1},...Ul};let oR=class{get(e){let n=localStorage.getItem(e);return n===null?void 0:JSON.parse(n)}put(e,n){n!==void 0?localStorage.setItem(e,JSON.stringify(n)):this.del(e)}del(e){localStorage.removeItem(e)}getKeys(){return Object.entries(localStorage).map((([e])=>e))}};function w1(){try{let t="privy:__session_storage__test",e=new oR;return e.put(t,"blobby"),e.del(t),!0}catch{return!1}}var Ne=typeof window<"u"&&window.localStorage?new oR:new class{get(t){return this._cache[t]}put(t,e){e!==void 0?this._cache[t]=e:this.del(t)}del(t){delete this._cache[t]}getKeys(){return Object.keys(this._cache)}constructor(){this._cache={}}};let cR=class extends tl{constructor(e){super(),this.walletClientType=e,this.connected=!1,this.initialized=!1}};const hm=()=>{let t=Ne.get(vP);return t&&Array.isArray(t)&&t.map((e=>(n=>n&&typeof n.address=="string"&&typeof n.connectorType=="string"&&typeof n.walletClientType=="string"&&typeof n.connectedAt=="number")(e))).every(Boolean)?t:[]};let SZ=["phantom","glow","solflare","backpack","okx_wallet","walletconnect","mobile_wallet_adapter","jupiter"];function IZ(t){return t.toLowerCase().split(" ").join("_")}let TZ=class extends cR{get isInstalled(){return!0}get wallet(){return this._wallet}buildConnectedWallet(){return this._wallet.accounts.map((e=>({type:"solana",provider:new $K({wallet:this._wallet,account:e}),address:e.address,connectedAt:Date.now(),walletClientType:this._wallet.name,connectorType:this.connectorType,imported:!1,meta:{name:this._wallet.name,id:this._wallet.name,icon:this._wallet.icon},isConnected:async()=>this._wallet.accounts.length>0,disconnect:async()=>{await this.disconnect()}})))}async syncAccounts(){this.wallets=this.buildConnectedWallet(),this.emit("walletsUpdated")}get walletBranding(){return{id:aI(this.wallet)?"walletconnect_solana":this.wallet.name,name:this.wallet.name,icon:this.wallet.icon}}async initialize(){this.subscribeListeners(),await this.syncAccounts(),this.shouldAttemptAutoConnect()&&(await this.wallet.features["standard:connect"]?.connect({silent:!0}).catch((()=>{})),await this.isConnected()&&await this.syncAccounts()),this.initialized=!0,this.emit("initialized")}async connect(e){if(e.showPrompt)try{await this.promptConnection()}catch(n){throw this._wallet.accounts.length===0?new jS:n}if(!await this.isConnected())throw new jS;return await this.syncAccounts(),this.getConnectedWallet()}async getConnectedWallet(){return this.wallets.sort(((e,n)=>n.connectedAt-e.connectedAt))[0]||null}async isConnected(){return this._wallet.accounts.length>0}subscribeListeners(){this._unsubscribeListeners=this.wallet.features["standard:events"]?.on("change",this.onChange)}unsubscribeListeners(){this._unsubscribeListeners?.()}shouldAttemptAutoConnect(){return!(!this.autoConnectEnabled||!SZ.includes(this.walletClientType))&&(this.walletClientType!=="phantom"&&this.walletClientType.toLowerCase()!=="metamask"||hm().some((({walletClientType:e})=>e==="phantom"||e.toLowerCase()==="metamask")))}constructor(e,n){super(IZ(aI(e)?"walletconnect_solana":e.name)),this.chainType="solana",this.connectorType="solana_adapter",this.disconnect=async()=>{await this.wallet.features["standard:disconnect"]?.disconnect().catch((r=>console.error("Error disconnecting",r))),await this.syncAccounts()},this.promptConnection=async()=>{try{await this.wallet.features["standard:connect"]?.connect()}catch(r){throw Wo(r)}},this.onChange=()=>{this.syncAccounts()},this._wallet=e,this.autoConnectEnabled=n,this.wallets=[]}};function aI(t){return"isWalletConnectSolana"in t&&t.isWalletConnectSolana}const Dke=({style:t,...e})=>{let n=ps();return R.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"28px",width:"28px",...t},...e,children:[R.jsx("rect",{width:"28",height:"28",rx:"3",fill:n?.appearance.palette.colorScheme==="dark"?"#3396ff":"#141414"}),R.jsx("g",{clipPath:"url(#clip0_1765_9946)",children:R.jsx("path",{d:"M8.09448 10.3941C11.3558 7.20196 16.6442 7.20196 19.9055 10.3941L20.2982 10.7782C20.3369 10.8157 20.3677 10.8606 20.3887 10.9102C20.4097 10.9599 20.4206 11.0132 20.4206 11.0671C20.4206 11.121 20.4097 11.1744 20.3887 11.224C20.3677 11.2737 20.3369 11.3186 20.2982 11.3561L18.9554 12.6702C18.9158 12.7086 18.8628 12.7301 18.8077 12.7301C18.7526 12.7301 18.6996 12.7086 18.66 12.6702L18.1198 12.1415C15.8448 9.91503 12.1557 9.91503 9.88015 12.1415L9.30167 12.7075C9.26207 12.7459 9.20909 12.7673 9.15395 12.7673C9.0988 12.7673 9.04582 12.7459 9.00622 12.7075L7.66346 11.3934C7.62475 11.3559 7.59397 11.3109 7.57295 11.2613C7.55193 11.2117 7.5411 11.1583 7.5411 11.1044C7.5411 11.0505 7.55193 10.9971 7.57295 10.9475C7.59397 10.8979 7.62475 10.8529 7.66346 10.8154L8.09448 10.3941ZM22.6829 13.1115L23.8776 14.2814C23.9163 14.319 23.9471 14.3639 23.9681 14.4135C23.9892 14.4632 24 14.5165 24 14.5704C24 14.6243 23.9892 14.6777 23.9681 14.7273C23.9471 14.777 23.9163 14.8219 23.8776 14.8594L18.4893 20.1332C18.4102 20.2101 18.3042 20.2531 18.1938 20.2531C18.0835 20.2531 17.9775 20.2101 17.8984 20.1332L14.0743 16.3901C14.0545 16.3708 14.0279 16.36 14.0003 16.36C13.9726 16.36 13.9461 16.3708 13.9263 16.3901L10.1021 20.1332C10.023 20.2101 9.91703 20.2531 9.8067 20.2531C9.69636 20.2531 9.59038 20.2101 9.51124 20.1332L4.12236 14.8594C4.08365 14.8219 4.05287 14.777 4.03185 14.7273C4.01083 14.6777 4 14.6243 4 14.5704C4 14.5165 4.01083 14.4632 4.03185 14.4135C4.05287 14.3639 4.08365 14.319 4.12236 14.2814L5.31767 13.1115C5.39678 13.0348 5.50265 12.9919 5.61285 12.9919C5.72305 12.9919 5.82892 13.0348 5.90803 13.1115L9.73216 16.8546C9.75194 16.874 9.7785 16.8848 9.80616 16.8848C9.83381 16.8848 9.86037 16.874 9.88015 16.8546L13.7043 13.1115C13.7834 13.0346 13.8894 12.9916 13.9997 12.9916C14.1101 12.9916 14.216 13.0346 14.2952 13.1115L18.1198 16.8546C18.1396 16.874 18.1662 16.8848 18.1938 16.8848C18.2215 16.8848 18.2481 16.874 18.2678 16.8546L22.092 13.1115C22.1711 13.0346 22.2771 12.9916 22.3874 12.9916C22.4977 12.9916 22.6037 13.0346 22.6829 13.1115Z",fill:"white"})}),R.jsx("defs",{children:R.jsx("clipPath",{id:"clip0_1765_9946",children:R.jsx("rect",{width:"20",height:"12.2531",fill:"white",transform:"translate(4 8)"})})})]})},CZ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfoDAIVODUC+w+GAAAGsUlEQVRYw6WXbYwWVxXHf+fOLAtCXYS2QJdIaClipGCTknXXNqBQMVHbfmhItH4Aral+IAEaG03UxJgYKQJGTUxtDWjaxDSNtcZqIGDwpRuW1oYiVqpdpZSlpC3qysu+PHPP3w/3mXnmeXZbPzjJZO7cefn/z/mfe865xlscq3dGDIguGiHLaMQVLja4s87FShcLo5jtApdddnHexUmHIy475JmdUkPRAQMu7gzT4ljnxJpdk0QPmMFkyAKN2OfOFpc2uuh1J3MZDrjAvXmVEQUuoosRxw642FcEG7IoDxiFxNiu8NYE+vcUYIFYRKKs113bXWx2Z34CoQZsVHOiCZ7mopdzdsFhv8NexEgRDHMxUSNREbh1bwNZwBsFblmfu/a4a6AEENYO5i3AOoEWeEUCF4MOOxBDMQAOk99OJALA2u80sBCwWGBZWG/yRwMaCAbBIAsQTJT3gea1OWfNeaPzvjoHEI85rA8ObtB1v7cIdJkIHgkh9AXpocy0LJjIKvB2wPpZB0v3wkrw5jdNEjeYeMhFX3BAyfn2ke9NUrgB9LrrcZcGJFCld4fWNddXbvbWfWzGR6xJFZsBGh0cBh3bBIxIEGTQ3W0h4NuDaSAzyAxCmGq11Vzf5uaa1aG8p+WFtrEYQGwvjICJkAEqvC+YNmcmMlMNvEaCdrcbyUvQAWDTjVuESHObM6cPGWHmzDwLaEtmzG9Z3qF1zUpXmuuZBb1z4bqeNC6f0WE1NtUTwHzEloiy3BvFisy0sYoLlQtT6XW15md2Qf9SY+2Ngfdca/TMSm/9ewz+/Boc/It45h/i4kSTsKw90SQJsPTvjSZbkWemDW7qTRZ0JEYJWSKxZJ7xmf6M224MzMzbX1s8F1YugjtvMg6eErt/4/z1jUrz1rXUKxnZC2zIg2mdBTK1mFUOKC1fOt/48kdzVixIz86Nij+eEacvpJWyZJ5xy7th8VzjjpuMJfMCW58QL73ekXPVlhsyE+vyzFiplJyauEIyrGIquruMq7qTxk+dcB495rzyTzFepCUWLIFv/kBg081Gd55WUk1IDGFTS89K++TDYxddzKnWcbluHd450xgdh7EGrOo1rr868PMTzqWJRGZ2d8oB/xpL33Xnxl2rjeNn4blXRXduzJ4B5y+28kWscAwXl+yeR654FFZPHoUb710YuPeDOUdPO48di1xptKpeEeHqOcYXNwQKGd88EDk3mqxtxPSfGRlsXRtYt8z4ytPOH/7eqpg1Aso7fYKgK4NPrMpYvsC4/poMA34yVJIQC3sCD9yecdsNyaV5yPj6ryJnR1PAvSNP4J+/1cgDfLbfePaMGGtM7Qdyl12WmKOmXgKKAp54vmBRTxfLrjE+tSYjBPjRM5FrrzIeuD2jf2lLzw8vN4JlfPVp581LsO1DgXv7jSzAiXPw/d+JiYLpjsu26Yfjf5O0rF5WoxsNT9G/bX0XKxakmPjlSee6HlizJJXSX7/oRDc+vjKR+f2wODcKd78/gR8/C9uedF44myJxmhh4OY/ipMQyqaWxmjn95TfEroMFOzbkvG+RceeqViPx1Aln1yEnOow1AnffHCpJAJ5/Vex4UvzptZRdY/O/1dJIS/NkcNmR6MTYah6qzseA4TfFtw4UvHBW1bc/O+7sPhwZHYf/jMODh5yfPudVbXj2TAJ/8XxrOZagNamj4Ei2/GNfuyRxh8t6BG2l15up+MIVODEiFr8rcPS0+O6RBF6mrrEGHHtFzOo2Lo7Dl37hvPQ6mNV6R9JYKgnYWcE37K5HlE2OT/5A0udaPUBHH+BQOMzuNsYLuDyZflTW+fTcmJFDHhJhaZqewMuewXDxcDR9IYyPN6Jj+6K4MF2vV8qBtZJScqVRNi6lpGONVJis5mpKi1WbgwsY+zIsBpcR8mzIZfuTRVZrtdu9odrptR/Xx5XONXJqBmCN0P6YMUQq9WJiwt0Je102WHdbpxSqydMObBWYdwDWLVcqcIMYe3NPjg0Ht84od0Ajju1w2XCr9e6QoqM9V23ZtnmI6cfAMMb9AY0YEHdb6oobEh4y3H3Ize6LsmGvN5IdUnhttdQ9UVrfLk/ljWEZ9wXsqAdQk1EA+O22GcgdZTke/bAs3OPY4HSdcB20HhvVtTMu0jmI8ekAhz2IICj2hKpNqI60NcuIRUHEej1quzubXa2tmZhenrfZmv3YYQ9ipDAIgvHptmblccuDjdRcmjFpWbDi/9ycZjZkRbk5jYztai/AUwiUx+qdEQB/m+25i9lxyvbcjrg45Lmd0uT/3p7/Fw6ODf+WO019AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTEyLTAyVDIxOjU2OjQ4KzAwOjAwMVpslgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0xMi0wMlQyMTo1Njo0OCswMDowMEAH1CoAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjQtMTItMDJUMjE6NTY6NTMrMDA6MDDZv6GRAAAAAElFTkSuQmCC";function Ay(t){return["ethereum","solana"].includes(t.chainType)}function lR(t){let e=t.replace("eip155:","");if(e)return parseInt(e);throw Error("Chain ID not compatible with CAIP-2 format.")}const m2=t=>t.filter((e=>e.method==="wallets"||(e.method==="exchange"?e.provider==="coinbase":e.method==="card"||e.method==="payment-request"?e.provider==="coinbase"||e.provider==="moonpay":(e.method,!1)))),oI={[Wu.id]:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",[h3.id]:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",[iE.id]:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",[u3.id]:"0x5fd84259d66Cd46123540766Be93DFE6D43130D7",[pf.id]:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",[d3.id]:"0x41e94eb019c0762f9bfcf9fb1e58725bfb0e7582",[ff.id]:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",[l3.id]:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",[hf.id]:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",[c3.id]:"0x5425890298aed601595a70ab815c96711a31bc65",[df.id]:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",[o3.id]:"0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d"},cI=({address:t,appConfig:e,fundWalletConfig:n,methodScreen:r,chainIdOverride:s,comingFromSendTransactionScreen:i=!1,onComplete:a,onError:o})=>{let c,l;if(!e.fundingConfig)throw Error("Wallet funding is not enabled");let u=m2(e.fundingConfig.options);if(u.length<1)throw Error("Wallet funding is not enabled");c=s||(n?.chain?n.chain.id:lR(e.fundingConfig.defaultRecommendedCurrency.chain));let d=e.chains.find((g=>g.id===c));if(!d)throw new Y(`Funding chain ${c} is not in PrivyProvider chains list`);let h=n?.amount??e.fundingConfig.defaultRecommendedAmount,f=!1;function p(){if(!c)return;let g=oI[c];u.find((_=>_.method==="wallets"))&&!g&&console.warn("Attempting to fund with USDC on chain where USDC address is not known. Funding via external wallet will be disabled."),l=g,f=!0}n&&"asset"in n?n.asset==="USDC"?p():typeof n.asset!="string"&&"erc20"in n.asset&&(f=((g,_)=>g===oI[_.id])(l=n.asset.erc20,d)):e.fundingConfig.defaultRecommendedCurrency.asset==="USDC"&&p();let m=n?.defaultFundingMethod;return{chainType:"ethereum",address:t,amount:h,chain:d,erc20Address:l,erc20ContractInfo:f?{symbol:"USDC",decimals:6}:void 0,isUSDC:f,methodScreen:r,supportedOptions:u,comingFromSendTransactionScreen:i,defaultFundingMethod:m,usingDefaultFundingMethod:!!m,preferredCardProvider:n?.card?.preferredProvider,crossChainBridgingEnabled:e.fundingConfig.crossChainBridgingEnabled??!1,solanaChain:"solana:mainnet",uiConfig:n&&"uiConfig"in n?n.uiConfig:void 0,externalSolanaFundingScreen:null,onComplete:a??(()=>{}),onError:o??(()=>{})}};function Uke({address:t,fundWalletConfig:e,appConfig:n,comingFromSendTransactionScreen:r,externalSolanaFundingScreen:s,methodScreen:i}){if(!n.fundingConfig)throw Error("Wallet funding is not enabled");let a=m2(n.fundingConfig.options);if(a.length<1)throw Error("Wallet funding is not enabled");let o=e?.amount??n.fundingConfig.defaultRecommendedAmount,c=e?.defaultFundingMethod;return{chainType:"solana",address:t,supportedOptions:a,amount:o,isUSDC:e?.asset==="USDC",methodScreen:i,comingFromSendTransactionScreen:r,chain:e?.chain||"solana:mainnet",crossChainBridgingEnabled:n.fundingConfig.crossChainBridgingEnabled??!1,defaultFundingMethod:c,preferredCardProvider:e?.card?.preferredProvider,usingDefaultFundingMethod:!!c,uiConfig:e?.uiConfig,externalSolanaFundingScreen:s,onComplete:()=>{},onError:()=>{}}}function kZ(){let{user:t,getAccessToken:e}=Zu(),{walletProxy:n,openModal:r,client:s}=qa(),{setModalData:i}=Iu(),a=ps();return T.useMemo((()=>({exportWallet:o=>new Promise((async(c,l)=>{if(!t)return void l(Error("User must be authenticated before exporting their Privy wallet"));o&&"target"in o&&o&&(o=void 0);let u=o?.address?Ll(t,o.address):To(t);if(!u)return void l(new Y("User must have an embedded wallet."));let d=u.address,{entropyId:h,entropyIdVerifier:f}=_o(t,u),p=ns(u);if(!d)return void l(Error("User does not have an HD Ethereum wallet. To export an imported wallet, pass the `address` of the wallet to `exportWallet`."));if(!Dt(d))return void l(Error("Must provide a valid Ethereum address."));let m={recoveryMethod:u.recoveryMethod,connectingWalletAddress:u.address,isUnifiedWallet:p,entropyId:h,entropyIdVerifier:f,onCompleteNavigateTo:"EmbeddedWalletKeyExportScreen",onFailure:l,shouldForceMFA:!0};await e()&&n?Ay(u)?(i({keyExport:{appId:a.id,appClientId:a.appClientId,origin:s.apiUrl,address:u.address,entropyId:h,entropyIdVerifier:f,hdWalletIndex:u.walletIndex,chainType:u.chainType,walletId:u.id,isUnifiedWallet:p,imported:u.imported,onSuccess:c,onFailure:l,showBackButton:o?.showBackButton},connectWallet:m}),r("EmbeddedWalletConnectingScreen")):l(Error(`Export is not supported for ${u.chainType} wallets`)):l(Error("Must have valid access token."))}))})),[t,e,n,r,s,i,a])}const OZ={login:{onComplete:[],onError:[]},logout:{onSuccess:[]},connectWallet:{onSuccess:[],onError:[]},connectOrCreateWallet:{onSuccess:[],onError:[]},createWallet:{onSuccess:[],onError:[]},linkAccount:{onSuccess:[],onError:[]},update:{onSuccess:[],onError:[]},configureMfa:{onMfaRequired:[]},setWalletPassword:{onSuccess:[],onError:[]},setWalletRecovery:{onSuccess:[],onError:[]},signMessage:{onSuccess:[],onError:[]},signTypedData:{onSuccess:[],onError:[]},sendTransaction:{onSuccess:[],onError:[]},signTransaction:{onSuccess:[],onError:[]},accessToken:{onAccessTokenGranted:[],onAccessTokenRemoved:[]},oAuthAuthorization:{onOAuthTokenGrant:[]},fundWallet:{onUserExited:[]},fundSolanaWallet:{onUserExited:[]},customAuth:{onAuthenticated:[],onUnauthenticated:[]}},uR=T.createContext(void 0);let dR=()=>T.useContext(uR);function Df(t,e){if(!e)return;let n=dR().current[t];return T.useEffect((()=>{for(let[r,s]of Object.entries(e))Object.prototype.hasOwnProperty.call(n,r)||console.warn(`Invalid event type "${r}" for action "${t}"`),n[r]?.push(s);return()=>{for(let[r,s]of Object.entries(e))Object.prototype.hasOwnProperty.call(n,r)||console.warn(`Invalid event type "${r}" for action "${t}"`),n[r]=n[r]?.filter((i=>i!==s))}}),[e])}function ae(t,e,n,...r){for(let s of t.current[e][n])s(...r)}function Sy(){let t=dR();return(e,n,...r)=>ae(t,e,n,...r)}const cg=(t,e,n,r)=>{let s=Number(t),i=e.find((a=>a.id===s));if(!i)throw new qt(`Unsupported chainId ${t}`,4901);return t2({transport:py(hR(i,n,r.appId)),chain:i})},hR=(t,e,n)=>{let r,s=t.id,i=Number(t.id);if(t.rpcUrls.privyWalletOverride&&t.rpcUrls.privyWalletOverride.http[0])r=t.rpcUrls.privyWalletOverride.http[0];else if(e.rpcUrls&&e.rpcUrls[i])r=e.rpcUrls[i];else if(t.rpcUrls.privy?.http[0]){let a=new URL(t.rpcUrls.privy.http[0]);a.searchParams.append("privyAppId",n),r=a.toString()}else r=t.rpcUrls.public?.http[0]?t.rpcUrls.public.http[0]:t.rpcUrls.default?.http[0];if(!r)throw new qt(`No RPC url found for ${s}`);return r},qh=rl((()=>({listings:[],loading:!1}))),lw=qh.setState,PZ=t=>qh.getState().listings.find((({slug:e})=>lg(e)===lg(t))),uw=t=>{let e;try{e=new URL(t).hostname}catch{return}return qh.getState().listings.find((({homepage:n})=>{let r;try{r=new URL(n).hostname}catch{return!1}return e.includes(r)}))},fR=(t=!0)=>{let e=ps(),n=qh((i=>i.listings)),r=qh((i=>i.loading)),s=!!n.length;return T.useEffect((()=>{t&&!s&&(lw({listings:[],loading:!0}),(async i=>{let a=new URL("v3/wallets","https://explorer-api.walletconnect.com");a.searchParams.append("projectId",i);let o=await fetch(a);return o.ok?Object.values((await o.json()).listings).sort((({slug:c},{slug:l})=>c==="rainbow"&&l==="metamask"?1:c==="metamask"||c==="rainbow"?-1:1)):(console.debug(`Failed to fetch WalletConnect listings: ${await o.text().catch((()=>"No response."))}`),[])})(e.walletConnectCloudProjectId).then((i=>lw({listings:i,loading:!1}))).catch((i=>{console.error(i),lw({listings:[],loading:!1})})))}),[t,s,e.walletConnectCloudProjectId]),{listings:n,loading:r}},Bke=t=>{let{listings:e}=fR();return e.find((({slug:n})=>lg(n)===lg(t)))};function lg(t){return t==="cryptocom"?"cryptocom-defi":t==="binance"?"binance-defi":t.replace(/[-_]wallet$/,"")}function b1(t){return["wallet_connect","backpack","binance","binanceus","bitget_wallet","bybit_wallet","cryptocom","haha_wallet","jupiter","metamask","okx_wallet","phantom","rabby_wallet","rainbow","ronin_wallet","safe","solflare","uniswap","zerion","kraken_wallet"].some((e=>t?.includes(e)))}const pR=t=>t.isApexWallet?"Apex Wallet":t.isAvalanche?"Core Wallet":t.isBackpack?"Backpack":t.isBifrost?"Bifrost Wallet":t.isBitKeep?"BitKeep":t.isBitski?"Bitski":t.isBlockWallet?"BlockWallet":t.isBraveWallet?"Brave Wallet":t.isClover?"Clover":t.isCoin98?"Coin98 Wallet":t.isCoinbaseWallet?"Coinbase Wallet":t.isDawn?"Dawn Wallet":t.isDefiant?"Defiant":t.isDesig?"Desig Wallet":t.isEnkrypt?"Enkrypt":t.isExodus?"Exodus":t.isFordefi?"Fordefi":t.isFrame?"Frame":t.isFrontier?"Frontier Wallet":t.isGamestop?"GameStop Wallet":t.isHaqqWallet?"HAQQ Wallet":t.isHyperPay?"HyperPay Wallet":t.isImToken?"ImToken":t.isHaloWallet?"Halo Wallet":t.isKuCoinWallet?"KuCoin Wallet":t.isMathWallet?"MathWallet":t.isNovaWallet?"Nova Wallet":t.isOkxWallet||t.isOKExWallet?"OKX Wallet":t.isOneInchIOSWallet||t.isOneInchAndroidWallet?"1inch Wallet":t.isOneKey?"OneKey Wallet":t.isOpera?"Opera":t.isPhantom||"isPhantom"in t?"Phantom":t.isPortal?"Ripio Portal":t.isRabby?"Rabby Wallet":t.isRainbow?"Rainbow":t.isSafePal?"SafePal Wallet":t.isStatus?"Status":t.isSubWallet?"SubWallet":t.isTalisman?"Talisman":t.isTally||t.isTaho?"Taho":t.isTokenPocket?"TokenPocket":t.isTokenary?"Tokenary":t.isTrust||t.isTrustWallet?"Trust Wallet":t.isTTWallet?"TTWallet":t.isXDEFI?"XDEFI Wallet":t.isZeal?"Zeal":t.isZerion?"Zerion":t.isMetaMask?"MetaMask":void 0,mR=(t,e)=>{if(!t.isMetaMask)return!1;if(t.isMetaMask&&!e)return!0;if(t.isBraveWallet&&!t._events&&!t._state||pR(t)!=="MetaMask")return!1;if(t.providers){for(let n of t.providers)if(!mR(n))return!1}return!0},Mke=()=>{let t=window;if(!t.ethereum)return!1;if(t.ethereum.isCoinbaseWallet)return!0;if(t.ethereum.providers){for(let e of t.ethereum.providers)if(e&&e.isCoinbaseWallet)return!0}return!1},Lke=(t,e)=>{let n=[],r=[];for(let[s,i]of t.entries())s<e?n.push(i):r.push(i);return[n,r]},Fke=t=>!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),jke=(t,e)=>{let n=t.slice(0),r=[];for(;n.length;)r.push(n.splice(0,e));return r},RZ=(t,e=3,n=4,r="ethereum")=>{if(!t)return"";let s=r==="ethereum"?2:0;return e+n+s+3>=t.length?t:`${t.slice(0,s+e)}...${t.slice(t.length-n,t.length)}`},zke=(t,e=3,n=4)=>RZ(t,e,n,"solana"),ug=t=>new Promise((e=>setTimeout(e,t)));function lI(t,{interval:e=100,timeout:n=5e3}={}){return new Promise(((r,s)=>{let i,a=0,o=()=>{a>=n?s("Max attempts reached without result"):(i=t(),a+=e,i==null?setTimeout(o,e):r(i))};o()}))}const v1=(t,e={})=>{let n=e.delayMs||150,r=e.maxAttempts||270;return new Promise((async(s,i)=>{let a=!1,o=0;for(;!a&&o<r;){if(e.abortSignal?.aborted)return;t().then((c=>{a=!0,s(c)}),((...c)=>{a=!0,i(...c)})),o+=1,await ug(n)}a||i(Error("Exceeded max attempts before resolving function"))}))},$Z=t=>t.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,""),_1=t=>typeof t=="string"?t:"0x"+t.toString(16);async function NZ({store:t,walletList:e,externalWalletConfig:n,walletChainType:r,timeout:s=3e3}){let i=!1,a=window;return new Promise((o=>{function c(){if(i)return;i=!0,window.removeEventListener("ethereum#initialized",c);let l=t.getProviders();console.debug("Detected injected providers:",l.map((d=>d.info)));let u=[];for(let d of l)e.includes("coinbase_wallet")&&d.info.rdns==="com.coinbase.wallet"||r==="solana-only"&&d.info.rdns==="app.phantom"||u.push({type:d.info.name.toLowerCase().replace(/\s/g,"_"),eip6963InjectedProvider:d});if(r!=="solana-only")for(let d of(function(){let h=window,f=h.ethereum;if(!f)return[];let p=[];if(f.providers?.length)for(let m of f.providers)m&&p.push(m);return p.push(h.ethereum),p})()){let h=pR(d);if(!l.some((f=>f.info.name===h))){if(mR(d,!0)&&!u.find((f=>f.type==="metamask"))){u.push({type:"metamask",legacyInjectedProvider:d});continue}if(h==="Phantom"&&!u.find((f=>f.type==="phantom"))){u.push({type:"phantom",legacyInjectedProvider:d});continue}if(h==="Coinbase Wallet"&&!u.find((f=>f.type==="coinbase_wallet"&&n.coinbaseWallet?.config?.preference?.options!=="smartWalletOnly"))){u.push({type:"coinbase_wallet",legacyInjectedProvider:d});continue}u.find((f=>f.type==="unknown_browser_extension"))||u.push({type:"unknown_browser_extension",legacyInjectedProvider:d})}}o(u)}a.ethereum?c():(window.addEventListener("ethereum#initialized",c,{once:!0}),setTimeout((()=>{c()}),s))}))}function rh(t){return`eip155:${String(Number(t))}`}const DZ=(t,e,n,r)=>{let s=Number(t),i=e.find((a=>a.id===s));if(!i)throw new qt(`Unsupported chainId ${t}`,4901);return hR(i,n,r)},Wke=(t,e)=>{let n=Number(t),r=e.find((s=>s.id===n));if(!r)throw new qt(`Unsupported chainId ${t}`,4901);return r.blockExplorers?.default.url},fm=t=>{let e={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},n=t.types.EIP712Domain??Object.entries(t.domain).map((([r,s])=>{if(s!=null&&typeof r=="string"&&r in e)return{name:r,type:e[r]}})).filter((r=>r!==void 0));return{...t,types:{...t.types,EIP712Domain:n}}};function qke(t,{min:e,max:n}){return Math.min(Math.max(t,e),n)}function po(t){return t.type==="ethereum"}function gR(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],s=e[n];if(r?.address!==s?.address||r&&s&&po(r)&&po(s)&&r?.chainId!==s?.chainId||r?.connectorType!==s?.connectorType||r?.connectedAt!==s?.connectedAt||r?.walletClientType!==s?.walletClientType||r?.isConnected!==s?.isConnected||r?.linked!==s?.linked)return!1}return!0}const g2=(t,e)=>t.rpcTimeouts&&t.rpcTimeouts[e]||yy;function dd(t){return t.chainType==="ethereum"}let sl=class extends cR{buildConnectedWallet(e,n,r,s){let i=async()=>!!this.wallets.find((a=>Gn(a.address)===Gn(e)));return{type:"ethereum",address:Gn(e),chainId:n,meta:r,imported:s,switchChain:async a=>{let o,c;if(!i)throw new qt("Wallet is not currently connected.");let l=this.wallets.find((h=>Gn(h.address)===Gn(e)))?.chainId;if(!l)throw new qt("Unable to determine current chainId.");if(typeof a=="number"?(o=`0x${a.toString(16)}`,c=a):(o=a,c=Number(a)),l===rh(o))return;let u=this.chains.find((h=>h.id===c));if(!u)throw new qt(`Unsupported chainId: ${a}`);let d=async()=>{await this.proxyProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]})};try{return await d()}catch(h){if(((f,p)=>{switch(p){case"coinbase_wallet":case"base_account":return f.message.includes("addEthereumChain");case"rabby_wallet":return f.message.includes("Unrecognized chain ID");default:return f.code===4902||f.message?.includes("4902")}})(h,this.walletClientType))return this.walletClientType==="rabby_wallet"&&await ug(300),await this.proxyProvider.request({method:"wallet_addEthereumChain",params:[{chainId:o,chainName:u.name,nativeCurrency:u.nativeCurrency,rpcUrls:[u.rpcUrls.default?.http[0]??""],blockExplorerUrls:[u.blockExplorers?.default.url??""]}]}),d();throw this.walletClientType==="rainbow"&&h.message?.includes("wallet_switchEthereumChain")?new qt(`Rainbow does not support the chainId ${n}`):h}},connectedAt:Date.now(),walletClientType:this.walletClientType,connectorType:this.connectorType,isConnected:i,getEthereumProvider:async()=>{if(!await i())throw new qt("Wallet is not currently connected.");return this.proxyProvider},sign:async a=>{if(!await i())throw new qt("Wallet is not currently connected.");return await this.sign(a)},disconnect:()=>{this.disconnect()}}}async syncAccounts(e){let n,r=e;try{if(r===void 0){let c=await v1((()=>this.proxyProvider.request({method:"eth_accounts"})),{maxAttempts:10,delayMs:500});console.debug(`eth_accounts for ${this.walletClientType}:`,c),Array.isArray(c)&&(r=c)}}catch(c){console.debug("Wallet did not respond to eth_accounts. Defaulting to prefetched accounts.",c)}if(!r||!Array.isArray(r)||r.length<=0||!r[0])return;let s=r[0];if(!Dt(s))return void console.warn(`Invalid ethereum address reported by ${this.walletClientType}: ${s}`);let i=Gn(s),a=[];if(this.walletClientType==="privy"){let c=Ne.get(tw(i));this.chains.find((l=>l.id===Number(c)))||(Ne.del(tw(i)),c=null),n=c||`0x${this.defaultChain.id.toString(16)}`;try{await this.proxyProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]})}catch{console.warn(`Unable to switch embedded wallet to chain ID ${n} on initialization`)}}else try{let c=await v1((()=>this.proxyProvider.request({method:"eth_chainId"})),{maxAttempts:10,delayMs:500});if(console.debug(`eth_chainId for ${this.walletClientType}:`,c),typeof c=="string")n=c;else{if(typeof c!="number")throw Error("Invalid chainId returned from provider");n=`0x${c.toString(16)}`}}catch(c){console.warn(`Failed to get chainId from provider, defaulting to ${US}`,c),n=US}let o=rh(n);if(!a.find((c=>Gn(c.address)===i))){let c={name:this.walletBranding.name,icon:typeof this.walletBranding.icon=="string"?this.walletBranding.icon:void 0,id:this.walletBranding.id};a.push(this.buildConnectedWallet(Gn(s),o,c,this.connectorType==="embedded_imported"))}gR(a,this.wallets)||(this.wallets=a,this.emit("walletsUpdated"))}async getConnectedWallet(){let e=await this.proxyProvider.request({method:"eth_accounts"});return this.wallets.sort(((n,r)=>r.connectedAt-n.connectedAt)).find((n=>e.find((r=>Gn(r)===Gn(n.address)))))||null}async isConnected(){let e=await this.proxyProvider.request({method:"eth_accounts"});return Array.isArray(e)&&e.length>0}async sign(e){return await this.connect({showPrompt:!1}),this.proxyProvider.request({method:"personal_sign",params:[Ye(e),this.wallets[0]?.address]})}subscribeListeners(){this.proxyProvider.on("accountsChanged",this.onAccountsChanged),this.proxyProvider.on("chainChanged",this.onChainChanged),this.proxyProvider.on("disconnect",this.onDisconnect),this.proxyProvider.on("connect",this.onConnect)}unsubscribeListeners(){this.proxyProvider.removeListener("accountsChanged",this.onAccountsChanged),this.proxyProvider.removeListener("chainChanged",this.onChainChanged),this.proxyProvider.removeListener("disconnect",this.onDisconnect),this.proxyProvider.removeListener("connect",this.onConnect)}constructor(e,n,r,s){super(e),this.chainType="ethereum",this.onAccountsChanged=i=>{i.length===0?this.onDisconnect():this.syncAccounts(i)},this.onChainChanged=i=>{this.wallets.forEach((a=>{a.chainId=rh(i),this.walletClientType==="privy"&&Ne.put(tw(a.address),i)})),this.emit("walletsUpdated")},this.onDisconnect=()=>{this.connected=!1,this.wallets=[],this.emit("walletsUpdated")},this.onConnect=async()=>{this.connectorType==="base_account"&&this.connected||(this.connected=!0,this.connectorType==="coinbase_wallet"&&await ug(500),this.syncAccounts())},this.wallets=[],this.walletClientType=e,this.chains=n,this.defaultChain=r,this.rpcConfig=s,this.rpcTimeoutDuration=g2(s,e),this.connected=!1,this.initialized=!1}},il=class{on(e,n){if(this.walletProvider)return this.walletProvider.on(e,n);this._subscriptions.push({eventName:e,listener:n})}async request(e){if(!this.walletProvider)throw new qt(`A wallet request of type ${e.method} was made before setting a wallet provider.`);return Promise.race([this.walletProvider.request(e),this.walletTimeout()]).catch((n=>{throw Wo(n)}))}constructor(e,n){this.removeListener=(r,s)=>{if(this.walletProvider)try{return this.walletProvider.removeListener(r,s)}catch{console.warn("Unable to remove wallet provider listener")}},this.walletTimeout=(r=new xZ,s=this.rpcTimeoutDuration)=>new Promise(((i,a)=>setTimeout((()=>{a(r)}),s))),this.setWalletProvider=r=>{this.walletProvider&&this._subscriptions.forEach((s=>{this.removeListener(s.eventName,s.listener)})),this.walletProvider=r,this._subscriptions.forEach((s=>{this.walletProvider?.on(s.eventName,s.listener)}))},this.walletProvider=e,this.rpcTimeoutDuration=n||yy,this._subscriptions=[]}};const UZ=t=>{let[e,n]=T.useState("auto");return T.useEffect((()=>{let r=new ResizeObserver((s=>{n(s[0]?.contentRect.height??"auto")}));return t.current&&r.observe(t.current),()=>{t.current&&r.unobserve(t.current)}}),[t.current]),e},Kke=Bt.div`
  text-align: left;
  flex-grow: 1;
`,Gke=Bt.div`
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  flex-grow: 1;
`,BZ=Bt.div`
  display: flex;
  flex-direction: column;
  gap: 8px;

  /* for Internet Explorer, Edge */
  -ms-overflow-style: none;

  /* for Firefox */
  scrollbar-width: none;

  /* for Chrome, Safari, and Opera */
  &::-webkit-scrollbar {
    display: none;
  }
`,Yke=Bt(BZ)`
  ${t=>t.$colorScheme==="light"?"background: linear-gradient(var(--privy-color-background), var(--privy-color-background) 70%) bottom, linear-gradient(rgba(0, 0, 0, 0) 20%, rgba(0, 0, 0, 0.06)) bottom;":t.$colorScheme==="dark"?"background: linear-gradient(var(--privy-color-background), var(--privy-color-background) 70%) bottom, linear-gradient(rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.06)) bottom;":void 0}

  background-repeat: no-repeat;
  background-size:
    100% 32px,
    100% 16px;
  background-attachment: local, scroll;
  max-height: 400px;
  overflow-y: auto;
  scrollbar-width: none;
  padding: 3px;
`;let yR=Nf`
  && {
    width: 100%;
    font-size: 16px;
    line-height: 24px;
    min-height: 56px;

    /* Tablet and Up */
    @media (min-width: 440px) {
      font-size: 14px;
    }

    display: flex;
    gap: 12px;
    align-items: center;
    color: var(--privy-color-foreground);

    padding: 10px 12px;
    border: 1px solid var(--privy-color-foreground-4) !important;
    border-radius: var(--privy-border-radius-md);
    transition: background-color 200ms ease;

    cursor: pointer;

    &:hover {
      background-color: var(--privy-color-background-2);
    }

    &:disabled {
      cursor: pointer;
      background-color: var(--privy-color-background-2);
    }
  }
`;const Zke=Bt.div`
  text-align: center;
  font-size: 14px;
  margin-bottom: 24px;
`,Jke=Bt.button.attrs({className:"login-method-button"})`
  ${yR}
`;Bt.a`
  ${yR}
`;const Xke=Bt.div`
  width: 32px;
  height: 32px;
  border-radius: ${t=>t.$fullSize?"0":"4px"};
  background: ${t=>t.$fullSize?"transparent":"var(--privy-color-background-2)"};
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;

  svg {
    width: ${t=>t.$fullSize?"32px":"18px"};
    height: ${t=>t.$fullSize?"32px":"18px"};
    color: ${t=>t.$fullSize?"inherit":"var(--privy-color-icon-muted)"};
  }
`,wR=Bt.div`
  width: 100%;
  height: 100%;
  min-height: inherit;
  display: flex;
  flex-direction: column;
  ${t=>t.$if?"display: none;":""}
`,Qke=Bt.div`
  width: 100%;
  height: 100%;
  padding: ${t=>t.$withPadding?"64px 0px":"0px"};
`,e3e=Bt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-bottom: 32px;
  gap: 12px;
  & h3 {
    font-size: 18px;
    font-style: normal;
    font-weight: 600;
    line-height: 24px;
  }
  & p {
    max-width: 300px;
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: 20px;
  }
`,t3e=({success:t,fail:e})=>R.jsxs(MZ,{children:[R.jsx(uI,{children:R.jsx(LZ,{className:t?"success":e?"fail":""})}),R.jsx(uI,{children:R.jsx(Iy,{className:t?"success":e?"fail":""})})]});let uI=Bt.span`
  && {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
  }
`,MZ=Bt.span`
  position: relative;
  width: 82px;
  height: 82px;
  display: inline-block;
`;const Iy=Bt.span`
  && {
    width: 82px;
    height: 82px;
    border-width: 4px;
    border-style: solid;
    border-color: ${t=>t.color??"var(--privy-color-icon-subtle)"};
    border-bottom-color: transparent;
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
    animation: rotation 1.2s linear infinite;
    transition: border-color 800ms;
  }

  @keyframes rotation {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  &&&.success {
    border-color: var(--privy-color-icon-success);
    border-bottom-color: var(--privy-color-icon-success);
  }

  &&&.fail {
    border-color: var(--privy-color-icon-error);
    border-bottom-color: var(--privy-color-icon-error);
  }
`,LZ=Bt(Iy)`
  && {
    border-bottom-color: ${t=>t.color??"var(--privy-color-border-default)"};
    border-color: ${t=>t.color??"var(--privy-color-border-default)"};
    animation: none;
    opacity: 0.5;
  }
`,n3e=t=>R.jsx(FZ,{color:t.color||"var(--privy-color-foreground-3)"});let FZ=Bt(Iy)`
  && {
    height: 1rem;
    width: 1rem;
    margin: 2px 0;
    border-width: 1.5px;

    /* Override default Loader to match button transitions */
    transition: border-color 200ms ease;
  }
`;const jZ=["metamask","phantom","brave_wallet","rainbow","uniswap_wallet_extension","uniswap_extension","rabby_wallet","bybit_wallet","ronin_wallet","haha_wallet","crypto.com_wallet_extension","crypto.com_onchain","binance","bitget_wallet","coinbase_wallet","coinbase_smart_wallet","base_account","metamask","trust","safe","rainbow","uniswap","zerion","argent","spot","omni","cryptocom","blockchain","safepal","bitget_wallet","zengo","1inch","binance","exodus","mew_wallet","alphawallet","keyring_pro","mathwallet","unstoppable","obvious","ambire","internet_money_wallet","coin98","abc_wallet","arculus_wallet","haha","cling_wallet","broearn","copiosa","burrito_wallet","enjin_wallet","plasma_wallet","avacus","bee","pitaka","pltwallet","minerva","kryptogo","prema","slingshot","kriptonio","timeless","secux","bitizen","blocto","okx_wallet","safemoon","rabby_wallet","bybit_wallet","ronin_wallet","haha_wallet","privy","unknown","phantom","solflare","glow","backpack","jupiter","mobile_wallet_adapter"],bR=Object.freeze({phantom:{client:"phantom",name:"Phantom",installLink:Ba.isFirefox?"https://addons.mozilla.org/en-US/firefox/addon/phantom-app/":"https://chrome.google.com/webstore/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa?hl=en",chainTypes:["ethereum","solana"],get isInstalled(){if("phantom"in window){let t=window;if(t?.phantom?.ethereum?.isPhantom&&t?.phantom?.ethereum?.chainId||t?.phantom?.solana?.isPhantom)return!0}return!1},getMobileRedirect({useUniversalLink:t,isSolana:e,connectOnly:n}){let r=hd({client:this.client,isSolana:e,connectOnly:n});return`${t?"phantom://":"https://phantom.app/ul/"}browse/${r}?ref=${r}`}},solflare:{client:"solflare",name:"Solflare",installLink:Ba.isFirefox?"https://addons.mozilla.org/es/firefox/addon/solflare-wallet/":"https://chromewebstore.google.com/detail/solflare-wallet/bhhhlbepdkbapadjdnnojkbgioiodbic",chainTypes:["solana"],get isInstalled(){return"solflare"in window&&!!window?.solflare?.isSolflare},getMobileRedirect({useUniversalLink:t,isSolana:e,connectOnly:n}){let r=hd({client:this.client,isSolana:e,connectOnly:n});return`${t?"solflare://ul/v1/":"https://solflare.com/ul/v1/"}browse/${r}?ref=${r}`}},jupiter:{client:"jupiter",name:"Jupiter Wallet",installLink:"https://chromewebstore.google.com/detail/jupiter-wallet/iledlaeogohbilgbfhmbgkgmpplbfboh",chainTypes:["solana"],get isInstalled(){return"jupiter"in window&&!!window?.jupiter?.isJupiter},getMobileRedirect({isSolana:t,connectOnly:e}){let n=hd({client:this.client,isSolana:t,connectOnly:e});return`jupjupjup://jup.ag/browse/${n}?ref=${n}`}},backpack:{client:"backpack",name:"Backpack",installLink:"https://chromewebstore.google.com/detail/backpack/aflkmfhebedbjioipglgcbcmnbpgliof",chainTypes:["ethereum","solana"],get isInstalled(){return!(!("backpack"in window)||!window?.backpack?.ethereum?.isBackpack&&!window?.backpack?.solana?.isBackpack)},getMobileRedirect({useUniversalLink:t,isSolana:e,connectOnly:n}){let r=hd({client:this.client,isSolana:e,connectOnly:n});return`${t?"backpack://ul/v1/":"https://backpack.app/ul/v1/"}browse/${r}?ref=${r}`}},okx_wallet:{client:"okx_wallet",name:"OKX Wallet",installLink:"https://chromewebstore.google.com/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",chainTypes:["ethereum","solana"],get isInstalled(){return"okxwallet"in window&&!!window?.okxwallet?.isOkxWallet},getMobileRedirect({isSolana:t,connectOnly:e}){return`okx://wallet/dapp/url?dappUrl=${hd({client:this.client,isSolana:t,connectOnly:e})}`}}});function zZ({connectorType:t,walletClientType:e}){for(let n of jZ)if(t===n||e===n)return bR[n]}function hd({client:t,isSolana:e,connectOnly:n}){let r=new URL(window.location.href);return r.searchParams.set("privy_connector",e?"solana_adapter":"injected"),r.searchParams.set("privy_wallet_client",t),r.searchParams.set("privy_connect_only",String(n)),encodeURIComponent(r.href.replace(/\/$/g,""))}let WZ=class extends TZ{get walletBranding(){return{id:this.id,name:this.name,icon:this.icon}}async initialize(){this.initialized=!0,this.emit("initialized")}async connect(){throw Error("connect called for an uninstalled wallet via the SolanaNullConnector")}constructor({id:e,name:n,icon:r}){super({name:n},!1),this.connectorType="null",this.proxyProvider=new il(void 0,yy),this.disconnect=async()=>{throw Error("disconnect called for an uninstalled wallet via the SolanaNullConnector")},this.promptConnection=async()=>{throw Error("promptConnection called for an uninstalled wallet via the SolanaNullConnector")},this.id=e,this.name=n,this.icon=r}};function qZ(t){return t.chainType==="solana"}function VZ(t){return t.type==="solana"}let vR=T.createContext({});const HZ=({children:t})=>{let e=ps(),[n,r]=T.useState({});return Df("login",{onComplete:({loginAccount:s})=>{s&&s.type!=="passkey"&&s.type!=="cross_app"&&(s.type!=="wallet"||s.walletClientType!=="privy")&&(Ne.put(dI(e.id),s.type),s.type==="wallet"?(Ne.put(dw(e.id),s.walletClientType),Ne.put(hw(e.id),s.chainType),r({accountType:s.type,walletClientType:s.walletClientType,chainType:s.chainType})):(Ne.del(dw(e.id)),Ne.del(hw(e.id)),r({accountType:s.type})))}}),T.useEffect((()=>{if(!e.id)return;let s=Ne.get(dI(e.id)),i=Ne.get(dw(e.id)),a=Ne.get(hw(e.id));s&&r(s==="wallet"?{accountType:s,walletClientType:i,chainType:a}:{accountType:s})}),[e.id]),R.jsx(vR.Provider,{value:n,children:t})};let dI=t=>`privy:${t}:recent-login-method`,dw=t=>`privy:${t}:recent-login-wallet-client`,hw=t=>`privy:${t}:recent-login-chain-type`;const s3e=()=>T.useContext(vR);let KZ=class extends sl{get walletBranding(){return{id:this.id,name:this.name,icon:this.icon}}async initialize(){this.initialized=!0,this.emit("initialized")}async connect(){throw Error("connect called for an uninstalled wallet via the EthereumNullConnector")}disconnect(){throw Error("disconnect called for an uninstalled wallet via the EthereumNullConnector")}promptConnection(e){throw Error(`promptConnection called for an uninstalled wallet via the EthereumNullConnector for ${e}`)}constructor({id:e,name:n,icon:r,walletClientType:s,defaultChain:i}){super(s,[],i,{}),this.connectorType="null",this.proxyProvider=new il(void 0,yy),this.id=e,this.name=n,this.icon=r}};const GZ=({...t})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",...t,children:[R.jsx("rect",{width:"32",height:"32",rx:"6",fill:"#121314"}),R.jsx("g",{transform:"translate(4, 4)",children:R.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 318.6 318.6",children:[R.jsx("style",{children:".s1{stroke-linecap:round;stroke-linejoin:round}.s2{fill:#e4761b;stroke:#e4761b}.s3{fill:#f6851b;stroke:#f6851b}"}),R.jsx("path",{fill:"#e2761b",stroke:"#e2761b",className:"s1",d:"m274.1 35.5-99.5 73.9L193 65.8z"}),R.jsx("path",{d:"m44.4 35.5 98.7 74.6-17.5-44.3zm193.9 171.3-26.5 40.6 56.7 15.6 16.3-55.3zm-204.4.9L50.1 263l56.7-15.6-26.5-40.6z",className:"s1 s2"}),R.jsx("path",{d:"m103.6 138.2-15.8 23.9 56.3 2.5-2-60.5zm111.3 0-39-34.8-1.3 61.2 56.2-2.5zM106.8 247.4l33.8-16.5-29.2-22.8zm71.1-16.5 33.9 16.5-4.7-39.3z",className:"s1 s2"}),R.jsx("path",{fill:"#d7c1b3",stroke:"#d7c1b3",className:"s1",d:"m211.8 247.4-33.9-16.5 2.7 22.1-.3 9.3zm-105 0 31.5 14.9-.2-9.3 2.5-22.1z"}),R.jsx("path",{fill:"#233447",stroke:"#233447",className:"s1",d:"m138.8 193.5-28.2-8.3 19.9-9.1zm40.9 0 8.3-17.4 20 9.1z"}),R.jsx("path",{fill:"#cd6116",stroke:"#cd6116",className:"s1",d:"m106.8 247.4 4.8-40.6-31.3.9zM207 206.8l4.8 40.6 26.5-39.7zm23.8-44.7-56.2 2.5 5.2 28.9 8.3-17.4 20 9.1zm-120.2 23.1 20-9.1 8.2 17.4 5.3-28.9-56.3-2.5z"}),R.jsx("path",{fill:"#e4751f",stroke:"#e4751f",className:"s1",d:"m87.8 162.1 23.6 46-.8-22.9zm120.3 23.1-1 22.9 23.7-46zm-64-20.6-5.3 28.9 6.6 34.1 1.5-44.9zm30.5 0-2.7 18 1.2 45 6.7-34.1z"}),R.jsx("path",{d:"m179.8 193.5-6.7 34.1 4.8 3.3 29.2-22.8 1-22.9zm-69.2-8.3.8 22.9 29.2 22.8 4.8-3.3-6.6-34.1z",className:"s3"}),R.jsx("path",{fill:"#c0ad9e",stroke:"#c0ad9e",className:"s1",d:"m180.3 262.3.3-9.3-2.5-2.2h-37.7l-2.3 2.2.2 9.3-31.5-14.9 11 9 22.3 15.5h38.3l22.4-15.5 11-9z"}),R.jsx("path",{fill:"#161616",stroke:"#161616",className:"s1",d:"m177.9 230.9-4.8-3.3h-27.7l-4.8 3.3-2.5 22.1 2.3-2.2h37.7l2.5 2.2z"}),R.jsx("path",{fill:"#763d16",stroke:"#763d16",className:"s1",d:"m278.3 114.2 8.5-40.8-12.7-37.9-96.2 71.4 37 31.3 52.3 15.3 11.6-13.5-5-3.6 8-7.3-6.2-4.8 8-6.1zM31.8 73.4l8.5 40.8-5.4 4 8 6.1-6.1 4.8 8 7.3-5 3.6 11.5 13.5 52.3-15.3 37-31.3-96.2-71.4z"}),R.jsx("path",{d:"m267.2 153.5-52.3-15.3 15.9 23.9-23.7 46 31.2-.4h46.5zm-163.6-15.3-52.3 15.3-17.4 54.2h46.4l31.1.4-23.6-46zm71 26.4 3.3-57.7 15.2-41.1h-67.5l15 41.1 3.5 57.7 1.2 18.2.1 44.8h27.7l.2-44.8z",className:"s3"})]})})]});function YZ(t){let{login:e}=T.useContext(nl);return Df("login",t),{login:e}}function ZZ(t){let{logout:e}=T.useContext(nl);return Df("logout",t),{logout:e}}const JZ=rl((()=>({isModalOpen:!1,resolvers:null})));rl((()=>({})));const a3e=({address:t,client:e,appId:n})=>{let r=`${e}:${t}`;n&&Ne.put(XZ(n),r),JZ.setState({wallet:r})},XZ=t=>`privy:${t}:active-wallet-connection`;class zi{constructor(e,n){this.scope=e,this.module=n}storeObject(e,n){this.setItem(e,JSON.stringify(n))}loadObject(e){const n=this.getItem(e);return n?JSON.parse(n):void 0}setItem(e,n){localStorage.setItem(this.scopedKey(e),n)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),n=[];for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r);typeof s=="string"&&s.startsWith(e)&&n.push(s)}n.forEach(r=>localStorage.removeItem(r))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new zi("CBWSDK").clear(),new zi("walletlink").clear()}}const tn={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},E1={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},_R="Unspecified error message.",QZ="Unspecified server error.";function y2(t,e=_R){if(t&&Number.isInteger(t)){const n=t.toString();if(x1(E1,n))return E1[n].message;if(ER(t))return QZ}return e}function eJ(t){if(!Number.isInteger(t))return!1;const e=t.toString();return!!(E1[e]||ER(t))}function tJ(t,{shouldIncludeStack:e=!1}={}){const n={};if(t&&typeof t=="object"&&!Array.isArray(t)&&x1(t,"code")&&eJ(t.code)){const r=t;n.code=r.code,r.message&&typeof r.message=="string"?(n.message=r.message,x1(r,"data")&&(n.data=r.data)):(n.message=y2(n.code),n.data={originalError:hI(t)})}else n.code=tn.rpc.internal,n.message=fI(t,"message")?t.message:_R,n.data={originalError:hI(t)};return e&&(n.stack=fI(t,"stack")?t.stack:void 0),n}function ER(t){return t>=-32099&&t<=-32e3}function hI(t){return t&&typeof t=="object"&&!Array.isArray(t)?Object.assign({},t):t}function x1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fI(t,e){return typeof t=="object"&&t!==null&&e in t&&typeof t[e]=="string"}const ht={rpc:{parse:t=>bs(tn.rpc.parse,t),invalidRequest:t=>bs(tn.rpc.invalidRequest,t),invalidParams:t=>bs(tn.rpc.invalidParams,t),methodNotFound:t=>bs(tn.rpc.methodNotFound,t),internal:t=>bs(tn.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return bs(e,t)},invalidInput:t=>bs(tn.rpc.invalidInput,t),resourceNotFound:t=>bs(tn.rpc.resourceNotFound,t),resourceUnavailable:t=>bs(tn.rpc.resourceUnavailable,t),transactionRejected:t=>bs(tn.rpc.transactionRejected,t),methodNotSupported:t=>bs(tn.rpc.methodNotSupported,t),limitExceeded:t=>bs(tn.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>El(tn.provider.userRejectedRequest,t),unauthorized:t=>El(tn.provider.unauthorized,t),unsupportedMethod:t=>El(tn.provider.unsupportedMethod,t),disconnected:t=>El(tn.provider.disconnected,t),chainDisconnected:t=>El(tn.provider.chainDisconnected,t),unsupportedChain:t=>El(tn.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new SR(e,n,r)}}};function bs(t,e){const[n,r]=xR(e);return new AR(t,n||y2(t),r)}function El(t,e){const[n,r]=xR(e);return new SR(t,n||y2(t),r)}function xR(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}class AR extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}}class SR extends AR{constructor(e,n,r){if(!nJ(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,n,r)}}function nJ(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function w2(){return t=>t}const Vh=w2(),rJ=w2(),sJ=w2();function ma(t){return Math.floor(t)}const IR=/^[0-9]*$/,TR=/^[a-f0-9]*$/;function oc(t){return b2(crypto.getRandomValues(new Uint8Array(t)))}function b2(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}function pm(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>Number.parseInt(e,16)))}function sh(t,e=!1){const n=t.toString("hex");return Vh(e?`0x${n}`:n)}function fw(t){return sh(A1(t),!0)}function yi(t){return sJ(t.toString(10))}function ko(t){return Vh(`0x${BigInt(t).toString(16)}`)}function CR(t){return t.startsWith("0x")||t.startsWith("0X")}function v2(t){return CR(t)?t.slice(2):t}function kR(t){return CR(t)?`0x${t.slice(2)}`:`0x${t}`}function Ty(t){if(typeof t!="string")return!1;const e=v2(t).toLowerCase();return TR.test(e)}function iJ(t,e=!1){if(typeof t=="string"){const n=v2(t).toLowerCase();if(TR.test(n))return Vh(e?`0x${n}`:n)}throw ht.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}function _2(t,e=!1){let n=iJ(t,!1);return n.length%2===1&&(n=Vh(`0${n}`)),e?Vh(`0x${n}`):n}function Ja(t){if(typeof t=="string"){const e=v2(t).toLowerCase();if(Ty(e)&&e.length===40)return rJ(kR(e))}throw ht.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}function A1(t){if(Buffer.isBuffer(t))return t;if(typeof t=="string"){if(Ty(t)){const e=_2(t,!1);return Buffer.from(e,"hex")}return Buffer.from(t,"utf8")}throw ht.rpc.invalidParams(`Not binary data: ${String(t)}`)}function ih(t){if(typeof t=="number"&&Number.isInteger(t))return ma(t);if(typeof t=="string"){if(IR.test(t))return ma(Number(t));if(Ty(t))return ma(Number(BigInt(_2(t,!0))))}throw ht.rpc.invalidParams(`Not an integer: ${String(t)}`)}function fd(t){if(t!==null&&(typeof t=="bigint"||oJ(t)))return BigInt(t.toString(10));if(typeof t=="number")return BigInt(ih(t));if(typeof t=="string"){if(IR.test(t))return BigInt(t);if(Ty(t))return BigInt(_2(t,!0))}throw ht.rpc.invalidParams(`Not an integer: ${String(t)}`)}function aJ(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw ht.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}function oJ(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}async function cJ(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function lJ(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function uJ(t,e){const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,new TextEncoder().encode(e));return{iv:n,cipherText:r}}async function dJ(t,{iv:e,cipherText:n}){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,n);return new TextDecoder().decode(r)}function OR(t){switch(t){case"public":return"spki";case"private":return"pkcs8"}}async function PR(t,e){const n=OR(t),r=await crypto.subtle.exportKey(n,e);return b2(new Uint8Array(r))}async function RR(t,e){const n=OR(t),r=pm(e).buffer;return await crypto.subtle.importKey(n,new Uint8Array(r),{name:"ECDH",namedCurve:"P-256"},!0,t==="private"?["deriveKey"]:[])}async function hJ(t,e){const n=JSON.stringify(t,(r,s)=>{if(!(s instanceof Error))return s;const i=s;return Object.assign(Object.assign({},i.code?{code:i.code}:{}),{message:i.message})});return uJ(e,n)}async function fJ(t,e){return JSON.parse(await dJ(e,t))}const pw={storageKey:"ownPrivateKey",keyType:"private"},mw={storageKey:"ownPublicKey",keyType:"public"},gw={storageKey:"peerPublicKey",keyType:"public"};class pJ{constructor(){this.storage=new zi("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(e){this.sharedSecret=null,this.peerPublicKey=e,await this.storeKey(gw,e),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(mw.storageKey),this.storage.removeItem(pw.storageKey),this.storage.removeItem(gw.storageKey)}async generateKeyPair(){const e=await cJ();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,await this.storeKey(pw,e.privateKey),await this.storeKey(mw,e.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(pw)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(mw)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(gw)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await lJ(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(e){const n=this.storage.getItem(e.storageKey);return n?RR(e.keyType,n):null}async storeKey(e,n){const r=await PR(e.keyType,n);this.storage.setItem(e.storageKey,r)}}const Uf="4.3.2",$R="@coinbase/wallet-sdk";async function E2(t,e){const n=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),r=await window.fetch(e,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Uf,"X-Cbw-Sdk-Platform":$R}}),{result:s,error:i}=await r.json();if(i)throw i;return s}function mJ(){return globalThis.coinbaseWalletExtension}function gJ(){var t,e;try{const n=globalThis;return(t=n.ethereum)!==null&&t!==void 0?t:(e=n.top)===null||e===void 0?void 0:e.ethereum}catch{return}}function yJ({metadata:t,preference:e}){var n,r;const{appName:s,appLogoUrl:i,appChainIds:a}=t;if(e.options!=="smartWalletOnly"){const c=mJ();if(c)return(n=c.setAppInfo)===null||n===void 0||n.call(c,s,i,a,e),c}const o=gJ();if(o?.isCoinbaseBrowser)return(r=o.setAppInfo)===null||r===void 0||r.call(o,s,i,a,e),o}function wJ(t){if(!t||typeof t!="object"||Array.isArray(t))throw ht.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:t});const{method:e,params:n}=t;if(typeof e!="string"||e.length===0)throw ht.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw ht.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:t});switch(e){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw ht.provider.unsupportedMethod()}}const pI="accounts",mI="activeChain",gI="availableChains",yI="walletCapabilities";class bJ{constructor(e){var n,r,s;this.metadata=e.metadata,this.communicator=e.communicator,this.callback=e.callback,this.keyManager=new pJ,this.storage=new zi("CBWSDK","SCWStateManager"),this.accounts=(n=this.storage.loadObject(pI))!==null&&n!==void 0?n:[],this.chain=this.storage.loadObject(mI)||{id:(s=(r=e.metadata.appChainIds)===null||r===void 0?void 0:r[0])!==null&&s!==void 0?s:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(e){var n,r,s,i;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const a=await this.createRequestMessage({handshake:{method:e.method,params:Object.assign({},this.metadata,(s=e.params)!==null&&s!==void 0?s:{})}}),o=await this.communicator.postRequestAndWaitForResponse(a);if("failure"in o.content)throw o.content.failure;const c=await RR("public",o.sender);await this.keyManager.setPeerPublicKey(c);const u=(await this.decryptResponseMessage(o)).result;if("error"in u)throw u.error;switch(e.method){case"eth_requestAccounts":{const d=u.value;this.accounts=d,this.storage.storeObject(pI,d),(i=this.callback)===null||i===void 0||i.call(this,"accountsChanged",d);break}}}async request(e){var n;if(this.accounts.length===0)switch(e.method){case"wallet_sendCalls":return this.sendRequestToPopup(e);default:throw ht.provider.unauthorized()}switch(e.method){case"eth_requestAccounts":return(n=this.callback)===null||n===void 0||n.call(this,"connect",{chainId:ko(this.chain.id)}),this.accounts;case"eth_accounts":return this.accounts;case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return ko(this.chain.id);case"wallet_getCapabilities":return this.storage.loadObject(yI);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(e);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(e);default:if(!this.chain.rpcUrl)throw ht.rpc.internal("No RPC URL set for chain");return E2(e,this.chain.rpcUrl)}}async sendRequestToPopup(e){var n,r;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const s=await this.sendEncryptedRequest(e),a=(await this.decryptResponseMessage(s)).result;if("error"in a)throw a.error;return a.value}async cleanup(){var e,n;this.storage.clear(),await this.keyManager.clear(),this.accounts=[],this.chain={id:(n=(e=this.metadata.appChainIds)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:1}}async handleSwitchChainRequest(e){var n;const r=e.params;if(!r||!(!((n=r[0])===null||n===void 0)&&n.chainId))throw ht.rpc.invalidParams();const s=ih(r[0].chainId);if(this.updateChain(s))return null;const a=await this.sendRequestToPopup(e);return a===null&&this.updateChain(s),a}async sendEncryptedRequest(e){const n=await this.keyManager.getSharedSecret();if(!n)throw ht.provider.unauthorized("No valid session found, try requestAccounts before other methods");const r=await hJ({action:e,chainId:this.chain.id},n),s=await this.createRequestMessage({encrypted:r});return this.communicator.postRequestAndWaitForResponse(s)}async createRequestMessage(e){const n=await PR("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:n,content:e,timestamp:new Date}}async decryptResponseMessage(e){var n,r;const s=e.content;if("failure"in s)throw s.failure;const i=await this.keyManager.getSharedSecret();if(!i)throw ht.provider.unauthorized("Invalid session");const a=await fJ(s.encrypted,i),o=(n=a.data)===null||n===void 0?void 0:n.chains;if(o){const l=Object.entries(o).map(([u,d])=>({id:Number(u),rpcUrl:d}));this.storage.storeObject(gI,l),this.updateChain(this.chain.id,l)}const c=(r=a.data)===null||r===void 0?void 0:r.capabilities;return c&&this.storage.storeObject(yI,c),a}updateChain(e,n){var r;const s=n??this.storage.loadObject(gI),i=s?.find(a=>a.id===e);return i?(i!==this.chain&&(this.chain=i,this.storage.storeObject(mI,i),(r=this.callback)===null||r===void 0||r.call(this,"chainChanged",ko(i.id))),!0):!1}}var kt={},Rn={},wI;function NR(){if(wI)return Rn;wI=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.output=Rn.exists=Rn.hash=Rn.bytes=Rn.bool=Rn.number=Rn.isBytes=void 0;function t(c){if(!Number.isSafeInteger(c)||c<0)throw new Error(`positive integer expected, not ${c}`)}Rn.number=t;function e(c){if(typeof c!="boolean")throw new Error(`boolean expected, not ${c}`)}Rn.bool=e;function n(c){return c instanceof Uint8Array||c!=null&&typeof c=="object"&&c.constructor.name==="Uint8Array"}Rn.isBytes=n;function r(c,...l){if(!n(c))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(c.length))throw new Error(`Uint8Array expected of length ${l}, not of length=${c.length}`)}Rn.bytes=r;function s(c){if(typeof c!="function"||typeof c.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(c.outputLen),t(c.blockLen)}Rn.hash=s;function i(c,l=!0){if(c.destroyed)throw new Error("Hash instance has been destroyed");if(l&&c.finished)throw new Error("Hash#digest() has already been called")}Rn.exists=i;function a(c,l){r(c);const u=l.outputLen;if(c.length<u)throw new Error(`digestInto() expects output buffer of length at least ${u}`)}Rn.output=a;const o={number:t,bool:e,bytes:r,hash:s,exists:i,output:a};return Rn.default=o,Rn}var je={},bI;function vJ(){if(bI)return je;bI=1,Object.defineProperty(je,"__esModule",{value:!0}),je.add5L=je.add5H=je.add4H=je.add4L=je.add3H=je.add3L=je.add=je.rotlBL=je.rotlBH=je.rotlSL=je.rotlSH=je.rotr32L=je.rotr32H=je.rotrBL=je.rotrBH=je.rotrSL=je.rotrSH=je.shrSL=je.shrSH=je.toBig=je.split=je.fromBig=void 0;const t=BigInt(2**32-1),e=BigInt(32);function n(P,C=!1){return C?{h:Number(P&t),l:Number(P>>e&t)}:{h:Number(P>>e&t)|0,l:Number(P&t)|0}}je.fromBig=n;function r(P,C=!1){let B=new Uint32Array(P.length),k=new Uint32Array(P.length);for(let D=0;D<P.length;D++){const{h:L,l:v}=n(P[D],C);[B[D],k[D]]=[L,v]}return[B,k]}je.split=r;const s=(P,C)=>BigInt(P>>>0)<<e|BigInt(C>>>0);je.toBig=s;const i=(P,C,B)=>P>>>B;je.shrSH=i;const a=(P,C,B)=>P<<32-B|C>>>B;je.shrSL=a;const o=(P,C,B)=>P>>>B|C<<32-B;je.rotrSH=o;const c=(P,C,B)=>P<<32-B|C>>>B;je.rotrSL=c;const l=(P,C,B)=>P<<64-B|C>>>B-32;je.rotrBH=l;const u=(P,C,B)=>P>>>B-32|C<<64-B;je.rotrBL=u;const d=(P,C)=>C;je.rotr32H=d;const h=(P,C)=>P;je.rotr32L=h;const f=(P,C,B)=>P<<B|C>>>32-B;je.rotlSH=f;const p=(P,C,B)=>C<<B|P>>>32-B;je.rotlSL=p;const m=(P,C,B)=>C<<B-32|P>>>64-B;je.rotlBH=m;const g=(P,C,B)=>P<<B-32|C>>>64-B;je.rotlBL=g;function _(P,C,B,k){const D=(C>>>0)+(k>>>0);return{h:P+B+(D/2**32|0)|0,l:D|0}}je.add=_;const A=(P,C,B)=>(P>>>0)+(C>>>0)+(B>>>0);je.add3L=A;const w=(P,C,B,k)=>C+B+k+(P/2**32|0)|0;je.add3H=w;const y=(P,C,B,k)=>(P>>>0)+(C>>>0)+(B>>>0)+(k>>>0);je.add4L=y;const E=(P,C,B,k,D)=>C+B+k+D+(P/2**32|0)|0;je.add4H=E;const b=(P,C,B,k,D)=>(P>>>0)+(C>>>0)+(B>>>0)+(k>>>0)+(D>>>0);je.add5L=b;const S=(P,C,B,k,D,L)=>C+B+k+D+L+(P/2**32|0)|0;je.add5H=S;const $={fromBig:n,split:r,toBig:s,shrSH:i,shrSL:a,rotrSH:o,rotrSL:c,rotrBH:l,rotrBL:u,rotr32H:d,rotr32L:h,rotlSH:f,rotlSL:p,rotlBH:m,rotlBL:g,add:_,add3L:A,add3H:w,add4L:y,add4H:E,add5H:S,add5L:b};return je.default=$,je}var yw={},pd={},vI;function _J(){return vI||(vI=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.crypto=void 0,pd.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),pd}var _I;function EJ(){return _I||(_I=1,(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;const e=_J(),n=NR();function r(k){return k instanceof Uint8Array||k!=null&&typeof k=="object"&&k.constructor.name==="Uint8Array"}t.isBytes=r;const s=k=>new Uint8Array(k.buffer,k.byteOffset,k.byteLength);t.u8=s;const i=k=>new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4));t.u32=i;const a=k=>new DataView(k.buffer,k.byteOffset,k.byteLength);t.createView=a;const o=(k,D)=>k<<32-D|k>>>D;t.rotr=o;const c=(k,D)=>k<<D|k>>>32-D>>>0;t.rotl=c,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const l=k=>k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255;t.byteSwap=l,t.byteSwapIfBE=t.isLE?k=>k:k=>(0,t.byteSwap)(k);function u(k){for(let D=0;D<k.length;D++)k[D]=(0,t.byteSwap)(k[D])}t.byteSwap32=u;const d=Array.from({length:256},(k,D)=>D.toString(16).padStart(2,"0"));function h(k){(0,n.bytes)(k);let D="";for(let L=0;L<k.length;L++)D+=d[k[L]];return D}t.bytesToHex=h;const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p(k){if(k>=f._0&&k<=f._9)return k-f._0;if(k>=f._A&&k<=f._F)return k-(f._A-10);if(k>=f._a&&k<=f._f)return k-(f._a-10)}function m(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);const D=k.length,L=D/2;if(D%2)throw new Error("padded hex string expected, got unpadded hex of length "+D);const v=new Uint8Array(L);for(let x=0,O=0;x<L;x++,O+=2){const U=p(k.charCodeAt(O)),I=p(k.charCodeAt(O+1));if(U===void 0||I===void 0){const F=k[O]+k[O+1];throw new Error('hex string expected, got non-hex character "'+F+'" at index '+O)}v[x]=U*16+I}return v}t.hexToBytes=m;const g=async()=>{};t.nextTick=g;async function _(k,D,L){let v=Date.now();for(let x=0;x<k;x++){L(x);const O=Date.now()-v;O>=0&&O<D||(await(0,t.nextTick)(),v+=O)}}t.asyncLoop=_;function A(k){if(typeof k!="string")throw new Error(`utf8ToBytes expected string, got ${typeof k}`);return new Uint8Array(new TextEncoder().encode(k))}t.utf8ToBytes=A;function w(k){return typeof k=="string"&&(k=A(k)),(0,n.bytes)(k),k}t.toBytes=w;function y(...k){let D=0;for(let v=0;v<k.length;v++){const x=k[v];(0,n.bytes)(x),D+=x.length}const L=new Uint8Array(D);for(let v=0,x=0;v<k.length;v++){const O=k[v];L.set(O,x),x+=O.length}return L}t.concatBytes=y;class E{clone(){return this._cloneInto()}}t.Hash=E;const b={}.toString;function S(k,D){if(D!==void 0&&b.call(D)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(k,D)}t.checkOpts=S;function $(k){const D=v=>k().update(w(v)).digest(),L=k();return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=()=>k(),D}t.wrapConstructor=$;function P(k){const D=(v,x)=>k(x).update(w(v)).digest(),L=k({});return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=v=>k(v),D}t.wrapConstructorWithOpts=P;function C(k){const D=(v,x)=>k(x).update(w(v)).digest(),L=k({});return D.outputLen=L.outputLen,D.blockLen=L.blockLen,D.create=v=>k(v),D}t.wrapXOFConstructorWithOpts=C;function B(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=B})(yw)),yw}var EI;function xJ(){if(EI)return kt;EI=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.shake256=kt.shake128=kt.keccak_512=kt.keccak_384=kt.keccak_256=kt.keccak_224=kt.sha3_512=kt.sha3_384=kt.sha3_256=kt.sha3_224=kt.Keccak=kt.keccakP=void 0;const t=NR(),e=vJ(),n=EJ(),r=[],s=[],i=[],a=BigInt(0),o=BigInt(1),c=BigInt(2),l=BigInt(7),u=BigInt(256),d=BigInt(113);for(let y=0,E=o,b=1,S=0;y<24;y++){[b,S]=[S,(2*b+3*S)%5],r.push(2*(5*S+b)),s.push((y+1)*(y+2)/2%64);let $=a;for(let P=0;P<7;P++)E=(E<<o^(E>>l)*d)%u,E&c&&($^=o<<(o<<BigInt(P))-o);i.push($)}const[h,f]=(0,e.split)(i,!0),p=(y,E,b)=>b>32?(0,e.rotlBH)(y,E,b):(0,e.rotlSH)(y,E,b),m=(y,E,b)=>b>32?(0,e.rotlBL)(y,E,b):(0,e.rotlSL)(y,E,b);function g(y,E=24){const b=new Uint32Array(10);for(let S=24-E;S<24;S++){for(let C=0;C<10;C++)b[C]=y[C]^y[C+10]^y[C+20]^y[C+30]^y[C+40];for(let C=0;C<10;C+=2){const B=(C+8)%10,k=(C+2)%10,D=b[k],L=b[k+1],v=p(D,L,1)^b[B],x=m(D,L,1)^b[B+1];for(let O=0;O<50;O+=10)y[C+O]^=v,y[C+O+1]^=x}let $=y[2],P=y[3];for(let C=0;C<24;C++){const B=s[C],k=p($,P,B),D=m($,P,B),L=r[C];$=y[L],P=y[L+1],y[L]=k,y[L+1]=D}for(let C=0;C<50;C+=10){for(let B=0;B<10;B++)b[B]=y[C+B];for(let B=0;B<10;B++)y[C+B]^=~b[(B+2)%10]&b[(B+4)%10]}y[0]^=h[S],y[1]^=f[S]}b.fill(0)}kt.keccakP=g;class _ extends n.Hash{constructor(E,b,S,$=!1,P=24){if(super(),this.blockLen=E,this.suffix=b,this.outputLen=S,this.enableXOF=$,this.rounds=P,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.number)(S),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),g(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(E){(0,t.exists)(this);const{blockLen:b,state:S}=this;E=(0,n.toBytes)(E);const $=E.length;for(let P=0;P<$;){const C=Math.min(b-this.pos,$-P);for(let B=0;B<C;B++)S[this.pos++]^=E[P++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:E,suffix:b,pos:S,blockLen:$}=this;E[S]^=b,(b&128)!==0&&S===$-1&&this.keccak(),E[$-1]^=128,this.keccak()}writeInto(E){(0,t.exists)(this,!1),(0,t.bytes)(E),this.finish();const b=this.state,{blockLen:S}=this;for(let $=0,P=E.length;$<P;){this.posOut>=S&&this.keccak();const C=Math.min(S-this.posOut,P-$);E.set(b.subarray(this.posOut,this.posOut+C),$),this.posOut+=C,$+=C}return E}xofInto(E){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(E)}xof(E){return(0,t.number)(E),this.xofInto(new Uint8Array(E))}digestInto(E){if((0,t.output)(E,this),this.finished)throw new Error("digest() was already called");return this.writeInto(E),this.destroy(),E}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(E){const{blockLen:b,suffix:S,outputLen:$,rounds:P,enableXOF:C}=this;return E||(E=new _(b,S,$,C,P)),E.state32.set(this.state32),E.pos=this.pos,E.posOut=this.posOut,E.finished=this.finished,E.rounds=P,E.suffix=S,E.outputLen=$,E.enableXOF=C,E.destroyed=this.destroyed,E}}kt.Keccak=_;const A=(y,E,b)=>(0,n.wrapConstructor)(()=>new _(E,y,b));kt.sha3_224=A(6,144,224/8),kt.sha3_256=A(6,136,256/8),kt.sha3_384=A(6,104,384/8),kt.sha3_512=A(6,72,512/8),kt.keccak_224=A(1,144,224/8),kt.keccak_256=A(1,136,256/8),kt.keccak_384=A(1,104,384/8),kt.keccak_512=A(1,72,512/8);const w=(y,E,b)=>(0,n.wrapXOFConstructorWithOpts)((S={})=>new _(E,y,S.dkLen===void 0?b:S.dkLen,!0));return kt.shake128=w(31,168,128/8),kt.shake256=w(31,136,256/8),kt}var ww,xI;function DR(){if(xI)return ww;xI=1;const{keccak_256:t}=xJ();function e(f){return Buffer.allocUnsafe(f).fill(0)}function n(f){return f.toString(2).length}function r(f,p){let m=f.toString(16);m.length%2!==0&&(m="0"+m);const g=m.match(/.{1,2}/g).map(_=>parseInt(_,16));for(;g.length<p;)g.unshift(0);return Buffer.from(g)}function s(f,p){const m=f<0n;let g;if(m){const _=(1n<<BigInt(p))-1n;g=(~f&_)+1n}else g=f;return g&=(1n<<BigInt(p))-1n,g}function i(f,p,m){const g=e(p);return f=o(f),m?f.length<p?(f.copy(g),g):f.slice(0,p):f.length<p?(f.copy(g,p-f.length),g):f.slice(-p)}function a(f,p){return i(f,p,!0)}function o(f){if(!Buffer.isBuffer(f))if(Array.isArray(f))f=Buffer.from(f);else if(typeof f=="string")d(f)?f=Buffer.from(u(h(f)),"hex"):f=Buffer.from(f);else if(typeof f=="number")f=intToBuffer(f);else if(f==null)f=Buffer.allocUnsafe(0);else if(typeof f=="bigint")f=r(f);else if(f.toArray)f=Buffer.from(f.toArray());else throw new Error("invalid type");return f}function c(f){return f=o(f),"0x"+f.toString("hex")}function l(f,p){if(f=o(f),p||(p=256),p!==256)throw new Error("unsupported");return Buffer.from(t(new Uint8Array(f)))}function u(f){return f.length%2?"0"+f:f}function d(f){return typeof f=="string"&&f.match(/^0x[0-9A-Fa-f]*$/)}function h(f){return typeof f=="string"&&f.startsWith("0x")?f.slice(2):f}return ww={zeros:e,setLength:i,setLengthRight:a,isHexString:d,stripHexPrefix:h,toBuffer:o,bufferToHex:c,keccak:l,bitLengthFromBigInt:n,bufferBEFromBigInt:r,twosFromBigInt:s},ww}var bw,AI;function AJ(){if(AI)return bw;AI=1;const t=DR();function e(h){return h.startsWith("int[")?"int256"+h.slice(3):h==="int"?"int256":h.startsWith("uint[")?"uint256"+h.slice(4):h==="uint"?"uint256":h.startsWith("fixed[")?"fixed128x128"+h.slice(5):h==="fixed"?"fixed128x128":h.startsWith("ufixed[")?"ufixed128x128"+h.slice(6):h==="ufixed"?"ufixed128x128":h}function n(h){return Number.parseInt(/^\D+(\d+)$/.exec(h)[1],10)}function r(h){var f=/^\D+(\d+)x(\d+)$/.exec(h);return[Number.parseInt(f[1],10),Number.parseInt(f[2],10)]}function s(h){var f=h.match(/(.*)\[(.*?)\]$/);return f?f[2]===""?"dynamic":Number.parseInt(f[2],10):null}function i(h){var f=typeof h;if(f==="string"||f==="number")return BigInt(h);if(f==="bigint")return h;throw new Error("Argument is not a number")}function a(h,f){var p,m,g,_;if(h==="address")return a("uint160",i(f));if(h==="bool")return a("uint8",f?1:0);if(h==="string")return a("bytes",new Buffer(f,"utf8"));if(c(h)){if(typeof f.length>"u")throw new Error("Not an array?");if(p=s(h),p!=="dynamic"&&p!==0&&f.length>p)throw new Error("Elements exceed array size: "+p);g=[],h=h.slice(0,h.lastIndexOf("[")),typeof f=="string"&&(f=JSON.parse(f));for(_ in f)g.push(a(h,f[_]));if(p==="dynamic"){var A=a("uint256",f.length);g.unshift(A)}return Buffer.concat(g)}else{if(h==="bytes")return f=new Buffer(f),g=Buffer.concat([a("uint256",f.length),f]),f.length%32!==0&&(g=Buffer.concat([g,t.zeros(32-f.length%32)])),g;if(h.startsWith("bytes")){if(p=n(h),p<1||p>32)throw new Error("Invalid bytes<N> width: "+p);return t.setLengthRight(f,32)}else if(h.startsWith("uint")){if(p=n(h),p%8||p<8||p>256)throw new Error("Invalid uint<N> width: "+p);m=i(f);const w=t.bitLengthFromBigInt(m);if(w>p)throw new Error("Supplied uint exceeds width: "+p+" vs "+w);if(m<0)throw new Error("Supplied uint is negative");return t.bufferBEFromBigInt(m,32)}else if(h.startsWith("int")){if(p=n(h),p%8||p<8||p>256)throw new Error("Invalid int<N> width: "+p);m=i(f);const w=t.bitLengthFromBigInt(m);if(w>p)throw new Error("Supplied int exceeds width: "+p+" vs "+w);const y=t.twosFromBigInt(m,256);return t.bufferBEFromBigInt(y,32)}else if(h.startsWith("ufixed")){if(p=r(h),m=i(f),m<0)throw new Error("Supplied ufixed is negative");return a("uint256",m*BigInt(2)**BigInt(p[1]))}else if(h.startsWith("fixed"))return p=r(h),a("int256",i(f)*BigInt(2)**BigInt(p[1]))}throw new Error("Unsupported or invalid type: "+h)}function o(h){return h==="string"||h==="bytes"||s(h)==="dynamic"}function c(h){return h.lastIndexOf("]")===h.length-1}function l(h,f){var p=[],m=[],g=32*h.length;for(var _ in h){var A=e(h[_]),w=f[_],y=a(A,w);o(A)?(p.push(a("uint256",g)),m.push(y),g+=y.length):p.push(y)}return Buffer.concat(p.concat(m))}function u(h,f){if(h.length!==f.length)throw new Error("Number of types are not matching the values");for(var p,m,g=[],_=0;_<h.length;_++){var A=e(h[_]),w=f[_];if(A==="bytes")g.push(w);else if(A==="string")g.push(new Buffer(w,"utf8"));else if(A==="bool")g.push(new Buffer(w?"01":"00","hex"));else if(A==="address")g.push(t.setLength(w,20));else if(A.startsWith("bytes")){if(p=n(A),p<1||p>32)throw new Error("Invalid bytes<N> width: "+p);g.push(t.setLengthRight(w,p))}else if(A.startsWith("uint")){if(p=n(A),p%8||p<8||p>256)throw new Error("Invalid uint<N> width: "+p);m=i(w);const y=t.bitLengthFromBigInt(m);if(y>p)throw new Error("Supplied uint exceeds width: "+p+" vs "+y);g.push(t.bufferBEFromBigInt(m,p/8))}else if(A.startsWith("int")){if(p=n(A),p%8||p<8||p>256)throw new Error("Invalid int<N> width: "+p);m=i(w);const y=t.bitLengthFromBigInt(m);if(y>p)throw new Error("Supplied int exceeds width: "+p+" vs "+y);const E=t.twosFromBigInt(m,p);g.push(t.bufferBEFromBigInt(E,p/8))}else throw new Error("Unsupported or invalid type: "+A)}return Buffer.concat(g)}function d(h,f){return t.keccak(u(h,f))}return bw={rawEncode:l,solidityPack:u,soliditySHA3:d},bw}var vw,SI;function SJ(){if(SI)return vw;SI=1;const t=DR(),e=AJ(),n={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r={encodeData(i,a,o,c=!0){const l=["bytes32"],u=[this.hashType(i,o)];if(c){const d=(h,f,p)=>{if(o[f]!==void 0)return["bytes32",p==null?"0x0000000000000000000000000000000000000000000000000000000000000000":t.keccak(this.encodeData(f,p,o,c))];if(p===void 0)throw new Error(`missing value for field ${h} of type ${f}`);if(f==="bytes")return["bytes32",t.keccak(p)];if(f==="string")return typeof p=="string"&&(p=Buffer.from(p,"utf8")),["bytes32",t.keccak(p)];if(f.lastIndexOf("]")===f.length-1){const m=f.slice(0,f.lastIndexOf("[")),g=p.map(_=>d(h,m,_));return["bytes32",t.keccak(e.rawEncode(g.map(([_])=>_),g.map(([,_])=>_)))]}return[f,p]};for(const h of o[i]){const[f,p]=d(h.name,h.type,a[h.name]);l.push(f),u.push(p)}}else for(const d of o[i]){let h=a[d.name];if(h!==void 0)if(d.type==="bytes")l.push("bytes32"),h=t.keccak(h),u.push(h);else if(d.type==="string")l.push("bytes32"),typeof h=="string"&&(h=Buffer.from(h,"utf8")),h=t.keccak(h),u.push(h);else if(o[d.type]!==void 0)l.push("bytes32"),h=t.keccak(this.encodeData(d.type,h,o,c)),u.push(h);else{if(d.type.lastIndexOf("]")===d.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");l.push(d.type),u.push(h)}}return e.rawEncode(l,u)},encodeType(i,a){let o="",c=this.findTypeDependencies(i,a).filter(l=>l!==i);c=[i].concat(c.sort());for(const l of c){if(!a[l])throw new Error("No type definition specified: "+l);o+=l+"("+a[l].map(({name:d,type:h})=>h+" "+d).join(",")+")"}return o},findTypeDependencies(i,a,o=[]){if(i=i.match(/^\w*/)[0],o.includes(i)||a[i]===void 0)return o;o.push(i);for(const c of a[i])for(const l of this.findTypeDependencies(c.type,a,o))!o.includes(l)&&o.push(l);return o},hashStruct(i,a,o,c=!0){return t.keccak(this.encodeData(i,a,o,c))},hashType(i,a){return t.keccak(this.encodeType(i,a))},sanitizeData(i){const a={};for(const o in n.properties)i[o]&&(a[o]=i[o]);return a.types&&(a.types=Object.assign({EIP712Domain:[]},a.types)),a},hash(i,a=!0){const o=this.sanitizeData(i),c=[Buffer.from("1901","hex")];return c.push(this.hashStruct("EIP712Domain",o.domain,o.types,a)),o.primaryType!=="EIP712Domain"&&c.push(this.hashStruct(o.primaryType,o.message,o.types,a)),t.keccak(Buffer.concat(c))}};vw={TYPED_MESSAGE_SCHEMA:n,TypedDataUtils:r,hashForSignTypedDataLegacy:function(i){return s(i.data)},hashForSignTypedData_v3:function(i){return r.hash(i.data,!1)},hashForSignTypedData_v4:function(i){return r.hash(i.data)}};function s(i){const a=new Error("Expect argument to be non-empty array");if(typeof i!="object"||!i.length)throw a;const o=i.map(function(u){return u.type==="bytes"?t.toBuffer(u.value):u.value}),c=i.map(function(u){return u.type}),l=i.map(function(u){if(!u.name)throw a;return u.type+" "+u.name});return e.soliditySHA3(["bytes32","bytes32"],[e.soliditySHA3(new Array(i.length).fill("string"),l),e.soliditySHA3(c,o)])}return vw}var IJ=SJ();const Ap=Jc(IJ),TJ="walletUsername",S1="Addresses",CJ="AppVersion";function Yn(t){return t.errorMessage!==void 0}class kJ{constructor(e){this.secret=e}async encrypt(e){const n=this.secret;if(n.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.importKey("raw",pm(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=new TextEncoder,a=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,i.encode(e)),o=16,c=a.slice(a.byteLength-o),l=a.slice(0,a.byteLength-o),u=new Uint8Array(c),d=new Uint8Array(l),h=new Uint8Array([...r,...u,...d]);return b2(h)}async decrypt(e){const n=this.secret;if(n.length!==64)throw Error("secret must be 256 bits");return new Promise((r,s)=>{(async function(){const i=await crypto.subtle.importKey("raw",pm(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=pm(e),o=a.slice(0,12),c=a.slice(12,28),l=a.slice(28),u=new Uint8Array([...l,...c]),d={name:"AES-GCM",iv:new Uint8Array(o)};try{const h=await window.crypto.subtle.decrypt(d,i,u),f=new TextDecoder;r(f.decode(h))}catch(h){s(h)}})()})}}class OJ{constructor(e,n,r){this.linkAPIUrl=e,this.sessionId=n;const s=`${n}:${r}`;this.auth=`Basic ${btoa(s)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(n=>fetch(`${this.linkAPIUrl}/events/${n.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(n=>console.error("Unabled to mark event as failed:",n))}async fetchUnseenEvents(){var e;const n=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(n.ok){const{events:r,error:s}=await n.json();if(s)throw new Error(`Check unseen events failed: ${s}`);const i=(e=r?.filter(a=>a.event==="Web3Response").map(a=>({type:"Event",sessionId:this.sessionId,eventId:a.id,event:a.event,data:a.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(i),i}throw new Error(`Check unseen events failed: ${n.status}`)}}var Ea;(function(t){t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"})(Ea||(Ea={}));class PJ{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,n=WebSocket){this.WebSocketClass=n,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,n)=>{var r;let s;try{this.webSocket=s=new this.WebSocketClass(this.url)}catch(i){n(i);return}(r=this.connectionStateListener)===null||r===void 0||r.call(this,Ea.CONNECTING),s.onclose=i=>{var a;this.clearWebSocket(),n(new Error(`websocket error ${i.code}: ${i.reason}`)),(a=this.connectionStateListener)===null||a===void 0||a.call(this,Ea.DISCONNECTED)},s.onopen=i=>{var a;e(),(a=this.connectionStateListener)===null||a===void 0||a.call(this,Ea.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(c=>this.sendData(c)),this.pendingData=[])},s.onmessage=i=>{var a,o;if(i.data==="h")(a=this.incomingDataListener)===null||a===void 0||a.call(this,{type:"Heartbeat"});else try{const c=JSON.parse(i.data);(o=this.incomingDataListener)===null||o===void 0||o.call(this,c)}catch{}}})}disconnect(){var e;const{webSocket:n}=this;if(n){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,Ea.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{n.close()}catch{}}}sendData(e){const{webSocket:n}=this;if(!n){this.pendingData.push(e),this.connect();return}n.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}const II=1e4,RJ=6e4;class $J{constructor({session:e,linkAPIUrl:n,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=ma(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=i=>{if(!i)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",o=>i.JsonRpcUrl&&this.handleChainUpdated(o,i.JsonRpcUrl)]]).forEach((o,c)=>{const l=i[c];l!==void 0&&o(l)})},this.handleDestroyed=i=>{var a;i==="1"&&((a=this.listener)===null||a===void 0||a.resetAndReload())},this.handleAccountUpdated=async i=>{var a;const o=await this.cipher.decrypt(i);(a=this.listener)===null||a===void 0||a.accountUpdated(o)},this.handleMetadataUpdated=async(i,a)=>{var o;const c=await this.cipher.decrypt(a);(o=this.listener)===null||o===void 0||o.metadataUpdated(i,c)},this.handleWalletUsernameUpdated=async i=>{this.handleMetadataUpdated(TJ,i)},this.handleAppVersionUpdated=async i=>{this.handleMetadataUpdated(CJ,i)},this.handleChainUpdated=async(i,a)=>{var o;const c=await this.cipher.decrypt(i),l=await this.cipher.decrypt(a);(o=this.listener)===null||o===void 0||o.chainUpdated(c,l)},this.session=e,this.cipher=new kJ(e.secret),this.listener=r;const s=new PJ(`${n}/rpc`,WebSocket);s.setConnectionStateListener(async i=>{let a=!1;switch(i){case Ea.DISCONNECTED:if(!this.destroyed){const o=async()=>{await new Promise(c=>setTimeout(c,5e3)),this.destroyed||s.connect().catch(()=>{o()})};o()}break;case Ea.CONNECTED:a=await this.handleConnected(),this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},II),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case Ea.CONNECTING:break}this.connected!==a&&(this.connected=a)}),s.setIncomingDataListener(i=>{var a;switch(i.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const o=i.type==="IsLinkedOK"?i.linked:void 0;this.linked=o||i.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(i.metadata);break}case"Event":{this.handleIncomingEvent(i);break}}i.id!==void 0&&((a=this.requestResolutions.get(i.id))===null||a===void 0||a(i))}),this.ws=s,this.http=new OJ(n,e.id,e.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:ma(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.ws.disconnect(),this.listener=void 0)}get connected(){return this._connected}set connected(e){this._connected=e}get linked(){return this._linked}set linked(e){var n,r;this._linked=e,e&&((n=this.onceLinked)===null||n===void 0||n.call(this)),(r=this.listener)===null||r===void 0||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(n=>{this.linked?e().then(n):this.onceLinked=()=>{e().then(n),this.onceLinked=void 0}})}async handleIncomingEvent(e){var n;if(e.type!=="Event"||e.event!=="Web3Response")return;const r=await this.cipher.decrypt(e.data),s=JSON.parse(r);if(s.type!=="WEB3_RESPONSE")return;const{id:i,response:a}=s;(n=this.listener)===null||n===void 0||n.handleWeb3ResponseMessage(i,a)}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(n=>this.handleIncomingEvent(n))}async publishEvent(e,n,r=!1){const s=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),i={type:"PublishEvent",id:ma(this.nextReqId++),sessionId:this.session.id,event:e,data:s,callWebhook:r};return this.setOnceLinked(async()=>{const a=await this.makeRequest(i);if(a.type==="Fail")throw new Error(a.error||"failed to publish event");return a.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>II*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(e,n={timeout:RJ}){const r=e.id;this.sendData(e);let s;return Promise.race([new Promise((i,a)=>{s=window.setTimeout(()=>{a(new Error(`request ${r} timed out`))},n.timeout)}),new Promise(i=>{this.requestResolutions.set(r,a=>{clearTimeout(s),i(a),this.requestResolutions.delete(r)})})])}async handleConnected(){return(await this.makeRequest({type:"HostSession",id:ma(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type==="Fail"?!1:(this.sendData({type:"IsLinked",id:ma(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:ma(this.nextReqId++),sessionId:this.session.id}),!0)}}class NJ{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,n=kR(e.toString(16));return this.callbacks.get(n)&&this.callbacks.delete(n),e}}function DJ(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function x2(t,...e){if(!DJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function TI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function UJ(t,e){x2(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _w=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),wi=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const BJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MJ(t){x2(t);let e="";for(let n=0;n<t.length;n++)e+=BJ[t[n]];return e}function LJ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function UR(t){return typeof t=="string"&&(t=LJ(t)),x2(t),t}let FJ=class{clone(){return this._cloneInto()}};function jJ(t){const e=r=>t().update(UR(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function zJ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}const WJ=(t,e,n)=>t&e^~t&n,qJ=(t,e,n)=>t&e^t&n^e&n;let VJ=class extends FJ{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_w(this.buffer)}update(e){TI(this);const{view:n,buffer:r,blockLen:s}=this;e=UR(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=_w(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){TI(this),UJ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;zJ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=_w(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}};const HJ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qa=new Uint32Array(64);let KJ=class extends VJ{constructor(){super(64,32,8,!1),this.A=Xa[0]|0,this.B=Xa[1]|0,this.C=Xa[2]|0,this.D=Xa[3]|0,this.E=Xa[4]|0,this.F=Xa[5]|0,this.G=Xa[6]|0,this.H=Xa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Qa[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Qa[d-15],f=Qa[d-2],p=wi(h,7)^wi(h,18)^h>>>3,m=wi(f,17)^wi(f,19)^f>>>10;Qa[d]=m+Qa[d-7]+p+Qa[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=wi(o,6)^wi(o,11)^wi(o,25),f=u+h+WJ(o,c,l)+HJ[d]+Qa[d]|0,m=(wi(r,2)^wi(r,13)^wi(r,22))+qJ(r,s,i)|0;u=l,l=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){Qa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const GJ=jJ(()=>new KJ),CI="session:id",kI="session:secret",OI="session:linked";class ou{constructor(e,n,r,s=!1){this.storage=e,this.id=n,this.secret=r,this.key=MJ(GJ(`${n}, ${r} WalletLink`)),this._linked=!!s}static create(e){const n=oc(16),r=oc(32);return new ou(e,n,r).save()}static load(e){const n=e.getItem(CI),r=e.getItem(OI),s=e.getItem(kI);return n&&s?new ou(e,n,s,r==="1"):null}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this.storage.setItem(CI,this.id),this.storage.setItem(kI,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(OI,this._linked?"1":"0")}}function YJ(){try{return window.frameElement!==null}catch{return!1}}function ZJ(){try{return YJ()&&window.top?window.top.location:window.location}catch{return window.location}}function JJ(){var t;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t=window?.navigator)===null||t===void 0?void 0:t.userAgent)}function BR(){var t,e;return(e=(t=window?.matchMedia)===null||t===void 0?void 0:t.call(window,"(prefers-color-scheme: dark)").matches)!==null&&e!==void 0?e:!1}const XJ='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';function MR(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(XJ)),document.documentElement.appendChild(t)}function LR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=LR(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ah(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=LR(t))&&(r&&(r+=" "),r+=e);return r}var Cy,Vt,FR,cc,PI,jR,I1,A2,T1,C1,Hh={},zR=[],QJ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,S2=Array.isArray;function Oo(t,e){for(var n in e)t[n]=e[n];return t}function WR(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ct(t,e,n){var r,s,i,a={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?Cy.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]===void 0&&(a[i]=t.defaultProps[i]);return mm(t,a,r,s,null)}function mm(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++FR,__i:-1,__u:0};return s==null&&Vt.vnode!=null&&Vt.vnode(i),i}function ky(t){return t.children}function gm(t,e){this.props=t,this.context=e}function Ru(t,e){if(e==null)return t.__?Ru(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Ru(t):null}function qR(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return qR(t)}}function RI(t){(!t.__d&&(t.__d=!0)&&cc.push(t)&&!dg.__r++||PI!==Vt.debounceRendering)&&((PI=Vt.debounceRendering)||jR)(dg)}function dg(){var t,e,n,r,s,i,a,o;for(cc.sort(I1);t=cc.shift();)t.__d&&(e=cc.length,r=void 0,i=(s=(n=t).__v).__e,a=[],o=[],n.__P&&((r=Oo({},s)).__v=s.__v+1,Vt.vnode&&Vt.vnode(r),I2(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,a,i??Ru(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,KR(a,r,o),r.__e!=i&&qR(r)),cc.length>e&&cc.sort(I1));dg.__r=0}function VR(t,e,n,r,s,i,a,o,c,l,u){var d,h,f,p,m,g=r&&r.__k||zR,_=e.length;for(n.__d=c,eX(n,e,g),c=n.__d,d=0;d<_;d++)(f=n.__k[d])!=null&&(h=f.__i===-1?Hh:g[f.__i]||Hh,f.__i=d,I2(t,f,h,s,i,a,o,c,l,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&T2(h.ref,null,f),u.push(f.ref,f.__c||p,f)),m==null&&p!=null&&(m=p),65536&f.__u||h.__k===f.__k?c=HR(f,c,t):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:p&&(c=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=m}function eX(t,e,n){var r,s,i,a,o,c=e.length,l=n.length,u=l,d=0;for(t.__k=[],r=0;r<c;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=r+d,(s=t.__k[r]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?mm(null,s,null,null,null):S2(s)?mm(ky,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?mm(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,i=null,(o=s.__i=tX(s,n,a,u))!==-1&&(u--,(i=n[o])&&(i.__u|=131072)),i==null||i.__v===null?(o==-1&&d--,typeof s.type!="function"&&(s.__u|=65536)):o!==a&&(o==a-1?d--:o==a+1?d++:(o>a?d--:d++,s.__u|=65536))):s=t.__k[r]=null;if(u)for(r=0;r<l;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==t.__d&&(t.__d=Ru(i)),GR(i,i))}function HR(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=HR(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Ru(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function tX(t,e,n,r){var s=t.key,i=t.type,a=n-1,o=n+1,c=e[n];if(c===null||c&&s==c.key&&i===c.type&&(131072&c.__u)==0)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;a>=0||o<e.length;){if(a>=0){if((c=e[a])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return a;a--}if(o<e.length){if((c=e[o])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return o;o++}}return-1}function $I(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||QJ.test(e)?n:n+"px"}function Sp(t,e,n,r,s){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||$I(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||$I(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=A2,t.addEventListener(e,i?C1:T1,i)):t.removeEventListener(e,i?C1:T1,i);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function NI(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=A2++;else if(e.t<n.u)return;return n(Vt.event?Vt.event(e):e)}}}function I2(t,e,n,r,s,i,a,o,c,l){var u,d,h,f,p,m,g,_,A,w,y,E,b,S,$,P,C=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[o=e.__e=n.__e]),(u=Vt.__b)&&u(e);e:if(typeof C=="function")try{if(_=e.props,A="prototype"in C&&C.prototype.render,w=(u=C.contextType)&&r[u.__c],y=u?w?w.props.value:u.__:r,n.__c?g=(d=e.__c=n.__c).__=d.__E:(A?e.__c=d=new C(_,y):(e.__c=d=new gm(_,y),d.constructor=C,d.render=rX),w&&w.sub(d),d.props=_,d.state||(d.state={}),d.context=y,d.__n=r,h=d.__d=!0,d.__h=[],d._sb=[]),A&&d.__s==null&&(d.__s=d.state),A&&C.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Oo({},d.__s)),Oo(d.__s,C.getDerivedStateFromProps(_,d.__s))),f=d.props,p=d.state,d.__v=e,h)A&&C.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),A&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(A&&C.getDerivedStateFromProps==null&&_!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(_,y),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(_,d.__s,y)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(B){B&&(B.__=e)}),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(_,d.__s,y),A&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,m)})}if(d.context=y,d.props=_,d.__P=t,d.__e=!1,b=Vt.__r,S=0,A){for(d.state=d.__s,d.__d=!1,b&&b(e),u=d.render(d.props,d.state,d.context),$=0;$<d._sb.length;$++)d.__h.push(d._sb[$]);d._sb=[]}else do d.__d=!1,b&&b(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++S<25);d.state=d.__s,d.getChildContext!=null&&(r=Oo(Oo({},r),d.getChildContext())),A&&!h&&d.getSnapshotBeforeUpdate!=null&&(m=d.getSnapshotBeforeUpdate(f,p)),VR(t,S2(P=u!=null&&u.type===ky&&u.key==null?u.props.children:u)?P:[P],e,n,r,s,i,a,o,c,l),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),g&&(d.__E=d.__=null)}catch(B){if(e.__v=null,c||i!=null){for(e.__u|=c?160:32;o&&o.nodeType===8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,e.__e=o}else e.__e=n.__e,e.__k=n.__k;Vt.__e(B,e,n)}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=nX(n.__e,e,n,r,s,i,a,c,l);(u=Vt.diffed)&&u(e)}function KR(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)T2(n[r],n[++r],n[++r]);Vt.__c&&Vt.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(i){i.call(s)})}catch(i){Vt.__e(i,s.__v)}})}function nX(t,e,n,r,s,i,a,o,c){var l,u,d,h,f,p,m,g=n.props,_=e.props,A=e.type;if(A==="svg"?s="http://www.w3.org/2000/svg":A==="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((f=i[l])&&"setAttribute"in f==!!A&&(A?f.localName===A:f.nodeType===3)){t=f,i[l]=null;break}}if(t==null){if(A===null)return document.createTextNode(_);t=document.createElementNS(s,A,_.is&&_),o&&(Vt.__m&&Vt.__m(e,i),o=!1),i=null}if(A===null)g===_||o&&t.data===_||(t.data=_);else{if(i=i&&Cy.call(t.childNodes),g=n.props||Hh,!o&&i!=null)for(g={},l=0;l<t.attributes.length;l++)g[(f=t.attributes[l]).name]=f.value;for(l in g)if(f=g[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=f;else if(!(l in _)){if(l=="value"&&"defaultValue"in _||l=="checked"&&"defaultChecked"in _)continue;Sp(t,l,null,f,s)}}for(l in _)f=_[l],l=="children"?h=f:l=="dangerouslySetInnerHTML"?u=f:l=="value"?p=f:l=="checked"?m=f:o&&typeof f!="function"||g[l]===f||Sp(t,l,f,g[l],s);if(u)o||d&&(u.__html===d.__html||u.__html===t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(d&&(t.innerHTML=""),VR(t,S2(h)?h:[h],e,n,r,A==="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&Ru(n,0),o,c),i!=null)for(l=i.length;l--;)WR(i[l]);o||(l="value",A==="progress"&&p==null?t.removeAttribute("value"):p!==void 0&&(p!==t[l]||A==="progress"&&!p||A==="option"&&p!==g[l])&&Sp(t,l,p,g[l],s),l="checked",m!==void 0&&m!==t[l]&&Sp(t,l,m,g[l],s))}return t}function T2(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){Vt.__e(s,n)}}function GR(t,e,n){var r,s;if(Vt.unmount&&Vt.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||T2(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){Vt.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&GR(r[s],e,n||typeof t.type!="function");n||WR(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function rX(t,e,n){return this.constructor(t,n)}function k1(t,e,n){var r,s,i,a;Vt.__&&Vt.__(t,e),s=(r=!1)?null:e.__k,i=[],a=[],I2(e,t=e.__k=Ct(ky,null,[t]),s||Hh,Hh,e.namespaceURI,s?null:e.firstChild?Cy.call(e.childNodes):null,i,s?s.__e:e.firstChild,r,a),KR(i,t,a)}Cy=zR.slice,Vt={__e:function(t,e,n,r){for(var s,i,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),a=s.__d),a)return s.__E=s}catch(o){t=o}throw t}},FR=0,gm.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Oo({},this.state),typeof t=="function"&&(t=t(Oo({},n),this.props)),t&&Oo(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),RI(this))},gm.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),RI(this))},gm.prototype.render=ky,cc=[],jR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,I1=function(t,e){return t.__v.__b-e.__v.__b},dg.__r=0,A2=0,T1=NI(!1),C1=NI(!0);var Kh,sn,Ew,DI,O1=0,YR=[],mn=Vt,UI=mn.__b,BI=mn.__r,MI=mn.diffed,LI=mn.__c,FI=mn.unmount,jI=mn.__;function C2(t,e){mn.__h&&mn.__h(sn,t,O1||e),O1=0;var n=sn.__H||(sn.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function zI(t){return O1=1,sX(JR,t)}function sX(t,e,n){var r=C2(Kh++,2);if(r.t=t,!r.__c&&(r.__=[JR(void 0,e),function(o){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,o);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=sn,!sn.u)){var s=function(o,c,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!i||i.call(this,o,c,l);var d=!1;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(d=!0)}}),!(!d&&r.__c.props===o)&&(!i||i.call(this,o,c,l))};sn.u=!0;var i=sn.shouldComponentUpdate,a=sn.componentWillUpdate;sn.componentWillUpdate=function(o,c,l){if(this.__e){var u=i;i=void 0,s(o,c,l),i=u}a&&a.call(this,o,c,l)},sn.shouldComponentUpdate=s}return r.__N||r.__}function iX(t,e){var n=C2(Kh++,3);!mn.__s&&ZR(n.__H,e)&&(n.__=t,n.i=e,sn.__H.__h.push(n))}function u3e(t,e){var n=C2(Kh++,7);return ZR(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function aX(){for(var t;t=YR.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ym),t.__H.__h.forEach(P1),t.__H.__h=[]}catch(e){t.__H.__h=[],mn.__e(e,t.__v)}}mn.__b=function(t){sn=null,UI&&UI(t)},mn.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),jI&&jI(t,e)},mn.__r=function(t){BI&&BI(t),Kh=0;var e=(sn=t.__c).__H;e&&(Ew===sn?(e.__h=[],sn.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(ym),e.__h.forEach(P1),e.__h=[],Kh=0)),Ew=sn},mn.diffed=function(t){MI&&MI(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(YR.push(e)!==1&&DI===mn.requestAnimationFrame||((DI=mn.requestAnimationFrame)||oX)(aX)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Ew=sn=null},mn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ym),n.__h=n.__h.filter(function(r){return!r.__||P1(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],mn.__e(r,n.__v)}}),LI&&LI(t,e)},mn.unmount=function(t){FI&&FI(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ym(r)}catch(s){e=s}}),n.__H=void 0,e&&mn.__e(e,n.__v))};var WI=typeof requestAnimationFrame=="function";function oX(t){var e,n=function(){clearTimeout(r),WI&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);WI&&(e=requestAnimationFrame(n))}function ym(t){var e=sn,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),sn=e}function P1(t){var e=sn;t.__c=t.__(),sn=e}function ZR(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function JR(t,e){return typeof e=="function"?e(t):e}const cX=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}",lX="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",uX="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class XR{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=BR()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){const n=this.nextItemKey++;return this.items.set(n,e),this.render(),()=>{this.items.delete(n),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&k1(Ct("div",null,Ct(QR,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,n])=>Ct(dX,Object.assign({},n,{key:e}))))),this.root)}}const QR=t=>Ct("div",{class:ah("-cbwsdk-snackbar-container")},Ct("style",null,cX),Ct("div",{class:"-cbwsdk-snackbar"},t.children)),dX=({autoExpand:t,message:e,menuItems:n})=>{const[r,s]=zI(!0),[i,a]=zI(t??!1);iX(()=>{const c=[window.setTimeout(()=>{s(!1)},1),window.setTimeout(()=>{a(!0)},1e4)];return()=>{c.forEach(window.clearTimeout)}});const o=()=>{a(!i)};return Ct("div",{class:ah("-cbwsdk-snackbar-instance",r&&"-cbwsdk-snackbar-instance-hidden",i&&"-cbwsdk-snackbar-instance-expanded")},Ct("div",{class:"-cbwsdk-snackbar-instance-header",onClick:o},Ct("img",{src:lX,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",Ct("div",{class:"-cbwsdk-snackbar-instance-header-message"},e),Ct("div",{class:"-gear-container"},!i&&Ct("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ct("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),Ct("img",{src:uX,class:"-gear-icon",title:"Expand"}))),n&&n.length>0&&Ct("div",{class:"-cbwsdk-snackbar-instance-menu"},n.map((c,l)=>Ct("div",{class:ah("-cbwsdk-snackbar-instance-menu-item",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:c.onClick,key:l},Ct("svg",{width:c.svgWidth,height:c.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ct("path",{"fill-rule":c.defaultFillRule,"clip-rule":c.defaultClipRule,d:c.path,fill:"#AAAAAA"})),Ct("span",{class:ah("-cbwsdk-snackbar-instance-menu-item-info",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},c.info)))))},e$="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class hX{constructor(){this.attached=!1,this.snackbar=new XR}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,n=document.createElement("div");n.className="-cbwsdk-css-reset",e.appendChild(n),this.snackbar.attach(n),this.attached=!0,MR()}showConnecting(e){let n;return e.isUnlinkedErrorState?n={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:n={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:e$,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(n)}}const fX=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";class pX{constructor(){this.root=null,this.darkMode=BR()}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),MR()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&(k1(null,this.root),e&&k1(Ct(mX,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const mX=({title:t,buttonText:e,darkMode:n,onButtonClick:r,onDismiss:s})=>{const i=n?"dark":"light";return Ct(QR,{darkMode:n},Ct("div",{class:"-cbwsdk-redirect-dialog"},Ct("style",null,fX),Ct("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:s}),Ct("div",{class:ah("-cbwsdk-redirect-dialog-box",i)},Ct("p",null,t),Ct("button",{onClick:r},e))))},gX="https://keys.coinbase.com/connect",yX="https://rpc.wallet.coinbase.com",qI="https://www.walletlink.org",wX="https://go.cb-w.com/walletlink";class VI{constructor(){this.attached=!1,this.redirectDialog=new pX}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){const n=new URL(wX);n.searchParams.append("redirect_url",ZJ().href),e&&n.searchParams.append("wl_url",e);const r=document.createElement("a");r.target="cbw-opener",r.href=n.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}}class ga{constructor(e){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=JJ(),this.linkedUpdated=i=>{this.isLinked=i;const a=this.storage.getItem(S1);if(i&&(this._session.linked=i),this.isUnlinkedErrorState=!1,a){const o=a.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";o[0]!==""&&!i&&this._session.linked&&!c&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(i,a)=>{this.storage.setItem(i,a)},this.chainUpdated=(i,a)=>{this.chainCallbackParams.chainId===i&&this.chainCallbackParams.jsonRpcUrl===a||(this.chainCallbackParams={chainId:i,jsonRpcUrl:a},this.chainCallback&&this.chainCallback(a,Number.parseInt(i,10)))},this.accountUpdated=i=>{this.accountsCallback&&this.accountsCallback([i]),ga.accountRequestCallbackIds.size>0&&(Array.from(ga.accountRequestCallbackIds.values()).forEach(a=>{this.invokeCallback(a,{method:"requestEthereumAccounts",result:[i]})}),ga.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.metadata=e.metadata,this.accountsCallback=e.accountsCallback,this.chainCallback=e.chainCallback;const{session:n,ui:r,connection:s}=this.subscribe();this._session=n,this.connection=s,this.relayEventManager=new NJ,this.ui=r,this.ui.attach()}subscribe(){const e=ou.load(this.storage)||ou.create(this.storage),{linkAPIUrl:n}=this,r=new $J({session:e,linkAPIUrl:n,listener:this}),s=this.isMobileWeb?new VI:new hX;return r.connect(),{session:e,ui:s,connection:r}}resetAndReload(){this.connection.destroy().then(()=>{const e=ou.load(this.storage);e?.id===this._session.id&&zi.clearAll(),document.location.reload()}).catch(e=>{})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:yi(e.weiValue),data:sh(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?yi(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?yi(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?yi(e.gasPriceInWei):null,gasLimit:e.gasLimit?yi(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:yi(e.weiValue),data:sh(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?yi(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?yi(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?yi(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?yi(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,n){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:sh(e,!0),chainId:n}})}getWalletLinkSession(){return this._session}sendRequest(e){let n=null;const r=oc(8),s=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,i),n?.()};return new Promise((i,a)=>{n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:s,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,o=>{if(n?.(),Yn(o))return a(new Error(o.errorMessage));i(o)}),this.publishWeb3RequestEvent(r,e)})}publishWeb3RequestEvent(e,n){const r={type:"WEB3_REQUEST",id:e,request:n};this.publishEvent("Web3Request",r,!0).then(s=>{}).catch(s=>{this.handleWeb3ResponseMessage(r.id,{method:n.method,errorMessage:s.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(n.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof VI)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(e){const n={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",n,!1).then()}publishEvent(e,n,r){return this.connection.publishEvent(e,n,r)}handleWeb3ResponseMessage(e,n){if(n.method==="requestEthereumAccounts"){ga.accountRequestCallbackIds.forEach(r=>this.invokeCallback(r,n)),ga.accountRequestCallbackIds.clear();return}this.invokeCallback(e,n)}handleErrorResponse(e,n,r){var s;const i=(s=r?.message)!==null&&s!==void 0?s:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:n,errorMessage:i})}invokeCallback(e,n){const r=this.relayEventManager.callbacks.get(e);r&&(r(n),this.relayEventManager.callbacks.delete(e))}requestEthereumAccounts(){const{appName:e,appLogoUrl:n}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:e,appLogoUrl:n}},s=oc(8);return new Promise((i,a)=>{this.relayEventManager.callbacks.set(s,o=>{if(Yn(o))return a(new Error(o.errorMessage));i(o)}),ga.accountRequestCallbackIds.add(s),this.publishWeb3RequestEvent(s,r)})}watchAsset(e,n,r,s,i,a){const o={method:"watchAsset",params:{type:e,options:{address:n,symbol:r,decimals:s,image:i},chainId:a}};let c=null;const l=oc(8),u=d=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,d),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:u,onResetConnection:this.resetAndReload}),new Promise((d,h)=>{this.relayEventManager.callbacks.set(l,f=>{if(c?.(),Yn(f))return h(new Error(f.errorMessage));d(f)}),this.publishWeb3RequestEvent(l,o)})}addEthereumChain(e,n,r,s,i,a){const o={method:"addEthereumChain",params:{chainId:e,rpcUrls:n,blockExplorerUrls:s,chainName:i,iconUrls:r,nativeCurrency:a}};let c=null;const l=oc(8),u=d=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,d),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:u,onResetConnection:this.resetAndReload}),new Promise((d,h)=>{this.relayEventManager.callbacks.set(l,f=>{if(c?.(),Yn(f))return h(new Error(f.errorMessage));d(f)}),this.publishWeb3RequestEvent(l,o)})}switchEthereumChain(e,n){const r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:n})};let s=null;const i=oc(8),a=o=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,o),s?.()};return s=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:a,onResetConnection:this.resetAndReload}),new Promise((o,c)=>{this.relayEventManager.callbacks.set(i,l=>{if(s?.(),Yn(l)&&l.errorCode)return c(ht.provider.custom({code:l.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(Yn(l))return c(new Error(l.errorMessage));o(l)}),this.publishWeb3RequestEvent(i,r)})}}ga.accountRequestCallbackIds=new Set;const HI="DefaultChainId",KI="DefaultJsonRpcUrl";class t${constructor(e){this._relay=null,this._addresses=[],this.metadata=e.metadata,this._storage=new zi("walletlink",qI),this.callback=e.callback||null;const n=this._storage.getItem(S1);if(n){const r=n.split(" ");r[0]!==""&&(this._addresses=r.map(s=>Ja(s)))}this.initializeRelay()}getSession(){const e=this.initializeRelay(),{id:n,secret:r}=e.getWalletLinkSession();return{id:n,secret:r}}async handshake(){await this._eth_requestAccounts()}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(KI))!==null&&e!==void 0?e:void 0}set jsonRpcUrl(e){this._storage.setItem(KI,e)}updateProviderInfo(e,n){var r;this.jsonRpcUrl=e;const s=this.getChainId();this._storage.setItem(HI,n.toString(10)),ih(n)!==s&&((r=this.callback)===null||r===void 0||r.call(this,"chainChanged",ko(n)))}async watchAsset(e){const n=Array.isArray(e)?e[0]:e;if(!n.type)throw ht.rpc.invalidParams("Type is required");if(n?.type!=="ERC20")throw ht.rpc.invalidParams(`Asset of type '${n.type}' is not supported`);if(!n?.options)throw ht.rpc.invalidParams("Options are required");if(!n?.options.address)throw ht.rpc.invalidParams("Address is required");const r=this.getChainId(),{address:s,symbol:i,image:a,decimals:o}=n.options,l=await this.initializeRelay().watchAsset(n.type,s,i,o,a,r?.toString());return Yn(l)?!1:!!l.result}async addEthereumChain(e){var n,r;const s=e[0];if(((n=s.rpcUrls)===null||n===void 0?void 0:n.length)===0)throw ht.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!s.chainName||s.chainName.trim()==="")throw ht.rpc.invalidParams("chainName is a required field");if(!s.nativeCurrency)throw ht.rpc.invalidParams("nativeCurrency is a required field");const i=Number.parseInt(s.chainId,16);if(i===this.getChainId())return!1;const a=this.initializeRelay(),{rpcUrls:o=[],blockExplorerUrls:c=[],chainName:l,iconUrls:u=[],nativeCurrency:d}=s,h=await a.addEthereumChain(i.toString(),o,u,c,l,d);if(Yn(h))return!1;if(((r=h.result)===null||r===void 0?void 0:r.isApproved)===!0)return this.updateProviderInfo(o[0],i),null;throw ht.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(e){const n=e[0],r=Number.parseInt(n.chainId,16),i=await this.initializeRelay().switchEthereumChain(r.toString(10),this.selectedAddress||void 0);if(Yn(i))throw i;const a=i.result;return a.isApproved&&a.rpcUrl.length>0&&this.updateProviderInfo(a.rpcUrl,r),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(e,n){var r;if(!Array.isArray(e))throw new Error("addresses is not an array");const s=e.map(i=>Ja(i));JSON.stringify(s)!==JSON.stringify(this._addresses)&&(this._addresses=s,(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",s),this._storage.setItem(S1,s.join(" ")))}async request(e){const n=e.params||[];switch(e.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return ko(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(e);case"personal_sign":return this.personalSign(e);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(e);case"wallet_addEthereumChain":return this.addEthereumChain(n);case"wallet_switchEthereumChain":return this.switchEthereumChain(n);case"wallet_watchAsset":return this.watchAsset(n);default:if(!this.jsonRpcUrl)throw ht.rpc.internal("No RPC URL set for chain");return E2(e,this.jsonRpcUrl)}}_ensureKnownAddress(e){const n=Ja(e);if(!this._addresses.map(s=>Ja(s)).includes(n))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const n=e.from?Ja(e.from):this.selectedAddress;if(!n)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(n);const r=e.to?Ja(e.to):null,s=e.value!=null?fd(e.value):BigInt(0),i=e.data?A1(e.data):Buffer.alloc(0),a=e.nonce!=null?ih(e.nonce):null,o=e.gasPrice!=null?fd(e.gasPrice):null,c=e.maxFeePerGas!=null?fd(e.maxFeePerGas):null,l=e.maxPriorityFeePerGas!=null?fd(e.maxPriorityFeePerGas):null,u=e.gas!=null?fd(e.gas):null,d=e.chainId?ih(e.chainId):this.getChainId();return{fromAddress:n,toAddress:r,weiValue:s,data:i,nonce:a,gasPriceInWei:o,maxFeePerGas:c,maxPriorityFeePerGas:l,gasLimit:u,chainId:d}}async ecRecover(e){const{method:n,params:r}=e;if(!Array.isArray(r))throw ht.rpc.invalidParams();const i=await this.initializeRelay().sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:fw(r[0]),signature:fw(r[1]),addPrefix:n==="personal_ecRecover"}});if(Yn(i))throw i;return i.result}getChainId(){var e;return Number.parseInt((e=this._storage.getItem(HI))!==null&&e!==void 0?e:"1",10)}async _eth_requestAccounts(){var e,n;if(this._addresses.length>0)return(e=this.callback)===null||e===void 0||e.call(this,"connect",{chainId:ko(this.getChainId())}),this._addresses;const s=await this.initializeRelay().requestEthereumAccounts();if(Yn(s))throw s;if(!s.result)throw new Error("accounts received is empty");return this._setAddresses(s.result),(n=this.callback)===null||n===void 0||n.call(this,"connect",{chainId:ko(this.getChainId())}),this._addresses}async personalSign({params:e}){if(!Array.isArray(e))throw ht.rpc.invalidParams();const n=e[1],r=e[0];this._ensureKnownAddress(n);const i=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:Ja(n),message:fw(r),addPrefix:!0,typedDataJson:null}});if(Yn(i))throw i;return i.result}async _eth_signTransaction(e){const n=this._prepareTransactionParams(e[0]||{}),s=await this.initializeRelay().signEthereumTransaction(n);if(Yn(s))throw s;return s.result}async _eth_sendRawTransaction(e){const n=A1(e[0]),s=await this.initializeRelay().submitEthereumTransaction(n,this.getChainId());if(Yn(s))throw s;return s.result}async _eth_sendTransaction(e){const n=this._prepareTransactionParams(e[0]||{}),s=await this.initializeRelay().signAndSubmitEthereumTransaction(n);if(Yn(s))throw s;return s.result}async signTypedData(e){const{method:n,params:r}=e;if(!Array.isArray(r))throw ht.rpc.invalidParams();const s=l=>{const u={eth_signTypedData_v1:Ap.hashForSignTypedDataLegacy,eth_signTypedData_v3:Ap.hashForSignTypedData_v3,eth_signTypedData_v4:Ap.hashForSignTypedData_v4,eth_signTypedData:Ap.hashForSignTypedData_v4};return sh(u[n]({data:aJ(l)}),!0)},i=r[n==="eth_signTypedData_v1"?1:0],a=r[n==="eth_signTypedData_v1"?0:1];this._ensureKnownAddress(i);const c=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:Ja(i),message:s(a),typedDataJson:JSON.stringify(a,null,2),addPrefix:!1}});if(Yn(c))throw c;return c.result}initializeRelay(){return this._relay||(this._relay=new ga({linkAPIUrl:qI,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const n$="SignerType",r$=new zi("CBWSDK","SignerConfigurator");function bX(){return r$.getItem(n$)}function vX(t){r$.setItem(n$,t)}async function _X(t){const{communicator:e,metadata:n,handshakeRequest:r,callback:s}=t;xX(e,n,s).catch(()=>{});const i={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},t.preference),{handshakeRequest:r})},{data:a}=await e.postRequestAndWaitForResponse(i);return a}function EX(t){const{signerType:e,metadata:n,communicator:r,callback:s}=t;switch(e){case"scw":return new bJ({metadata:n,callback:s,communicator:r});case"walletlink":return new t$({metadata:n,callback:s})}}async function xX(t,e,n){await t.onMessage(({event:s})=>s==="WalletLinkSessionRequest");const r=new t$({metadata:e,callback:n});t.postMessage({event:"WalletLinkUpdate",data:{session:r.getSession()}}),await r.handshake(),t.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}const AX=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,SX=()=>{let t;return{getCrossOriginOpenerPolicy:()=>t===void 0?"undefined":t,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){t="non-browser-env";return}try{const e=`${window.location.origin}${window.location.pathname}`,n=await fetch(e,{method:"HEAD"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=n.headers.get("Cross-Origin-Opener-Policy");t=r??"null",t==="same-origin"&&console.error(AX)}catch(e){console.error("Error checking Cross-Origin-Opener-Policy:",e.message),t="error"}}}},{checkCrossOriginOpenerPolicy:IX,getCrossOriginOpenerPolicy:TX}=SX(),GI=420,YI=540,CX={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:e$,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},kX="Popup was blocked. Try again.";let Ip=null;function OX(t){const e=(window.innerWidth-GI)/2+window.screenX,n=(window.innerHeight-YI)/2+window.screenY;RX(t);function r(){const i=`wallet_${crypto.randomUUID()}`,a=window.open(t,i,`width=${GI}, height=${YI}, left=${e}, top=${n}`);return a?.focus(),a||null}let s=r();if(!s){const i=$X();return new Promise((a,o)=>{i.presentItem({autoExpand:!0,message:kX,menuItems:[Object.assign(Object.assign({},CX),{onClick:()=>{s=r(),s?a(s):o(ht.rpc.internal("Popup window was blocked")),i.clear()}})]})})}return Promise.resolve(s)}function PX(t){t&&!t.closed&&t.close()}function RX(t){const e={sdkName:$R,sdkVersion:Uf,origin:window.location.origin,coop:TX()};for(const[n,r]of Object.entries(e))t.searchParams.append(n,r.toString())}function $X(){if(!Ip){const t=document.createElement("div");t.className="-cbwsdk-css-reset",document.body.appendChild(t),Ip=new XR,Ip.attach(t)}return Ip}class NX{constructor({url:e=gX,metadata:n,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async s=>{(await this.waitForPopupLoaded()).postMessage(s,this.url.origin)},this.postRequestAndWaitForResponse=async s=>{const i=this.onMessage(({requestId:a})=>a===s.id);return this.postMessage(s),await i},this.onMessage=async s=>new Promise((i,a)=>{const o=c=>{if(c.origin!==this.url.origin)return;const l=c.data;s(l)&&(i(l),window.removeEventListener("message",o),this.listeners.delete(o))};window.addEventListener("message",o),this.listeners.set(o,{reject:a})}),this.disconnect=()=>{PX(this.popup),this.popup=null,this.listeners.forEach(({reject:s},i)=>{s(ht.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",i)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(this.popup=await OX(this.url),this.onMessage(({event:s})=>s==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:s})=>s==="PopupLoaded").then(s=>{this.postMessage({requestId:s.id,data:{version:Uf,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw ht.rpc.internal();return this.popup})),this.url=new URL(e),this.metadata=n,this.preference=r}}function DX(t){const e=tJ(UX(t),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",Uf),n.searchParams.set("code",e.code.toString()),n.searchParams.set("message",e.message),Object.assign(Object.assign({},e),{docUrl:n.href})}function UX(t){var e;if(typeof t=="string")return{message:t,code:tn.rpc.internal};if(Yn(t)){const n=t.errorMessage,r=(e=t.errorCode)!==null&&e!==void 0?e:n.match(/(denied|rejected)/i)?tn.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},t),{message:n,code:r,data:{method:t.method}})}return t}class BX extends tl{}var MX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class LX extends BX{constructor(e){var{metadata:n}=e,r=e.preference,{keysUrl:s}=r,i=MX(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=n,this.preference=i,this.communicator=new NX({url:s,metadata:n,preference:i});const a=bX();a&&(this.signer=this.initSigner(a))}async request(e){try{if(wJ(e),!this.signer)switch(e.method){case"eth_requestAccounts":{const n=await this.requestSignerSelection(e),r=this.initSigner(n);await r.handshake(e),this.signer=r,vX(n);break}case"wallet_sendCalls":{const n=this.initSigner("scw");await n.handshake({method:"handshake"});const r=await n.request(e);return await n.cleanup(),r}case"wallet_getCallsStatus":return E2(e,yX);case"net_version":return 1;case"eth_chainId":return ko(1);default:throw ht.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(e)}catch(n){const{code:r}=n;return r===tn.provider.unauthorized&&this.disconnect(),Promise.reject(DX(n))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),await this.request({method:"eth_requestAccounts"})}async disconnect(){var e;await((e=this.signer)===null||e===void 0?void 0:e.cleanup()),this.signer=null,zi.clearAll(),this.emit("disconnect",ht.provider.disconnected("User initiated disconnection"))}requestSignerSelection(e){return _X({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}initSigner(e){return EX({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}function FX(t){if(t){if(!["all","smartWalletOnly","eoaOnly"].includes(t.options))throw new Error(`Invalid options: ${t.options}`);if(t.attribution&&t.attribution.auto!==void 0&&t.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}function jX(t){var e;const n={metadata:t.metadata,preference:t.preference};return(e=yJ(n))!==null&&e!==void 0?e:new LX(n)}const zX={options:"all"};function ZI(t){var e;new zi("CBWSDK").setItem("VERSION",Uf),IX();const r={metadata:{appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||"",appChainIds:t.appChainIds||[]},preference:Object.assign(zX,(e=t.preference)!==null&&e!==void 0?e:{})};FX(r.preference);let s=null;return{getProvider:()=>(s||(s=jX(r)),s)}}function WX(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function qX(){const t=new Set;let e=[];const n=()=>WX(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const VX=({w:t,h:e})=>{let n=window.screenLeft!==void 0?window.screenLeft:window.screenX,r=window.screenTop!==void 0?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return`toolbar=0,location=0,menubar=0,height=${e},width=${t},popup=1,left=${(s-t)/2/(s/window.screen.availWidth)+n},top=${(i-e)/2/(i/window.screen.availHeight)+r}`},s$=t=>window.open(t?.location,void 0,VX({w:440,h:680})),i$="/api/v1/sessions",a$="/api/v1/sessions/logout",HX="/api/v1/siwe/init",KX="/api/v1/siwe/authenticate",GX="/api/v1/siwe/link",YX="/api/v1/siwe/link_smart_wallet",ZX="/api/v1/siwe/unlink",JX="/api/v1/siwe/transfer",XX="/api/v1/siws/init",QX="/api/v1/siws/authenticate",eQ="/api/v1/siws/link",tQ="/api/v1/siws/unlink",nQ="/api/v1/siws/transfer",rQ="/api/v1/farcaster/init",sQ="/api/v1/farcaster/authenticate",iQ="/api/v1/farcaster/link",aQ="/api/v1/farcaster/status",oQ="/api/v1/farcaster/unlink",cQ="/api/v1/farcaster/transfer",lQ="/api/v1/passwordless/init",uQ="/api/v1/passwordless/authenticate",dQ="/api/v1/passwordless/link",hQ="/api/v1/passwordless/unlink",fQ="/api/v1/passwordless/update",pQ="/api/v1/passwordless/transfer",mQ="/api/v1/passwordless_sms/init",gQ="/api/v1/passwordless_sms/link",yQ="/api/v1/passwordless_sms/unlink",wQ="/api/v1/passwordless_sms/authenticate",bQ="/api/v1/passwordless_sms/update",vQ="/api/v1/passwordless_sms/transfer",o$="/api/v1/oauth/init",c$="/api/v1/oauth/authenticate",l$="/api/v1/oauth/link",_Q="/api/v1/oauth/unlink",EQ="/api/v1/oauth/transfer",d3e="/api/v1/recovery/oauth/init",h3e="/api/v1/recovery/oauth/init_icloud",f3e="/api/v1/recovery/oauth/authenticate",xQ="/api/v1/passkeys/link/init",AQ="/api/v1/passkeys/authenticate/init",SQ="/api/v1/passkeys/register/init",IQ="/api/v1/passkeys/link",TQ="/api/v1/passkeys/authenticate",CQ="/api/v1/passkeys/register",kQ="/api/v1/telegram/authenticate",OQ="/api/v1/telegram/link",PQ="/api/v1/telegram/unlink",RQ="/api/v1/telegram/transfer",$Q="/api/v1/mfa/passwordless_sms/init",NQ="/api/v1/mfa/passkeys/init",DQ="/api/v1/users/me/accept_terms",u$="/api/v1/analytics_events",UQ="/api/v1/custom_jwt_account/authenticate",BQ="/api/v1/custom_jwt_account/link",MQ="/api/v1/guest/authenticate",LQ="/api/v1/plugins/moonpay_on_ramp/sign",FQ="/api/v1/funding/coinbase_on_ramp/init",jQ="/api/v1/funding/coinbase_on_ramp/status",zQ="/api/v1/wallets/revoke",WQ="/api/v1/users/me",qQ="/api/v1/scan/transaction";function d$(t){return{name:t.metadata?.shortName||t.name||"",universalLink:t.mobile.universal,deepLink:t.mobile.native}}function VQ(t,e){let n=d$(e);if(Ba.isMobile&&n.universalLink)return hg(n.universalLink,t);if(n.deepLink)return f$(n.deepLink,t);if(n.universalLink)return hg(n.universalLink,t);throw new Y(`Unsupported wallet ${e.id}`)}function JI(t,e){let n=d$(e);if(n.universalLink)return hg(n.universalLink,t)}let k2="WALLETCONNECT_DEEPLINK_CHOICE";function HQ(){try{localStorage.removeItem(k2)}catch{}}function KQ({href:t,name:e}){try{localStorage.setItem(k2,JSON.stringify({href:t,name:e}))}catch{}}function GQ(){try{localStorage.removeItem(k2)}catch{}}function h$(t){return t.startsWith("http://")||t.startsWith("https://")}function f$(t,e){if(h$(t))return hg(t,e);let n=t;return n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),{redirect:`${n}wc?uri=${encodeURIComponent(e)}`,href:n}}function hg(t,e){if(!h$(t))return f$(t,e);let n=t;return n.endsWith("/")||(n=`${n}/`),{redirect:`${n}wc?uri=${encodeURIComponent(e)}`,href:n}}function p$(t,e){window.open(t,e,"noreferrer noopener")}const YQ=({address:t,nonce:e})=>`${window.location.host} wants you to sign in with your Solana account:
${t}

${`You are proving you own ${t}.`}

URI: ${window.location.origin}
Version: 1
Chain ID: mainnet
Nonce: ${e}
Issued At: ${new Date().toISOString()}
Resources:
- https://privy.io`,ZQ=Symbol("solana-funding-plugin"),JQ=Symbol("solana-ledger-plugin"),O2=(t,{chainType:e,walletIndex:n}={})=>t?.linkedAccounts.filter((r=>!(r.type!=="wallet"||r.walletClientType!=="privy"||n!==void 0&&r.walletIndex!==n||e!==void 0&&r.chainType!==e)))??[],m$=async({user:t,accessToken:e,proxy:n,refreshSessionAndUser:r,privy:s,appConfig:i,recoverEmbeddedWallet:a,setUser:o,walletIndex:c,chainType:l,recoveryMethod:u,recoveryPassword:d,recoveryAccessToken:h,idempotencyKey:f})=>{if(c===0)if(i.embeddedWallets.mode==="user-controlled-server-wallets-only")await hv(s,{request:{chain_type:l},headers:f?{"privy-idempotency-key":f}:void 0});else if(l==="ethereum"){let g=o2(t);g&&await a({address:g.address}),await n.create({accessToken:e,solanaAddress:g?.address,recoveryMethod:u,recoveryPassword:d,recoveryAccessToken:h})}else{if(l!=="solana")throw Error("Invalid input to create wallet");{let g=To(t);g&&await a({address:g.address}),await n.createSolana({accessToken:e,ethereumAddress:g?.address,recoveryMethod:u,recoveryPassword:d,recoveryAccessToken:h})}}else if(i.embeddedWallets.mode==="user-controlled-server-wallets-only")await hv(s,{request:{chain_type:l}});else{let{entropyId:g,entropyIdVerifier:_}=_o(t);await a(),await n.addWallet({accessToken:e,entropyId:g,entropyIdVerifier:_,chainType:l,hdWalletIndex:c})}let p=await r(),m=O2(p,{chainType:l,walletIndex:c})[0];return o(p),{user:p,account:m}},XQ=t=>t.reduce(((e,n)=>!e||e.walletIndex<n.walletIndex?n:e),null);let XI=async({accessToken:t,appConfig:e,privy:n,emitPrivyEvent:r,proxy:s,refreshSessionAndUser:i,recoverEmbeddedWallet:a,user:o,walletIndex:c,setModalData:l,openModal:u,chainType:d,setUser:h,idempotencyKey:f})=>{if(c<0)throw r("createWallet","onError",ie.EMBEDDED_WALLET_CREATE_ERROR),Error(`A negative walletIndex (${c}) is invalid.`);let p=jh(o);if(c>0&&!p)throw r("createWallet","onError",ie.EMBEDDED_WALLET_NOT_FOUND),Error("Must have an existing embedded wallet to create an additional wallet.");if(e.embeddedWallets.requireUserOwnedRecoveryOnCreate&&e.embeddedWallets.mode==="user-controlled-server-wallets-only")throw r("createWallet","onError",ie.EMBEDDED_WALLET_CREATE_ERROR),Error("User owned recovery not yet supported for this app.");if(!p&&e.embeddedWallets.requireUserOwnedRecoveryOnCreate)return await QI({emitPrivyEvent:r,setModalData:l,openModal:u,chainType:d});let m=O2(o,{chainType:d,walletIndex:c})[0];if(m)return{user:o,account:m};if(c===0&&!s)return QI({emitPrivyEvent:r,setModalData:l,openModal:u,chainType:d});if(!s)throw r("createWallet","onError",ie.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to connect to wallet proxy");return m$({appConfig:e,walletIndex:c,chainType:d,user:o,accessToken:t,proxy:s,refreshSessionAndUser:i,privy:n,recoverEmbeddedWallet:a,setUser:h,idempotencyKey:f})},QI=async({emitPrivyEvent:t,setModalData:e,openModal:n,chainType:r})=>new Promise(((s,i)=>{e({createWallet:{onSuccess:({user:a,account:o})=>{t("createWallet","onSuccess",{wallet:o}),s({user:a,account:o})},onFailure:a=>{t("createWallet","onError",ie.UNKNOWN_EMBEDDED_WALLET_ERROR),i(a)},callAuthOnSuccessOnClose:!1,shouldCreateEth:r==="ethereum",shouldCreateSol:r==="solana"}}),n("EmbeddedWalletOnAccountCreateScreen")}));const QQ=()=>{let t=ps(),e=Sy(),{setModalData:n}=Iu(),{initializeWalletProxy:r,recoverEmbeddedWallet:s,setUser:i,openModal:a,refreshSessionAndUser:o,privy:c,client:l}=qa();return{create:async({chainType:u,options:d,latestUser:h,idempotencyKey:f})=>{let p=h;if(p||(p=await o()),!p)throw e("createWallet","onError",ie.MUST_BE_AUTHENTICATED),Error("User must be authenticated before creating a Privy wallet");return await(async({appConfig:m,getAccessToken:g,initializeWalletProxy:_,user:A,privy:w,emitPrivyEvent:y,recoverEmbeddedWallet:E,setModalData:b,openModal:S,setUser:$,options:P,timeoutDuration:C,refreshSessionAndUser:B,chainType:k,idempotencyKey:D})=>{let[L,v]=await Promise.all([_(C),g()]);if(!v||!A)throw y("createWallet","onError",ie.MUST_BE_AUTHENTICATED),Error("User must be authenticated before creating a Privy wallet");if(!L&&m.customAuth?.enabled)throw y("createWallet","onError",ie.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to connect to wallet proxy");if(P&&"walletIndex"in P&&typeof P.walletIndex=="number"){if(m.embeddedWallets.mode==="user-controlled-server-wallets-only")throw y("createWallet","onError",ie.INVALID_DATA),Error("Invalid input, use `createAdditional` instead of `walletIndex` to create additional wallets.");return XI({accessToken:v,appConfig:m,privy:w,emitPrivyEvent:y,openModal:S,proxy:L,refreshSessionAndUser:B,recoverEmbeddedWallet:E,setModalData:b,user:A,walletIndex:P.walletIndex,chainType:k,setUser:$})}let x=P&&"createAdditional"in P&&P.createAdditional,O=O2(A,{chainType:k});if(O[0]&&!x)throw y("createWallet","onError",ie.EMBEDDED_WALLET_ALREADY_EXISTS),Error("User already has an embedded wallet.");return XI({accessToken:v,appConfig:m,privy:w,emitPrivyEvent:y,openModal:S,proxy:L,recoverEmbeddedWallet:E,setModalData:b,user:A,walletIndex:(XQ(O)?.walletIndex??-1)+1,chainType:k,refreshSessionAndUser:B,setUser:$,idempotencyKey:D})})({appConfig:t,privy:c,getAccessToken:()=>l.getAccessToken(),refreshSessionAndUser:o,initializeWalletProxy:r,user:p,emitPrivyEvent:e,recoverEmbeddedWallet:s,setModalData:n,openModal:a,setUser:i,options:d,timeoutDuration:oG,chainType:u,idempotencyKey:f})}}};function eee(t){let{create:e}=QQ();return Df("createWallet",t),{createWallet:async n=>{n&&"target"in n&&n&&(n=void 0);let{account:r}=await e({chainType:"ethereum",options:n});return r}}}const tee=async({emitPrivyEvent:t,getAccessToken:e,initializeWalletProxy:n,refreshSessionAndUser:r,user:s,appConfig:i},{privateKey:a,chainType:o,additionalSigners:c})=>{if(!s)throw t("linkAccount","onError",ie.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new Y("User must be authenticated before linking an account.");let l=i.embeddedWallets.mode==="user-controlled-server-wallets-only"?"tee":"on-device";if(c&&l==="on-device")throw new Y("Specifying additionalSigners is only supported for TEE execution and this app uses On-device execution. Learn more https://docs.privy.io/recipes/tee-wallet-migration-guide");let[u,d]=await Promise.all([e(),n(15e3)]);if(!d||!u)throw t("linkAccount","onError",ie.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new Y("User must be authenticated before linking an account.");let{address:h}=await d.importWallet({privateKey:a,accessToken:u,chainType:o,mode:l,additionalSigners:c}),f=await r(),p=l1(f),m=p?.find((g=>g.address===h));if(!m)throw t("createWallet","onError",ie.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to import wallet");return t("createWallet","onSuccess",{wallet:m}),m},nee=()=>{let{user:t}=Zu(),{client:e,refreshSessionAndUser:n,initializeWalletProxy:r}=qa(),s=Sy(),i=ps();return{importWallet:T.useCallback((({privateKey:a,additionalSigners:o})=>tee({getAccessToken:()=>e.getAccessToken(),user:t,initializeWalletProxy:r,refreshSessionAndUser:n,emitPrivyEvent:s,appConfig:i},{privateKey:a,chainType:"ethereum",additionalSigners:o})),[t,e,n,r,s,i])}},g$=()=>{let{importWallet:t}=nee(),{exportWallet:e}=kZ(),{createWallet:n}=eee();return{...T.useContext(nl),importWallet:t,createWallet:n,exportWallet:e}};/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ree(t,...e){if(!P2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function y$(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Gh(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Bf(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function fg(t){if(!Array.isArray(t))throw new Error("array expected")}function pg(t,e){if(!y$(!0,e))throw new Error(`${t}: array of strings expected`)}function w$(t,e){if(!y$(!1,e))throw new Error(`${t}: array of numbers expected`)}function R2(...t){const e=i=>i,n=(i,a)=>o=>i(a(o)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function $2(t){const e=typeof t=="string"?t.split(""):t,n=e.length;pg("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(fg(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(fg(s),s.map(i=>{Gh("alphabet.decode",i);const a=r.get(i);if(a===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return a}))}}function N2(t=""){return Gh("join",t),{encode:e=>(pg("join.decode",e),e.join(t)),decode:e=>(Gh("join.decode",e),e.split(t))}}function b$(t,e="="){return Bf(t),Gh("padding",e),{encode(n){for(pg("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){pg("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function e5(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(fg(t),!t.length)return[];let r=0;const s=[],i=Array.from(t,o=>{if(Bf(o),o<0||o>=e)throw new Error(`invalid integer: ${o}`);return o}),a=i.length;for(;;){let o=0,c=!0;for(let l=r;l<a;l++){const u=i[l],d=e*o,h=d+u;if(!Number.isSafeInteger(h)||d/e!==o||h-u!==d)throw new Error("convertRadix: carry overflow");const f=h/n;o=h%n;const p=Math.floor(f);if(i[l]=p,!Number.isSafeInteger(p)||p*n+o!==h)throw new Error("convertRadix: carry overflow");if(c)p?c=!1:r=l;else continue}if(s.push(o),c)break}for(let o=0;o<t.length-1&&t[o]===0;o++)s.push(0);return s.reverse()}const v$=(t,e)=>e===0?t:v$(e,t%e),mg=(t,e)=>t+(e-v$(t,e)),xw=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function t5(t,e,n,r){if(fg(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(mg(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${mg(e,n)}`);let s=0,i=0;const a=xw[e],o=xw[n]-1,c=[];for(const l of t){if(Bf(l),l>=a)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&o)>>>0);const u=xw[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&o,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function see(t){Bf(t);const e=2**8;return{encode:n=>{if(!P2(n))throw new Error("radix.encode input should be Uint8Array");return e5(Array.from(n),e,t)},decode:n=>(w$("radix.decode",n),Uint8Array.from(e5(n,t,e)))}}function _$(t,e=!1){if(Bf(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(mg(8,t)>32||mg(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!P2(n))throw new Error("radix2.encode input should be Uint8Array");return t5(Array.from(n),8,t,!e)},decode:n=>(w$("radix2.decode",n),Uint8Array.from(t5(n,t,8,e)))}}const iee=R2(_$(5),$2("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),b$(5),N2("")),aee=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",oee=(t,e)=>{Gh("base64",t);const n=/^[A-Za-z0-9=+/]+$/,r="base64";if(t.length>0&&!n.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:r,lastChunkHandling:"strict"})},Aw=aee?{encode(t){return ree(t),t.toBase64()},decode(t){return oee(t)}}:R2(_$(6),$2("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),b$(6),N2("")),cee=t=>R2(see(58),$2(t),N2("")),lee=cee("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var E$=RB(),uee=Object.defineProperty,dee=(t,e,n)=>e in t?uee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sw=(t,e,n)=>(dee(t,typeof e!="symbol"?e+"":e,n),n);let hee=class{constructor(){Sw(this,"current",this.detect()),Sw(this,"handoffState","pending"),Sw(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ui=new hee;function Mf(t){var e;return Ui.isServer?null:t==null?document:(e=t?.ownerDocument)!=null?e:document}function gg(t){var e,n;return Ui.isServer?null:t==null?document:(n=(e=t?.getRootNode)==null?void 0:e.call(t))!=null?n:document}function D2(t){var e,n;return(n=(e=gg(t))==null?void 0:e.activeElement)!=null?n:null}function fee(t){return D2(t)===t}function Oy(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function hi(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Oy(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=hi();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function Py(){let[t]=T.useState(hi);return T.useEffect(()=>()=>t.dispose(),[t]),t}let jr=(t,e)=>{Ui.isServer?T.useEffect(t,e):T.useLayoutEffect(t,e)};function al(t){let e=T.useRef(t);return jr(()=>{e.current=t},[t]),e}let Rt=function(t){let e=al(t);return Te.useCallback((...n)=>e.current(...n),[e])};function Lf(t){return T.useMemo(()=>t,Object.values(t))}let pee=T.createContext(void 0);function mee(){return T.useContext(pee)}function R1(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Ma(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ma),r}var yg=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(yg||{}),Po=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Po||{});function Fs(){let t=yee();return T.useCallback(e=>gee({mergeRefs:t,...e}),[t])}function gee({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:a,mergeRefs:o}){o=o??wee;let c=x$(e,t);if(i)return Tp(c,n,r,a,o);let l=s??0;if(l&2){let{static:u=!1,...d}=c;if(u)return Tp(d,n,r,a,o)}if(l&1){let{unmount:u=!0,...d}=c;return Ma(u?0:1,{0(){return null},1(){return Tp({...d,hidden:!0,style:{display:"none"}},n,r,a,o)}})}return Tp(c,n,r,a,o)}function Tp(t,e={},n,r,s){let{as:i=n,children:a,refName:o="ref",...c}=Iw(t,["unmount","static"]),l=t.ref!==void 0?{[o]:t.ref}:{},u=typeof a=="function"?a(e):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let d={};if(e){let h=!1,f=[];for(let[p,m]of Object.entries(e))typeof m=="boolean"&&(h=!0),m===!0&&f.push(p.replace(/([A-Z])/g,g=>`-${g.toLowerCase()}`));if(h){d["data-headlessui-state"]=f.join(" ");for(let p of f)d[`data-${p}`]=""}}if(oh(i)&&(Object.keys(rc(c)).length>0||Object.keys(rc(d)).length>0))if(!T.isValidElement(u)||Array.isArray(u)&&u.length>1||vee(u)){if(Object.keys(rc(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(rc(c)).concat(Object.keys(rc(d))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=u.props,f=h?.className,p=typeof f=="function"?(..._)=>R1(f(..._),c.className):R1(f,c.className),m=p?{className:p}:{},g=x$(u.props,rc(Iw(c,["ref"])));for(let _ in d)_ in g&&delete d[_];return T.cloneElement(u,Object.assign({},g,d,l,{ref:s(bee(u),l.ref)},m))}return T.createElement(i,Object.assign({},Iw(c,["ref"]),!oh(i)&&l,!oh(i)&&d),u)}function yee(){let t=T.useRef([]),e=T.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function wee(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function x$(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(e,{[r](s,...i){let a=n[r];for(let o of a){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;o(s,...i)}}});return e}function m3e(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];for(let r in n)Object.assign(e,{[r](...s){let i=n[r];for(let a of i)a?.(...s)}});return e}function Vr(t){var e;return Object.assign(T.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function rc(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Iw(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function bee(t){return Te.version.split(".")[0]>="19"?t.props.ref:t.ref}function oh(t){return t===T.Fragment||t===Symbol.for("react.fragment")}function vee(t){return oh(t.type)}let _ee="span";var wg=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(wg||{});function Eee(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Fs()({ourProps:i,theirProps:s,slot:{},defaultTag:_ee,name:"Hidden"})}let $1=Vr(Eee);function xee(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Oa(t){return xee(t)&&"tagName"in t}function Wi(t){return Oa(t)&&"accessKey"in t}function xa(t){return Oa(t)&&"tabIndex"in t}function Aee(t){return Oa(t)&&"style"in t}function See(t){return Wi(t)&&t.nodeName==="IFRAME"}function Iee(t){return Wi(t)&&t.nodeName==="INPUT"}function g3e(t){return Wi(t)&&t.nodeName==="LABEL"}function y3e(t){return Wi(t)&&t.nodeName==="FIELDSET"}function w3e(t){return Wi(t)&&t.nodeName==="LEGEND"}function b3e(t){return Oa(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}let A$=Symbol();function Tee(t,e=!0){return Object.assign(t,{[A$]:e})}function Yi(...t){let e=T.useRef(t);T.useEffect(()=>{e.current=t},[t]);let n=Rt(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||r?.[A$])?void 0:n}let U2=T.createContext(null);U2.displayName="DescriptionContext";function S$(){let t=T.useContext(U2);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,S$),e}return t}function Cee(){let[t,e]=T.useState([]);return[t.length>0?t.join(" "):void 0,T.useMemo(()=>function(n){let r=Rt(i=>(e(a=>[...a,i]),()=>e(a=>{let o=a.slice(),c=o.indexOf(i);return c!==-1&&o.splice(c,1),o}))),s=T.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Te.createElement(U2.Provider,{value:s},n.children)},[e])]}let kee="p";function Oee(t,e){let n=T.useId(),r=mee(),{id:s=`headlessui-description-${n}`,...i}=t,a=S$(),o=Yi(e);jr(()=>a.register(s),[s,a.register]);let c=Lf({...a.slot,disabled:r||!1}),l={ref:o,...a.props,id:s};return Fs()({ourProps:l,theirProps:i,slot:c,defaultTag:kee,name:a.name||"Description"})}let Pee=Vr(Oee),Ree=Object.assign(Pee,{});var I$=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(I$||{});let $ee=T.createContext(()=>{});function Nee({value:t,children:e}){return Te.createElement($ee.Provider,{value:t},e)}let T$=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var Dee=Object.defineProperty,Uee=(t,e,n)=>e in t?Dee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bee=(t,e,n)=>(Uee(t,e+"",n),n),C$=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},vs=(t,e,n)=>(C$(t,e,"read from private field"),n?n.call(t):e.get(t)),Tw=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},n5=(t,e,n,r)=>(C$(t,e,"write to private field"),e.set(t,n),n),Ii,Hd,Kd;let Mee=class{constructor(e){Tw(this,Ii,{}),Tw(this,Hd,new T$(()=>new Set)),Tw(this,Kd,new Set),Bee(this,"disposables",hi()),n5(this,Ii,e),Ui.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return vs(this,Ii)}subscribe(e,n){if(Ui.isServer)return()=>{};let r={selector:e,callback:n,current:e(vs(this,Ii))};return vs(this,Kd).add(r),this.disposables.add(()=>{vs(this,Kd).delete(r)})}on(e,n){return Ui.isServer?()=>{}:(vs(this,Hd).get(e).add(n),this.disposables.add(()=>{vs(this,Hd).get(e).delete(n)}))}send(e){let n=this.reduce(vs(this,Ii),e);if(n!==vs(this,Ii)){n5(this,Ii,n);for(let r of vs(this,Kd)){let s=r.selector(vs(this,Ii));k$(r.current,s)||(r.current=s,r.callback(s))}for(let r of vs(this,Hd).get(e.type))r(vs(this,Ii),e)}}};Ii=new WeakMap,Hd=new WeakMap,Kd=new WeakMap;function k$(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Cw(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Cw(t.entries(),e.entries()):r5(t)&&r5(e)?Cw(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Cw(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function r5(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}function E3e(t){let[e,n]=t(),r=hi();return(...s)=>{e(...s),r.dispose(),r.microTask(n)}}var Lee=Object.defineProperty,Fee=(t,e,n)=>e in t?Lee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,s5=(t,e,n)=>(Fee(t,typeof e!="symbol"?e+"":e,n),n),jee=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(jee||{});let zee={0(t,e){let n=e.id,r=t.stack,s=t.stack.indexOf(n);if(s!==-1){let i=t.stack.slice();return i.splice(s,1),i.push(n),r=i,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let s=t.stack.slice();return s.splice(r,1),{...t,stack:s}}},Wee=class O$ extends Mee{constructor(){super(...arguments),s5(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),s5(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new O$({stack:[]})}reduce(e,n){return Ma(n.type,zee,e,n)}};const P$=new T$(()=>Wee.new());var kw={exports:{}},Ow={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5;function qee(){if(i5)return Ow;i5=1;var t=e3();function e(c,l){return c===l&&(c!==0||1/c===1/l)||c!==c&&l!==l}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,o=t.useDebugValue;return Ow.useSyncExternalStoreWithSelector=function(c,l,u,d,h){var f=s(null);if(f.current===null){var p={hasValue:!1,value:null};f.current=p}else p=f.current;f=a(function(){function g(E){if(!_){if(_=!0,A=E,E=d(E),h!==void 0&&p.hasValue){var b=p.value;if(h(b,E))return w=b}return w=E}if(b=w,n(A,E))return b;var S=d(E);return h!==void 0&&h(b,S)?(A=E,b):(A=E,w=S)}var _=!1,A,w,y=u===void 0?null:u;return[function(){return g(l())},y===null?void 0:function(){return g(y())}]},[l,u,d,h]);var m=r(c,f[0],f[1]);return i(function(){p.hasValue=!0,p.value=m},[m]),o(m),m},Ow}var a5;function Vee(){return a5||(a5=1,kw.exports=qee()),kw.exports}var Hee=Vee();function R$(t,e,n=k$){return Hee.useSyncExternalStoreWithSelector(Rt(r=>t.subscribe(Kee,r)),Rt(()=>t.state),Rt(()=>t.state),Rt(e),n)}function Kee(t){return t}function Ff(t,e){let n=T.useId(),r=P$.get(e),[s,i]=R$(r,T.useCallback(a=>[r.selectors.isTop(a,n),r.selectors.inStack(a,n)],[r,n]));return jr(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?i?s:!0:!1}let N1=new Map,ch=new Map;function o5(t){var e;let n=(e=ch.get(t))!=null?e:0;return ch.set(t,n+1),n!==0?()=>c5(t):(N1.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>c5(t))}function c5(t){var e;let n=(e=ch.get(t))!=null?e:1;if(n===1?ch.delete(t):ch.set(t,n-1),n!==1)return;let r=N1.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,N1.delete(t))}function Gee(t,{allowed:e,disallowed:n}={}){let r=Ff(t,"inert-others");jr(()=>{var s,i;if(!r)return;let a=hi();for(let c of(s=n?.())!=null?s:[])c&&a.add(o5(c));let o=(i=e?.())!=null?i:[];for(let c of o){if(!c)continue;let l=Mf(c);if(!l)continue;let u=c.parentElement;for(;u&&u!==l.body;){for(let d of u.children)o.some(h=>d.contains(h))||a.add(o5(d));u=u.parentElement}}return a.dispose},[r,e,n])}function Yee(t,e,n){let r=al(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});T.useEffect(()=>{if(!t)return;let s=e===null?null:Wi(e)?e:e.current;if(!s)return;let i=hi();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(s));a.observe(s),i.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(s));a.observe(s),i.add(()=>a.disconnect())}return()=>i.dispose()},[e,r,t])}let bg=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),Zee=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var va=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(va||{}),D1=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(D1||{}),Jee=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Jee||{});function $$(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(bg)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Xee(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Zee)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var N$=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(N$||{});function D$(t,e=0){var n;return t===((n=Mf(t))==null?void 0:n.body)?!1:Ma(e,{0(){return t.matches(bg)},1(){let r=t;for(;r!==null;){if(r.matches(bg))return!0;r=r.parentElement}return!1}})}function x3e(t){hi().nextFrame(()=>{let e=D2(t);e&&xa(e)&&!D$(e,0)&&Bi(t)})}var Qee=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Qee||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Bi(t){t?.focus({preventScroll:!0})}let ete=["textarea","input"].join(",");function tte(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,ete))!=null?n:!1}function nte(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function A3e(t,e,n=t===null?document.body:gg(t)){return cu($$(n),e,{relativeTo:t})}function cu(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?gg(t[0]):document:gg(t),a=Array.isArray(t)?n?nte(t):t:e&64?Xee(t):$$(t);s.length>0&&a.length>1&&(a=a.filter(f=>!s.some(p=>p!=null&&"current"in p?p?.current===f:p===f))),r=r??i?.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(r))-1;if(e&4)return Math.max(0,a.indexOf(r))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=e&32?{preventScroll:!0}:{},u=0,d=a.length,h;do{if(u>=d||u+d<=0)return 0;let f=c+u;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=a[f],h?.focus(l),u+=o}while(h!==D2(h));return e&6&&tte(h)&&h.select(),2}function U$(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rte(){return/Android/gi.test(window.navigator.userAgent)}function l5(){return U$()||rte()}function Cp(t,e,n,r){let s=al(n);T.useEffect(()=>{if(!t)return;function i(a){s.current(a)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[t,e,r])}function B$(t,e,n,r){let s=al(n);T.useEffect(()=>{if(!t)return;function i(a){s.current(a)}return window.addEventListener(e,i,r),()=>window.removeEventListener(e,i,r)},[t,e,r])}const u5=30;function ste(t,e,n){let r=al(n),s=T.useCallback(function(o,c){if(o.defaultPrevented)return;let l=c(o);if(l===null||!l.getRootNode().contains(l)||!l.isConnected)return;let u=(function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]})(e);for(let d of u)if(d!==null&&(d.contains(l)||o.composed&&o.composedPath().includes(d)))return;return!D$(l,N$.Loose)&&l.tabIndex!==-1&&o.preventDefault(),r.current(o,l)},[r,e]),i=T.useRef(null);Cp(t,"pointerdown",o=>{var c,l;l5()||(i.current=((l=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:l[0])||o.target)},!0),Cp(t,"pointerup",o=>{if(l5()||!i.current)return;let c=i.current;return i.current=null,s(o,()=>c)},!0);let a=T.useRef({x:0,y:0});Cp(t,"touchstart",o=>{a.current.x=o.touches[0].clientX,a.current.y=o.touches[0].clientY},!0),Cp(t,"touchend",o=>{let c={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=u5||Math.abs(c.y-a.current.y)>=u5))return s(o,()=>xa(o.target)?o.target:null)},!0),B$(t,"blur",o=>s(o,()=>See(window.document.activeElement)?window.document.activeElement:null),!0)}function B2(...t){return T.useMemo(()=>Mf(...t),[...t])}function M$(t,e,n,r){let s=al(n);T.useEffect(()=>{t=t??window;function i(a){s.current(a)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function ite(t){return T.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function ate(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let a=e[s].call(n,...i);a&&(n=a,r.forEach(o=>o()))}}}function ote(){let t;return{before({doc:e}){var n;let r=e.documentElement,s=(n=e.defaultView)!=null?n:window;t=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,t-s);n.style(r,"paddingRight",`${i}px`)}}}function cte(){return U$()?{before({doc:t,d:e,meta:n}){function r(s){for(let i of n().containers)for(let a of i())if(a.contains(s))return!0;return!1}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=hi();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(xa(o.target))try{let c=o.target.closest("a");if(!c)return;let{hash:l}=new URL(c.href),u=t.querySelector(l);xa(u)&&!r(u)&&(a=u)}catch{}},!0),e.group(o=>{e.addEventListener(t,"touchstart",c=>{if(o.dispose(),xa(c.target)&&Aee(c.target))if(r(c.target)){let l=c.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;o.style(l,"overscrollBehavior","contain")}else o.style(c.target,"touchAction","none")})}),e.addEventListener(t,"touchmove",o=>{if(xa(o.target)){if(Iee(o.target))return;if(r(o.target)){let c=o.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),e.add(()=>{var o;let c=(o=window.scrollY)!=null?o:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function lte(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function d5(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let gc=ate(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:hi(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(e),r.computedMeta=d5(r.meta),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e),n.computedMeta=d5(n.meta)),this},SCROLL_PREVENT(t){let e={doc:t.doc,d:t.d,meta(){return t.computedMeta}},n=[cte(),ote(),lte()];n.forEach(({before:r})=>r?.(e)),n.forEach(({after:r})=>r?.(e))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});gc.subscribe(()=>{let t=gc.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&gc.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&gc.dispatch("TEARDOWN",n)}});function ute(t,e,n=()=>({containers:[]})){let r=ite(gc),s=e?r.get(e):void 0,i=s?s.count>0:!1;return jr(()=>{if(!(!e||!t))return gc.dispatch("PUSH",e,n),()=>gc.dispatch("POP",e,n)},[t,e]),i}function dte(t,e,n=()=>[document.body]){let r=Ff(t,"scroll-lock");ute(r,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function hte(t=0){let[e,n]=T.useState(t),r=T.useCallback(c=>n(c),[]),s=T.useCallback(c=>n(l=>l|c),[]),i=T.useCallback(c=>(e&c)===c,[e]),a=T.useCallback(c=>n(l=>l&~c),[]),o=T.useCallback(c=>n(l=>l^c),[]);return{flags:e,setFlag:r,addFlag:s,hasFlag:i,removeFlag:a,toggleFlag:o}}var fte={},h5,f5;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((h5=process==null?void 0:fte)==null?void 0:h5.NODE_ENV)==="test"&&typeof((f5=Element?.prototype)==null?void 0:f5.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var pte=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(pte||{});function mte(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function gte(t,e,n,r){let[s,i]=T.useState(n),{hasFlag:a,addFlag:o,removeFlag:c}=hte(t&&s?3:0),l=T.useRef(!1),u=T.useRef(!1),d=Py();return jr(()=>{var h;if(t){if(n&&i(!0),!e){n&&o(3);return}return(h=r?.start)==null||h.call(r,n),yte(e,{inFlight:l,prepare(){u.current?u.current=!1:u.current=l.current,l.current=!0,!u.current&&(n?(o(3),c(4)):(o(4),c(2)))},run(){u.current?n?(c(3),o(4)):(c(4),o(3)):n?c(1):o(1)},done(){var f;u.current&&vte(e)||(l.current=!1,c(7),n||i(!1),(f=r?.end)==null||f.call(r,n))}})}},[t,n,e,d]),t?[s,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function yte(t,{prepare:e,run:n,done:r,inFlight:s}){let i=hi();return bte(t,{prepare:e,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(wte(t,r))})}),i.dispose}function wte(t,e){var n,r;let s=hi();if(!t)return s.dispose;let i=!1;s.add(()=>{i=!0});let a=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(o=>o instanceof CSSTransition))!=null?r:[];return a.length===0?(e(),s.dispose):(Promise.allSettled(a.map(o=>o.finished)).then(()=>{i||e()}),s.dispose)}function bte(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function vte(t){var e,n;return((n=(e=t.getAnimations)==null?void 0:e.call(t))!=null?n:[]).some(r=>r instanceof CSSTransition&&r.playState!=="finished")}function M2(t,e){let n=T.useRef([]),r=Rt(t);T.useEffect(()=>{let s=[...n.current];for(let[i,a]of e.entries())if(n.current[i]!==a){let o=r(e,s);return n.current=e,o}},[r,...e])}let Ry=T.createContext(null);Ry.displayName="OpenClosedContext";var ti=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(ti||{});function $y(){return T.useContext(Ry)}function _te({value:t,children:e}){return Te.createElement(Ry.Provider,{value:t},e)}function Ete({children:t}){return Te.createElement(Ry.Provider,{value:null},t)}function xte(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Eo=[];xte(()=>{function t(e){if(!xa(e.target)||e.target===document.body||Eo[0]===e.target)return;let n=e.target;n=n.closest(bg),Eo.unshift(n??e.target),Eo=Eo.filter(r=>r!=null&&r.isConnected),Eo.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function L$(t){let e=Rt(t),n=T.useRef(!1);T.useEffect(()=>(n.current=!1,()=>{n.current=!0,Oy(()=>{n.current&&e()})}),[e])}let F$=T.createContext(!1);function Ate(){return T.useContext(F$)}function p5(t){return Te.createElement(F$.Provider,{value:t.force},t.children)}function Ste(t){let e=Ate(),n=T.useContext(z$),[r,s]=T.useState(()=>{var i;if(!e&&n!==null)return(i=n.current)!=null?i:null;if(Ui.isServer)return null;let a=t?.getElementById("headlessui-portal-root");if(a)return a;if(t===null)return null;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)});return T.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),T.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let j$=T.Fragment,Ite=Vr(function(t,e){let{ownerDocument:n=null,...r}=t,s=T.useRef(null),i=Yi(Tee(h=>{s.current=h}),e),a=B2(s.current),o=n??a,c=Ste(o),l=T.useContext(U1),u=Py(),d=Fs();return L$(()=>{var h;c&&c.childNodes.length<=0&&((h=c.parentElement)==null||h.removeChild(c))}),c?E$.createPortal(Te.createElement("div",{"data-headlessui-portal":"",ref:h=>{u.dispose(),l&&h&&u.add(l.register(h))}},d({ourProps:{ref:i},theirProps:r,slot:{},defaultTag:j$,name:"Portal"})),c):null});function Tte(t,e){let n=Yi(e),{enabled:r=!0,ownerDocument:s,...i}=t,a=Fs();return r?Te.createElement(Ite,{...i,ownerDocument:s,ref:n}):a({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:j$,name:"Portal"})}let Cte=T.Fragment,z$=T.createContext(null);function kte(t,e){let{target:n,...r}=t,s={ref:Yi(e)},i=Fs();return Te.createElement(z$.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:Cte,name:"Popover.Group"}))}let U1=T.createContext(null);function Ote(){let t=T.useContext(U1),e=T.useRef([]),n=Rt(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=Rt(i=>{let a=e.current.indexOf(i);a!==-1&&e.current.splice(a,1),t&&t.unregister(i)}),s=T.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,T.useMemo(()=>function({children:i}){return Te.createElement(U1.Provider,{value:s},i)},[s])]}let Pte=Vr(Tte),W$=Vr(kte),Rte=Object.assign(Pte,{Group:W$});function $te(t,e=typeof document<"u"?document.defaultView:null,n){let r=Ff(t,"escape");M$(e,"keydown",s=>{r&&(s.defaultPrevented||s.key===I$.Escape&&n(s))})}function Nte(){var t;let[e]=T.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=T.useState((t=e?.matches)!=null?t:!1);return jr(()=>{if(!e)return;function s(i){r(i.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),n}function Dte({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Rt(()=>{var s,i;let a=Mf(n),o=[];for(let c of t)c!==null&&(Oa(c)?o.push(c):"current"in c&&Oa(c.current)&&o.push(c.current));if(e!=null&&e.current)for(let c of e.current)o.push(c);for(let c of(s=a?.querySelectorAll("html > *, body > *"))!=null?s:[])c!==document.body&&c!==document.head&&Oa(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((i=n?.getRootNode())==null?void 0:i.host))||o.some(l=>c.contains(l))||o.push(c));return o});return{resolveContainers:r,contains:Rt(s=>r().some(i=>i.contains(s)))}}let q$=T.createContext(null);function m5({children:t,node:e}){let[n,r]=T.useState(null),s=V$(e??n);return Te.createElement(q$.Provider,{value:s},t,s===null&&Te.createElement($1,{features:wg.Hidden,ref:i=>{var a,o;if(i){for(let c of(o=(a=Mf(i))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?o:[])if(c!==document.body&&c!==document.head&&Oa(c)&&c!=null&&c.contains(i)){r(c);break}}}}))}function V$(t=null){var e;return(e=T.useContext(q$))!=null?e:t}function Ute(){let t=typeof document>"u";return"useSyncExternalStore"in iA?(e=>e.useSyncExternalStore)(iA)(()=>()=>{},()=>!1,()=>!t):!1}function Ny(){let t=Ute(),[e,n]=T.useState(Ui.isHandoffComplete);return e&&Ui.isHandoffComplete===!1&&n(!1),T.useEffect(()=>{e!==!0&&n(!0)},[e]),T.useEffect(()=>Ui.handoff(),[]),t?!1:e}function L2(){let t=T.useRef(!1);return jr(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Gd=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Gd||{});function Bte(){let t=T.useRef(0);return B$(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function H$(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)Oa(n.current)&&e.add(n.current);return e}let Mte="div";var lc=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(lc||{});function Lte(t,e){let n=T.useRef(null),r=Yi(n,e),{initialFocus:s,initialFocusFallback:i,containers:a,features:o=15,...c}=t;Ny()||(o=0);let l=B2(n.current);Wte(o,{ownerDocument:l});let u=qte(o,{ownerDocument:l,container:n,initialFocus:s,initialFocusFallback:i});Vte(o,{ownerDocument:l,container:n,containers:a,previousActiveElement:u});let d=Bte(),h=Rt(A=>{if(!Wi(n.current))return;let w=n.current;(y=>y())(()=>{Ma(d.current,{[Gd.Forwards]:()=>{cu(w,va.First,{skipElements:[A.relatedTarget,i]})},[Gd.Backwards]:()=>{cu(w,va.Last,{skipElements:[A.relatedTarget,i]})}})})}),f=Ff(!!(o&2),"focus-trap#tab-lock"),p=Py(),m=T.useRef(!1),g={ref:r,onKeyDown(A){A.key=="Tab"&&(m.current=!0,p.requestAnimationFrame(()=>{m.current=!1}))},onBlur(A){if(!(o&4))return;let w=H$(a);Wi(n.current)&&w.add(n.current);let y=A.relatedTarget;xa(y)&&y.dataset.headlessuiFocusGuard!=="true"&&(K$(w,y)||(m.current?cu(n.current,Ma(d.current,{[Gd.Forwards]:()=>va.Next,[Gd.Backwards]:()=>va.Previous})|va.WrapAround,{relativeTo:A.target}):xa(A.target)&&Bi(A.target)))}},_=Fs();return Te.createElement(Te.Fragment,null,f&&Te.createElement($1,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:wg.Focusable}),_({ourProps:g,theirProps:c,defaultTag:Mte,name:"FocusTrap"}),f&&Te.createElement($1,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:wg.Focusable}))}let Fte=Vr(Lte),jte=Object.assign(Fte,{features:lc});function zte(t=!0){let e=T.useRef(Eo.slice());return M2(([n],[r])=>{r===!0&&n===!1&&Oy(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Eo.slice())},[t,Eo,e]),Rt(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Wte(t,{ownerDocument:e}){let n=!!(t&8),r=zte(n);M2(()=>{n||fee(e?.body)&&Bi(r())},[n]),L$(()=>{n&&Bi(r())})}function qte(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:s}){let i=T.useRef(null),a=Ff(!!(t&1),"focus-trap#initial-focus"),o=L2();return M2(()=>{if(t===0)return;if(!a){s!=null&&s.current&&Bi(s.current);return}let c=n.current;c&&Oy(()=>{if(!o.current)return;let l=e?.activeElement;if(r!=null&&r.current){if(r?.current===l){i.current=l;return}}else if(c.contains(l)){i.current=l;return}if(r!=null&&r.current)Bi(r.current);else{if(t&16){if(cu(c,va.First|va.AutoFocus)!==D1.Error)return}else if(cu(c,va.First)!==D1.Error)return;if(s!=null&&s.current&&(Bi(s.current),e?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=e?.activeElement})},[s,a,t]),i}function Vte(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:s}){let i=L2(),a=!!(t&4);M$(e?.defaultView,"focus",o=>{if(!a||!i.current)return;let c=H$(r);Wi(n.current)&&c.add(n.current);let l=s.current;if(!l)return;let u=o.target;Wi(u)?K$(c,u)?(s.current=u,Bi(u)):(o.preventDefault(),o.stopPropagation(),Bi(l)):Bi(s.current)},!0)}function K$(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function G$(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||!oh((e=t.as)!=null?e:Z$)||Te.Children.count(t.children)===1}let Dy=T.createContext(null);Dy.displayName="TransitionContext";var Hte=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Hte||{});function Kte(){let t=T.useContext(Dy);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Gte(){let t=T.useContext(Uy);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Uy=T.createContext(null);Uy.displayName="NestingContext";function By(t){return"children"in t?By(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function Y$(t,e){let n=al(t),r=T.useRef([]),s=L2(),i=Py(),a=Rt((f,p=Po.Hidden)=>{let m=r.current.findIndex(({el:g})=>g===f);m!==-1&&(Ma(p,{[Po.Unmount](){r.current.splice(m,1)},[Po.Hidden](){r.current[m].state="hidden"}}),i.microTask(()=>{var g;!By(r)&&s.current&&((g=n.current)==null||g.call(n))}))}),o=Rt(f=>{let p=r.current.find(({el:m})=>m===f);return p?p.state!=="visible"&&(p.state="visible"):r.current.push({el:f,state:"visible"}),()=>a(f,Po.Unmount)}),c=T.useRef([]),l=T.useRef(Promise.resolve()),u=T.useRef({enter:[],leave:[]}),d=Rt((f,p,m)=>{c.current.splice(0),e&&(e.chains.current[p]=e.chains.current[p].filter(([g])=>g!==f)),e?.chains.current[p].push([f,new Promise(g=>{c.current.push(g)})]),e?.chains.current[p].push([f,new Promise(g=>{Promise.all(u.current[p].map(([_,A])=>A)).then(()=>g())})]),p==="enter"?l.current=l.current.then(()=>e?.wait.current).then(()=>m(p)):m(p)}),h=Rt((f,p,m)=>{Promise.all(u.current[p].splice(0).map(([g,_])=>_)).then(()=>{var g;(g=c.current.shift())==null||g()}).then(()=>m(p))});return T.useMemo(()=>({children:r,register:o,unregister:a,onStart:d,onStop:h,wait:l,chains:u}),[o,a,r,d,h,u,l])}let Z$=T.Fragment,J$=yg.RenderStrategy;function Yte(t,e){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:a,beforeLeave:o,afterLeave:c,enter:l,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:p,leaveTo:m,...g}=t,[_,A]=T.useState(null),w=T.useRef(null),y=G$(t),E=Yi(...y?[w,e,A]:e===null?[]:[e]),b=(n=g.unmount)==null||n?Po.Unmount:Po.Hidden,{show:S,appear:$,initial:P}=Kte(),[C,B]=T.useState(S?"visible":"hidden"),k=Gte(),{register:D,unregister:L}=k;jr(()=>D(w),[D,w]),jr(()=>{if(b===Po.Hidden&&w.current){if(S&&C!=="visible"){B("visible");return}return Ma(C,{hidden:()=>L(w),visible:()=>D(w)})}},[C,w,D,L,S,b]);let v=Ny();jr(()=>{if(y&&v&&C==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,C,v,y]);let x=P&&!$,O=$&&S&&P,U=T.useRef(!1),I=Y$(()=>{U.current||(B("hidden"),L(w))},k),F=Rt(fe=>{U.current=!0;let Ee=fe?"enter":"leave";I.onStart(w,Ee,ce=>{ce==="enter"?i?.():ce==="leave"&&o?.()})}),V=Rt(fe=>{let Ee=fe?"enter":"leave";U.current=!1,I.onStop(w,Ee,ce=>{ce==="enter"?a?.():ce==="leave"&&c?.()}),Ee==="leave"&&!By(I)&&(B("hidden"),L(w))});T.useEffect(()=>{y&&s||(F(S),V(S))},[S,y,s]);let q=!(!s||!y||!v||x),[,J]=gte(q,_,S,{start:F,end:V}),G=rc({ref:E,className:((r=R1(g.className,O&&l,O&&u,J.enter&&l,J.enter&&J.closed&&u,J.enter&&!J.closed&&d,J.leave&&f,J.leave&&!J.closed&&p,J.leave&&J.closed&&m,!J.transition&&S&&h))==null?void 0:r.trim())||void 0,...mte(J)}),K=0;C==="visible"&&(K|=ti.Open),C==="hidden"&&(K|=ti.Closed),S&&C==="hidden"&&(K|=ti.Opening),!S&&C==="visible"&&(K|=ti.Closing);let ue=Fs();return Te.createElement(Uy.Provider,{value:I},Te.createElement(_te,{value:K},ue({ourProps:G,theirProps:g,defaultTag:Z$,features:J$,visible:C==="visible",name:"Transition.Child"})))}function Zte(t,e){let{show:n,appear:r=!1,unmount:s=!0,...i}=t,a=T.useRef(null),o=G$(t),c=Yi(...o?[a,e]:e===null?[]:[e]);Ny();let l=$y();if(n===void 0&&l!==null&&(n=(l&ti.Open)===ti.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=T.useState(n?"visible":"hidden"),h=Y$(()=>{n||d("hidden")}),[f,p]=T.useState(!0),m=T.useRef([n]);jr(()=>{f!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))},[m,n]);let g=T.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);jr(()=>{n?d("visible"):!By(h)&&a.current!==null&&d("hidden")},[n,h]);let _={unmount:s},A=Rt(()=>{var E;f&&p(!1),(E=t.beforeEnter)==null||E.call(t)}),w=Rt(()=>{var E;f&&p(!1),(E=t.beforeLeave)==null||E.call(t)}),y=Fs();return Te.createElement(Uy.Provider,{value:h},Te.createElement(Dy.Provider,{value:g},y({ourProps:{..._,as:T.Fragment,children:Te.createElement(X$,{ref:c,..._,...i,beforeEnter:A,beforeLeave:w})},theirProps:{},defaultTag:T.Fragment,features:J$,visible:u==="visible",name:"Transition"})))}function Jte(t,e){let n=T.useContext(Dy)!==null,r=$y()!==null;return Te.createElement(Te.Fragment,null,!n&&r?Te.createElement(B1,{ref:e,...t}):Te.createElement(X$,{ref:e,...t}))}let B1=Vr(Zte),X$=Vr(Yte),Yh=Vr(Jte),Q$=Object.assign(B1,{Child:Yh,Root:B1});var Xte=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Xte||{}),Qte=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Qte||{});let ene={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},F2=T.createContext(null);F2.displayName="DialogContext";function My(t){let e=T.useContext(F2);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,My),n}return e}function tne(t,e){return Ma(e.type,ene,t,e)}let g5=Vr(function(t,e){let n=T.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:a,role:o="dialog",autoFocus:c=!0,__demoMode:l=!1,unmount:u=!1,...d}=t,h=T.useRef(!1);o=(function(){return o==="dialog"||o==="alertdialog"?o:(h.current||(h.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let f=$y();s===void 0&&f!==null&&(s=(f&ti.Open)===ti.Open);let p=T.useRef(null),m=Yi(p,e),g=B2(p.current),_=s?0:1,[A,w]=T.useReducer(tne,{titleId:null,descriptionId:null,panelRef:T.createRef()}),y=Rt(()=>i(!1)),E=Rt(J=>w({type:0,id:J})),b=Ny()?_===0:!1,[S,$]=Ote(),P={get current(){var J;return(J=A.panelRef.current)!=null?J:p.current}},C=V$(),{resolveContainers:B}=Dte({mainTreeNode:C,portals:S,defaultContainers:[P]}),k=f!==null?(f&ti.Closing)===ti.Closing:!1;Gee(l||k?!1:b,{allowed:Rt(()=>{var J,G;return[(G=(J=p.current)==null?void 0:J.closest("[data-headlessui-portal]"))!=null?G:null]}),disallowed:Rt(()=>{var J;return[(J=C?.closest("body > *:not(#headlessui-portal-root)"))!=null?J:null]})});let D=P$.get(null);jr(()=>{if(b)return D.actions.push(r),()=>D.actions.pop(r)},[D,r,b]);let L=R$(D,T.useCallback(J=>D.selectors.isTop(J,r),[D,r]));ste(L,B,J=>{J.preventDefault(),y()}),$te(L,g?.defaultView,J=>{J.preventDefault(),J.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),y()}),dte(l||k?!1:b,g,B),Yee(b,p,y);let[v,x]=Cee(),O=T.useMemo(()=>[{dialogState:_,close:y,setTitleId:E,unmount:u},A],[_,y,E,u,A]),U=Lf({open:_===0}),I={ref:m,id:r,role:o,tabIndex:-1,"aria-modal":l?void 0:_===0?!0:void 0,"aria-labelledby":A.titleId,"aria-describedby":v,unmount:u},F=!Nte(),V=lc.None;b&&!l&&(V|=lc.RestoreFocus,V|=lc.TabLock,c&&(V|=lc.AutoFocus),F&&(V|=lc.InitialFocus));let q=Fs();return Te.createElement(Ete,null,Te.createElement(p5,{force:!0},Te.createElement(Rte,null,Te.createElement(F2.Provider,{value:O},Te.createElement(W$,{target:p},Te.createElement(p5,{force:!1},Te.createElement(x,{slot:U},Te.createElement($,null,Te.createElement(jte,{initialFocus:a,initialFocusFallback:p,containers:B,features:V},Te.createElement(Nee,{value:y},q({ourProps:I,theirProps:d,slot:U,defaultTag:nne,features:rne,visible:_===0,name:"Dialog"})))))))))))}),nne="div",rne=yg.RenderStrategy|yg.Static;function sne(t,e){let{transition:n=!1,open:r,...s}=t,i=$y(),a=t.hasOwnProperty("open")||i!==null,o=t.hasOwnProperty("onClose");if(!a&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!s.static?Te.createElement(m5,null,Te.createElement(Q$,{show:r,transition:n,unmount:s.unmount},Te.createElement(g5,{ref:e,...s}))):Te.createElement(m5,null,Te.createElement(g5,{ref:e,open:r,...s}))}let ine="div";function ane(t,e){let n=T.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...i}=t,[{dialogState:a,unmount:o},c]=My("Dialog.Panel"),l=Yi(e,c.panelRef),u=Lf({open:a===0}),d=Rt(g=>{g.stopPropagation()}),h={ref:l,id:r,onClick:d},f=s?Yh:T.Fragment,p=s?{unmount:o}:{},m=Fs();return Te.createElement(f,{...p},m({ourProps:h,theirProps:i,slot:u,defaultTag:ine,name:"Dialog.Panel"}))}let one="div";function cne(t,e){let{transition:n=!1,...r}=t,[{dialogState:s,unmount:i}]=My("Dialog.Backdrop"),a=Lf({open:s===0}),o={ref:e,"aria-hidden":!0},c=n?Yh:T.Fragment,l=n?{unmount:i}:{},u=Fs();return Te.createElement(c,{...l},u({ourProps:o,theirProps:r,slot:a,defaultTag:one,name:"Dialog.Backdrop"}))}let lne="h2";function une(t,e){let n=T.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:i,setTitleId:a}]=My("Dialog.Title"),o=Yi(e);T.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=Lf({open:i===0}),l={ref:o,id:r};return Fs()({ourProps:l,theirProps:s,slot:c,defaultTag:lne,name:"Dialog.Title"})}let dne=Vr(sne),e4=Vr(ane);Vr(cne);let hne=Vr(une),fne=Object.assign(dne,{Panel:e4,Title:hne,Description:Ree});var kp={exports:{}},y5;function pne(){if(y5)return kp.exports;y5=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(E,b,S){return Function.prototype.apply.call(E,b,S)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:n=function(E){return Object.getOwnPropertyNames(E)};function r(y){console&&console.warn&&console.warn(y)}var s=Number.isNaN||function(E){return E!==E};function i(){i.init.call(this)}kp.exports=i,kp.exports.once=_,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(y){if(typeof y!="number"||y<0||s(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");a=y}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||s(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function c(y){return y._maxListeners===void 0?i.defaultMaxListeners:y._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(E){for(var b=[],S=1;S<arguments.length;S++)b.push(arguments[S]);var $=E==="error",P=this._events;if(P!==void 0)$=$&&P.error===void 0;else if(!$)return!1;if($){var C;if(b.length>0&&(C=b[0]),C instanceof Error)throw C;var B=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw B.context=C,B}var k=P[E];if(k===void 0)return!1;if(typeof k=="function")e(k,this,b);else for(var D=k.length,L=p(k,D),S=0;S<D;++S)e(L[S],this,b);return!0};function l(y,E,b,S){var $,P,C;if(o(b),P=y._events,P===void 0?(P=y._events=Object.create(null),y._eventsCount=0):(P.newListener!==void 0&&(y.emit("newListener",E,b.listener?b.listener:b),P=y._events),C=P[E]),C===void 0)C=P[E]=b,++y._eventsCount;else if(typeof C=="function"?C=P[E]=S?[b,C]:[C,b]:S?C.unshift(b):C.push(b),$=c(y),$>0&&C.length>$&&!C.warned){C.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=y,B.type=E,B.count=C.length,r(B)}return y}i.prototype.addListener=function(E,b){return l(this,E,b,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(E,b){return l(this,E,b,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(y,E,b){var S={fired:!1,wrapFn:void 0,target:y,type:E,listener:b},$=u.bind(S);return $.listener=b,S.wrapFn=$,$}i.prototype.once=function(E,b){return o(b),this.on(E,d(this,E,b)),this},i.prototype.prependOnceListener=function(E,b){return o(b),this.prependListener(E,d(this,E,b)),this},i.prototype.removeListener=function(E,b){var S,$,P,C,B;if(o(b),$=this._events,$===void 0)return this;if(S=$[E],S===void 0)return this;if(S===b||S.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete $[E],$.removeListener&&this.emit("removeListener",E,S.listener||b));else if(typeof S!="function"){for(P=-1,C=S.length-1;C>=0;C--)if(S[C]===b||S[C].listener===b){B=S[C].listener,P=C;break}if(P<0)return this;P===0?S.shift():m(S,P),S.length===1&&($[E]=S[0]),$.removeListener!==void 0&&this.emit("removeListener",E,B||b)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(E){var b,S,$;if(S=this._events,S===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete S[E]),this;if(arguments.length===0){var P=Object.keys(S),C;for($=0;$<P.length;++$)C=P[$],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=S[E],typeof b=="function")this.removeListener(E,b);else if(b!==void 0)for($=b.length-1;$>=0;$--)this.removeListener(E,b[$]);return this};function h(y,E,b){var S=y._events;if(S===void 0)return[];var $=S[E];return $===void 0?[]:typeof $=="function"?b?[$.listener||$]:[$]:b?g($):p($,$.length)}i.prototype.listeners=function(E){return h(this,E,!0)},i.prototype.rawListeners=function(E){return h(this,E,!1)},i.listenerCount=function(y,E){return typeof y.listenerCount=="function"?y.listenerCount(E):f.call(y,E)},i.prototype.listenerCount=f;function f(y){var E=this._events;if(E!==void 0){var b=E[y];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function p(y,E){for(var b=new Array(E),S=0;S<E;++S)b[S]=y[S];return b}function m(y,E){for(;E+1<y.length;E++)y[E]=y[E+1];y.pop()}function g(y){for(var E=new Array(y.length),b=0;b<E.length;++b)E[b]=y[b].listener||y[b];return E}function _(y,E){return new Promise(function(b,S){function $(C){y.removeListener(E,P),S(C)}function P(){typeof y.removeListener=="function"&&y.removeListener("error",$),b([].slice.call(arguments))}w(y,E,P,{once:!0}),E!=="error"&&A(y,$,{once:!0})})}function A(y,E,b){typeof y.on=="function"&&w(y,"error",E,b)}function w(y,E,b,S){if(typeof y.on=="function")S.once?y.once(E,b):y.on(E,b);else if(typeof y.addEventListener=="function")y.addEventListener(E,function $(P){S.once&&y.removeEventListener(E,$),b(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y)}return kp.exports}var ms=pne();const j2=Jc(ms);var w5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},mne=(function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t})(),gne=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),yne=(function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t})(),wne=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),bne=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),vne=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_ne=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,b5=3,Ene=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vne]],v5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function xne(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new bne:typeof navigator<"u"?Sne(navigator.userAgent):Tne()}function Ane(t){return t!==""&&Ene.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Sne(t){var e=Ane(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new wne;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<b5&&(s=w5(w5([],s,!0),Cne(b5-s.length),!0)):s=[];var i=s.join("."),a=Ine(t),o=_ne.exec(t);return o&&o[1]?new yne(n,i,a,o[1]):new mne(n,i,a)}function Ine(t){for(var e=0,n=v5.length;e<n;e++){var r=v5[e],s=r[0],i=r[1],a=i.exec(t);if(a)return s}return null}function Tne(){var t=typeof process<"u"&&process.version;return t?new gne(process.version.slice(1)):null}function Cne(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Pw={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M1=function(t,e){return M1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},M1(t,e)};function kne(t,e){M1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var L1=function(){return L1=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L1.apply(this,arguments)};function One(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Pne(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Rne(t,e){return function(n,r){e(n,r,t)}}function $ne(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Nne(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function Dne(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Une(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Bne(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function F1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function t4(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function Mne(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(t4(arguments[e]));return t}function Lne(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function Zh(t){return this instanceof Zh?(this.v=t,this):new Zh(t)}function Fne(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||o(h,f)})})}function o(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Zh?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){o("next",h)}function u(h){o("throw",h)}function d(h,f){h(f),i.shift(),i.length&&o(i[0][0],i[0][1])}}function jne(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(a){return(n=!n)?{value:Zh(t[s](a)),done:s==="return"}:i?i(a):a}:i}}function zne(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof F1=="function"?F1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,c){a=t[i](a),s(o,c,a.done,a.value)})}}function s(i,a,o,c){Promise.resolve(c).then(function(l){i({value:l,done:o})},a)}}function Wne(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function qne(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Vne(t){return t&&t.__esModule?t:{default:t}}function Hne(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Kne(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Gne=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return L1},__asyncDelegator:jne,__asyncGenerator:Fne,__asyncValues:zne,__await:Zh,__awaiter:Nne,__classPrivateFieldGet:Hne,__classPrivateFieldSet:Kne,__createBinding:Une,__decorate:Pne,__exportStar:Bne,__extends:kne,__generator:Dne,__importDefault:Vne,__importStar:qne,__makeTemplateObject:Wne,__metadata:$ne,__param:Rne,__read:t4,__rest:One,__spread:Mne,__spreadArrays:Lne,__values:F1},Symbol.toStringTag,{value:"Module"})),Ly=t3(Gne);var Rw={},md={},_5;function Yne(){if(_5)return md;_5=1,Object.defineProperty(md,"__esModule",{value:!0}),md.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return md.delay=t,md}var Jo={},$w={},Xo={},E5;function Zne(){return E5||(E5=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.ONE_THOUSAND=Xo.ONE_HUNDRED=void 0,Xo.ONE_HUNDRED=100,Xo.ONE_THOUSAND=1e3),Xo}var Nw={},x5;function Jne(){return x5||(x5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(Nw)),Nw}var A5;function n4(){return A5||(A5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ly;e.__exportStar(Zne(),t),e.__exportStar(Jne(),t)})($w)),$w}var S5;function Xne(){if(S5)return Jo;S5=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.fromMiliseconds=Jo.toMiliseconds=void 0;const t=n4();function e(r){return r*t.ONE_THOUSAND}Jo.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Jo.fromMiliseconds=n,Jo}var I5;function Qne(){return I5||(I5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ly;e.__exportStar(Yne(),t),e.__exportStar(Xne(),t)})(Rw)),Rw}var xl={},T5;function ere(){if(T5)return xl;T5=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return xl.Watch=t,xl.default=t,xl}var Dw={},gd={},C5;function tre(){if(C5)return gd;C5=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.IWatch=void 0;class t{}return gd.IWatch=t,gd}var k5;function nre(){return k5||(k5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ly.__exportStar(tre(),t)})(Dw)),Dw}var O5;function rre(){return O5||(O5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ly;e.__exportStar(Qne(),t),e.__exportStar(ere(),t),e.__exportStar(nre(),t),e.__exportStar(n4(),t)})(Pw)),Pw}var we=rre(),Ot={},P5;function r4(){if(P5)return Ot;P5=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.getLocalStorage=Ot.getLocalStorageOrThrow=Ot.getCrypto=Ot.getCryptoOrThrow=Ot.getLocation=Ot.getLocationOrThrow=Ot.getNavigator=Ot.getNavigatorOrThrow=Ot.getDocument=Ot.getDocumentOrThrow=Ot.getFromWindowOrThrow=Ot.getFromWindow=void 0;function t(h){let f;return typeof window<"u"&&typeof window[h]<"u"&&(f=window[h]),f}Ot.getFromWindow=t;function e(h){const f=t(h);if(!f)throw new Error(`${h} is not defined in Window`);return f}Ot.getFromWindowOrThrow=e;function n(){return e("document")}Ot.getDocumentOrThrow=n;function r(){return t("document")}Ot.getDocument=r;function s(){return e("navigator")}Ot.getNavigatorOrThrow=s;function i(){return t("navigator")}Ot.getNavigator=i;function a(){return e("location")}Ot.getLocationOrThrow=a;function o(){return t("location")}Ot.getLocation=o;function c(){return e("crypto")}Ot.getCryptoOrThrow=c;function l(){return t("crypto")}Ot.getCrypto=l;function u(){return e("localStorage")}Ot.getLocalStorageOrThrow=u;function d(){return t("localStorage")}return Ot.getLocalStorage=d,Ot}var La=r4(),yd={},R5;function sre(){if(R5)return yd;R5=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.getWindowMetadata=void 0;const t=r4();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const f=n.getElementsByTagName("link"),p=[];for(let m=0;m<f.length;m++){const g=f[m],_=g.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const A=g.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let w=r.protocol+"//"+r.host;if(A.indexOf("/")===0)w+=A;else{const y=r.pathname.split("/");y.pop();const E=y.join("/");w+=E+"/"+A}p.push(w)}else if(A.indexOf("//")===0){const w=r.protocol+A;p.push(w)}else p.push(A)}}return p}function i(...f){const p=n.getElementsByTagName("meta");for(let m=0;m<p.length;m++){const g=p[m],_=["itemprop","property","name"].map(A=>g.getAttribute(A)).filter(A=>A?f.includes(A):!1);if(_.length&&_){const A=g.getAttribute("content");if(A)return A}}return""}function a(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=n.title),f}function o(){return i("description","og:description","twitter:description","keywords")}const c=a(),l=o(),u=r.origin,d=s();return{description:l,url:u,icons:d,name:c}}return yd.getWindowMetadata=e,yd}var ire=sre();const are="0.1.1";function ore(){return are}class Yt extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof Yt){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof Yt&&n.cause.docsPath||n.docsPath,a=`https://oxlib.sh${s??""}`,o=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ore()}`}),this.cause=n.cause,this.details=r,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return s4(this,e)}}function s4(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?s4(t.cause,e):e?null:t}const Al=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cre(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qc(t,...e){if(!cre(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function lre(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Jh(t.outputLen),Jh(t.blockLen)}function $u(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function i4(t,e){qc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ure(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Nu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Uw(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function bi(t,e){return t<<32-e|t>>>e}const dre=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function hre(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function fre(t){for(let e=0;e<t.length;e++)t[e]=hre(t[e]);return t}const $5=dre?t=>t:fre;function pre(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Fy(t){return typeof t=="string"&&(t=pre(t)),qc(t),t}function mre(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];qc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class z2{}function a4(t){const e=r=>t().update(Fy(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gre(t=32){if(Al&&typeof Al.getRandomValues=="function")return Al.getRandomValues(new Uint8Array(t));if(Al&&typeof Al.randomBytes=="function")return Uint8Array.from(Al.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function yre(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}function wre(t,e,n){return t&e^~t&n}function bre(t,e,n){return t&e^t&n^e&n}class vre extends z2{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Uw(this.buffer)}update(e){$u(this),e=Fy(e),qc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Uw(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$u(this),i4(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,Nu(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;yre(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Uw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const eo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Op=BigInt(2**32-1),N5=BigInt(32);function _re(t,e=!1){return e?{h:Number(t&Op),l:Number(t>>N5&Op)}:{h:Number(t>>N5&Op)|0,l:Number(t&Op)|0}}function Ere(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=_re(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const xre=(t,e,n)=>t<<n|e>>>32-n,Are=(t,e,n)=>e<<n|t>>>32-n,Sre=(t,e,n)=>e<<n-32|t>>>64-n,Ire=(t,e,n)=>t<<n-32|e>>>64-n,Tre=BigInt(0),wd=BigInt(1),Cre=BigInt(2),kre=BigInt(7),Ore=BigInt(256),Pre=BigInt(113),o4=[],c4=[],l4=[];for(let t=0,e=wd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],o4.push(2*(5*r+n)),c4.push((t+1)*(t+2)/2%64);let s=Tre;for(let i=0;i<7;i++)e=(e<<wd^(e>>kre)*Pre)%Ore,e&Cre&&(s^=wd<<(wd<<BigInt(i))-wd);l4.push(s)}const u4=Ere(l4,!0),Rre=u4[0],$re=u4[1],D5=(t,e,n)=>n>32?Sre(t,e,n):xre(t,e,n),U5=(t,e,n)=>n>32?Ire(t,e,n):Are(t,e,n);function Nre(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=n[c],u=n[c+1],d=D5(l,u,1)^n[o],h=U5(l,u,1)^n[o+1];for(let f=0;f<50;f+=10)t[a+f]^=d,t[a+f+1]^=h}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=c4[a],c=D5(s,i,o),l=U5(s,i,o),u=o4[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Rre[r],t[1]^=$re[r]}Nu(n)}class W2 extends z2{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Jh(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ure(this.state)}clone(){return this._cloneInto()}keccak(){$5(this.state32),Nre(this.state32,this.rounds),$5(this.state32),this.posOut=0,this.pos=0}update(e){$u(this),e=Fy(e),qc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$u(this,!1),qc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Jh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(i4(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Nu(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new W2(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Dre=(t,e,n)=>a4(()=>new W2(e,t,n)),Ure=Dre(1,136,256/8),Bre=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),to=new Uint32Array(64);class Mre extends vre{constructor(e=32){super(64,e,8,!1),this.A=eo[0]|0,this.B=eo[1]|0,this.C=eo[2]|0,this.D=eo[3]|0,this.E=eo[4]|0,this.F=eo[5]|0,this.G=eo[6]|0,this.H=eo[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)to[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=to[d-15],f=to[d-2],p=bi(h,7)^bi(h,18)^h>>>3,m=bi(f,17)^bi(f,19)^f>>>10;to[d]=m+to[d-7]+p+to[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=bi(o,6)^bi(o,11)^bi(o,25),f=u+h+wre(o,c,l)+Bre[d]+to[d]|0,m=(bi(r,2)^bi(r,13)^bi(r,22))+bre(r,s,i)|0;u=l,l=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){Nu(to)}destroy(){this.set(0,0,0,0,0,0,0,0),Nu(this.buffer)}}const Lre=a4(()=>new Mre);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q2=BigInt(0),j1=BigInt(1);function jf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function V2(t){if(!jf(t))throw new Error("Uint8Array expected")}function Xh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Pp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function d4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?q2:BigInt("0x"+t)}const h4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Fre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qh(t){if(V2(t),h4)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Fre[t[n]];return e}const ea={_0:48,_9:57,A:65,F:70,a:97,f:102};function B5(t){if(t>=ea._0&&t<=ea._9)return t-ea._0;if(t>=ea.A&&t<=ea.F)return t-(ea.A-10);if(t>=ea.a&&t<=ea.f)return t-(ea.a-10)}function vg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(h4)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=B5(t.charCodeAt(i)),o=B5(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function Tc(t){return d4(Qh(t))}function f4(t){return V2(t),d4(Qh(Uint8Array.from(t).reverse()))}function zf(t,e){return vg(t.toString(16).padStart(e*2,"0"))}function p4(t,e){return zf(t,e).reverse()}function Cs(t,e,n){let r;if(typeof e=="string")try{r=vg(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(jf(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function _g(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];V2(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Bw=t=>typeof t=="bigint"&&q2<=t;function H2(t,e,n){return Bw(t)&&Bw(e)&&Bw(n)&&e<=t&&t<n}function lu(t,e,n,r){if(!H2(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function jre(t){let e;for(e=0;t>q2;t>>=j1,e+=1);return e}const jy=t=>(j1<<BigInt(t))-j1,Mw=t=>new Uint8Array(t),M5=t=>Uint8Array.from(t);function zre(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Mw(t),s=Mw(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...d)=>n(s,r,...d),c=(d=Mw(0))=>{s=o(M5([0]),d),r=o(),d.length!==0&&(s=o(M5([1]),d),r=o())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=o();const f=r.slice();h.push(f),d+=r.length}return _g(...h)};return(d,h)=>{a(),c(d);let f;for(;!(f=h(l()));)c();return a(),f}}const Wre={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jf(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function zy(t,e,n={}){const r=(s,i,a)=>{const o=Wre[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!o(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function L5(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}function qre(t,e){if(W5(t)>e)throw new dse({givenSize:W5(t),maxSize:e})}const ta={zero:48,nine:57,A:65,F:70,a:97,f:102};function F5(t){if(t>=ta.zero&&t<=ta.nine)return t-ta.zero;if(t>=ta.A&&t<=ta.F)return t-(ta.A-10);if(t>=ta.a&&t<=ta.f)return t-(ta.a-10)}function Vre(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new hse({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const a=n==="right";s[a?i:r-i-1]=t[a?i:t.length-i-1]}return s}function m4(t,e){if(Mo(t)>e)throw new tse({givenSize:Mo(t),maxSize:e})}function Hre(t,e){if(typeof e=="number"&&e>0&&e>Mo(t)-1)throw new w4({offset:e,position:"start",size:Mo(t)})}function Kre(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Mo(t)!==n-e)throw new w4({offset:n,position:"end",size:Mo(t)})}function g4(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new nse({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Gre="#__bigint";function K2(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Gre:s,n)}const Yre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zre(t,e={}){const{strict:n=!1}=e;if(!t)throw new j5(t);if(typeof t!="string")throw new j5(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new z5(t);if(!t.startsWith("0x"))throw new z5(t)}function Jre(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function G2(t){return t instanceof Uint8Array?Eg(t):Array.isArray(t)?Eg(new Uint8Array(t)):t}function Eg(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Yre[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(m4(r,e.size),y4(r,e.size)):r}function Lw(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const l=typeof t=="bigint"?"n":"";throw new ese({max:i?`${i}${l}`:void 0,min:`${a}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Xre(c,r):c}function Xre(t,e){return g4(t,{dir:"left",size:e})}function y4(t,e){return g4(t,{dir:"right",size:e})}function fa(t,e,n,r={}){const{strict:s}=r;Hre(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Kre(i,e,n),i}function Mo(t){return Math.ceil((t.length-2)/2)}function Qre(t,e={}){const{strict:n=!1}=e;try{return Zre(t,{strict:n}),!0}catch{return!1}}class ese extends Yt{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class j5 extends Yt{constructor(e){super(`Value \`${typeof e=="object"?K2(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class z5 extends Yt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let tse=class extends Yt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class w4 extends Yt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let nse=class extends Yt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const rse=new TextEncoder;function sse(t){if(!(t instanceof Uint8Array)){if(!t)throw new Rp(t);if(typeof t!="object")throw new Rp(t);if(!("BYTES_PER_ELEMENT"in t))throw new Rp(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new Rp(t)}}function ise(t){return t instanceof Uint8Array?t:typeof t=="string"?ose(t):ase(t)}function ase(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function ose(t,e={}){const{size:n}=e;let r=t;n&&(m4(t,n),r=y4(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,a=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const l=F5(s.charCodeAt(c++)),u=F5(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Yt(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[o]=l*16+u}return a}function cse(t,e={}){const{size:n}=e,r=rse.encode(t);return typeof n=="number"?(qre(r,n),lse(r,n)):r}function lse(t,e){return Vre(t,{dir:"right",size:e})}function W5(t){return t.length}function use(t){try{return sse(t),!0}catch{return!1}}class Rp extends Yt{constructor(e){super(`Value \`${typeof e=="object"?K2(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class dse extends Yt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class hse extends Yt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function b4(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=Ure(ise(t));return n==="Bytes"?r:Eg(r)}class fse extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const pse={checksum:new fse(8192)},Fw=pse.checksum;function v4(t,e={}){const{compressed:n}=e,{prefix:r,x:s,y:i}=t;if(n===!1||typeof s=="bigint"&&typeof i=="bigint"){if(r!==4)throw new q5({prefix:r,cause:new vse});return}if(n===!0||typeof s=="bigint"&&typeof i>"u"){if(r!==3&&r!==2)throw new q5({prefix:r,cause:new bse});return}throw new wse({publicKey:t})}function mse(t){const e=(()=>{if(Qre(t))return _4(t);if(use(t))return gse(t);const{prefix:n,x:r,y:s}=t;return typeof r=="bigint"&&typeof s=="bigint"?{prefix:n??4,x:r,y:s}:{prefix:n,x:r}})();return v4(e),e}function gse(t){return _4(Eg(t))}function _4(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new _se({publicKey:t});if(t.length===130){const r=BigInt(fa(t,0,32)),s=BigInt(fa(t,32,64));return{prefix:4,x:r,y:s}}if(t.length===132){const r=Number(fa(t,0,1)),s=BigInt(fa(t,1,33)),i=BigInt(fa(t,33,65));return{prefix:r,x:s,y:i}}const e=Number(fa(t,0,1)),n=BigInt(fa(t,1,33));return{prefix:e,x:n}}function yse(t,e={}){v4(t);const{prefix:n,x:r,y:s}=t,{includePrefix:i=!0}=e;return Jre(i?Lw(n,{size:1}):"0x",Lw(r,{size:32}),typeof s=="bigint"?Lw(s,{size:32}):"0x")}class wse extends Yt{constructor({publicKey:e}){super(`Value \`${K2(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class q5 extends Yt{constructor({prefix:e,cause:n}){super(`Prefix "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class bse extends Yt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class vse extends Yt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let _se=class extends Yt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Mo(G2(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const Ese=/^0x[a-fA-F0-9]{40}$/;function E4(t,e={}){const{strict:n=!0}=e;if(!Ese.test(t))throw new V5({address:t,cause:new Sse});if(n){if(t.toLowerCase()===t)return;if(x4(t)!==t)throw new V5({address:t,cause:new Ise})}}function x4(t){if(Fw.has(t))return Fw.get(t);E4(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=b4(cse(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return Fw.set(t,s),s}function xse(t,e={}){const{checksum:n=!1}=e;return E4(t),n?x4(t):t}function Ase(t,e={}){const n=b4(`0x${yse(t).slice(4)}`).substring(26);return xse(`0x${n}`,e)}class V5 extends Yt{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Sse extends Yt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Ise extends Yt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class A4 extends z2{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,lre(e);const r=Fy(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Nu(i)}update(e){return $u(this),this.iHash.update(e),this}digestInto(e){$u(this),qc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const S4=(t,e,n)=>new A4(t,e).update(n).digest();S4.create=(t,e)=>new A4(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mr=BigInt(0),vr=BigInt(1),yc=BigInt(2),Tse=BigInt(3),I4=BigInt(4),T4=BigInt(5),C4=BigInt(8);function Nr(t,e){const n=t%e;return n>=Mr?n:e+n}function _s(t,e,n){let r=t;for(;e-- >Mr;)r*=r,r%=n;return r}function z1(t,e){if(t===Mr)throw new Error("invert: expected non-zero number");if(e<=Mr)throw new Error("invert: expected positive modulus, got "+e);let n=Nr(t,e),r=e,s=Mr,i=vr;for(;n!==Mr;){const o=r/n,c=r%n,l=s-i*o;r=n,n=c,s=i,i=l}if(r!==vr)throw new Error("invert: does not exist");return Nr(s,e)}function k4(t,e){const n=(t.ORDER+vr)/I4,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Cse(t,e){const n=(t.ORDER-T4)/C4,r=t.mul(e,yc),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,yc),s),o=t.mul(i,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function kse(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-vr,n=0;for(;e%yc===Mr;)e/=yc,n++;let r=yc;const s=Y2(t);for(;H5(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return k4;let i=s.pow(r,e);const a=(e+vr)/yc;return function(c,l){if(c.is0(l))return l;if(H5(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,a);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(p++,m=c.sqr(m),p===u)throw new Error("Cannot find square root");const g=vr<<BigInt(u-p-1),_=c.pow(d,g);u=p,d=c.sqr(_),h=c.mul(h,d),f=c.mul(f,_)}return f}}function Ose(t){return t%I4===Tse?k4:t%C4===T4?Cse:kse(t)}const Pse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Pse.reduce((r,s)=>(r[s]="function",r),e);return zy(t,n)}function $se(t,e,n){if(n<Mr)throw new Error("invalid exponent, negatives unsupported");if(n===Mr)return t.ONE;if(n===vr)return e;let r=t.ONE,s=e;for(;n>Mr;)n&vr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=vr;return r}function O4(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}function H5(t,e){const n=(t.ORDER-vr)/yc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function P4(t,e){e!==void 0&&Jh(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Y2(t,e,n=!1,r={}){if(t<=Mr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=P4(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:jy(s),ZERO:Mr,ONE:vr,create:c=>Nr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Mr<=c&&c<t},is0:c=>c===Mr,isOdd:c=>(c&vr)===vr,neg:c=>Nr(-c,t),eql:(c,l)=>c===l,sqr:c=>Nr(c*c,t),add:(c,l)=>Nr(c+l,t),sub:(c,l)=>Nr(c-l,t),mul:(c,l)=>Nr(c*l,t),pow:(c,l)=>$se(o,c,l),div:(c,l)=>Nr(c*z1(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>z1(c,t),sqrt:r.sqrt||(c=>(a||(a=Ose(t)),a(o,c))),toBytes:c=>n?p4(c,i):zf(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?f4(c):Tc(c)},invertBatch:c=>O4(o,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(o)}function R4(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $4(t){const e=R4(t);return e+Math.ceil(e/2)}function Nse(t,e,n=!1){const r=t.length,s=R4(e),i=$4(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?f4(t):Tc(t),o=Nr(a,e-vr)+vr;return n?p4(o,s):zf(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K5=BigInt(0),W1=BigInt(1);function jw(t,e){const n=e.negate();return t?n:e}function N4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function zw(t,e){N4(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=jy(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function G5(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),c=t>>a;o>r&&(o-=i,c+=W1);const l=e*r,u=l+Math.abs(o)-1,d=o===0,h=o<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Dse(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Use(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Ww=new WeakMap,D4=new WeakMap;function qw(t){return D4.get(t)||1}function Bse(t,e){return{constTimeNegate:jw,hasPrecomputes(n){return qw(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>K5;)r&W1&&(s=s.add(i)),i=i.double(),r>>=W1;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=zw(r,e),a=[];let o=n,c=o;for(let l=0;l<s;l++){c=o,a.push(c);for(let u=1;u<i;u++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(n,r,s){let i=t.ZERO,a=t.BASE;const o=zw(n,e);for(let c=0;c<o.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=G5(s,c,o);s=l,d?a=a.add(jw(f,r[p])):i=i.add(jw(h,r[u]))}return{p:i,f:a}},wNAFUnsafe(n,r,s,i=t.ZERO){const a=zw(n,e);for(let o=0;o<a.windows&&s!==K5;o++){const{nextN:c,offset:l,isZero:u,isNeg:d}=G5(s,o,a);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return i},getPrecomputes(n,r,s){let i=Ww.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Ww.set(r,s(i))),i},wNAFCached(n,r,s){const i=qw(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=qw(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){N4(r,e),D4.set(n,r),Ww.delete(n)}}}function Mse(t,e,n,r){Dse(n,t),Use(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=jre(BigInt(s));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const l=jy(c),u=new Array(Number(l)+1).fill(a),d=Math.floor((e.BITS-1)/c)*c;let h=a;for(let f=d;f>=0;f-=c){u.fill(a);for(let m=0;m<i;m++){const g=r[m],_=Number(g>>BigInt(f)&l);u[_]=u[_].add(n[m])}let p=a;for(let m=u.length-1,g=a;m>0;m--)g=g.add(u[m]),p=p.add(g);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function U4(t){return Rse(t.Fp),zy(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...P4(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Y5(t){t.lowS!==void 0&&Xh("lowS",t.lowS),t.prehash!==void 0&&Xh("prehash",t.prehash)}function Lse(t){const e=U4(t);zy(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class Fse extends Error{constructor(e=""){super(e)}}const ya={Err:Fse,_tlv:{encode:(t,e)=>{const{Err:n}=ya;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Pp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Pp(s.length/2|128):"";return Pp(t)+i+s+e},decode(t,e){const{Err:n}=ya;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=ya;if(t<_a)throw new e("integer: negative integers are not allowed");let n=Pp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ya;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Tc(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ya,s=Cs("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ya,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Vw(t,e){return Qh(zf(t,e))}const _a=BigInt(0),Bn=BigInt(1);BigInt(2);const Hw=BigInt(3),jse=BigInt(4);function zse(t){const e=Lse(t),{Fp:n}=e,r=Y2(e.n,e.nBitLength),s=e.toBytes||((w,y,E)=>{const b=y.toAffine();return _g(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(w=>{const y=w.subarray(1),E=n.fromBytes(y.subarray(0,n.BYTES)),b=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:E,y:b}});function a(w){const{a:y,b:E}=e,b=n.sqr(w),S=n.mul(b,w);return n.add(n.add(S,n.mul(w,y)),E)}function o(w,y){const E=n.sqr(y),b=a(w);return n.eql(E,b)}if(!o(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,Hw),jse),l=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function u(w){return H2(w,Bn,e.n)}function d(w){const{allowedPrivateKeyLengths:y,nByteLength:E,wrapPrivateKey:b,n:S}=e;if(y&&typeof w!="bigint"){if(jf(w)&&(w=Qh(w)),typeof w!="string"||!y.includes(w.length))throw new Error("invalid private key");w=w.padStart(E*2,"0")}let $;try{$=typeof w=="bigint"?w:Tc(Cs("private key",w,E))}catch{throw new Error("invalid private key, expected hex or "+E+" bytes, got "+typeof w)}return b&&($=Nr($,S)),lu("private key",$,Bn,S),$}function h(w){if(!(w instanceof m))throw new Error("ProjectivePoint expected")}const f=L5((w,y)=>{const{px:E,py:b,pz:S}=w;if(n.eql(S,n.ONE))return{x:E,y:b};const $=w.is0();y==null&&(y=$?n.ONE:n.inv(S));const P=n.mul(E,y),C=n.mul(b,y),B=n.mul(S,y);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:P,y:C}}),p=L5(w=>{if(w.is0()){if(e.allowInfinityPoint&&!n.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:y,y:E}=w.toAffine();if(!n.isValid(y)||!n.isValid(E))throw new Error("bad point: x or y not FE");if(!o(y,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(y,E,b){if(y==null||!n.isValid(y))throw new Error("x required");if(E==null||!n.isValid(E)||n.is0(E))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");this.px=y,this.py=E,this.pz=b,Object.freeze(this)}static fromAffine(y){const{x:E,y:b}=y||{};if(!y||!n.isValid(E)||!n.isValid(b))throw new Error("invalid affine point");if(y instanceof m)throw new Error("projective point not allowed");const S=$=>n.eql($,n.ZERO);return S(E)&&S(b)?m.ZERO:new m(E,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const E=O4(n,y.map(b=>b.pz));return y.map((b,S)=>b.toAffine(E[S])).map(m.fromAffine)}static fromHex(y){const E=m.fromAffine(i(Cs("pointHex",y)));return E.assertValidity(),E}static fromPrivateKey(y){return m.BASE.multiply(d(y))}static msm(y,E){return Mse(m,r,y,E)}_setWindowSize(y){A.setWindowSize(this,y)}assertValidity(){p(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){h(y);const{px:E,py:b,pz:S}=this,{px:$,py:P,pz:C}=y,B=n.eql(n.mul(E,C),n.mul($,S)),k=n.eql(n.mul(b,C),n.mul(P,S));return B&&k}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:E}=e,b=n.mul(E,Hw),{px:S,py:$,pz:P}=this;let C=n.ZERO,B=n.ZERO,k=n.ZERO,D=n.mul(S,S),L=n.mul($,$),v=n.mul(P,P),x=n.mul(S,$);return x=n.add(x,x),k=n.mul(S,P),k=n.add(k,k),C=n.mul(y,k),B=n.mul(b,v),B=n.add(C,B),C=n.sub(L,B),B=n.add(L,B),B=n.mul(C,B),C=n.mul(x,C),k=n.mul(b,k),v=n.mul(y,v),x=n.sub(D,v),x=n.mul(y,x),x=n.add(x,k),k=n.add(D,D),D=n.add(k,D),D=n.add(D,v),D=n.mul(D,x),B=n.add(B,D),v=n.mul($,P),v=n.add(v,v),D=n.mul(v,x),C=n.sub(C,D),k=n.mul(v,L),k=n.add(k,k),k=n.add(k,k),new m(C,B,k)}add(y){h(y);const{px:E,py:b,pz:S}=this,{px:$,py:P,pz:C}=y;let B=n.ZERO,k=n.ZERO,D=n.ZERO;const L=e.a,v=n.mul(e.b,Hw);let x=n.mul(E,$),O=n.mul(b,P),U=n.mul(S,C),I=n.add(E,b),F=n.add($,P);I=n.mul(I,F),F=n.add(x,O),I=n.sub(I,F),F=n.add(E,S);let V=n.add($,C);return F=n.mul(F,V),V=n.add(x,U),F=n.sub(F,V),V=n.add(b,S),B=n.add(P,C),V=n.mul(V,B),B=n.add(O,U),V=n.sub(V,B),D=n.mul(L,F),B=n.mul(v,U),D=n.add(B,D),B=n.sub(O,D),D=n.add(O,D),k=n.mul(B,D),O=n.add(x,x),O=n.add(O,x),U=n.mul(L,U),F=n.mul(v,F),O=n.add(O,U),U=n.sub(x,U),U=n.mul(L,U),F=n.add(F,U),x=n.mul(O,F),k=n.add(k,x),x=n.mul(V,F),B=n.mul(I,B),B=n.sub(B,x),x=n.mul(I,O),D=n.mul(V,D),D=n.add(D,x),new m(B,k,D)}subtract(y){return this.add(y.negate())}is0(){return this.equals(m.ZERO)}wNAF(y){return A.wNAFCached(this,y,m.normalizeZ)}multiplyUnsafe(y){const{endo:E,n:b}=e;lu("scalar",y,_a,b);const S=m.ZERO;if(y===_a)return S;if(this.is0()||y===Bn)return this;if(!E||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,y,m.normalizeZ);let{k1neg:$,k1:P,k2neg:C,k2:B}=E.splitScalar(y),k=S,D=S,L=this;for(;P>_a||B>_a;)P&Bn&&(k=k.add(L)),B&Bn&&(D=D.add(L)),L=L.double(),P>>=Bn,B>>=Bn;return $&&(k=k.negate()),C&&(D=D.negate()),D=new m(n.mul(D.px,E.beta),D.py,D.pz),k.add(D)}multiply(y){const{endo:E,n:b}=e;lu("scalar",y,Bn,b);let S,$;if(E){const{k1neg:P,k1:C,k2neg:B,k2:k}=E.splitScalar(y);let{p:D,f:L}=this.wNAF(C),{p:v,f:x}=this.wNAF(k);D=A.constTimeNegate(P,D),v=A.constTimeNegate(B,v),v=new m(n.mul(v.px,E.beta),v.py,v.pz),S=D.add(v),$=L.add(x)}else{const{p:P,f:C}=this.wNAF(y);S=P,$=C}return m.normalizeZ([S,$])[0]}multiplyAndAddUnsafe(y,E,b){const S=m.BASE,$=(C,B)=>B===_a||B===Bn||!C.equals(S)?C.multiplyUnsafe(B):C.multiply(B),P=$(this,E).add($(y,b));return P.is0()?void 0:P}toAffine(y){return f(this,y)}isTorsionFree(){const{h:y,isTorsionFree:E}=e;if(y===Bn)return!0;if(E)return E(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:E}=e;return y===Bn?this:E?E(m,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return Xh("isCompressed",y),this.assertValidity(),s(m,this,y)}toHex(y=!0){return Xh("isCompressed",y),Qh(this.toRawBytes(y))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const{endo:g,nBitLength:_}=e,A=Bse(m,g?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:d,weierstrassEquation:a,isWithinCurveOrder:u}}function Wse(t){const e=U4(t);return zy(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function qse(t){const e=Wse(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,a=n.BYTES+1,o=2*n.BYTES+1;function c(v){return Nr(v,r)}function l(v){return z1(v,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=zse({...e,toBytes(v,x,O){const U=x.toAffine(),I=n.toBytes(U.x),F=_g;return Xh("isCompressed",O),O?F(Uint8Array.from([x.hasEvenY()?2:3]),I):F(Uint8Array.from([4]),I,n.toBytes(U.y))},fromBytes(v){const x=v.length,O=v[0],U=v.subarray(1);if(x===a&&(O===2||O===3)){const I=Tc(U);if(!H2(I,Bn,n.ORDER))throw new Error("Point is not on curve");const F=h(I);let V;try{V=n.sqrt(F)}catch(G){const K=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+K)}const q=(V&Bn)===Bn;return(O&1)===1!==q&&(V=n.neg(V)),{x:I,y:V}}else if(x===o&&O===4){const I=n.fromBytes(U.subarray(0,n.BYTES)),F=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:I,y:F}}else{const I=a,F=o;throw new Error("invalid Point, expected length of "+I+", or uncompressed "+F+", got "+x)}}});function p(v){const x=r>>Bn;return v>x}function m(v){return p(v)?c(-v):v}const g=(v,x,O)=>Tc(v.slice(x,O));class _{constructor(x,O,U){lu("r",x,Bn,r),lu("s",O,Bn,r),this.r=x,this.s=O,U!=null&&(this.recovery=U),Object.freeze(this)}static fromCompact(x){const O=s;return x=Cs("compactSignature",x,O*2),new _(g(x,0,O),g(x,O,2*O))}static fromDER(x){const{r:O,s:U}=ya.toSig(Cs("DER",x));return new _(O,U)}assertValidity(){}addRecoveryBit(x){return new _(this.r,this.s,x)}recoverPublicKey(x){const{r:O,s:U,recovery:I}=this,F=S(Cs("msgHash",x));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const V=I===2||I===3?O+e.n:O;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=(I&1)===0?"02":"03",J=u.fromHex(q+Vw(V,n.BYTES)),G=l(V),K=c(-F*G),ue=c(U*G),fe=u.BASE.multiplyAndAddUnsafe(J,K,ue);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return vg(this.toDERHex())}toDERHex(){return ya.hexFromSig(this)}toCompactRawBytes(){return vg(this.toCompactHex())}toCompactHex(){const x=s;return Vw(this.r,x)+Vw(this.s,x)}}const A={isValidPrivateKey(v){try{return d(v),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const v=$4(e.n);return Nse(e.randomBytes(v),e.n)},precompute(v=8,x=u.BASE){return x._setWindowSize(v),x.multiply(BigInt(3)),x}};function w(v,x=!0){return u.fromPrivateKey(v).toRawBytes(x)}function y(v){if(typeof v=="bigint")return!1;if(v instanceof u)return!0;const O=Cs("key",v).length,U=n.BYTES,I=U+1,F=2*U+1;if(!(e.allowedPrivateKeyLengths||s===I))return O===I||O===F}function E(v,x,O=!0){if(y(v)===!0)throw new Error("first arg must be private key");if(y(x)===!1)throw new Error("second arg must be public key");return u.fromHex(x).multiply(d(v)).toRawBytes(O)}const b=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const x=Tc(v),O=v.length*8-i;return O>0?x>>BigInt(O):x},S=e.bits2int_modN||function(v){return c(b(v))},$=jy(i);function P(v){return lu("num < 2^"+i,v,_a,$),zf(v,s)}function C(v,x,O=B){if(["recovered","canonical"].some(ce=>ce in O))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:I}=e;let{lowS:F,prehash:V,extraEntropy:q}=O;F==null&&(F=!0),v=Cs("msgHash",v),Y5(O),V&&(v=Cs("prehashed msgHash",U(v)));const J=S(v),G=d(x),K=[P(G),P(J)];if(q!=null&&q!==!1){const ce=q===!0?I(n.BYTES):q;K.push(Cs("extraEntropy",ce))}const ue=_g(...K),fe=J;function Ee(ce){const oe=b(ce);if(!f(oe))return;const X=l(oe),Re=u.BASE.multiply(oe).toAffine(),Me=c(Re.x);if(Me===_a)return;const Oe=c(X*c(fe+Me*G));if(Oe===_a)return;let st=(Re.x===Me?0:2)|Number(Re.y&Bn),pt=Oe;return F&&p(Oe)&&(pt=m(Oe),st^=1),new _(Me,pt,st)}return{seed:ue,k2sig:Ee}}const B={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function D(v,x,O=B){const{seed:U,k2sig:I}=C(v,x,O),F=e;return zre(F.hash.outputLen,F.nByteLength,F.hmac)(U,I)}u.BASE._setWindowSize(8);function L(v,x,O,U=k){const I=v;x=Cs("msgHash",x),O=Cs("publicKey",O);const{lowS:F,prehash:V,format:q}=U;if(Y5(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const J=typeof I=="string"||jf(I),G=!J&&!q&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!J&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ue;try{if(G&&(K=new _(I.r,I.s)),J){try{q!=="compact"&&(K=_.fromDER(I))}catch(st){if(!(st instanceof ya.Err))throw st}!K&&q!=="der"&&(K=_.fromCompact(I))}ue=u.fromHex(O)}catch{return!1}if(!K||F&&K.hasHighS())return!1;V&&(x=e.hash(x));const{r:fe,s:Ee}=K,ce=S(x),oe=l(Ee),X=c(ce*oe),Re=c(fe*oe),Me=u.BASE.multiplyAndAddUnsafe(ue,X,Re)?.toAffine();return Me?c(Me.x)===fe:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:E,sign:D,verify:L,ProjectivePoint:u,Signature:_,utils:A}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vse(t){return{hash:t,hmac:(e,...n)=>S4(t,e,mre(...n)),randomBytes:gre}}function Hse(t,e){const n=r=>qse({...t,...Vse(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const B4=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Z5=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Kse=BigInt(0),Gse=BigInt(1),q1=BigInt(2),J5=(t,e)=>(t+e/q1)/e;function Yse(t){const e=B4,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=_s(u,n,e)*u%e,h=_s(d,n,e)*u%e,f=_s(h,q1,e)*l%e,p=_s(f,s,e)*f%e,m=_s(p,i,e)*p%e,g=_s(m,o,e)*m%e,_=_s(g,c,e)*g%e,A=_s(_,o,e)*m%e,w=_s(A,n,e)*u%e,y=_s(w,a,e)*p%e,E=_s(y,r,e)*l%e,b=_s(E,q1,e);if(!V1.eql(V1.sqr(b),t))throw new Error("Cannot find square root");return b}const V1=Y2(B4,void 0,void 0,{sqrt:Yse}),Zse=Hse({a:Kse,b:BigInt(7),Fp:V1,n:Z5,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Z5,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Gse*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=J5(i*t,e),c=J5(-r*t,e);let l=Nr(t-o*n-c*s,e),u=Nr(-o*r-c*i,e);const d=l>a,h=u>a;if(d&&(l=e-l),h&&(u=e-u),l>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Lre);function Jse(t){if(t.length!==130&&t.length!==132)throw new Qse({signature:t});const e=BigInt(fa(t,0,32)),n=BigInt(fa(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return Xse(s)}catch{throw new eie({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function Xse(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new tie({value:t})}class Qse extends Yt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Mo(G2(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class eie extends Yt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class tie extends Yt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function nie(t){return Ase(rie(t))}function rie(t){const{payload:e,signature:n}=t,{r,s,yParity:i}=n,o=new Zse.Signature(BigInt(r),BigInt(s)).addRecoveryBit(i).recoverPublicKey(G2(e).substring(2));return mse(o)}function sie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function a(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,m=new Uint8Array(p);for(;h!==f;){let A=l[h],w=0;for(let y=p-1;(A!==0||w<d)&&y!==-1;y--,w++)A+=256*m[y]>>>0,m[y]=A%n>>>0,A=A/n>>>0;if(A!==0)throw new Error("Non-zero carry");d=w,h++}let g=p-d;for(;g!==p&&m[g]===0;)g++;let _=r.repeat(u);for(;g<p;++g)_+=t.charAt(m[g]);return _}function o(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const A=l.charCodeAt(u);if(A>255)return;let w=e[A];if(w===255)return;let y=0;for(let E=f-1;(w!==0||y<h)&&E!==-1;E--,y++)w+=n*p[E]>>>0,p[E]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");h=y,u++}let m=f-h;for(;m!==f&&p[m]===0;)m++;const g=new Uint8Array(d+(f-m));let _=d;for(;m!==f;)g[_++]=p[m++];return g}function c(l){const u=o(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:a,decodeUnsafe:o,decode:c}}var iie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Wf=sie(iie);function aie(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function oie(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let a=t.charCodeAt(i++);if((a&4294967168)===0){e[s++]=a;continue}else if((a&4294965248)===0)e[s++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&i<r){const o=t.charCodeAt(i);(o&64512)===56320&&(++i,a=((a&1023)<<10)+(o&1023)+65536)}(a&4294901760)===0?(e[s++]=a>>12&15|224,e[s++]=a>>6&63|128):(e[s++]=a>>18&7|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128)}e[s++]=a&63|128}}const cie=new TextEncoder,lie=50;function uie(t,e,n){cie.encodeInto(t,e.subarray(n))}function die(t,e,n){t.length>lie?uie(t,e,n):oie(t,e,n)}const hie=4096;function M4(t,e,n){let r=e;const s=r+n,i=[];let a="";for(;r<s;){const o=t[r++];if((o&128)===0)i.push(o);else if((o&224)===192){const c=t[r++]&63;i.push((o&31)<<6|c)}else if((o&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((o&31)<<12|c<<6|l)}else if((o&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(o&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(o);i.length>=hie&&(a+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(a+=String.fromCharCode(...i)),a}const fie=new TextDecoder,pie=200;function mie(t,e,n){const r=t.subarray(e,e+n);return fie.decode(r)}function gie(t,e,n){return n>pie?mie(t,e,n):M4(t,e,n)}class $p{constructor(e,n){this.type=e,this.data=n}}class ss extends Error{constructor(e){super(e);const n=Object.create(ss.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:ss.name})}}const bd=4294967295;function yie(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function L4(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function F4(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function wie(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const bie=-1,vie=4294967296-1,_ie=17179869184-1;function Eie({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=_ie)if(e===0&&t<=vie){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),L4(r,4,t),n}}function xie(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Aie(t){if(t instanceof Date){const e=xie(t);return Eie(e)}else return null}function Sie(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=F4(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new ss(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function Iie(t){const e=Sie(t);return new Date(e.sec*1e3+e.nsec/1e6)}const Tie={type:bie,encode:Aie,decode:Iie};class xg{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Tie)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const a=-1-r;return new $p(a,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const a=r;return new $p(a,i)}}}return e instanceof $p?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new $p(n,e)}}xg.defaultCodec=new xg;function Cie(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function H1(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Cie(t)?new Uint8Array(t):Uint8Array.from(t)}const kie=100,Oie=2048;let Pie=class j4{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??xg.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??kie,this.initialBufferSize=e?.initialBufferSize??Oie,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new j4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=aie(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),die(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=H1(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const a=e[i];this.ignoreUndefined&&a===void 0||(this.encodeString(i),this.doEncode(a,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),yie(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),L4(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Rie(t,e){return new Pie(e).encodeSharedRef(t)}function Kw(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const $ie=16,Nie=16;class Die{constructor(e=$ie,n=Nie){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const a=i.bytes;for(let o=0;o<r;o++)if(a[o]!==e[n+o])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=M4(e,n,r),a=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(a,i),i}}const K1="array",lh="map_key",z4="map_value",Uie=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new ss("The type of key must be string or number but "+typeof t)};class Bie{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=K1,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=lh,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===K1){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===lh||e.type===z4){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const vd=-1,Z2=new DataView(new ArrayBuffer(0)),Mie=new Uint8Array(Z2.buffer);try{Z2.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const X5=new RangeError("Insufficient data"),Lie=new Die;let Fie=class W4{constructor(e){this.totalPos=0,this.pos=0,this.view=Z2,this.bytes=Mie,this.headByte=vd,this.stack=new Bie,this.entered=!1,this.extensionCodec=e?.extensionCodec??xg.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??bd,this.maxBinLength=e?.maxBinLength??bd,this.maxArrayLength=e?.maxArrayLength??bd,this.maxMapLength=e?.maxMapLength??bd,this.maxExtLength=e?.maxExtLength??bd,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:Lie,this.mapKeyConverter=e?.mapKeyConverter??Uie}clone(){return new W4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=vd,this.stack.reset()}setBuffer(e){const n=H1(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===vd&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=H1(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const o of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:a}=this;throw new RangeError(`Insufficient data in parsing ${Kw(s)} at ${a} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new ss(`Unrecognized type byte: ${Kw(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===K1)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===lh){if(n==="__proto__")throw new ss("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=z4;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=lh;continue e}}return n}}readHeadByte(){return this.headByte===vd&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=vd}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ss(`Unrecognized array type byte: ${Kw(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ss(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new ss(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new ss(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw X5;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,r,e):s=gie(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===lh:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new ss(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw X5;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new ss(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=wie(this.view,this.pos);return this.pos+=8,e}readI64(){const e=F4(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function jie(t,e){return new Fie(e).decode(t)}const zie=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Wie=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Vc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Wie(t)}catch{return t}}function Fa(t){return typeof t=="string"?t:zie(t)||""}function qie(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function q4(t,...e){if(!qie(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Q5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Vie(t,e){q4(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Sl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gw=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Hie(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function V4(t){return typeof t=="string"&&(t=Hie(t)),q4(t),t}let Kie=class{clone(){return this._cloneInto()}};function Gie(t){const e=r=>t().update(V4(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function H4(t=32){if(Sl&&typeof Sl.getRandomValues=="function")return Sl.getRandomValues(new Uint8Array(t));if(Sl&&typeof Sl.randomBytes=="function")return Sl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Yie(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}let Zie=class extends Kie{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Gw(this.buffer)}update(e){Q5(this);const{view:n,buffer:r,blockLen:s}=this;e=V4(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Gw(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Q5(this),Vie(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;Yie(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Gw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}};const Np=BigInt(2**32-1),G1=BigInt(32);function K4(t,e=!1){return e?{h:Number(t&Np),l:Number(t>>G1&Np)}:{h:Number(t>>G1&Np)|0,l:Number(t&Np)|0}}function Jie(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=K4(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const Xie=(t,e)=>BigInt(t>>>0)<<G1|BigInt(e>>>0),Qie=(t,e,n)=>t>>>n,eae=(t,e,n)=>t<<32-n|e>>>n,tae=(t,e,n)=>t>>>n|e<<32-n,nae=(t,e,n)=>t<<32-n|e>>>n,rae=(t,e,n)=>t<<64-n|e>>>n-32,sae=(t,e,n)=>t>>>n-32|e<<64-n,iae=(t,e)=>e,aae=(t,e)=>t,oae=(t,e,n)=>t<<n|e>>>32-n,cae=(t,e,n)=>e<<n|t>>>32-n,lae=(t,e,n)=>e<<n-32|t>>>64-n,uae=(t,e,n)=>t<<n-32|e>>>64-n;function dae(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const hae=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),fae=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,pae=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),mae=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,gae=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yae=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Qe={fromBig:K4,split:Jie,toBig:Xie,shrSH:Qie,shrSL:eae,rotrSH:tae,rotrSL:nae,rotrBH:rae,rotrBL:sae,rotr32H:iae,rotr32L:aae,rotlSH:oae,rotlSL:cae,rotlBH:lae,rotlBL:uae,add:dae,add3L:hae,add3H:fae,add4L:pae,add4H:mae,add5H:yae,add5L:gae},[wae,bae]=Qe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),no=new Uint32Array(80),ro=new Uint32Array(80);let vae=class extends Zie{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:g}=this;return[e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g]}set(e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,n){for(let w=0;w<16;w++,n+=4)no[w]=e.getUint32(n),ro[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const y=no[w-15]|0,E=ro[w-15]|0,b=Qe.rotrSH(y,E,1)^Qe.rotrSH(y,E,8)^Qe.shrSH(y,E,7),S=Qe.rotrSL(y,E,1)^Qe.rotrSL(y,E,8)^Qe.shrSL(y,E,7),$=no[w-2]|0,P=ro[w-2]|0,C=Qe.rotrSH($,P,19)^Qe.rotrBH($,P,61)^Qe.shrSH($,P,6),B=Qe.rotrSL($,P,19)^Qe.rotrBL($,P,61)^Qe.shrSL($,P,6),k=Qe.add4L(S,B,ro[w-7],ro[w-16]),D=Qe.add4H(k,b,C,no[w-7],no[w-16]);no[w]=D|0,ro[w]=k|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:g,Hh:_,Hl:A}=this;for(let w=0;w<80;w++){const y=Qe.rotrSH(d,h,14)^Qe.rotrSH(d,h,18)^Qe.rotrBH(d,h,41),E=Qe.rotrSL(d,h,14)^Qe.rotrSL(d,h,18)^Qe.rotrBL(d,h,41),b=d&f^~d&m,S=h&p^~h&g,$=Qe.add5L(A,E,S,bae[w],ro[w]),P=Qe.add5H($,_,y,b,wae[w],no[w]),C=$|0,B=Qe.rotrSH(r,s,28)^Qe.rotrBH(r,s,34)^Qe.rotrBH(r,s,39),k=Qe.rotrSL(r,s,28)^Qe.rotrBL(r,s,34)^Qe.rotrBL(r,s,39),D=r&i^r&o^i&o,L=s&a^s&c^a&c;_=m|0,A=g|0,m=f|0,g=p|0,f=d|0,p=h|0,{h:d,l:h}=Qe.add(l|0,u|0,P|0,C|0),l=o|0,u=c|0,o=i|0,c=a|0,i=r|0,a=s|0;const v=Qe.add3L(C,k,L);r=Qe.add3H(v,P,B,D),s=v|0}({h:r,l:s}=Qe.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=Qe.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=Qe.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=Qe.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Qe.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Qe.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:g}=Qe.add(this.Gh|0,this.Gl|0,m|0,g|0),{h:_,l:A}=Qe.add(this.Hh|0,this.Hl|0,_|0,A|0),this.set(r,s,i,a,o,c,l,u,d,h,f,p,m,g,_,A)}roundClean(){no.fill(0),ro.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const _ae=Gie(()=>new vae);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J2=BigInt(0),G4=BigInt(1),Eae=BigInt(2);function X2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Q2(t){if(!X2(t))throw new Error("Uint8Array expected")}function Yw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const xae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ex(t){Q2(t);let e="";for(let n=0;n<t.length;n++)e+=xae[t[n]];return e}function Y4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?J2:BigInt("0x"+t)}const na={_0:48,_9:57,A:65,F:70,a:97,f:102};function eT(t){if(t>=na._0&&t<=na._9)return t-na._0;if(t>=na.A&&t<=na.F)return t-(na.A-10);if(t>=na.a&&t<=na.f)return t-(na.a-10)}function Z4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=eT(t.charCodeAt(i)),o=eT(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function Aae(t){return Y4(ex(t))}function wm(t){return Q2(t),Y4(ex(Uint8Array.from(t).reverse()))}function J4(t,e){return Z4(t.toString(16).padStart(e*2,"0"))}function Y1(t,e){return J4(t,e).reverse()}function ra(t,e,n){let r;if(typeof e=="string")try{r=Z4(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(X2(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function tT(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Q2(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Zw=t=>typeof t=="bigint"&&J2<=t;function Sae(t,e,n){return Zw(t)&&Zw(e)&&Zw(n)&&e<=t&&t<n}function _d(t,e,n,r){if(!Sae(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Iae(t){let e;for(e=0;t>J2;t>>=G4,e+=1);return e}const Tae=t=>(Eae<<BigInt(t-1))-G4,Cae={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||X2(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function tx(t,e,n={}){const r=(s,i,a)=>{const o=Cae[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[s];if(!(a&&c===void 0)&&!o(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function nT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ln=BigInt(0),an=BigInt(1),uc=BigInt(2),kae=BigInt(3),Z1=BigInt(4),rT=BigInt(5),sT=BigInt(8);function Sn(t,e){const n=t%e;return n>=Ln?n:e+n}function Oae(t,e,n){if(e<Ln)throw new Error("invalid exponent, negatives unsupported");if(n<=Ln)throw new Error("invalid modulus");if(n===an)return Ln;let r=an;for(;e>Ln;)e&an&&(r=r*t%n),t=t*t%n,e>>=an;return r}function vi(t,e,n){let r=t;for(;e-- >Ln;)r*=r,r%=n;return r}function iT(t,e){if(t===Ln)throw new Error("invert: expected non-zero number");if(e<=Ln)throw new Error("invert: expected positive modulus, got "+e);let n=Sn(t,e),r=e,s=Ln,i=an;for(;n!==Ln;){const a=r/n,o=r%n,c=s-i*a;r=n,n=o,s=i,i=c}if(r!==an)throw new Error("invert: does not exist");return Sn(s,e)}function Pae(t){const e=(t-an)/uc;let n,r,s;for(n=t-an,r=0;n%uc===Ln;n/=uc,r++);for(s=uc;s<t&&Oae(s,e,t)!==t-an;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(t+an)/Z1;return function(o,c){const l=o.pow(c,a);if(!o.eql(o.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+an)/uc;return function(a,o){if(a.pow(o,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,l=a.pow(a.mul(a.ONE,s),n),u=a.pow(o,i),d=a.pow(o,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let p=a.sqr(d);h<c&&!a.eql(p,a.ONE);h++)p=a.sqr(p);const f=a.pow(l,an<<BigInt(c-h-1));l=a.sqr(f),u=a.mul(u,f),d=a.mul(d,l),c=h}return u}}function Rae(t){if(t%Z1===kae){const e=(t+an)/Z1;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%sT===rT){const e=(t-rT)/sT;return function(n,r){const s=n.mul(r,uc),i=n.pow(s,e),a=n.mul(r,i),o=n.mul(n.mul(a,uc),i),c=n.mul(a,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Pae(t)}const $ae=(t,e)=>(Sn(t,e)&an)===an,Nae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dae(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Nae.reduce((r,s)=>(r[s]="function",r),e);return tx(t,n)}function Uae(t,e,n){if(n<Ln)throw new Error("invalid exponent, negatives unsupported");if(n===Ln)return t.ONE;if(n===an)return e;let r=t.ONE,s=e;for(;n>Ln;)n&an&&(r=t.mul(r,s)),s=t.sqr(s),n>>=an;return r}function Bae(t,e){const n=new Array(e.length),r=e.reduce((i,a,o)=>t.is0(a)?i:(n[o]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,o)=>t.is0(a)?i:(n[o]=t.mul(i,n[o]),t.mul(i,a)),s),n}function X4(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Q4(t,e,n=!1,r={}){if(t<=Ln)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=X4(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Tae(s),ZERO:Ln,ONE:an,create:c=>Sn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ln<=c&&c<t},is0:c=>c===Ln,isOdd:c=>(c&an)===an,neg:c=>Sn(-c,t),eql:(c,l)=>c===l,sqr:c=>Sn(c*c,t),add:(c,l)=>Sn(c+l,t),sub:(c,l)=>Sn(c-l,t),mul:(c,l)=>Sn(c*l,t),pow:(c,l)=>Uae(o,c,l),div:(c,l)=>Sn(c*iT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>iT(c,t),sqrt:r.sqrt||(c=>(a||(a=Rae(t)),a(o,c))),invertBatch:c=>Bae(o,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Y1(c,i):J4(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?wm(c):Aae(c)}});return Object.freeze(o)}const aT=BigInt(0),Dp=BigInt(1);function Jw(t,e){const n=e.negate();return t?n:e}function eN(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Xw(t,e){eN(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Mae(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Lae(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Qw=new WeakMap,tN=new WeakMap;function eb(t){return tN.get(t)||1}function Fae(t,e){return{constTimeNegate:Jw,hasPrecomputes(n){return eb(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>aT;)r&Dp&&(s=s.add(i)),i=i.double(),r>>=Dp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Xw(r,e),a=[];let o=n,c=o;for(let l=0;l<s;l++){c=o,a.push(c);for(let u=1;u<i;u++)c=c.add(o),a.push(c);o=c.double()}return a},wNAF(n,r,s){const{windows:i,windowSize:a}=Xw(n,e);let o=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*a;let p=Number(s&l);s>>=d,p>a&&(p-=u,s+=Dp);const m=f,g=f+Math.abs(p)-1,_=h%2!==0,A=p<0;p===0?c=c.add(Jw(_,r[m])):o=o.add(Jw(A,r[g]))}return{p:o,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:a,windowSize:o}=Xw(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<a;d++){const h=d*o;if(s===aT)break;let f=Number(s&c);if(s>>=u,f>o&&(f-=l,s+=Dp),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Qw.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Qw.set(r,s(i))),i},wNAFCached(n,r,s){const i=eb(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=eb(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){eN(r,e),tN.set(n,r),Qw.delete(n)}}}function jae(t,e,n,r){if(Mae(n,t),Lae(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Iae(BigInt(n.length)),a=i>12?i-3:i>4?i-2:i?2:1,o=(1<<a)-1,c=new Array(o+1).fill(s),l=Math.floor((e.BITS-1)/a)*a;let u=s;for(let d=l;d>=0;d-=a){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(o));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<a;f++)u=u.double()}return u}function zae(t){return Dae(t.Fp),tx(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...X4(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ws=BigInt(0),kr=BigInt(1),Up=BigInt(2),Wae=BigInt(8),qae={zip215:!0};function Vae(t){const e=zae(t);return tx(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Hae(t){const e=Vae(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:a,nByteLength:o,h:c}=e,l=Up<<BigInt(o*8)-kr,u=n.create,d=Q4(e.n,e.nBitLength),h=e.uvRatio||((v,x)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(x))}}catch{return{isValid:!1,value:Ws}}}),f=e.adjustScalarBytes||(v=>v),p=e.domain||((v,x,O)=>{if(Yw("phflag",O),x.length||O)throw new Error("Contexts/pre-hash are not supported");return v});function m(v,x){_d("coordinate "+v,x,Ws,l)}function g(v){if(!(v instanceof w))throw new Error("ExtendedPoint expected")}const _=nT((v,x)=>{const{ex:O,ey:U,ez:I}=v,F=v.is0();x==null&&(x=F?Wae:n.inv(I));const V=u(O*x),q=u(U*x),J=u(I*x);if(F)return{x:Ws,y:kr};if(J!==kr)throw new Error("invZ was invalid");return{x:V,y:q}}),A=nT(v=>{const{a:x,d:O}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:U,ey:I,ez:F,et:V}=v,q=u(U*U),J=u(I*I),G=u(F*F),K=u(G*G),ue=u(q*x),fe=u(G*u(ue+J)),Ee=u(K+u(O*u(q*J)));if(fe!==Ee)throw new Error("bad point: equation left != right (1)");const ce=u(U*I),oe=u(F*V);if(ce!==oe)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(x,O,U,I){this.ex=x,this.ey=O,this.ez=U,this.et=I,m("x",x),m("y",O),m("z",U),m("t",I),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof w)throw new Error("extended point not allowed");const{x:O,y:U}=x||{};return m("x",O),m("y",U),new w(O,U,kr,u(O*U))}static normalizeZ(x){const O=n.invertBatch(x.map(U=>U.ez));return x.map((U,I)=>U.toAffine(O[I])).map(w.fromAffine)}static msm(x,O){return jae(w,d,x,O)}_setWindowSize(x){b.setWindowSize(this,x)}assertValidity(){A(this)}equals(x){g(x);const{ex:O,ey:U,ez:I}=this,{ex:F,ey:V,ez:q}=x,J=u(O*q),G=u(F*I),K=u(U*q),ue=u(V*I);return J===G&&K===ue}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:x}=e,{ex:O,ey:U,ez:I}=this,F=u(O*O),V=u(U*U),q=u(Up*u(I*I)),J=u(x*F),G=O+U,K=u(u(G*G)-F-V),ue=J+V,fe=ue-q,Ee=J-V,ce=u(K*fe),oe=u(ue*Ee),X=u(K*Ee),Re=u(fe*ue);return new w(ce,oe,Re,X)}add(x){g(x);const{a:O,d:U}=e,{ex:I,ey:F,ez:V,et:q}=this,{ex:J,ey:G,ez:K,et:ue}=x;if(O===BigInt(-1)){const Sr=u((F-I)*(G+J)),tr=u((F+I)*(G-J)),He=u(tr-Sr);if(He===Ws)return this.double();const js=u(V*Up*ue),Kr=u(q*Up*K),hr=Kr+js,Ir=tr+Sr,Gr=Kr-js,ys=u(hr*He),Cn=u(Ir*Gr),mt=u(hr*Gr),zs=u(He*Ir);return new w(ys,Cn,zs,mt)}const fe=u(I*J),Ee=u(F*G),ce=u(q*U*ue),oe=u(V*K),X=u((I+F)*(J+G)-fe-Ee),Re=oe-ce,Me=oe+ce,Oe=u(Ee-O*fe),st=u(X*Re),pt=u(Me*Oe),be=u(X*Oe),Ce=u(Re*Me);return new w(st,pt,Ce,be)}subtract(x){return this.add(x.negate())}wNAF(x){return b.wNAFCached(this,x,w.normalizeZ)}multiply(x){const O=x;_d("scalar",O,kr,r);const{p:U,f:I}=this.wNAF(O);return w.normalizeZ([U,I])[0]}multiplyUnsafe(x,O=w.ZERO){const U=x;return _d("scalar",U,Ws,r),U===Ws?E:this.is0()||U===kr?this:b.wNAFCachedUnsafe(this,U,w.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return b.unsafeLadder(this,r).is0()}toAffine(x){return _(this,x)}clearCofactor(){const{h:x}=e;return x===kr?this:this.multiplyUnsafe(x)}static fromHex(x,O=!1){const{d:U,a:I}=e,F=n.BYTES;x=ra("pointHex",x,F),Yw("zip215",O);const V=x.slice(),q=x[F-1];V[F-1]=q&-129;const J=wm(V),G=O?l:n.ORDER;_d("pointHex.y",J,Ws,G);const K=u(J*J),ue=u(K-kr),fe=u(U*K-I);let{isValid:Ee,value:ce}=h(ue,fe);if(!Ee)throw new Error("Point.fromHex: invalid y coordinate");const oe=(ce&kr)===kr,X=(q&128)!==0;if(!O&&ce===Ws&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==oe&&(ce=u(-ce)),w.fromAffine({x:ce,y:J})}static fromPrivateKey(x){return P(x).point}toRawBytes(){const{x,y:O}=this.toAffine(),U=Y1(O,n.BYTES);return U[U.length-1]|=x&kr?128:0,U}toHex(){return ex(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,kr,u(e.Gx*e.Gy)),w.ZERO=new w(Ws,kr,kr,Ws);const{BASE:y,ZERO:E}=w,b=Fae(w,o*8);function S(v){return Sn(v,r)}function $(v){return S(wm(v))}function P(v){const x=n.BYTES;v=ra("private key",v,x);const O=ra("hashed private key",i(v),2*x),U=f(O.slice(0,x)),I=O.slice(x,2*x),F=$(U),V=y.multiply(F),q=V.toRawBytes();return{head:U,prefix:I,scalar:F,point:V,pointBytes:q}}function C(v){return P(v).pointBytes}function B(v=new Uint8Array,...x){const O=tT(...x);return $(i(p(O,ra("context",v),!!s)))}function k(v,x,O={}){v=ra("message",v),s&&(v=s(v));const{prefix:U,scalar:I,pointBytes:F}=P(x),V=B(O.context,U,v),q=y.multiply(V).toRawBytes(),J=B(O.context,q,F,v),G=S(V+J*I);_d("signature.s",G,Ws,r);const K=tT(q,Y1(G,n.BYTES));return ra("result",K,n.BYTES*2)}const D=qae;function L(v,x,O,U=D){const{context:I,zip215:F}=U,V=n.BYTES;v=ra("signature",v,2*V),x=ra("message",x),O=ra("publicKey",O,V),F!==void 0&&Yw("zip215",F),s&&(x=s(x));const q=wm(v.slice(V,2*V));let J,G,K;try{J=w.fromHex(O,F),G=w.fromHex(v.slice(0,V),F),K=y.multiplyUnsafe(q)}catch{return!1}if(!F&&J.isSmallOrder())return!1;const ue=B(I,G.toRawBytes(),J.toRawBytes(),x);return G.add(J.multiplyUnsafe(ue)).subtract(K).clearCofactor().equals(w.ZERO)}return y._setWindowSize(8),{CURVE:e,getPublicKey:C,sign:k,verify:L,ExtendedPoint:w,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>a(n.BYTES),precompute(v=8,x=w.BASE){return x._setWindowSize(v),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const nx=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),oT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Kae=BigInt(1),cT=BigInt(2);BigInt(3);const Gae=BigInt(5),Yae=BigInt(8);function Zae(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=nx,a=t*t%i*t%i,o=vi(a,cT,i)*a%i,c=vi(o,Kae,i)*t%i,l=vi(c,Gae,i)*c%i,u=vi(l,e,i)*l%i,d=vi(u,n,i)*u%i,h=vi(d,r,i)*d%i,f=vi(h,s,i)*h%i,p=vi(f,s,i)*h%i,m=vi(p,e,i)*l%i;return{pow_p_5_8:vi(m,cT,i)*t%i,b2:a}}function Jae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Xae(t,e){const n=nx,r=Sn(e*e*e,n),s=Sn(r*r*e,n),i=Zae(t*s).pow_p_5_8;let a=Sn(t*r*i,n);const o=Sn(e*a*a,n),c=a,l=Sn(a*oT,n),u=o===t,d=o===Sn(-t,n),h=o===Sn(-t*oT,n);return u&&(a=c),(d||h)&&(a=l),$ae(a,n)&&(a=Sn(-a,n)),{isValid:u||d,value:a}}const Qae=Q4(nx,void 0,!0),eoe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Qae,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Yae,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_ae,randomBytes:H4,adjustScalarBytes:Jae,uvRatio:Xae},nN=Hae(eoe),toe="EdDSA",noe="JWT",Ag=".",Wy="base64url",rN="utf8",sN="utf8",roe=":",soe="did",ioe="key",lT="base58btc",aoe="z",ooe="K36",coe=32;function rx(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function iN(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?rx(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function aN(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=iN(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return rx(n)}function loe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,_=0,A=p.length;_!==A&&p[_]===0;)_++,m++;for(var w=(A-_)*u+1>>>0,y=new Uint8Array(w);_!==A;){for(var E=p[_],b=0,S=w-1;(E!==0||b<g)&&S!==-1;S--,b++)E+=256*y[S]>>>0,y[S]=E%o>>>0,E=E/o>>>0;if(E!==0)throw new Error("Non-zero carry");g=b,_++}for(var $=w-g;$!==w&&y[$]===0;)$++;for(var P=c.repeat(m);$<w;++$)P+=t.charAt(y[$]);return P}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,_=0;p[m]===c;)g++,m++;for(var A=(p.length-m)*l+1>>>0,w=new Uint8Array(A);p[m];){var y=n[p.charCodeAt(m)];if(y===255)return;for(var E=0,b=A-1;(y!==0||E<_)&&b!==-1;b--,E++)y+=o*w[b]>>>0,w[b]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");_=E,m++}if(p[m]!==" "){for(var S=A-_;S!==A&&w[S]===0;)S++;for(var $=new Uint8Array(g+(A-S)),P=g;S!==A;)$[P++]=w[S++];return $}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uoe=loe,doe=uoe;const oN=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hoe=t=>new TextEncoder().encode(t),foe=t=>new TextDecoder().decode(t);let poe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},moe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cN(this,e)}},goe=class{constructor(e){this.decoders=e}or(e){return cN(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const cN=(t,e)=>new goe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let yoe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new poe(e,n,r),this.decoder=new moe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const qy=({name:t,prefix:e,encode:n,decode:r})=>new yoe(t,e,n,r),qf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=doe(n,e);return qy({prefix:t,name:e,encode:r,decode:i=>oN(s(i))})},woe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},boe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},Xn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>qy({prefix:e,name:t,encode(s){return boe(s,r,n)},decode(s){return woe(s,r,n,t)}}),voe=qy({prefix:"\0",name:"identity",encode:t=>foe(t),decode:t=>hoe(t)});var _oe=Object.freeze({__proto__:null,identity:voe});const Eoe=Xn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xoe=Object.freeze({__proto__:null,base2:Eoe});const Aoe=Xn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Soe=Object.freeze({__proto__:null,base8:Aoe});const Ioe=qf({prefix:"9",name:"base10",alphabet:"0123456789"});var Toe=Object.freeze({__proto__:null,base10:Ioe});const Coe=Xn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),koe=Xn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ooe=Object.freeze({__proto__:null,base16:Coe,base16upper:koe});const Poe=Xn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Roe=Xn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$oe=Xn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Noe=Xn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Doe=Xn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Uoe=Xn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Boe=Xn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Moe=Xn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Loe=Xn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Foe=Object.freeze({__proto__:null,base32:Poe,base32upper:Roe,base32pad:$oe,base32padupper:Noe,base32hex:Doe,base32hexupper:Uoe,base32hexpad:Boe,base32hexpadupper:Moe,base32z:Loe});const joe=qf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zoe=qf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Woe=Object.freeze({__proto__:null,base36:joe,base36upper:zoe});const qoe=qf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Voe=qf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hoe=Object.freeze({__proto__:null,base58btc:qoe,base58flickr:Voe});const Koe=Xn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Goe=Xn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Yoe=Xn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zoe=Xn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Joe=Object.freeze({__proto__:null,base64:Koe,base64pad:Goe,base64url:Yoe,base64urlpad:Zoe});const lN=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Xoe=lN.reduce((t,e,n)=>(t[n]=e,t),[]),Qoe=lN.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ece(t){return t.reduce((e,n)=>(e+=Xoe[n],e),"")}function tce(t){const e=[];for(const n of t){const r=Qoe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const nce=qy({prefix:"🚀",name:"base256emoji",encode:ece,decode:tce});var rce=Object.freeze({__proto__:null,base256emoji:nce}),sce=uN,uT=128,ice=-128,ace=Math.pow(2,31);function uN(t,e,n){e=e||[],n=n||0;for(var r=n;t>=ace;)e[n++]=t&255|uT,t/=128;for(;t&ice;)e[n++]=t&255|uT,t>>>=7;return e[n]=t|0,uN.bytes=n-r+1,e}var oce=J1,cce=128,dT=127;function J1(t,r){var n=0,r=r||0,s=0,i=r,a,o=t.length;do{if(i>=o)throw J1.bytes=0,new RangeError("Could not decode varint");a=t[i++],n+=s<28?(a&dT)<<s:(a&dT)*Math.pow(2,s),s+=7}while(a>=cce);return J1.bytes=i-r,n}var lce=Math.pow(2,7),uce=Math.pow(2,14),dce=Math.pow(2,21),hce=Math.pow(2,28),fce=Math.pow(2,35),pce=Math.pow(2,42),mce=Math.pow(2,49),gce=Math.pow(2,56),yce=Math.pow(2,63),wce=function(t){return t<lce?1:t<uce?2:t<dce?3:t<hce?4:t<fce?5:t<pce?6:t<mce?7:t<gce?8:t<yce?9:10},bce={encode:sce,decode:oce,encodingLength:wce},dN=bce;const hT=(t,e,n=0)=>(dN.encode(t,e,n),e),fT=t=>dN.encodingLength(t),X1=(t,e)=>{const n=e.byteLength,r=fT(t),s=r+fT(n),i=new Uint8Array(s+n);return hT(t,i,0),hT(n,i,r),i.set(e,s),new vce(t,n,e,i)};let vce=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const hN=({name:t,code:e,encode:n})=>new _ce(t,e,n);let _ce=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?X1(this.code,n):n.then(r=>X1(this.code,r))}else throw Error("Unknown type, must be binary type")}};const fN=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Ece=hN({name:"sha2-256",code:18,encode:fN("SHA-256")}),xce=hN({name:"sha2-512",code:19,encode:fN("SHA-512")});var Ace=Object.freeze({__proto__:null,sha256:Ece,sha512:xce});const pN=0,Sce="identity",mN=oN,Ice=t=>X1(pN,mN(t)),Tce={code:pN,name:Sce,encode:mN,digest:Ice};var Cce=Object.freeze({__proto__:null,identity:Tce});new TextEncoder,new TextDecoder;const pT={..._oe,...xoe,...Soe,...Toe,...Ooe,...Foe,...Woe,...Hoe,...Joe,...rce};({...Ace,...Cce});function gN(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const mT=gN("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),tb=gN("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=iN(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),yN={utf8:mT,"utf-8":mT,hex:pT.base16,latin1:tb,ascii:tb,binary:tb,...pT};function Vy(t,e="utf8"){const n=yN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Xu(t,e="utf8"){const n=yN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?rx(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function gT(t){return Vc(Vy(Xu(t,Wy),rN))}function Sg(t){return Vy(Xu(Fa(t),rN),Wy)}function wN(t){const e=Xu(ooe,lT),n=aoe+Vy(aN([e,t]),lT);return[soe,ioe,n].join(roe)}function kce(t){return Vy(t,Wy)}function Oce(t){return Xu(t,Wy)}function Pce(t){return Xu([Sg(t.header),Sg(t.payload)].join(Ag),sN)}function Rce(t){return[Sg(t.header),Sg(t.payload),kce(t.signature)].join(Ag)}function Q1(t){const e=t.split(Ag),n=gT(e[0]),r=gT(e[1]),s=Oce(e[2]),i=Xu(e.slice(0,2).join(Ag),sN);return{header:n,payload:r,signature:s,data:i}}function yT(t=H4(coe)){const e=nN.getPublicKey(t);return{secretKey:aN([t,e]),publicKey:e}}async function $ce(t,e,n,r,s=we.fromMiliseconds(Date.now())){const i={alg:toe,typ:noe},a=wN(r.publicKey),o=s+n,c={iss:a,sub:t,aud:e,iat:s,exp:o},l=Pce({header:i,payload:c}),u=nN.sign(l,r.secretKey.slice(0,32));return Rce({header:i,payload:c,signature:u})}function sx(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function bN(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?sx(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function uh(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=bN(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return sx(n)}function Nce(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,_=0,A=p.length;_!==A&&p[_]===0;)_++,m++;for(var w=(A-_)*u+1>>>0,y=new Uint8Array(w);_!==A;){for(var E=p[_],b=0,S=w-1;(E!==0||b<g)&&S!==-1;S--,b++)E+=256*y[S]>>>0,y[S]=E%o>>>0,E=E/o>>>0;if(E!==0)throw new Error("Non-zero carry");g=b,_++}for(var $=w-g;$!==w&&y[$]===0;)$++;for(var P=c.repeat(m);$<w;++$)P+=t.charAt(y[$]);return P}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,_=0;p[m]===c;)g++,m++;for(var A=(p.length-m)*l+1>>>0,w=new Uint8Array(A);p[m];){var y=n[p.charCodeAt(m)];if(y===255)return;for(var E=0,b=A-1;(y!==0||E<_)&&b!==-1;b--,E++)y+=o*w[b]>>>0,w[b]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");_=E,m++}if(p[m]!==" "){for(var S=A-_;S!==A&&w[S]===0;)S++;for(var $=new Uint8Array(g+(A-S)),P=g;S!==A;)$[P++]=w[S++];return $}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Dce=Nce,Uce=Dce;const Bce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Mce=t=>new TextEncoder().encode(t),Lce=t=>new TextDecoder().decode(t);class Fce{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jce{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return vN(this,e)}}class zce{constructor(e){this.decoders=e}or(e){return vN(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vN=(t,e)=>new zce({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Wce{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Fce(e,n,r),this.decoder=new jce(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Hy=({name:t,prefix:e,encode:n,decode:r})=>new Wce(t,e,n,r),Vf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Uce(n,e);return Hy({prefix:t,name:e,encode:r,decode:i=>Bce(s(i))})},qce=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},Vce=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},Qn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Hy({prefix:e,name:t,encode(s){return Vce(s,r,n)},decode(s){return qce(s,r,n,t)}}),Hce=Hy({prefix:"\0",name:"identity",encode:t=>Lce(t),decode:t=>Mce(t)}),Kce=Object.freeze(Object.defineProperty({__proto__:null,identity:Hce},Symbol.toStringTag,{value:"Module"})),Gce=Qn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yce=Object.freeze(Object.defineProperty({__proto__:null,base2:Gce},Symbol.toStringTag,{value:"Module"})),Zce=Qn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Jce=Object.freeze(Object.defineProperty({__proto__:null,base8:Zce},Symbol.toStringTag,{value:"Module"})),Xce=Vf({prefix:"9",name:"base10",alphabet:"0123456789"}),Qce=Object.freeze(Object.defineProperty({__proto__:null,base10:Xce},Symbol.toStringTag,{value:"Module"})),ele=Qn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tle=Qn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nle=Object.freeze(Object.defineProperty({__proto__:null,base16:ele,base16upper:tle},Symbol.toStringTag,{value:"Module"})),rle=Qn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sle=Qn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ile=Qn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ale=Qn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ole=Qn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cle=Qn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lle=Qn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ule=Qn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dle=Qn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),hle=Object.freeze(Object.defineProperty({__proto__:null,base32:rle,base32hex:ole,base32hexpad:lle,base32hexpadupper:ule,base32hexupper:cle,base32pad:ile,base32padupper:ale,base32upper:sle,base32z:dle},Symbol.toStringTag,{value:"Module"})),fle=Vf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ple=Vf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),mle=Object.freeze(Object.defineProperty({__proto__:null,base36:fle,base36upper:ple},Symbol.toStringTag,{value:"Module"})),gle=Vf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yle=Vf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wle=Object.freeze(Object.defineProperty({__proto__:null,base58btc:gle,base58flickr:yle},Symbol.toStringTag,{value:"Module"})),ble=Qn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vle=Qn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_le=Qn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ele=Qn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),xle=Object.freeze(Object.defineProperty({__proto__:null,base64:ble,base64pad:vle,base64url:_le,base64urlpad:Ele},Symbol.toStringTag,{value:"Module"})),_N=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ale=_N.reduce((t,e,n)=>(t[n]=e,t),[]),Sle=_N.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Ile(t){return t.reduce((e,n)=>(e+=Ale[n],e),"")}function Tle(t){const e=[];for(const n of t){const r=Sle[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Cle=Hy({prefix:"🚀",name:"base256emoji",encode:Ile,decode:Tle}),kle=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Cle},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const wT={...Kce,...Yce,...Jce,...Qce,...nle,...hle,...mle,...wle,...xle,...kle};function EN(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const bT=EN("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),nb=EN("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=bN(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xN={utf8:bT,"utf-8":bT,hex:wT.base16,latin1:nb,ascii:nb,binary:nb,...wT};function $s(t,e="utf8"){const n=xN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?sx(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function zr(t,e="utf8"){const n=xN[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Ole={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var rb,vT;function AN(){if(vT)return rb;vT=1;const t="Input must be an string, Buffer or Uint8Array";function e(a){let o;if(a instanceof Uint8Array)o=a;else if(typeof a=="string")o=new TextEncoder().encode(a);else throw new Error(t);return o}function n(a){return Array.prototype.map.call(a,function(o){return(o<16?"0":"")+o.toString(16)}).join("")}function r(a){return(4294967296+a).toString(16).substring(1)}function s(a,o,c){let l=`
`+a+" = ";for(let u=0;u<o.length;u+=2){if(c===32)l+=r(o[u]).toUpperCase(),l+=" ",l+=r(o[u+1]).toUpperCase();else if(c===64)l+=r(o[u+1]).toUpperCase(),l+=r(o[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(a.length+4).join(" "):u<o.length-2&&(l+=" ")}console.log(l)}function i(a,o,c){let l=new Date().getTime();const u=new Uint8Array(o);for(let h=0;h<o;h++)u[h]=h%256;const d=new Date().getTime();console.log("Generated random input in "+(d-l)+"ms"),l=d;for(let h=0;h<c;h++){const f=a(u),p=new Date().getTime(),m=p-l;l=p,console.log("Hashed in "+m+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(o/(1<<20)/(m/1e3)*100)/100+" MB PER SECOND")}}return rb={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},rb}var sb,_T;function Ple(){if(_T)return sb;_T=1;const t=AN();function e(_,A,w){const y=_[A]+_[w];let E=_[A+1]+_[w+1];y>=4294967296&&E++,_[A]=y,_[A+1]=E}function n(_,A,w,y){let E=_[A]+w;w<0&&(E+=4294967296);let b=_[A+1]+y;E>=4294967296&&b++,_[A]=E,_[A+1]=b}function r(_,A){return _[A]^_[A+1]<<8^_[A+2]<<16^_[A+3]<<24}function s(_,A,w,y,E,b){const S=l[E],$=l[E+1],P=l[b],C=l[b+1];e(c,_,A),n(c,_,S,$);let B=c[y]^c[_],k=c[y+1]^c[_+1];c[y]=k,c[y+1]=B,e(c,w,y),B=c[A]^c[w],k=c[A+1]^c[w+1],c[A]=B>>>24^k<<8,c[A+1]=k>>>24^B<<8,e(c,_,A),n(c,_,P,C),B=c[y]^c[_],k=c[y+1]^c[_+1],c[y]=B>>>16^k<<16,c[y+1]=k>>>16^B<<16,e(c,w,y),B=c[A]^c[w],k=c[A+1]^c[w+1],c[A]=k>>>31^B<<1,c[A+1]=B>>>31^k<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],o=new Uint8Array(a.map(function(_){return _*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(_,A){let w=0;for(w=0;w<16;w++)c[w]=_.h[w],c[w+16]=i[w];for(c[24]=c[24]^_.t,c[25]=c[25]^_.t/4294967296,A&&(c[28]=~c[28],c[29]=~c[29]),w=0;w<32;w++)l[w]=r(_.b,4*w);for(w=0;w<12;w++)s(0,8,16,24,o[w*16+0],o[w*16+1]),s(2,10,18,26,o[w*16+2],o[w*16+3]),s(4,12,20,28,o[w*16+4],o[w*16+5]),s(6,14,22,30,o[w*16+6],o[w*16+7]),s(0,10,20,30,o[w*16+8],o[w*16+9]),s(2,12,22,24,o[w*16+10],o[w*16+11]),s(4,14,16,26,o[w*16+12],o[w*16+13]),s(6,8,18,28,o[w*16+14],o[w*16+15]);for(w=0;w<16;w++)_.h[w]=_.h[w]^c[w]^c[w+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(_,A,w,y){if(_===0||_>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(A&&A.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(w&&w.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(y&&y.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const E={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:_};d.fill(0),d[0]=_,A&&(d[1]=A.length),d[2]=1,d[3]=1,w&&d.set(w,32),y&&d.set(y,48);for(let b=0;b<16;b++)E.h[b]=i[b]^r(d,b*4);return A&&(f(E,A),E.c=128),E}function f(_,A){for(let w=0;w<A.length;w++)_.c===128&&(_.t+=_.c,u(_,!1),_.c=0),_.b[_.c++]=A[w]}function p(_){for(_.t+=_.c;_.c<128;)_.b[_.c++]=0;u(_,!0);const A=new Uint8Array(_.outlen);for(let w=0;w<_.outlen;w++)A[w]=_.h[w>>2]>>8*(w&3);return A}function m(_,A,w,y,E){w=w||64,_=t.normalizeInput(_),y&&(y=t.normalizeInput(y)),E&&(E=t.normalizeInput(E));const b=h(w,A,y,E);return f(b,_),p(b)}function g(_,A,w,y,E){const b=m(_,A,w,y,E);return t.toHex(b)}return sb={blake2b:m,blake2bHex:g,blake2bInit:h,blake2bUpdate:f,blake2bFinal:p},sb}var ib,ET;function Rle(){if(ET)return ib;ET=1;const t=AN();function e(p,m){return p[m]^p[m+1]<<8^p[m+2]<<16^p[m+3]<<24}function n(p,m,g,_,A,w){a[p]=a[p]+a[m]+A,a[_]=r(a[_]^a[p],16),a[g]=a[g]+a[_],a[m]=r(a[m]^a[g],12),a[p]=a[p]+a[m]+w,a[_]=r(a[_]^a[p],8),a[g]=a[g]+a[_],a[m]=r(a[m]^a[g],7)}function r(p,m){return p>>>m^p<<32-m}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),a=new Uint32Array(16),o=new Uint32Array(16);function c(p,m){let g=0;for(g=0;g<8;g++)a[g]=p.h[g],a[g+8]=s[g];for(a[12]^=p.t,a[13]^=p.t/4294967296,m&&(a[14]=~a[14]),g=0;g<16;g++)o[g]=e(p.b,4*g);for(g=0;g<10;g++)n(0,4,8,12,o[i[g*16+0]],o[i[g*16+1]]),n(1,5,9,13,o[i[g*16+2]],o[i[g*16+3]]),n(2,6,10,14,o[i[g*16+4]],o[i[g*16+5]]),n(3,7,11,15,o[i[g*16+6]],o[i[g*16+7]]),n(0,5,10,15,o[i[g*16+8]],o[i[g*16+9]]),n(1,6,11,12,o[i[g*16+10]],o[i[g*16+11]]),n(2,7,8,13,o[i[g*16+12]],o[i[g*16+13]]),n(3,4,9,14,o[i[g*16+14]],o[i[g*16+15]]);for(g=0;g<8;g++)p.h[g]^=a[g]^a[g+8]}function l(p,m){if(!(p>0&&p<=32))throw new Error("Incorrect output length, should be in [1, 32]");const g=m?m.length:0;if(m&&!(g>0&&g<=32))throw new Error("Incorrect key length, should be in [1, 32]");const _={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:p};return _.h[0]^=16842752^g<<8^p,g>0&&(u(_,m),_.c=64),_}function u(p,m){for(let g=0;g<m.length;g++)p.c===64&&(p.t+=p.c,c(p,!1),p.c=0),p.b[p.c++]=m[g]}function d(p){for(p.t+=p.c;p.c<64;)p.b[p.c++]=0;c(p,!0);const m=new Uint8Array(p.outlen);for(let g=0;g<p.outlen;g++)m[g]=p.h[g>>2]>>8*(g&3)&255;return m}function h(p,m,g){g=g||32,p=t.normalizeInput(p);const _=l(g,m);return u(_,p),d(_)}function f(p,m,g){const _=h(p,m,g);return t.toHex(_)}return ib={blake2s:h,blake2sHex:f,blake2sInit:l,blake2sUpdate:u,blake2sFinal:d},ib}var ab,xT;function $le(){if(xT)return ab;xT=1;const t=Ple(),e=Rle();return ab={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},ab}var Nle=$le(),Ed={exports:{}},ob,AT;function Dle(){if(AT)return ob;AT=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}ob=e;function e(n,r,s){var i=s&&s.stringify||t,a=1;if(typeof n=="object"&&n!==null){var o=r.length+a;if(o===1)return n;var c=new Array(o);c[0]=i(n);for(var l=1;l<o;l++)c[l]=i(r[l]);return c.join(" ")}if(typeof n!="string")return n;var u=r.length;if(u===0)return n;for(var d="",h=1-a,f=-1,p=n&&n.length||0,m=0;m<p;){if(n.charCodeAt(m)===37&&m+1<p){switch(f=f>-1?f:0,n.charCodeAt(m+1)){case 100:case 102:if(h>=u||r[h]==null)break;f<m&&(d+=n.slice(f,m)),d+=Number(r[h]),f=m+2,m++;break;case 105:if(h>=u||r[h]==null)break;f<m&&(d+=n.slice(f,m)),d+=Math.floor(Number(r[h])),f=m+2,m++;break;case 79:case 111:case 106:if(h>=u||r[h]===void 0)break;f<m&&(d+=n.slice(f,m));var g=typeof r[h];if(g==="string"){d+="'"+r[h]+"'",f=m+2,m++;break}if(g==="function"){d+=r[h].name||"<anonymous>",f=m+2,m++;break}d+=i(r[h]),f=m+2,m++;break;case 115:if(h>=u)break;f<m&&(d+=n.slice(f,m)),d+=String(r[h]),f=m+2,m++;break;case 37:f<m&&(d+=n.slice(f,m)),d+="%",f=m+2,m++,h--;break}++h}++m}return f===-1?n:(f<p&&(d+=n.slice(f)),d)}return ob}var ST;function Ule(){if(ST)return Ed.exports;ST=1;const t=Dle();Ed.exports=u;const e=L().console||{},n={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:$,wrapResponseSerializer:$,wrapErrorSerializer:$,req:S,res:S,err:E,errWithCause:E};function r(v,x){return v==="silent"?1/0:x.levels.values[v]}const s=Symbol("pino.logFuncs"),i=Symbol("pino.hierarchy"),a={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function o(v,x){const O={logger:x,parent:v[i]};x[i]=O}function c(v,x,O){const U={};x.forEach(I=>{U[I]=O[I]?O[I]:e[I]||e[a[I]||"log"]||P}),v[s]=U}function l(v,x){return Array.isArray(v)?v.filter(function(U){return U!=="!stdSerializers.err"}):v===!0?Object.keys(x):!1}function u(v){v=v||{},v.browser=v.browser||{};const x=v.browser.transmit;if(x&&typeof x.send!="function")throw Error("pino: transmit option must have a send function");const O=v.browser.write||e;v.browser.write&&(v.browser.asObject=!0);const U=v.serializers||{},I=l(v.browser.serialize,U);let F=v.browser.serialize;Array.isArray(v.browser.serialize)&&v.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const V=Object.keys(v.customLevels||{}),q=["error","fatal","warn","info","debug","trace"].concat(V);typeof O=="function"&&q.forEach(function(oe){O[oe]=O}),(v.enabled===!1||v.browser.disabled)&&(v.level="silent");const J=v.level||"info",G=Object.create(O);G.log||(G.log=P),c(G,q,O),o({},G),Object.defineProperty(G,"levelVal",{get:ue}),Object.defineProperty(G,"level",{get:fe,set:Ee});const K={transmit:x,serialize:I,asObject:v.browser.asObject,asObjectBindingsOnly:v.browser.asObjectBindingsOnly,formatters:v.browser.formatters,levels:q,timestamp:b(v),messageKey:v.messageKey||"msg",onChild:v.onChild||P};G.levels=d(v),G.level=J,G.isLevelEnabled=function(oe){return this.levels.values[oe]?this.levels.values[oe]>=this.levels.values[this.level]:!1},G.setMaxListeners=G.getMaxListeners=G.emit=G.addListener=G.on=G.prependListener=G.once=G.prependOnceListener=G.removeListener=G.removeAllListeners=G.listeners=G.listenerCount=G.eventNames=G.write=G.flush=P,G.serializers=U,G._serialize=I,G._stdErrSerialize=F,G.child=function(...oe){return ce.call(this,K,...oe)},x&&(G._logEvent=y());function ue(){return r(this.level,this)}function fe(){return this._level}function Ee(oe){if(oe!=="silent"&&!this.levels.values[oe])throw Error("unknown level "+oe);this._level=oe,p(this,K,G,"error"),p(this,K,G,"fatal"),p(this,K,G,"warn"),p(this,K,G,"info"),p(this,K,G,"debug"),p(this,K,G,"trace"),V.forEach(X=>{p(this,K,G,X)})}function ce(oe,X,Re){if(!X)throw new Error("missing bindings for child Pino");Re=Re||{},I&&X.serializers&&(Re.serializers=X.serializers);const Me=Re.serializers;if(I&&Me){var Oe=Object.assign({},U,Me),st=v.browser.serialize===!0?Object.keys(Oe):I;delete X.serializers,A([X],st,Oe,this._stdErrSerialize)}function pt(Ce){this._childLevel=(Ce._childLevel|0)+1,this.bindings=X,Oe&&(this.serializers=Oe,this._serialize=st),x&&(this._logEvent=y([].concat(Ce._logEvent.bindings,X)))}pt.prototype=this;const be=new pt(this);return o(this,be),be.child=function(...Ce){return ce.call(this,oe,...Ce)},be.level=Re.level||this.level,oe.onChild(be),be}return G}function d(v){const x=v.customLevels||{},O=Object.assign({},u.levels.values,x),U=Object.assign({},u.levels.labels,h(x));return{values:O,labels:U}}function h(v){const x={};return Object.keys(v).forEach(function(O){x[v[O]]=O}),x}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},u.stdSerializers=n,u.stdTimeFunctions=Object.assign({},{nullTime:C,epochTime:B,unixTime:k,isoTime:D});function f(v){const x=[];v.bindings&&x.push(v.bindings);let O=v[i];for(;O.parent;)O=O.parent,O.logger.bindings&&x.push(O.logger.bindings);return x.reverse()}function p(v,x,O,U){if(Object.defineProperty(v,U,{value:r(v.level,O)>r(U,O)?P:O[s][U],writable:!0,enumerable:!0,configurable:!0}),v[U]===P){if(!x.transmit)return;const F=x.transmit.level||v.level,V=r(F,O);if(r(U,O)<V)return}v[U]=g(v,x,O,U);const I=f(v);I.length!==0&&(v[U]=m(I,v[U]))}function m(v,x){return function(){return x.apply(this,[...v,...arguments])}}function g(v,x,O,U){return(function(I){return function(){const V=x.timestamp(),q=new Array(arguments.length),J=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var G=0;G<q.length;G++)q[G]=arguments[G];var K=!1;if(x.serialize&&(A(q,this._serialize,this.serializers,this._stdErrSerialize),K=!0),x.asObject||x.formatters?I.call(J,..._(this,U,q,V,x)):I.apply(J,q),x.transmit){const ue=x.transmit.level||v._level,fe=r(ue,O),Ee=r(U,O);if(Ee<fe)return;w(this,{ts:V,methodLevel:U,methodValue:Ee,transmitValue:O.levels.values[x.transmit.level||v._level],send:x.transmit.send,val:r(v._level,O)},q,K)}}})(v[s][U])}function _(v,x,O,U,I){const{level:F,log:V=ue=>ue}=I.formatters||{},q=O.slice();let J=q[0];const G={};let K=(v._childLevel|0)+1;if(K<1&&(K=1),U&&(G.time=U),F){const ue=F(x,v.levels.values[x]);Object.assign(G,ue)}else G.level=v.levels.values[x];if(I.asObjectBindingsOnly){if(J!==null&&typeof J=="object")for(;K--&&typeof q[0]=="object";)Object.assign(G,q.shift());return[V(G),...q]}else{if(J!==null&&typeof J=="object"){for(;K--&&typeof q[0]=="object";)Object.assign(G,q.shift());J=q.length?t(q.shift(),q):void 0}else typeof J=="string"&&(J=t(q.shift(),q));return J!==void 0&&(G[I.messageKey]=J),[V(G)]}}function A(v,x,O,U){for(const I in v)if(U&&v[I]instanceof Error)v[I]=u.stdSerializers.err(v[I]);else if(typeof v[I]=="object"&&!Array.isArray(v[I])&&x)for(const F in v[I])x.indexOf(F)>-1&&F in O&&(v[I][F]=O[F](v[I][F]))}function w(v,x,O,U=!1){const I=x.send,F=x.ts,V=x.methodLevel,q=x.methodValue,J=x.val,G=v._logEvent.bindings;U||A(O,v._serialize||Object.keys(v.serializers),v.serializers,v._stdErrSerialize===void 0?!0:v._stdErrSerialize),v._logEvent.ts=F,v._logEvent.messages=O.filter(function(K){return G.indexOf(K)===-1}),v._logEvent.level.label=V,v._logEvent.level.value=q,I(V,v._logEvent,J),v._logEvent=y(G)}function y(v){return{ts:0,messages:[],bindings:v||[],level:{label:"",value:0}}}function E(v){const x={type:v.constructor.name,msg:v.message,stack:v.stack};for(const O in v)x[O]===void 0&&(x[O]=v[O]);return x}function b(v){return typeof v.timestamp=="function"?v.timestamp:v.timestamp===!1?C:B}function S(){return{}}function $(v){return v}function P(){}function C(){return!1}function B(){return Date.now()}function k(){return Math.round(Date.now()/1e3)}function D(){return new Date(Date.now()).toISOString()}function L(){function v(x){return typeof x<"u"&&x}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return v(self)||v(window)||v(this)||{}}}return Ed.exports.default=u,Ed.exports.pino=u,Ed.exports}var Fl=Ule();const SN=Jc(Fl),Ble={level:"info"},Ky="custom_context",ix=1e3*1024;var Mle=Object.defineProperty,Lle=(t,e,n)=>e in t?Mle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xo=(t,e,n)=>Lle(t,typeof e!="symbol"?e+"":e,n);let Fle=class{constructor(e){xo(this,"nodeValue"),xo(this,"sizeInBytes"),xo(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},IT=class{constructor(e){xo(this,"lengthInNodes"),xo(this,"sizeInBytes"),xo(this,"head"),xo(this,"tail"),xo(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Fle(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}};var jle=Object.defineProperty,zle=(t,e,n)=>e in t?jle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bp=(t,e,n)=>zle(t,typeof e!="symbol"?e+"":e,n);let IN=class{constructor(e,n=ix){Bp(this,"logs"),Bp(this,"level"),Bp(this,"levelValue"),Bp(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Fl.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new IT(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Fl.levels.values.error?console.error(e):n===Fl.levels.values.warn?console.warn(e):n===Fl.levels.values.debug?console.debug(e):n===Fl.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Fa({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new IT(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Fa({extraMetadata:e})),new Blob(n,{type:"application/json"})}};var Wle=Object.defineProperty,qle=(t,e,n)=>e in t?Wle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vle=(t,e,n)=>qle(t,e+"",n);let Hle=class{constructor(e,n=ix){Vle(this,"baseChunkLogger"),this.baseChunkLogger=new IN(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}};var Kle=Object.defineProperty,Gle=(t,e,n)=>e in t?Kle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yle=(t,e,n)=>Gle(t,e+"",n);let Zle=class{constructor(e,n=ix){Yle(this,"baseChunkLogger"),this.baseChunkLogger=new IN(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Jle=Object.defineProperty,Xle=Object.defineProperties,Qle=Object.getOwnPropertyDescriptors,TT=Object.getOwnPropertySymbols,eue=Object.prototype.hasOwnProperty,tue=Object.prototype.propertyIsEnumerable,CT=(t,e,n)=>e in t?Jle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ig=(t,e)=>{for(var n in e||(e={}))eue.call(e,n)&&CT(t,n,e[n]);if(TT)for(var n of TT(e))tue.call(e,n)&&CT(t,n,e[n]);return t},Tg=(t,e)=>Xle(t,Qle(e));function nue(t){return Tg(Ig({},t),{level:t?.level||Ble.level})}function rue(t,e,n=Ky){return t[n]=e,t}function Hr(t,e=Ky){return t[e]||""}function sue(t,e,n=Ky){const r=Hr(t,n);return r.trim()?`${r}/${e}`:e}function gs(t,e,n=Ky){const r=sue(t,e,n),s=t.child({context:r});return rue(s,r,n)}function iue(t){var e,n;const r=new Hle((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:SN(Tg(Ig({},t.opts),{level:"trace",browser:Tg(Ig({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function aue(t){var e;const n=new Zle((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:SN(Tg(Ig({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function TN(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?iue(t):aue(t)}var oue={};const cue=":";function Pa(t){const[e,n]=t.split(cue);return{namespace:e,reference:n}}function kT(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];n.push(...s.accounts)}),n}function CN(t,e){return t.includes(":")?[t]:e.chains||[]}var lue=Object.defineProperty,uue=Object.defineProperties,due=Object.getOwnPropertyDescriptors,OT=Object.getOwnPropertySymbols,hue=Object.prototype.hasOwnProperty,fue=Object.prototype.propertyIsEnumerable,e_=(t,e,n)=>e in t?lue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PT=(t,e)=>{for(var n in e||(e={}))hue.call(e,n)&&e_(t,n,e[n]);if(OT)for(var n of OT(e))fue.call(e,n)&&e_(t,n,e[n]);return t},pue=(t,e)=>uue(t,due(e)),RT=(t,e,n)=>e_(t,typeof e!="symbol"?e+"":e,n);const mue="ReactNative",os={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},gue="js";function Cg(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function qo(){return!La.getDocument()&&!!La.getNavigator()&&navigator.product===mue}function yue(){return qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function wue(){return qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Qu(){return!Cg()&&!!La.getNavigator()&&!!La.getDocument()}function Hf(){return qo()?os.reactNative:Cg()?os.node:Qu()?os.browser:os.unknown}function $T(){var t;try{return qo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function bue(t,e){const n=new URLSearchParams(t);return Object.entries(e).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!=null&&n.set(r,String(s))}),n.toString()}function vue(t){var e,n;const r=kN();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),pue(PT(PT({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function kN(){return ire.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function _ue(){if(Hf()===os.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=xne();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Eue(){var t;const e=Hf();return e===os.browser?[e,((t=La.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function ON(t,e,n){const r=_ue(),s=Eue();return[[t,e].join("-"),[gue,n].join("-"),r,s].join("/")}function xue({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:a,bundleId:o,packageName:c}){const l=n.split("?"),u=ON(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:a,packageName:c||void 0,bundleId:o||void 0},h=bue(l[1]||"",d);return l[0]+"?"+h}function wc(t,e){return t.filter(n=>e.includes(n)).length===t.length}function t_(t){return Object.fromEntries(t.entries())}function n_(t){return new Map(Object.entries(t))}function sc(t=we.FIVE_MINUTES,e){const n=we.toMiliseconds(t||we.FIVE_MINUTES);let r,s,i,a;return{resolve:o=>{i&&r&&(clearTimeout(i),r(o),a=Promise.resolve(o))},reject:o=>{i&&s&&(clearTimeout(i),s(o))},done:()=>new Promise((o,c)=>{if(a)return o(a);i=setTimeout(()=>{const l=new Error(e);a=Promise.reject(l),c(l)},n),r=o,s=c})}}function $i(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const a=await t;r(a)}catch(a){s(a)}clearTimeout(i)})}function PN(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Aue(t){return PN("topic",t)}function Sue(t){return PN("id",t)}function RN(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function hn(t,e){return we.fromMiliseconds(Date.now()+we.toMiliseconds(t))}function Pi(t){return Date.now()>=we.toMiliseconds(t)}function Et(t,e){return`${t}${e?`:${e}`:""}`}function Mi(t=[],e=[]){return[...new Set([...t,...e])]}async function Iue({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s?.href;if(typeof i!="string")return;const a=Tue(i,t,e),o=Hf();if(o===os.browser){if(!((r=La.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Cue(a)}else o===os.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(a)}catch(s){console.error(s)}}function Tue(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Rue(r,!0)}`}else s=`${s}/wc?${r}`;return s}function Cue(t){let e="_self";Pue()?e="_top":(Oue()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function kue(t,e){let n="";try{if(Qu()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function NT(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function DT(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ax(){return typeof process<"u"&&oue.IS_VITEST==="true"}function Oue(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Pue(){try{return window.self!==window.top}catch{return!1}}function Rue(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function $N(t){return Buffer.from(t,"base64").toString("utf-8")}function $ue(t){return new Promise(e=>setTimeout(e,t))}let Nue=class{constructor({limit:e}){RT(this,"limit"),RT(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const Mp=BigInt(2**32-1),UT=BigInt(32);function NN(t,e=!1){return e?{h:Number(t&Mp),l:Number(t>>UT&Mp)}:{h:Number(t>>UT&Mp)|0,l:Number(t&Mp)|0}}function DN(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=NN(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const BT=(t,e,n)=>t>>>n,MT=(t,e,n)=>t<<32-n|e>>>n,mo=(t,e,n)=>t>>>n|e<<32-n,go=(t,e,n)=>t<<32-n|e>>>n,Yd=(t,e,n)=>t<<64-n|e>>>n-32,Zd=(t,e,n)=>t>>>n-32|e<<64-n,Due=(t,e)=>e,Uue=(t,e)=>t,Bue=(t,e,n)=>t<<n|e>>>32-n,Mue=(t,e,n)=>e<<n|t>>>32-n,Lue=(t,e,n)=>e<<n-32|t>>>64-n,Fue=(t,e,n)=>t<<n-32|e>>>64-n;function Ys(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const ox=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),cx=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,jue=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),zue=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Wue=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),que=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Il=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gy(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ja(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ui(t,...e){if(!Gy(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Yy(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ja(t.outputLen),ja(t.blockLen)}function Lo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lx(t,e){ui(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ef(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Us(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function cb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _i(t,e){return t<<32-e|t>>>e}const UN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function BN(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const la=UN?t=>t:t=>BN(t);function Vue(t){for(let e=0;e<t.length;e++)t[e]=BN(t[e]);return t}const yo=UN?t=>t:Vue,MN=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Hue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function uu(t){if(ui(t),MN)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Hue[t[n]];return e}const sa={_0:48,_9:57,A:65,F:70,a:97,f:102};function LT(t){if(t>=sa._0&&t<=sa._9)return t-sa._0;if(t>=sa.A&&t<=sa.F)return t-(sa.A-10);if(t>=sa.a&&t<=sa.f)return t-(sa.a-10)}function kg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(MN)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=LT(t.charCodeAt(i)),o=LT(t.charCodeAt(i+1));if(a===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=a*16+o}return r}function LN(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function si(t){return typeof t=="string"&&(t=LN(t)),ui(t),t}function Ao(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ui(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class Zy{}function Kf(t){const e=r=>t().update(si(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Kue(t){const e=(r,s)=>t(s).update(si(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function ol(t=32){if(Il&&typeof Il.getRandomValues=="function")return Il.getRandomValues(new Uint8Array(t));if(Il&&typeof Il.randomBytes=="function")return Uint8Array.from(Il.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Gue=BigInt(0),xd=BigInt(1),Yue=BigInt(2),Zue=BigInt(7),Jue=BigInt(256),Xue=BigInt(113),FN=[],jN=[],zN=[];for(let t=0,e=xd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],FN.push(2*(5*r+n)),jN.push((t+1)*(t+2)/2%64);let s=Gue;for(let i=0;i<7;i++)e=(e<<xd^(e>>Zue)*Xue)%Jue,e&Yue&&(s^=xd<<(xd<<BigInt(i))-xd);zN.push(s)}const WN=DN(zN,!0),Que=WN[0],ede=WN[1],FT=(t,e,n)=>n>32?Lue(t,e,n):Bue(t,e,n),jT=(t,e,n)=>n>32?Fue(t,e,n):Mue(t,e,n);function tde(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,l=n[c],u=n[c+1],d=FT(l,u,1)^n[o],h=jT(l,u,1)^n[o+1];for(let f=0;f<50;f+=10)t[a+f]^=d,t[a+f+1]^=h}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=jN[a],c=FT(s,i,o),l=jT(s,i,o),u=FN[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Que[r],t[1]^=ede[r]}Us(n)}let nde=class qN extends Zy{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ja(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ef(this.state)}clone(){return this._cloneInto()}keccak(){yo(this.state32),tde(this.state32,this.rounds),yo(this.state32),this.posOut=0,this.pos=0}update(e){Lo(this),e=si(e),ui(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Lo(this,!1),ui(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ja(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lx(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Us(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new qN(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const rde=(t,e,n)=>Kf(()=>new nde(e,t,n)),sde=rde(1,136,256/8);function ide(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,a,r),t.setUint32(e+l,o,r)}function ade(t,e,n){return t&e^~t&n}function ode(t,e,n){return t&e^t&n^e&n}let VN=class extends Zy{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=cb(this.buffer)}update(e){Lo(this),e=si(e),ui(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=cb(e);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lo(this),lx(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,Us(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)n[d]=0;ide(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=cb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const so=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),sr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),cde=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),io=new Uint32Array(64);class lde extends VN{constructor(e=32){super(64,e,8,!1),this.A=so[0]|0,this.B=so[1]|0,this.C=so[2]|0,this.D=so[3]|0,this.E=so[4]|0,this.F=so[5]|0,this.G=so[6]|0,this.H=so[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[e,n,r,s,i,a,o,c]}set(e,n,r,s,i,a,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)io[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=io[d-15],f=io[d-2],p=_i(h,7)^_i(h,18)^h>>>3,m=_i(f,17)^_i(f,19)^f>>>10;io[d]=m+io[d-7]+p+io[d-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=_i(o,6)^_i(o,11)^_i(o,25),f=u+h+ade(o,c,l)+cde[d]+io[d]|0,p=(_i(r,2)^_i(r,13)^_i(r,22))+ode(r,s,i)|0;u=l,l=c,c=o,o=a+f|0,a=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,a,o,c,l,u)}roundClean(){Us(io)}destroy(){this.set(0,0,0,0,0,0,0,0),Us(this.buffer)}}const HN=DN(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ude=HN[0],dde=HN[1],ao=new Uint32Array(80),oo=new Uint32Array(80);let ux=class extends VN{constructor(e=64){super(128,e,16,!1),this.Ah=sr[0]|0,this.Al=sr[1]|0,this.Bh=sr[2]|0,this.Bl=sr[3]|0,this.Ch=sr[4]|0,this.Cl=sr[5]|0,this.Dh=sr[6]|0,this.Dl=sr[7]|0,this.Eh=sr[8]|0,this.El=sr[9]|0,this.Fh=sr[10]|0,this.Fl=sr[11]|0,this.Gh=sr[12]|0,this.Gl=sr[13]|0,this.Hh=sr[14]|0,this.Hl=sr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:g}=this;return[e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g]}set(e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(e,n){for(let w=0;w<16;w++,n+=4)ao[w]=e.getUint32(n),oo[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const y=ao[w-15]|0,E=oo[w-15]|0,b=mo(y,E,1)^mo(y,E,8)^BT(y,E,7),S=go(y,E,1)^go(y,E,8)^MT(y,E,7),$=ao[w-2]|0,P=oo[w-2]|0,C=mo($,P,19)^Yd($,P,61)^BT($,P,6),B=go($,P,19)^Zd($,P,61)^MT($,P,6),k=jue(S,B,oo[w-7],oo[w-16]),D=zue(k,b,C,ao[w-7],ao[w-16]);ao[w]=D|0,oo[w]=k|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:g,Hh:_,Hl:A}=this;for(let w=0;w<80;w++){const y=mo(d,h,14)^mo(d,h,18)^Yd(d,h,41),E=go(d,h,14)^go(d,h,18)^Zd(d,h,41),b=d&f^~d&m,S=h&p^~h&g,$=Wue(A,E,S,dde[w],oo[w]),P=que($,_,y,b,ude[w],ao[w]),C=$|0,B=mo(r,s,28)^Yd(r,s,34)^Yd(r,s,39),k=go(r,s,28)^Zd(r,s,34)^Zd(r,s,39),D=r&i^r&o^i&o,L=s&a^s&c^a&c;_=m|0,A=g|0,m=f|0,g=p|0,f=d|0,p=h|0,{h:d,l:h}=Ys(l|0,u|0,P|0,C|0),l=o|0,u=c|0,o=i|0,c=a|0,i=r|0,a=s|0;const v=ox(C,k,L);r=cx(v,P,B,D),s=v|0}({h:r,l:s}=Ys(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=Ys(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=Ys(this.Ch|0,this.Cl|0,o|0,c|0),{h:l,l:u}=Ys(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ys(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ys(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:g}=Ys(this.Gh|0,this.Gl|0,m|0,g|0),{h:_,l:A}=Ys(this.Hh|0,this.Hl|0,_|0,A|0),this.set(r,s,i,a,o,c,l,u,d,h,f,p,m,g,_,A)}roundClean(){Us(ao,oo)}destroy(){Us(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class hde extends ux{constructor(){super(48),this.Ah=rr[0]|0,this.Al=rr[1]|0,this.Bh=rr[2]|0,this.Bl=rr[3]|0,this.Ch=rr[4]|0,this.Cl=rr[5]|0,this.Dh=rr[6]|0,this.Dl=rr[7]|0,this.Eh=rr[8]|0,this.El=rr[9]|0,this.Fh=rr[10]|0,this.Fl=rr[11]|0,this.Gh=rr[12]|0,this.Gl=rr[13]|0,this.Hh=rr[14]|0,this.Hl=rr[15]|0}}const ir=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class fde extends ux{constructor(){super(32),this.Ah=ir[0]|0,this.Al=ir[1]|0,this.Bh=ir[2]|0,this.Bl=ir[3]|0,this.Ch=ir[4]|0,this.Cl=ir[5]|0,this.Dh=ir[6]|0,this.Dl=ir[7]|0,this.Eh=ir[8]|0,this.El=ir[9]|0,this.Fh=ir[10]|0,this.Fl=ir[11]|0,this.Gh=ir[12]|0,this.Gl=ir[13]|0,this.Hh=ir[14]|0,this.Hl=ir[15]|0}}const Jy=Kf(()=>new lde),pde=Kf(()=>new ux),mde=Kf(()=>new hde),gde=Kf(()=>new fde),yde=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),_n=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function co(t,e,n,r,s,i){const a=s[i],o=s[i+1];let c=ve[2*t],l=ve[2*t+1],u=ve[2*e],d=ve[2*e+1],h=ve[2*n],f=ve[2*n+1],p=ve[2*r],m=ve[2*r+1],g=ox(c,u,a);l=cx(g,l,d,o),c=g|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:Due(m,p),Dl:Uue(m)},{h:f,l:h}=Ys(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:mo(d,u,24),Bl:go(d,u,24)},ve[2*t]=c,ve[2*t+1]=l,ve[2*e]=u,ve[2*e+1]=d,ve[2*n]=h,ve[2*n+1]=f,ve[2*r]=p,ve[2*r+1]=m}function lo(t,e,n,r,s,i){const a=s[i],o=s[i+1];let c=ve[2*t],l=ve[2*t+1],u=ve[2*e],d=ve[2*e+1],h=ve[2*n],f=ve[2*n+1],p=ve[2*r],m=ve[2*r+1],g=ox(c,u,a);l=cx(g,l,d,o),c=g|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:mo(m,p,16),Dl:go(m,p,16)},{h:f,l:h}=Ys(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Yd(d,u,63),Bl:Zd(d,u,63)},ve[2*t]=c,ve[2*t+1]=l,ve[2*e]=u,ve[2*e+1]=d,ve[2*n]=h,ve[2*n+1]=f,ve[2*r]=p,ve[2*r+1]=m}function wde(t,e={},n,r,s){if(ja(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:a,personalization:o}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(a!==void 0&&a.length!==r)throw new Error("salt must be undefined or "+r);if(o!==void 0&&o.length!==s)throw new Error("personalization must be undefined or "+s)}class bde extends Zy{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ja(e),ja(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=ef(this.buffer)}update(e){Lo(this),e=si(e),ui(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,a=e.byteOffset,o=e.buffer;for(let c=0;c<i;){this.pos===n&&(yo(s),this.compress(s,0,!1),yo(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=a+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(o,u,Math.floor((i-c)/4));yo(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);yo(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Lo(this),lx(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Us(this.buffer.subarray(n)),yo(r),this.compress(r,0,!0),yo(r);const s=ef(e);this.get().forEach((i,a)=>s[a]=la(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:a,pos:o}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=o,e.outputLen=a,e}clone(){return this._cloneInto()}}class vde extends bde{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=_n[0]|0,this.v0h=_n[1]|0,this.v1l=_n[2]|0,this.v1h=_n[3]|0,this.v2l=_n[4]|0,this.v2h=_n[5]|0,this.v3l=_n[6]|0,this.v3h=_n[7]|0,this.v4l=_n[8]|0,this.v4h=_n[9]|0,this.v5l=_n[10]|0,this.v5h=_n[11]|0,this.v6l=_n[12]|0,this.v6h=_n[13]|0,this.v7l=_n[14]|0,this.v7h=_n[15]|0,wde(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,a=0;if(r!==void 0&&(r=si(r),a=r.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,i!==void 0){i=si(i);const o=ef(i);this.v4l^=la(o[0]),this.v4h^=la(o[1]),this.v5l^=la(o[2]),this.v5h^=la(o[3])}if(s!==void 0){s=si(s);const o=ef(s);this.v6l^=la(o[0]),this.v6h^=la(o[1]),this.v7l^=la(o[2]),this.v7h^=la(o[3])}if(r!==void 0){const o=new Uint8Array(this.blockLen);o.set(r),this.update(o)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:a,v3l:o,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:m,v7h:g}=this;return[e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g]}set(e,n,r,s,i,a,o,c,l,u,d,h,f,p,m,g){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=o|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=m|0,this.v7h=g|0}compress(e,n,r){this.get().forEach((c,l)=>ve[l]=c),ve.set(_n,16);let{h:s,l:i}=NN(BigInt(this.length));ve[24]=_n[8]^i,ve[25]=_n[9]^s,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let a=0;const o=yde;for(let c=0;c<12;c++)co(0,4,8,12,e,n+2*o[a++]),lo(0,4,8,12,e,n+2*o[a++]),co(1,5,9,13,e,n+2*o[a++]),lo(1,5,9,13,e,n+2*o[a++]),co(2,6,10,14,e,n+2*o[a++]),lo(2,6,10,14,e,n+2*o[a++]),co(3,7,11,15,e,n+2*o[a++]),lo(3,7,11,15,e,n+2*o[a++]),co(0,5,10,15,e,n+2*o[a++]),lo(0,5,10,15,e,n+2*o[a++]),co(1,6,11,12,e,n+2*o[a++]),lo(1,6,11,12,e,n+2*o[a++]),co(2,7,8,13,e,n+2*o[a++]),lo(2,7,8,13,e,n+2*o[a++]),co(3,4,9,14,e,n+2*o[a++]),lo(3,4,9,14,e,n+2*o[a++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Us(ve)}destroy(){this.destroyed=!0,Us(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _de=Kue(t=>new vde(t)),Ede="https://rpc.walletconnect.org/v1";function KN(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(sde(n)).toString("hex")}async function xde(t,e,n,r,s,i){switch(n.t){case"eip191":return await Ade(t,e,n.s);case"eip1271":return await Sde(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function Ade(t,e,n){const r=Jse(n);return nie({payload:KN(e),signature:r}).toLowerCase()===t.toLowerCase()}async function Sde(t,e,n,r,s,i){const a=Pa(r);if(!a.namespace||!a.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const o="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:KN(e)).substring(2),h=o+d+c+u+l,f=await fetch(`${i||Ede}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Ide(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function Ide(){return Date.now()+Math.floor(Math.random()*1e3)}function Tde(t){const e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Wf.encode(i)}function Cde(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=_de(r,{dkLen:32});return Wf.encode(s)}function zT(t){const e=new Uint8Array(Jy(kde(t)));return Wf.encode(e)}function kde(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function WT(t){const e=Buffer.from(t,"base64"),n=jie(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Rie(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),a=gde(i);return iee.encode(a).replace(/=+$/,"")}function lb(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Ode(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(lb(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(lb(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(lb(r.length)),s.push(r);const i=Buffer.concat(s),a=Jy(i);return Buffer.from(a).toString("hex").toUpperCase()}function Pde(t){var e,n;const r=[];try{if(typeof t=="string")return r.push(t),r;if(typeof t!="object")return r;t!=null&&t.id&&r.push(t.id);const s=(n=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:n.transactionHashes;s&&r.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return r}var Rde=Object.defineProperty,$de=Object.defineProperties,Nde=Object.getOwnPropertyDescriptors,qT=Object.getOwnPropertySymbols,Dde=Object.prototype.hasOwnProperty,Ude=Object.prototype.propertyIsEnumerable,VT=(t,e,n)=>e in t?Rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bde=(t,e)=>{for(var n in e||(e={}))Dde.call(e,n)&&VT(t,n,e[n]);if(qT)for(var n of qT(e))Ude.call(e,n)&&VT(t,n,e[n]);return t},Mde=(t,e)=>$de(t,Nde(e));const Lde="did:pkh:",dx=t=>t?.split(":"),Fde=t=>{const e=t&&dx(t);if(e)return t.includes(Lde)?e[3]:e[1]},r_=t=>{const e=t&&dx(t);if(e)return e[2]+":"+e[3]},Og=t=>{const e=t&&dx(t);if(e)return e.pop()};async function HT(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=GN(s,s.iss),a=Og(s.iss);return await xde(a,i,r,r_(s.iss),n)}const GN=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Og(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,o=`Chain ID: ${Fde(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=bm(t.resources);if(p){const m=tf(p);s=Yde(s,m)}return[n,r,"",s,"",i,a,o,c,l,u,d,h,f].filter(m=>m!=null).join(`
`)};function jde(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function zde(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Hc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(a=>{if(typeof a!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${a}`)})})})}function Wde(t,e,n,r={}){return n?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:qde(e,n,r)}}}function qde(t,e,n={}){e=e?.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function YN(t){return Hc(t),`urn:recap:${jde(t).replace(/=/g,"")}`}function tf(t){const e=zde(t.replace("urn:recap:",""));return Hc(e),e}function Vde(t,e,n){const r=Wde(t,e,n);return YN(r)}function Hde(t){return t&&t.includes("urn:recap:")}function Kde(t,e){const n=tf(t),r=tf(e),s=Gde(n,r);return YN(s)}function Gde(t,e){Hc(t),Hc(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,a;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((a=e.att)==null?void 0:a[s])||{})).sort((o,c)=>o.localeCompare(c)).forEach(o=>{var c,l;r.att[s]=Mde(Bde({},r.att[s]),{[o]:((c=t.att[s])==null?void 0:c[o])||((l=e.att[s])==null?void 0:l[o])})})}),r}function Yde(t="",e){Hc(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(o=>{const c=Object.keys(e.att[o]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${o}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),a=`${n}${i}`;return`${t?t+" ":""}${a}`}function KT(t){var e;const n=tf(t);Hc(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function GT(t){const e=tf(t);Hc(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function bm(t){if(!t)return;const e=t?.[t.length-1];return Hde(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function ZN(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function s_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ub(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Dr(t,...e){if(!ZN(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function YT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zde(t,e){Dr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Do(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Du(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Jde(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Xde=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Qde(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function i_(t){if(typeof t=="string")t=Qde(t);else if(ZN(t))t=a_(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function ehe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function the(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const nhe=(t,e)=>{function n(r,...s){if(Dr(r),!Xde)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Dr(l):Dr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Dr(s[1]);const a=e(r,...s),o=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Dr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Dr(l),o(a.encrypt.length,u),a.encrypt(l,u)},decrypt(l,u){if(Dr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(a.decrypt.length,u),a.decrypt(l,u)}}}return Object.assign(n,t),n};function ZT(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!she(e))throw new Error("invalid output, must be aligned");return e}function JT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i);t.setUint32(e+4,a,r),t.setUint32(e+0,o,r)}function rhe(t,e,n){s_(n);const r=new Uint8Array(16),s=Jde(r);return JT(s,0,BigInt(e),n),JT(s,8,BigInt(t),n),r}function she(t){return t.byteOffset%4===0}function a_(t){return Uint8Array.from(t)}const JN=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),ihe=JN("expand 16-byte k"),ahe=JN("expand 32-byte k"),ohe=Do(ihe),che=Do(ahe);function gt(t,e){return t<<e|t>>>32-e}function o_(t){return t.byteOffset%4===0}const Lp=64,lhe=16,XN=2**32-1,XT=new Uint32Array;function uhe(t,e,n,r,s,i,a,o){const c=s.length,l=new Uint8Array(Lp),u=Do(l),d=o_(s)&&o_(i),h=d?Do(s):XT,f=d?Do(i):XT;for(let p=0;p<c;a++){if(t(e,n,r,u,a,o),a>=XN)throw new Error("arx: counter overflow");const m=Math.min(Lp,c-p);if(d&&m===Lp){const g=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let _=0,A;_<lhe;_++)A=g+_,f[A]=h[A]^u[_];p+=Lp;continue}for(let g=0,_;g<m;g++)_=p+g,i[_]=s[_]^l[g];p+=m}}function dhe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:a}=ehe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ub(s),ub(a),s_(i),s_(n),(o,c,l,u,d=0)=>{Dr(o),Dr(c),Dr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Dr(u),ub(d),d<0||d>=XN)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=o.length,m,g;if(p===32)f.push(m=a_(o)),g=che;else if(p===16&&n)m=new Uint8Array(32),m.set(o),m.set(o,16),g=ohe,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);o_(c)||f.push(c=a_(c));const _=Do(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(g,_,Do(c.subarray(0,16)),_),c=c.subarray(16)}const A=16-s;if(A!==c.length)throw new Error(`arx: nonce must be ${A} or 16 bytes`);if(A!==12){const y=new Uint8Array(12);y.set(c,i?0:12-c.length),c=y,f.push(c)}const w=Do(c);return uhe(t,g,_,w,l,u,d,a),Du(...f),u}}const Wn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class hhe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=i_(e),Dr(e,32);const n=Wn(e,0),r=Wn(e,2),s=Wn(e,4),i=Wn(e,6),a=Wn(e,8),o=Wn(e,10),c=Wn(e,12),l=Wn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|o<<2)&8191,this.r[7]=(o>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Wn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:a}=this,o=a[0],c=a[1],l=a[2],u=a[3],d=a[4],h=a[5],f=a[6],p=a[7],m=a[8],g=a[9],_=Wn(e,n+0),A=Wn(e,n+2),w=Wn(e,n+4),y=Wn(e,n+6),E=Wn(e,n+8),b=Wn(e,n+10),S=Wn(e,n+12),$=Wn(e,n+14);let P=i[0]+(_&8191),C=i[1]+((_>>>13|A<<3)&8191),B=i[2]+((A>>>10|w<<6)&8191),k=i[3]+((w>>>7|y<<9)&8191),D=i[4]+((y>>>4|E<<12)&8191),L=i[5]+(E>>>1&8191),v=i[6]+((E>>>14|b<<2)&8191),x=i[7]+((b>>>11|S<<5)&8191),O=i[8]+((S>>>8|$<<8)&8191),U=i[9]+($>>>5|s),I=0,F=I+P*o+C*(5*g)+B*(5*m)+k*(5*p)+D*(5*f);I=F>>>13,F&=8191,F+=L*(5*h)+v*(5*d)+x*(5*u)+O*(5*l)+U*(5*c),I+=F>>>13,F&=8191;let V=I+P*c+C*o+B*(5*g)+k*(5*m)+D*(5*p);I=V>>>13,V&=8191,V+=L*(5*f)+v*(5*h)+x*(5*d)+O*(5*u)+U*(5*l),I+=V>>>13,V&=8191;let q=I+P*l+C*c+B*o+k*(5*g)+D*(5*m);I=q>>>13,q&=8191,q+=L*(5*p)+v*(5*f)+x*(5*h)+O*(5*d)+U*(5*u),I+=q>>>13,q&=8191;let J=I+P*u+C*l+B*c+k*o+D*(5*g);I=J>>>13,J&=8191,J+=L*(5*m)+v*(5*p)+x*(5*f)+O*(5*h)+U*(5*d),I+=J>>>13,J&=8191;let G=I+P*d+C*u+B*l+k*c+D*o;I=G>>>13,G&=8191,G+=L*(5*g)+v*(5*m)+x*(5*p)+O*(5*f)+U*(5*h),I+=G>>>13,G&=8191;let K=I+P*h+C*d+B*u+k*l+D*c;I=K>>>13,K&=8191,K+=L*o+v*(5*g)+x*(5*m)+O*(5*p)+U*(5*f),I+=K>>>13,K&=8191;let ue=I+P*f+C*h+B*d+k*u+D*l;I=ue>>>13,ue&=8191,ue+=L*c+v*o+x*(5*g)+O*(5*m)+U*(5*p),I+=ue>>>13,ue&=8191;let fe=I+P*p+C*f+B*h+k*d+D*u;I=fe>>>13,fe&=8191,fe+=L*l+v*c+x*o+O*(5*g)+U*(5*m),I+=fe>>>13,fe&=8191;let Ee=I+P*m+C*p+B*f+k*h+D*d;I=Ee>>>13,Ee&=8191,Ee+=L*u+v*l+x*c+O*o+U*(5*g),I+=Ee>>>13,Ee&=8191;let ce=I+P*g+C*m+B*p+k*f+D*h;I=ce>>>13,ce&=8191,ce+=L*d+v*u+x*l+O*c+U*o,I+=ce>>>13,ce&=8191,I=(I<<2)+I|0,I=I+F|0,F=I&8191,I=I>>>13,V+=I,i[0]=F,i[1]=V,i[2]=q,i[3]=J,i[4]=G,i[5]=K,i[6]=ue,i[7]=fe,i[8]=Ee,i[9]=ce}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=s,s=e[o]>>>13,e[o]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let o=1;o<10;o++)r[o]=e[o]+s,s=r[o]>>>13,r[o]&=8191;r[9]-=8192;let i=(s^1)-1;for(let o=0;o<10;o++)r[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|r[o];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let a=e[0]+n[0];e[0]=a&65535;for(let o=1;o<8;o++)a=(e[o]+n[o]|0)+(a>>>16)|0,e[o]=a&65535;Du(r)}update(e){YT(this),e=i_(e),Dr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Du(this.h,this.r,this.buffer,this.pad)}digestInto(e){YT(this),Zde(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let a=0;a<8;a++)e[i++]=r[a]>>>0,e[i++]=r[a]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function fhe(t){const e=(r,s)=>t(s).update(i_(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const phe=fhe(t=>new hhe(t));function mhe(t,e,n,r,s,i=20){let a=t[0],o=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],m=e[5],g=e[6],_=e[7],A=s,w=n[0],y=n[1],E=n[2],b=a,S=o,$=c,P=l,C=u,B=d,k=h,D=f,L=p,v=m,x=g,O=_,U=A,I=w,F=y,V=E;for(let J=0;J<i;J+=2)b=b+C|0,U=gt(U^b,16),L=L+U|0,C=gt(C^L,12),b=b+C|0,U=gt(U^b,8),L=L+U|0,C=gt(C^L,7),S=S+B|0,I=gt(I^S,16),v=v+I|0,B=gt(B^v,12),S=S+B|0,I=gt(I^S,8),v=v+I|0,B=gt(B^v,7),$=$+k|0,F=gt(F^$,16),x=x+F|0,k=gt(k^x,12),$=$+k|0,F=gt(F^$,8),x=x+F|0,k=gt(k^x,7),P=P+D|0,V=gt(V^P,16),O=O+V|0,D=gt(D^O,12),P=P+D|0,V=gt(V^P,8),O=O+V|0,D=gt(D^O,7),b=b+B|0,V=gt(V^b,16),x=x+V|0,B=gt(B^x,12),b=b+B|0,V=gt(V^b,8),x=x+V|0,B=gt(B^x,7),S=S+k|0,U=gt(U^S,16),O=O+U|0,k=gt(k^O,12),S=S+k|0,U=gt(U^S,8),O=O+U|0,k=gt(k^O,7),$=$+D|0,I=gt(I^$,16),L=L+I|0,D=gt(D^L,12),$=$+D|0,I=gt(I^$,8),L=L+I|0,D=gt(D^L,7),P=P+C|0,F=gt(F^P,16),v=v+F|0,C=gt(C^v,12),P=P+C|0,F=gt(F^P,8),v=v+F|0,C=gt(C^v,7);let q=0;r[q++]=a+b|0,r[q++]=o+S|0,r[q++]=c+$|0,r[q++]=l+P|0,r[q++]=u+C|0,r[q++]=d+B|0,r[q++]=h+k|0,r[q++]=f+D|0,r[q++]=p+L|0,r[q++]=m+v|0,r[q++]=g+x|0,r[q++]=_+O|0,r[q++]=A+U|0,r[q++]=w+I|0,r[q++]=y+F|0,r[q++]=E+V|0}const ghe=dhe(mhe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),yhe=new Uint8Array(16),QT=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(yhe.subarray(n))},whe=new Uint8Array(32);function e6(t,e,n,r,s){const i=t(e,n,whe),a=phe.create(i);s&&QT(a,s),QT(a,r);const o=rhe(r.length,s?s.length:0,!0);a.update(o);const c=a.digest();return Du(i,o),c}const bhe=t=>(e,n,r)=>({encrypt(s,i){const a=s.length;i=ZT(a+16,i,!1),i.set(s);const o=i.subarray(0,-16);t(e,n,o,o,1);const c=e6(t,e,n,o,r);return i.set(c,a),Du(c),i},decrypt(s,i){i=ZT(s.length-16,i,!1);const a=s.subarray(0,-16),o=s.subarray(-16),c=e6(t,e,n,a,r);if(!the(o,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Du(c),i}}),QN=nhe({blockSize:64,nonceLength:12,tagLength:16},bhe(ghe));let eD=class extends Zy{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Yy(e);const r=si(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Us(i)}update(e){return Lo(this),this.iHash.update(e),this}digestInto(e){Lo(this),ui(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Xy=(t,e,n)=>new eD(t,e).update(n).digest();Xy.create=(t,e)=>new eD(t,e);function vhe(t,e,n){return Yy(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Xy(t,si(n),si(e))}const db=Uint8Array.from([0]),t6=Uint8Array.of();function _he(t,e,n,r=32){Yy(t),ja(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=t6);const a=new Uint8Array(i*s),o=Xy.create(t,e),c=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let u=0;u<i;u++)db[0]=u+1,c.update(u===0?t6:l).update(n).update(db).digestInto(l),a.set(l,s*u),o._cloneInto(c);return o.destroy(),c.destroy(),Us(l,db),a.slice(0,r)}const Ehe=(t,e,n,r,s)=>_he(t,vhe(t,e,n),r,s),Qy=Jy,hx=BigInt(0),c_=BigInt(1);function Pg(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function bc(t,e,n=""){const r=Gy(t),s=t?.length,i=e!==void 0;if(!r||i&&s!==e){const a=n&&`"${n}" `,o=i?` of length ${e}`:"",c=r?`length=${s}`:`type=${typeof t}`;throw new Error(a+"expected Uint8Array"+o+", got "+c)}return t}function Fp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function tD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hx:BigInt("0x"+t)}function e0(t){return tD(uu(t))}function Rg(t){return ui(t),tD(uu(Uint8Array.from(t).reverse()))}function fx(t,e){return kg(t.toString(16).padStart(e*2,"0"))}function px(t,e){return fx(t,e).reverse()}function cr(t,e,n){let r;if(typeof e=="string")try{r=kg(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Gy(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const hb=t=>typeof t=="bigint"&&hx<=t;function xhe(t,e,n){return hb(t)&&hb(e)&&hb(n)&&e<=t&&t<n}function l_(t,e,n,r){if(!xhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nD(t){let e;for(e=0;t>hx;t>>=c_,e+=1);return e}const Gf=t=>(c_<<BigInt(t))-c_;function Ahe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),a=r(t),o=0;const c=()=>{i.fill(1),a.fill(0),o=0},l=(...h)=>n(a,i,...h),u=(h=r(0))=>{a=l(s(0),h),i=l(),h.length!==0&&(a=l(s(1),h),i=l())},d=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Ao(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function t0(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,a){const o=t[s];if(a&&o===void 0)return;const c=typeof o;if(c!==i||o===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function n6(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Lr=BigInt(0),_r=BigInt(1),vc=BigInt(2),rD=BigInt(3),sD=BigInt(4),iD=BigInt(5),She=BigInt(7),aD=BigInt(8),Ihe=BigInt(9),oD=BigInt(16);function is(t,e){const n=t%e;return n>=Lr?n:e+n}function Gs(t,e,n){let r=t;for(;e-- >Lr;)r*=r,r%=n;return r}function r6(t,e){if(t===Lr)throw new Error("invert: expected non-zero number");if(e<=Lr)throw new Error("invert: expected positive modulus, got "+e);let n=is(t,e),r=e,s=Lr,i=_r;for(;n!==Lr;){const a=r/n,o=r%n,c=s-i*a;r=n,n=o,s=i,i=c}if(r!==_r)throw new Error("invert: does not exist");return is(s,e)}function mx(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function cD(t,e){const n=(t.ORDER+_r)/sD,r=t.pow(e,n);return mx(t,r,e),r}function The(t,e){const n=(t.ORDER-iD)/aD,r=t.mul(e,vc),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,vc),s),o=t.mul(i,t.sub(a,t.ONE));return mx(t,o,e),o}function Che(t){const e=Vo(t),n=lD(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),a=(t+She)/oD;return(o,c)=>{let l=o.pow(c,a),u=o.mul(l,r);const d=o.mul(l,s),h=o.mul(l,i),f=o.eql(o.sqr(u),c),p=o.eql(o.sqr(d),c);l=o.cmov(l,u,f),u=o.cmov(h,d,p);const m=o.eql(o.sqr(u),c),g=o.cmov(l,u,m);return mx(o,g,c),g}}function lD(t){if(t<rD)throw new Error("sqrt is not defined for small field");let e=t-_r,n=0;for(;e%vc===Lr;)e/=vc,n++;let r=vc;const s=Vo(t);for(;s6(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return cD;let i=s.pow(r,e);const a=(e+_r)/vc;return function(o,c){if(o.is0(c))return c;if(s6(o,c)!==1)throw new Error("Cannot find square root");let l=n,u=o.mul(o.ONE,i),d=o.pow(c,e),h=o.pow(c,a);for(;!o.eql(d,o.ONE);){if(o.is0(d))return o.ZERO;let f=1,p=o.sqr(d);for(;!o.eql(p,o.ONE);)if(f++,p=o.sqr(p),f===l)throw new Error("Cannot find square root");const m=_r<<BigInt(l-f-1),g=o.pow(u,m);l=f,u=o.sqr(g),d=o.mul(d,u),h=o.mul(h,g)}return h}}function khe(t){return t%sD===rD?cD:t%aD===iD?The:t%oD===Ihe?Che(t):lD(t)}const Ohe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Phe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Ohe.reduce((r,s)=>(r[s]="function",r),e);return t0(t,n),t}function Rhe(t,e,n){if(n<Lr)throw new Error("invalid exponent, negatives unsupported");if(n===Lr)return t.ONE;if(n===_r)return e;let r=t.ONE,s=e;for(;n>Lr;)n&_r&&(r=t.mul(r,s)),s=t.sqr(s),n>>=_r;return r}function uD(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}function s6(t,e){const n=(t.ORDER-_r)/vc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function dD(t,e){e!==void 0&&ja(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vo(t,e,n=!1,r={}){if(t<=Lr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,a=!1,o;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modFromBytes=="boolean"&&(a=h.modFromBytes),o=h.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:l}=dD(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:Gf(c),ZERO:Lr,ONE:_r,allowedLengths:o,create:h=>is(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Lr<=h&&h<t},is0:h=>h===Lr,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&_r)===_r,neg:h=>is(-h,t),eql:(h,f)=>h===f,sqr:h=>is(h*h,t),add:(h,f)=>is(h+f,t),sub:(h,f)=>is(h-f,t),mul:(h,f)=>is(h*f,t),pow:(h,f)=>Rhe(d,h,f),div:(h,f)=>is(h*r6(f,t),t),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>r6(h,t),sqrt:i||(h=>(u||(u=khe(t)),u(d,h))),toBytes:h=>n?px(h,l):fx(h,l),fromBytes:(h,f=!0)=>{if(o){if(!o.includes(h.length)||h.length>l)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+h.length);const m=new Uint8Array(l);m.set(h,n?0:m.length-h.length),h=m}if(h.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+h.length);let p=n?Rg(h):e0(h);if(a&&(p=is(p,t)),!f&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:h=>uD(d,h),cmov:(h,f,p)=>p?f:h});return Object.freeze(d)}function hD(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function fD(t){const e=hD(t);return e+Math.ceil(e/2)}function $he(t,e,n=!1){const r=t.length,s=hD(e),i=fD(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?Rg(t):e0(t),o=is(a,e-_r)+_r;return n?px(o,s):fx(o,s)}const Uu=BigInt(0),_c=BigInt(1);function $g(t,e){const n=e.negate();return t?n:e}function fb(t,e){const n=uD(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function pD(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function pb(t,e){pD(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Gf(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function i6(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),c=t>>a;o>r&&(o-=i,c+=_c);const l=e*r,u=l+Math.abs(o)-1,d=o===0,h=o<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Nhe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Dhe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const mb=new WeakMap,mD=new WeakMap;function gb(t){return mD.get(t)||1}function a6(t){if(t!==Uu)throw new Error("invalid wNAF")}class Uhe{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>Uu;)n&_c&&(r=r.add(s)),s=s.double(),n>>=_c;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=pb(n,this.bits),i=[];let a=e,o=a;for(let c=0;c<r;c++){o=a,i.push(o);for(let l=1;l<s;l++)o=o.add(a),i.push(o);a=o.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=pb(e,this.bits);for(let o=0;o<a.windows;o++){const{nextN:c,offset:l,isZero:u,isNeg:d,isNegF:h,offsetF:f}=i6(r,o,a);r=c,u?i=i.add($g(h,n[f])):s=s.add($g(d,n[l]))}return a6(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=pb(e,this.bits);for(let a=0;a<i.windows&&r!==Uu;a++){const{nextN:o,offset:c,isZero:l,isNeg:u}=i6(r,a,i);if(r=o,!l){const d=n[c];s=s.add(u?d.negate():d)}}return a6(r),s}getPrecomputes(e,n,r){let s=mb.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),mb.set(n,s))),s}cached(e,n,r){const s=gb(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=gb(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){pD(n,this.bits),mD.set(e,n),mb.delete(e)}hasCache(e){return gb(e)!==1}}function Bhe(t,e,n,r){let s=e,i=t.ZERO,a=t.ZERO;for(;n>Uu||r>Uu;)n&_c&&(i=i.add(s)),r&_c&&(a=a.add(s)),s=s.double(),n>>=_c,r>>=_c;return{p1:i,p2:a}}function Mhe(t,e,n,r){Nhe(n,t),Dhe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=nD(BigInt(s));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const l=Gf(c),u=new Array(Number(l)+1).fill(a),d=Math.floor((e.BITS-1)/c)*c;let h=a;for(let f=d;f>=0;f-=c){u.fill(a);for(let m=0;m<i;m++){const g=r[m],_=Number(g>>BigInt(f)&l);u[_]=u[_].add(n[m])}let p=a;for(let m=u.length-1,g=a;m>0;m--)g=g.add(u[m]),p=p.add(g);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function o6(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Phe(e),e}else return Vo(t,{isLE:n})}function Lhe(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const c=e[o];if(!(typeof c=="bigint"&&c>Uu))throw new Error(`CURVE.${o} must be positive bigint`)}const s=o6(e.p,n.Fp,r),i=o6(e.n,n.Fn,r),a=["Gx","Gy","a","b"];for(const o of a)if(!s.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),LN("HashToScalar-");const Ad=BigInt(0),Tl=BigInt(1),jp=BigInt(2);function Fhe(t){return t0(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function jhe(t){const e=Fhe(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:a}=e,o=r==="x25519";if(!o&&r!=="x448")throw new Error("invalid type");const c=a||ol,l=o?255:448,u=o?32:56,d=BigInt(o?9:5),h=BigInt(o?121665:39081),f=o?jp**BigInt(254):jp**BigInt(447),p=o?BigInt(8)*jp**BigInt(251)-Tl:BigInt(4)*jp**BigInt(445)-Tl,m=f+p+Tl,g=k=>is(k,n),_=A(d);function A(k){return px(g(k),u)}function w(k){const D=cr("u coordinate",k,u);return o&&(D[31]&=127),g(Rg(D))}function y(k){return Rg(s(cr("scalar",k,u)))}function E(k,D){const L=$(w(D),y(k));if(L===Ad)throw new Error("invalid private or public key received");return A(L)}function b(k){return E(k,_)}function S(k,D,L){const v=g(k*(D-L));return D=g(D-v),L=g(L+v),{x_2:D,x_3:L}}function $(k,D){l_("u",k,Ad,n),l_("scalar",D,f,m);const L=D,v=k;let x=Tl,O=Ad,U=k,I=Tl,F=Ad;for(let q=BigInt(l-1);q>=Ad;q--){const J=L>>q&Tl;F^=J,{x_2:x,x_3:U}=S(F,x,U),{x_2:O,x_3:I}=S(F,O,I),F=J;const G=x+O,K=g(G*G),ue=x-O,fe=g(ue*ue),Ee=K-fe,ce=U+I,oe=U-I,X=g(oe*G),Re=g(ce*ue),Me=X+Re,Oe=X-Re;U=g(Me*Me),I=g(v*g(Oe*Oe)),x=g(K*fe),O=g(Ee*(K+g(h*Ee)))}({x_2:x,x_3:U}=S(F,x,U)),{x_2:O,x_3:I}=S(F,O,I);const V=i(O);return g(x*V)}const P={secretKey:u,publicKey:u,seed:u},C=(k=c(u))=>(ui(k,P.seed),k);function B(k){const D=C(k);return{secretKey:D,publicKey:b(D)}}return{keygen:B,getSharedSecret:(k,D)=>E(k,D),getPublicKey:k=>b(k),scalarMult:E,scalarMultBase:b,utils:{randomSecretKey:C,randomPrivateKey:C},GuBytes:_.slice(),lengths:P}}const zhe=BigInt(1),c6=BigInt(2),Whe=BigInt(3),qhe=BigInt(5);BigInt(8);const gD=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Vhe={p:gD,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Hhe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=gD,a=t*t%i*t%i,o=Gs(a,c6,i)*a%i,c=Gs(o,zhe,i)*t%i,l=Gs(c,qhe,i)*c%i,u=Gs(l,e,i)*l%i,d=Gs(u,n,i)*u%i,h=Gs(d,r,i)*d%i,f=Gs(h,s,i)*h%i,p=Gs(f,s,i)*h%i,m=Gs(p,e,i)*l%i;return{pow_p_5_8:Gs(m,c6,i)*t%i,b2:a}}function Khe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Ghe=Vo(Vhe.p,{isLE:!0}),u_=(()=>{const t=Ghe.ORDER;return jhe({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Hhe(e);return is(Gs(n,Whe,t)*r,t)},adjustScalarBytes:Khe})})(),l6=(t,e)=>(t+(t>=0?e:-e)/yD)/e;function Yhe(t,e,n){const[[r,s],[i,a]]=e,o=l6(a*t,n),c=l6(-s*t,n);let l=t-o*r-c*i,u=-o*s-c*a;const d=l<Aa,h=u<Aa;d&&(l=-l),h&&(u=-u);const f=Gf(Math.ceil(nD(n)/2))+du;if(l<Aa||l>=f||u<Aa||u>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}function d_(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function yb(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Pg(n.lowS,"lowS"),Pg(n.prehash,"prehash"),n.format!==void 0&&d_(n.format),n}class Zhe extends Error{constructor(e=""){super(e)}}const wa={Err:Zhe,_tlv:{encode:(t,e)=>{const{Err:n}=wa;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Fp(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Fp(s.length/2|128):"";return Fp(t)+i+s+e},decode(t,e){const{Err:n}=wa;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)a=a<<8|u;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=wa;if(t<Aa)throw new e("integer: negative integers are not allowed");let n=Fp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=wa;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return e0(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=wa,s=cr("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=wa,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Aa=BigInt(0),du=BigInt(1),yD=BigInt(2),zp=BigInt(3),Jhe=BigInt(4);function Zl(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=cr("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Xhe(t,e={}){const n=Lhe("weierstrass",t,e),{Fp:r,Fn:s}=n;let i=n.CURVE;const{h:a,n:o}=i;t0(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=bD(r,s);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(k,D,L){const{x:v,y:x}=D.toAffine(),O=r.toBytes(v);if(Pg(L,"isCompressed"),L){u();const U=!r.isOdd(x);return Ao(wD(U),O)}else return Ao(Uint8Array.of(4),O,r.toBytes(x))}function h(k){bc(k,void 0,"Point");const{publicKey:D,publicKeyUncompressed:L}=l,v=k.length,x=k[0],O=k.subarray(1);if(v===D&&(x===2||x===3)){const U=r.fromBytes(O);if(!r.isValid(U))throw new Error("bad point: is not on curve, wrong x");const I=m(U);let F;try{F=r.sqrt(I)}catch(q){const J=q instanceof Error?": "+q.message:"";throw new Error("bad point: is not on curve, sqrt error"+J)}u();const V=r.isOdd(F);return(x&1)===1!==V&&(F=r.neg(F)),{x:U,y:F}}else if(v===L&&x===4){const U=r.BYTES,I=r.fromBytes(O.subarray(0,U)),F=r.fromBytes(O.subarray(U,U*2));if(!g(I,F))throw new Error("bad point: is not on curve");return{x:I,y:F}}else throw new Error(`bad point: got length ${v}, expected compressed=${D} or uncompressed=${L}`)}const f=e.toBytes||d,p=e.fromBytes||h;function m(k){const D=r.sqr(k),L=r.mul(D,k);return r.add(r.add(L,r.mul(k,i.a)),i.b)}function g(k,D){const L=r.sqr(D),v=m(k);return r.eql(L,v)}if(!g(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const _=r.mul(r.pow(i.a,zp),Jhe),A=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(_,A)))throw new Error("bad curve params: a or b");function w(k,D,L=!1){if(!r.isValid(D)||L&&r.is0(D))throw new Error(`bad point coordinate ${k}`);return D}function y(k){if(!(k instanceof P))throw new Error("ProjectivePoint expected")}function E(k){if(!c||!c.basises)throw new Error("no endo");return Yhe(k,c.basises,s.ORDER)}const b=n6((k,D)=>{const{X:L,Y:v,Z:x}=k;if(r.eql(x,r.ONE))return{x:L,y:v};const O=k.is0();D==null&&(D=O?r.ONE:r.inv(x));const U=r.mul(L,D),I=r.mul(v,D),F=r.mul(x,D);if(O)return{x:r.ZERO,y:r.ZERO};if(!r.eql(F,r.ONE))throw new Error("invZ was invalid");return{x:U,y:I}}),S=n6(k=>{if(k.is0()){if(e.allowInfinityPoint&&!r.is0(k.Y))return;throw new Error("bad point: ZERO")}const{x:D,y:L}=k.toAffine();if(!r.isValid(D)||!r.isValid(L))throw new Error("bad point: x or y not field elements");if(!g(D,L))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(k,D,L,v,x){return L=new P(r.mul(L.X,k),L.Y,L.Z),D=$g(v,D),L=$g(x,L),D.add(L)}class P{constructor(D,L,v){this.X=w("x",D),this.Y=w("y",L,!0),this.Z=w("z",v),Object.freeze(this)}static CURVE(){return i}static fromAffine(D){const{x:L,y:v}=D||{};if(!D||!r.isValid(L)||!r.isValid(v))throw new Error("invalid affine point");if(D instanceof P)throw new Error("projective point not allowed");return r.is0(L)&&r.is0(v)?P.ZERO:new P(L,v,r.ONE)}static fromBytes(D){const L=P.fromAffine(p(bc(D,void 0,"point")));return L.assertValidity(),L}static fromHex(D){return P.fromBytes(cr("pointHex",D))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,L=!0){return B.createCache(this,D),L||this.multiply(zp),this}assertValidity(){S(this)}hasEvenY(){const{y:D}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(D)}equals(D){y(D);const{X:L,Y:v,Z:x}=this,{X:O,Y:U,Z:I}=D,F=r.eql(r.mul(L,I),r.mul(O,x)),V=r.eql(r.mul(v,I),r.mul(U,x));return F&&V}negate(){return new P(this.X,r.neg(this.Y),this.Z)}double(){const{a:D,b:L}=i,v=r.mul(L,zp),{X:x,Y:O,Z:U}=this;let I=r.ZERO,F=r.ZERO,V=r.ZERO,q=r.mul(x,x),J=r.mul(O,O),G=r.mul(U,U),K=r.mul(x,O);return K=r.add(K,K),V=r.mul(x,U),V=r.add(V,V),I=r.mul(D,V),F=r.mul(v,G),F=r.add(I,F),I=r.sub(J,F),F=r.add(J,F),F=r.mul(I,F),I=r.mul(K,I),V=r.mul(v,V),G=r.mul(D,G),K=r.sub(q,G),K=r.mul(D,K),K=r.add(K,V),V=r.add(q,q),q=r.add(V,q),q=r.add(q,G),q=r.mul(q,K),F=r.add(F,q),G=r.mul(O,U),G=r.add(G,G),q=r.mul(G,K),I=r.sub(I,q),V=r.mul(G,J),V=r.add(V,V),V=r.add(V,V),new P(I,F,V)}add(D){y(D);const{X:L,Y:v,Z:x}=this,{X:O,Y:U,Z:I}=D;let F=r.ZERO,V=r.ZERO,q=r.ZERO;const J=i.a,G=r.mul(i.b,zp);let K=r.mul(L,O),ue=r.mul(v,U),fe=r.mul(x,I),Ee=r.add(L,v),ce=r.add(O,U);Ee=r.mul(Ee,ce),ce=r.add(K,ue),Ee=r.sub(Ee,ce),ce=r.add(L,x);let oe=r.add(O,I);return ce=r.mul(ce,oe),oe=r.add(K,fe),ce=r.sub(ce,oe),oe=r.add(v,x),F=r.add(U,I),oe=r.mul(oe,F),F=r.add(ue,fe),oe=r.sub(oe,F),q=r.mul(J,ce),F=r.mul(G,fe),q=r.add(F,q),F=r.sub(ue,q),q=r.add(ue,q),V=r.mul(F,q),ue=r.add(K,K),ue=r.add(ue,K),fe=r.mul(J,fe),ce=r.mul(G,ce),ue=r.add(ue,fe),fe=r.sub(K,fe),fe=r.mul(J,fe),ce=r.add(ce,fe),K=r.mul(ue,ce),V=r.add(V,K),K=r.mul(oe,ce),F=r.mul(Ee,F),F=r.sub(F,K),K=r.mul(Ee,ue),q=r.mul(oe,q),q=r.add(q,K),new P(F,V,q)}subtract(D){return this.add(D.negate())}is0(){return this.equals(P.ZERO)}multiply(D){const{endo:L}=e;if(!s.isValidNot0(D))throw new Error("invalid scalar: out of range");let v,x;const O=U=>B.cached(this,U,I=>fb(P,I));if(L){const{k1neg:U,k1:I,k2neg:F,k2:V}=E(D),{p:q,f:J}=O(I),{p:G,f:K}=O(V);x=J.add(K),v=$(L.beta,q,G,U,F)}else{const{p:U,f:I}=O(D);v=U,x=I}return fb(P,[v,x])[0]}multiplyUnsafe(D){const{endo:L}=e,v=this;if(!s.isValid(D))throw new Error("invalid scalar: out of range");if(D===Aa||v.is0())return P.ZERO;if(D===du)return v;if(B.hasCache(this))return this.multiply(D);if(L){const{k1neg:x,k1:O,k2neg:U,k2:I}=E(D),{p1:F,p2:V}=Bhe(P,v,O,I);return $(L.beta,F,V,x,U)}else return B.unsafe(v,D)}multiplyAndAddUnsafe(D,L,v){const x=this.multiplyUnsafe(L).add(D.multiplyUnsafe(v));return x.is0()?void 0:x}toAffine(D){return b(this,D)}isTorsionFree(){const{isTorsionFree:D}=e;return a===du?!0:D?D(P,this):B.unsafe(this,o).is0()}clearCofactor(){const{clearCofactor:D}=e;return a===du?this:D?D(P,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(D=!0){return Pg(D,"isCompressed"),this.assertValidity(),f(P,this,D)}toHex(D=!0){return uu(this.toBytes(D))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(D=!0){return this.toBytes(D)}_setWindowSize(D){this.precompute(D)}static normalizeZ(D){return fb(P,D)}static msm(D,L){return Mhe(P,s,D,L)}static fromPrivateKey(D){return P.BASE.multiply(Zl(s,D))}}P.BASE=new P(i.Gx,i.Gy,r.ONE),P.ZERO=new P(r.ZERO,r.ONE,r.ZERO),P.Fp=r,P.Fn=s;const C=s.BITS,B=new Uhe(P,e.endo?Math.ceil(C/2):C);return P.BASE.precompute(8),P}function wD(t){return Uint8Array.of(t?2:3)}function bD(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Qhe(t,e={}){const{Fn:n}=t,r=e.randomBytes||ol,s=Object.assign(bD(t.Fp,n),{seed:fD(n.ORDER)});function i(h){try{return!!Zl(n,h)}catch{return!1}}function a(h,f){const{publicKey:p,publicKeyUncompressed:m}=s;try{const g=h.length;return f===!0&&g!==p||f===!1&&g!==m?!1:!!t.fromBytes(h)}catch{return!1}}function o(h=r(s.seed)){return $he(bc(h,s.seed,"seed"),n.ORDER)}function c(h,f=!0){return t.BASE.multiply(Zl(n,h)).toBytes(f)}function l(h){const f=o(h);return{secretKey:f,publicKey:c(f)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof t)return!0;const{secretKey:f,publicKey:p,publicKeyUncompressed:m}=s;if(n.allowedLengths||f===p)return;const g=cr("key",h).length;return g===p||g===m}function d(h,f,p=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(f)===!1)throw new Error("second arg must be public key");const m=Zl(n,h);return t.fromHex(f).multiply(m).toBytes(p)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:l,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:o,isValidPrivateKey:i,randomPrivateKey:o,normPrivateKeyToScalar:h=>Zl(n,h),precompute(h=8,f=t.BASE){return f.precompute(h,!1)}},lengths:s})}function efe(t,e,n={}){Yy(e),t0(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||ol,s=n.hmac||((L,...v)=>Xy(e,L,Ao(...v))),{Fp:i,Fn:a}=t,{ORDER:o,BITS:c}=a,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=Qhe(t,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},m="compact";function g(L){const v=o>>du;return L>v}function _(L,v){if(!a.isValidNot0(v))throw new Error(`invalid signature ${L}: out of range 1..Point.Fn.ORDER`);return v}function A(L,v){d_(v);const x=f.signature,O=v==="compact"?x:v==="recovered"?x+1:void 0;return bc(L,O,`${v} signature`)}class w{constructor(v,x,O){this.r=_("r",v),this.s=_("s",x),O!=null&&(this.recovery=O),Object.freeze(this)}static fromBytes(v,x=m){A(v,x);let O;if(x==="der"){const{r:V,s:q}=wa.toSig(bc(v));return new w(V,q)}x==="recovered"&&(O=v[0],x="compact",v=v.subarray(1));const U=a.BYTES,I=v.subarray(0,U),F=v.subarray(U,U*2);return new w(a.fromBytes(I),a.fromBytes(F),O)}static fromHex(v,x){return this.fromBytes(kg(v),x)}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const x=i.ORDER,{r:O,s:U,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(o*yD<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const F=I===2||I===3?O+o:O;if(!i.isValid(F))throw new Error("recovery id 2 or 3 invalid");const V=i.toBytes(F),q=t.fromBytes(Ao(wD((I&1)===0),V)),J=a.inv(F),G=E(cr("msgHash",v)),K=a.create(-G*J),ue=a.create(U*J),fe=t.BASE.multiplyUnsafe(K).add(q.multiplyUnsafe(ue));if(fe.is0())throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return g(this.s)}toBytes(v=m){if(d_(v),v==="der")return kg(wa.hexFromSig(this));const x=a.toBytes(this.r),O=a.toBytes(this.s);if(v==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ao(Uint8Array.of(this.recovery),x,O)}return Ao(x,O)}toHex(v){return uu(this.toBytes(v))}assertValidity(){}static fromCompact(v){return w.fromBytes(cr("sig",v),"compact")}static fromDER(v){return w.fromBytes(cr("sig",v),"der")}normalizeS(){return this.hasHighS()?new w(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return uu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return uu(this.toBytes("compact"))}}const y=n.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const v=e0(L),x=L.length*8-c;return x>0?v>>BigInt(x):v},E=n.bits2int_modN||function(L){return a.create(y(L))},b=Gf(c);function S(L){return l_("num < 2^"+c,L,Aa,b),a.toBytes(L)}function $(L,v){return bc(L,void 0,"message"),v?bc(e(L),void 0,"prehashed message"):L}function P(L,v,x){if(["recovered","canonical"].some(ue=>ue in x))throw new Error("sign() legacy options not supported");const{lowS:O,prehash:U,extraEntropy:I}=yb(x,p);L=$(L,U);const F=E(L),V=Zl(a,v),q=[S(V),S(F)];if(I!=null&&I!==!1){const ue=I===!0?r(f.secretKey):I;q.push(cr("extraEntropy",ue))}const J=Ao(...q),G=F;function K(ue){const fe=y(ue);if(!a.isValidNot0(fe))return;const Ee=a.inv(fe),ce=t.BASE.multiply(fe).toAffine(),oe=a.create(ce.x);if(oe===Aa)return;const X=a.create(Ee*a.create(G+oe*V));if(X===Aa)return;let Re=(ce.x===oe?0:2)|Number(ce.y&du),Me=X;return O&&g(X)&&(Me=a.neg(X),Re^=1),new w(oe,Me,Re)}return{seed:J,k2sig:K}}function C(L,v,x={}){L=cr("message",L);const{seed:O,k2sig:U}=P(L,v,x);return Ahe(e.outputLen,a.BYTES,s)(O,U)}function B(L){let v;const x=typeof L=="string"||Gy(L),O=!x&&L!==null&&typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!x&&!O)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(O)v=new w(L.r,L.s);else if(x){try{v=w.fromBytes(cr("sig",L),"der")}catch(U){if(!(U instanceof wa.Err))throw U}if(!v)try{v=w.fromBytes(cr("sig",L),"compact")}catch{return!1}}return v||!1}function k(L,v,x,O={}){const{lowS:U,prehash:I,format:F}=yb(O,p);if(x=cr("publicKey",x),v=$(cr("message",v),I),"strict"in O)throw new Error("options.strict was renamed to lowS");const V=F===void 0?B(L):w.fromBytes(cr("sig",L),F);if(V===!1)return!1;try{const q=t.fromBytes(x);if(U&&V.hasHighS())return!1;const{r:J,s:G}=V,K=E(v),ue=a.inv(G),fe=a.create(K*ue),Ee=a.create(J*ue),ce=t.BASE.multiplyUnsafe(fe).add(q.multiplyUnsafe(Ee));return ce.is0()?!1:a.create(ce.x)===J}catch{return!1}}function D(L,v,x={}){const{prehash:O}=yb(x,p);return v=$(v,O),w.fromBytes(L,"recovered").recoverPublicKey(v).toBytes()}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:t,sign:C,verify:k,recoverPublicKey:D,Signature:w,hash:e})}function tfe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Vo(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function nfe(t){const{CURVE:e,curveOpts:n}=tfe(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function rfe(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,dD(n.Fn.ORDER,n.Fn.BITS))})}function sfe(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=nfe(t),i=Xhe(e,n),a=efe(i,r,s);return rfe(t,a)}function h_(t,e){const n=r=>sfe({...t,hash:r});return{...n(e),create:n}}const vD={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},_D={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},ED={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},ife=Vo(vD.p),afe=Vo(_D.p),ofe=Vo(ED.p),cfe=h_({...vD,Fp:ife,lowS:!1},Jy);h_({..._D,Fp:afe,lowS:!1},mde),h_({...ED,Fp:ofe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},pde);const lfe=cfe,xD="base10",Er="base16",Ur="base64pad",So="base64url",Yf="utf8",AD=0,Ra=1,Zf=2,ufe=0,u6=1,dh=12,gx=32;function dfe(){const t=u_.utils.randomPrivateKey(),e=u_.getPublicKey(t);return{privateKey:zr(t,Er),publicKey:zr(e,Er)}}function f_(){const t=ol(gx);return zr(t,Er)}function hfe(t,e){const n=u_.getSharedSecret($s(t,Er),$s(e,Er)),r=Ehe(Qy,n,void 0,void 0,gx);return zr(r,Er)}function vm(t){const e=Qy($s(t,Er));return zr(e,Er)}function Os(t){const e=Qy($s(t,Yf));return zr(e,Er)}function SD(t){return $s(`${t}`,xD)}function Kc(t){return Number(zr(t,xD))}function ID(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function TD(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function ffe(t){const e=SD(typeof t.type<"u"?t.type:AD);if(Kc(e)===Ra&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?$s(t.senderPublicKey,Er):void 0,r=typeof t.iv<"u"?$s(t.iv,Er):ol(dh),s=$s(t.symKey,Er),i=QN(s,r).encrypt($s(t.message,Yf)),a=CD({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===So?ID(a):a}function pfe(t){const e=$s(t.symKey,Er),{sealed:n,iv:r}=nf({encoded:t.encoded,encoding:t.encoding}),s=QN(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return zr(s,Yf)}function mfe(t,e){const n=SD(Zf),r=ol(dh),s=$s(t,Yf),i=CD({type:n,sealed:s,iv:r});return e===So?ID(i):i}function gfe(t,e){const{sealed:n}=nf({encoded:t,encoding:e});return zr(n,Yf)}function CD(t){if(Kc(t.type)===Zf)return zr(uh([t.type,t.sealed]),Ur);if(Kc(t.type)===Ra){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return zr(uh([t.type,t.senderPublicKey,t.iv,t.sealed]),Ur)}return zr(uh([t.type,t.iv,t.sealed]),Ur)}function nf(t){const e=(t.encoding||Ur)===So?TD(t.encoded):t.encoded,n=$s(e,Ur),r=n.slice(ufe,u6),s=u6;if(Kc(r)===Ra){const c=s+gx,l=c+dh,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Kc(r)===Zf){const c=n.slice(s),l=ol(dh);return{type:r,sealed:c,iv:l}}const i=s+dh,a=n.slice(s,i),o=n.slice(i);return{type:r,sealed:o,iv:a}}function yfe(t,e){const n=nf({encoded:t,encoding:e?.encoding});return kD({type:Kc(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?zr(n.senderPublicKey,Er):void 0,receiverPublicKey:e?.receiverPublicKey})}function kD(t){const e=t?.type||AD;if(e===Ra){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function d6(t){return t.type===Ra&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function h6(t){return t.type===Zf}function wfe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return uh([new Uint8Array([4]),e,n])}function bfe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(TD(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const a=i.slice(0,32),o=i.slice(32,64),c=`${n}.${r}`,l=Qy(c),u=wfe(e);if(!lfe.verify(uh([a,o]),l,u))throw new Error("Invalid signature");return Q1(t).payload}const vfe="irn";function Ng(t){return t?.relay||{protocol:vfe}}function Jl(t){const e=Ole[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var _fe=Object.defineProperty,Efe=Object.defineProperties,xfe=Object.getOwnPropertyDescriptors,f6=Object.getOwnPropertySymbols,Afe=Object.prototype.hasOwnProperty,Sfe=Object.prototype.propertyIsEnumerable,p6=(t,e,n)=>e in t?_fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wb=(t,e)=>{for(var n in e||(e={}))Afe.call(e,n)&&p6(t,n,e[n]);if(f6)for(var n of f6(e))Sfe.call(e,n)&&p6(t,n,e[n]);return t},Ife=(t,e)=>Efe(t,xfe(e));function Tfe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),a=t[s];n[i]=a}}),n}function m6(t){if(!t.includes("wc:")){const l=$N(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",a=new URLSearchParams(i),o=Object.fromEntries(a.entries()),c=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:r,topic:Cfe(s[0]),version:parseInt(s[1],10),symKey:o.symKey,relay:Tfe(o),methods:c,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function Cfe(t){return t.startsWith("//")?t.substring(2):t}function kfe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,a=n+e+i;t[i]&&(r[a]=t[i])}),r}function g6(t){const e=new URLSearchParams,n=wb(wb(Ife(wb({},kfe(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(n).sort(([r],[s])=>r.localeCompare(s)).forEach(([r,s])=>{s!==void 0&&e.append(r,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Wp(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Ofe=Object.defineProperty,Pfe=Object.defineProperties,Rfe=Object.getOwnPropertyDescriptors,y6=Object.getOwnPropertySymbols,$fe=Object.prototype.hasOwnProperty,Nfe=Object.prototype.propertyIsEnumerable,w6=(t,e,n)=>e in t?Ofe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dfe=(t,e)=>{for(var n in e||(e={}))$fe.call(e,n)&&w6(t,n,e[n]);if(y6)for(var n of y6(e))Nfe.call(e,n)&&w6(t,n,e[n]);return t},Ufe=(t,e)=>Pfe(t,Rfe(e));function ed(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Bfe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...ed(n.accounts))}),e}function Mfe(t,e){const n=[];return Object.values(t).forEach(r=>{ed(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Lfe(t,e){const n=[];return Object.values(t).forEach(r=>{ed(r.accounts).includes(e)&&n.push(...r.events)}),n}function n0(t){return t.includes(":")}function Xl(t){return n0(t)?t.split(":")[0]:t}function b6(t){var e,n,r;const s={};if(!Li(t))return s;for(const[i,a]of Object.entries(t)){const o=n0(i)?[i]:a.chains,c=a.methods||[],l=a.events||[],u=Xl(i);s[u]=Ufe(Dfe({},s[u]),{chains:Mi(o,(e=s[u])==null?void 0:e.chains),methods:Mi(c,(n=s[u])==null?void 0:n.methods),events:Mi(l,(r=s[u])==null?void 0:r.events)})}return s}function Ffe(t){const e={};return t?.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function v6(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Ffe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Mi(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function jfe(t,e){var n,r,s,i,a,o;const c=b6(t),l=b6(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Mi((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Mi((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Mi((a=c[h])==null?void 0:a.events,(o=l[h])==null?void 0:o.events)};return u}const zfe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Wfe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ye(t,e){const{message:n,code:r}=Wfe[t];return{message:e?`${n} ${e}`:n,code:r}}function Wt(t,e){const{message:n,code:r}=zfe[t];return{message:e?`${n} ${e}`:n,code:r}}function Ns(t,e){return!!Array.isArray(t)}function Li(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function In(t){return typeof t>"u"}function gn(t,e){return e&&In(t)?!0:typeof t=="string"&&!!t.trim().length}function yx(t,e){return e&&In(t)?!0:typeof t=="number"&&!isNaN(t)}function qfe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return wc(s,r)?(r.forEach(a=>{const{accounts:o,methods:c,events:l}=t.namespaces[a],u=ed(o),d=n[a];(!wc(CN(a,d),u)||!wc(d.methods,c)||!wc(d.events,l))&&(i=!1)}),i):!1}function Dg(t){return gn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Vfe(t){if(gn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Dg(n)}}return!1}function Hfe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(gn(t,!1)){if(e(t))return!0;const n=$N(t);return e(n)}}catch{}return!1}function Kfe(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Gfe(t){return t?.topic}function Yfe(t,e){let n=null;return gn(t?.publicKey,!1)||(n=ye("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function _6(t){let e=!0;return Ns(t)?t.length&&(e=t.every(n=>gn(n,!1))):e=!1,e}function Zfe(t,e,n){let r=null;return Ns(e)&&e.length?e.forEach(s=>{r||Dg(s)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Dg(t)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Jfe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const a=Zfe(s,CN(s,i),`${e} ${n}`);a&&(r=a)}),r}function Xfe(t,e){let n=null;return Ns(t)?t.forEach(r=>{n||Vfe(r)||(n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Qfe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Xfe(r?.accounts,`${e} namespace`);s&&(n=s)}),n}function epe(t,e){let n=null;return _6(t?.methods)?_6(t?.events)||(n=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function OD(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=epe(r,`${e}, namespace`);s&&(n=s)}),n}function tpe(t,e,n){let r=null;if(t&&Li(t)){const s=OD(t,e);s&&(r=s);const i=Jfe(t,e,n);i&&(r=i)}else r=ye("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function bb(t,e){let n=null;if(t&&Li(t)){const r=OD(t,e);r&&(n=r);const s=Qfe(t,e);s&&(n=s)}else n=ye("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function PD(t){return gn(t.protocol,!0)}function npe(t,e){let n=!1;return t?t&&Ns(t)&&t.length&&t.forEach(r=>{n=PD(r)}):n=!0,n}function rpe(t){return typeof t=="number"}function Rr(t){return typeof t<"u"&&typeof t!==null}function spe(t){return!(!t||typeof t!="object"||!t.code||!yx(t.code,!1)||!t.message||!gn(t.message,!1))}function ipe(t){return!(In(t)||!gn(t.method,!1))}function ape(t){return!(In(t)||In(t.result)&&In(t.error)||!yx(t.id,!1)||!gn(t.jsonrpc,!1))}function ope(t){return!(In(t)||!gn(t.name,!1))}function E6(t,e){return!(!Dg(e)||!Bfe(t).includes(e))}function cpe(t,e,n){return gn(n,!1)?Mfe(t,e).includes(n):!1}function lpe(t,e,n){return gn(n,!1)?Lfe(t,e).includes(n):!1}function x6(t,e,n){let r=null;const s=upe(t),i=dpe(e),a=Object.keys(s),o=Object.keys(i),c=A6(Object.keys(t)),l=A6(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),wc(a,o)||(r=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=ed(e[d].accounts);h.includes(d)||(r=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),a.forEach(d=>{r||(wc(s[d].methods,i[d].methods)?wc(s[d].events,i[d].events)||(r=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ye("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function upe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function A6(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function dpe(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:ed(t[n].accounts)?.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}),e}function hpe(t,e){return yx(t,!1)&&t<=e.max&&t>=e.min}function S6(){const t=Hf();return new Promise(e=>{switch(t){case os.browser:e(fpe());break;case os.reactNative:e(ppe());break;case os.node:e(mpe());break;default:e(!0)}})}function fpe(){return Qu()&&navigator?.onLine}async function ppe(){return qo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function mpe(){return!0}function gpe(t){switch(Hf()){case os.browser:ype(t);break;case os.reactNative:wpe(t);break}}function ype(t){!qo()&&Qu()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function wpe(t){qo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function bpe(){var t;return Qu()&&La.getDocument()?((t=La.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const vb={};class Sd{static get(e){return vb[e]}static set(e,n){vb[e]=n}static delete(e){delete vb[e]}}function vpe(t){const e=Wf.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function _pe({publicKey:t,signature:e,payload:n}){var r;const s=p_(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),a=Ape(n.address),o=n.era==="00"?new Uint8Array([0]):p_(n.era);if(o.length!==1&&o.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${xpe(n.tip)}`),d=Ipe(u),h=new Uint8Array([0,...t,a,...e,...o,...l,...d,...s]),f=Spe(h.length+1);return new Uint8Array([...f,i,...h])}function Epe(t){const e=p_(t),n=Nle.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function p_(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function xpe(t){return t.startsWith("0x")?t.slice(2):t}function Ape(t){const e=Wf.decode(t)[0];return e===42?0:e===60?2:1}function Spe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Ipe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Tpe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=vpe(t.transaction.address),r=_pe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Epe(s)}function wx({logger:t,name:e}){const n=typeof t=="string"?TN({opts:{level:t,name:e}}).logger:t;return n.level=typeof t=="string"?t:t.level,n}class cl{}let Cpe=class extends cl{constructor(e){super()}};const I6=we.FIVE_SECONDS,ll={pulse:"heartbeat_pulse"};let kpe=class RD extends Cpe{constructor(e){super(e),this.events=new ms.EventEmitter,this.interval=I6,this.interval=e?.interval||I6}static async init(e){const n=new RD(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),we.toMiliseconds(this.interval))}pulse(){this.events.emit(ll.pulse)}};function Ope(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Dn(t,...e){try{return Ope(t(...e))}catch(n){return Promise.reject(n)}}function Ppe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Rpe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function _m(t){if(Ppe(t))return String(t);if(Rpe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return _m(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const m_="base64:";function $pe(t){return typeof t=="string"?t:m_+Upe(t)}function Npe(t){return typeof t!="string"||!t.startsWith(m_)?t:Dpe(t.slice(m_.length))}function Dpe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Upe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Pr(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Bpe(...t){return Pr(t.join(":"))}function qp(t){return t=Pr(t),t?t+":":""}function Mpe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Lpe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Fpe="memory",jpe=()=>{const t=new Map;return{name:Fpe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function zpe(t={}){const e={mounts:{"":t.driver||jpe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Pr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await T6(e.mounts[l],s,l)}},a=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},o=(l,u,d)=>{const h=new Map,f=p=>{let m=h.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},h.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",g=Pr(m?p:p.key),_=m?void 0:p.value,A=m||!p.options?u:{...u,...p.options},w=n(g);f(w).items.push({key:g,value:_,relativeKey:w.relativeKey,options:A})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Pr(l);const{relativeKey:d,driver:h}=n(l);return Dn(h.hasItem,d,u)},getItem(l,u={}){l=Pr(l);const{relativeKey:d,driver:h}=n(l);return Dn(h.getItem,d,u).then(f=>Wd(f))},getItems(l,u={}){return o(l,u,d=>d.driver.getItems?Dn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Bpe(d.base,f.key),value:Wd(f.value)}))):Promise.all(d.items.map(h=>Dn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Wd(f)})))))},getItemRaw(l,u={}){l=Pr(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Dn(h.getItemRaw,d,u):Dn(h.getItem,d,u).then(f=>Npe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Pr(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Dn(f.setItem,h,_m(u),d),f.watch||s("update",l))},async setItems(l,u){await o(l,u,async d=>{if(d.driver.setItems)return Dn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:_m(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Dn(d.driver.setItem,h.relativeKey,_m(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Pr(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Dn(f.setItemRaw,h,u,d);else if(f.setItem)await Dn(f.setItem,h,$pe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Pr(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Dn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Dn(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Pr(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Dn(h.getMeta,d,u)),!u.nativeOnly){const p=await Dn(h.getItem,d+"$",u).then(m=>Wd(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=qp(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const g of d){g.driver.flags?.maxDepth||(p=!1);const _=await Dn(g.driver.getKeys,g.relativeBase,u);for(const A of _){const w=g.mountpoint+Pr(A);h.some(y=>w.startsWith(y))||f.push(w)}h=[g.mountpoint,...h.filter(A=>!A.startsWith(g.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(g=>(!m||Mpe(g,u.maxDepth))&&Lpe(g,l))},async clear(l,u={}){l=qp(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Dn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>C6(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await a()}},async unwatch(){e.watchListeners=[],await a()},mount(l,u){if(l=qp(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(T6(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=qp(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await C6(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Pr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Pr(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function T6(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function C6(t){typeof t.dispose=="function"&&await Dn(t.dispose)}function ul(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function $D(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=ul(n);return(s,i)=>r.then(a=>i(a.transaction(e,s).objectStore(e)))}let _b;function Jf(){return _b||(_b=$D("keyval-store","keyval")),_b}function k6(t,e=Jf()){return e("readonly",n=>ul(n.get(t)))}function Wpe(t,e,n=Jf()){return n("readwrite",r=>(r.put(e,t),ul(r.transaction)))}function qpe(t,e=Jf()){return e("readwrite",n=>(n.delete(t),ul(n.transaction)))}function Vpe(t=Jf()){return t("readwrite",e=>(e.clear(),ul(e.transaction)))}function Hpe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ul(t.transaction)}function Kpe(t=Jf()){return t("readonly",e=>{if(e.getAllKeys)return ul(e.getAllKeys());const n=[];return Hpe(e,r=>n.push(r.key)).then(()=>n)})}const Gpe="idb-keyval";var Ype=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=$D(t.dbName,t.storeName)),{name:Gpe,options:t,async hasItem(s){return!(typeof await k6(n(s),r)>"u")},async getItem(s){return await k6(n(s),r)??null},setItem(s,i){return Wpe(n(s),i,r)},removeItem(s){return qpe(n(s),r)},getKeys(){return Kpe(r)},clear(){return Vpe(r)}}};const Zpe="WALLET_CONNECT_V2_INDEXED_DB",Jpe="keyvaluestorage";let Xpe=class{constructor(){this.indexedDb=zpe({driver:Ype({dbName:Zpe,storeName:Jpe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Fa(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Em={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Eb<"u"&&Eb.localStorage?Em.exports=Eb.localStorage:typeof window<"u"&&window.localStorage?Em.exports=window.localStorage:Em.exports=new e})();function Qpe(t){var e;return[t[0],Vc((e=t[1])!=null?e:"")]}let eme=class{constructor(){this.localStorage=Em.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Qpe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Vc(n)}async setItem(e,n){this.localStorage.setItem(e,Fa(n))}async removeItem(e){this.localStorage.removeItem(e)}};const tme="wc_storage_version",O6=1,nme=async(t,e,n)=>{const r=tme,s=await e.getItem(r);if(s&&s>=O6){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const a=[];for(;i.length;){const o=i.shift();if(!o)continue;const c=o.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(o);await e.setItem(o,l),a.push(o)}}await e.setItem(r,O6),n(e),rme(t,a)},rme=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let sme=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new eme;this.storage=e;try{const n=new Xpe;nme(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var ime=Object.defineProperty,ame=(t,e,n)=>e in t?ime(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P6=(t,e,n)=>ame(t,typeof e!="symbol"?e+"":e,n);let ome=class extends cl{constructor(e){super(),this.opts=e,P6(this,"protocol","wc"),P6(this,"version",2)}};var cme=Object.defineProperty,lme=(t,e,n)=>e in t?cme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ume=(t,e,n)=>lme(t,e+"",n);let dme=class extends cl{constructor(e,n){super(),this.core=e,this.logger=n,ume(this,"records",new Map)}},hme=class{constructor(e,n){this.logger=e,this.core=n}},fme=class extends cl{constructor(e,n){super(),this.relayer=e,this.logger=n}},pme=class extends cl{constructor(e){super()}},mme=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},gme=class extends cl{constructor(e,n){super(),this.relayer=e,this.logger=n}},yme=class extends cl{constructor(e,n){super(),this.core=e,this.logger=n}},wme=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},bme=class{constructor(e,n){this.projectId=e,this.logger=n}},vme=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var _me=Object.defineProperty,Eme=(t,e,n)=>e in t?_me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R6=(t,e,n)=>Eme(t,typeof e!="symbol"?e+"":e,n);let xme=class{constructor(e){this.opts=e,R6(this,"protocol","wc"),R6(this,"version",2)}},Ame=class{constructor(e){this.client=e}};const Sme="PARSE_ERROR",Ime="INVALID_REQUEST",Tme="METHOD_NOT_FOUND",Cme="INVALID_PARAMS",ND="INTERNAL_ERROR",bx="SERVER_ERROR",kme=[-32700,-32600,-32601,-32602,-32603],hh={[Sme]:{code:-32700,message:"Parse error"},[Ime]:{code:-32600,message:"Invalid Request"},[Tme]:{code:-32601,message:"Method not found"},[Cme]:{code:-32602,message:"Invalid params"},[ND]:{code:-32603,message:"Internal error"},[bx]:{code:-32e3,message:"Server error"}},DD=bx;function Ome(t){return kme.includes(t)}function $6(t){return Object.keys(hh).includes(t)?hh[t]:hh[DD]}function Pme(t){const e=Object.values(hh).find(n=>n.code===t);return e||hh[DD]}function UD(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var xb={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g_=function(t,e){return g_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},g_(t,e)};function Rme(t,e){g_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var y_=function(){return y_=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y_.apply(this,arguments)};function $me(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Nme(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Dme(t,e){return function(n,r){e(n,r,t)}}function Ume(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Bme(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function Mme(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Lme(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Fme(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function w_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function BD(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function jme(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(BD(arguments[e]));return t}function zme(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function rf(t){return this instanceof rf?(this.v=t,this):new rf(t)}function Wme(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||o(h,f)})})}function o(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof rf?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){o("next",h)}function u(h){o("throw",h)}function d(h,f){h(f),i.shift(),i.length&&o(i[0][0],i[0][1])}}function qme(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(a){return(n=!n)?{value:rf(t[s](a)),done:s==="return"}:i?i(a):a}:i}}function Vme(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof w_=="function"?w_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,c){a=t[i](a),s(o,c,a.done,a.value)})}}function s(i,a,o,c){Promise.resolve(c).then(function(l){i({value:l,done:o})},a)}}function Hme(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Kme(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Gme(t){return t&&t.__esModule?t:{default:t}}function Yme(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Zme(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Jme=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return y_},__asyncDelegator:qme,__asyncGenerator:Wme,__asyncValues:Vme,__await:rf,__awaiter:Bme,__classPrivateFieldGet:Yme,__classPrivateFieldSet:Zme,__createBinding:Lme,__decorate:Nme,__exportStar:Fme,__extends:Rme,__generator:Mme,__importDefault:Gme,__importStar:Kme,__makeTemplateObject:Hme,__metadata:Ume,__param:Dme,__read:BD,__rest:$me,__spread:jme,__spreadArrays:zme,__values:w_},Symbol.toStringTag,{value:"Module"})),Xme=t3(Jme);var ia={},N6;function Qme(){if(N6)return ia;N6=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.isBrowserCryptoAvailable=ia.getSubtleCrypto=ia.getBrowerCrypto=void 0;function t(){return(Oi===null||Oi===void 0?void 0:Oi.crypto)||(Oi===null||Oi===void 0?void 0:Oi.msCrypto)||{}}ia.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ia.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ia.isBrowserCryptoAvailable=n,ia}var aa={},D6;function ege(){if(D6)return aa;D6=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.isBrowser=aa.isNode=aa.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}aa.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}aa.isNode=e;function n(){return!t()&&!e()}return aa.isBrowser=n,aa}var U6;function tge(){return U6||(U6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Xme;e.__exportStar(Qme(),t),e.__exportStar(ege(),t)})(xb)),xb}var nge=tge();function Ci(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ro(t=6){return BigInt(Ci(t))}function Xs(t,e,n){return{id:n||Ci(),jsonrpc:"2.0",method:t,params:e}}function sf(t,e){return{id:t,jsonrpc:"2.0",result:e}}function r0(t,e,n){return{id:t,jsonrpc:"2.0",error:rge(e)}}function rge(t,e){return typeof t>"u"?$6(ND):(typeof t=="string"&&(t=Object.assign(Object.assign({},$6(bx)),{message:t})),Ome(t.code)&&(t=Pme(t.code)),t)}let sge=class{};class ige extends sge{constructor(){super()}}class age extends ige{constructor(e){super()}}const oge="^https?:",cge="^wss?:";function lge(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function MD(t,e){const n=lge(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function B6(t){return MD(t,oge)}function M6(t){return MD(t,cge)}function uge(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function LD(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function vx(t){return LD(t)&&"method"in t}function s0(t){return LD(t)&&(ki(t)||Ps(t))}function ki(t){return"result"in t}function Ps(t){return"error"in t}let _x=class extends age{constructor(e){super(e),this.events=new ms.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Xs(e.method,e.params||[],e.id||Ro().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ps(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),s0(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const dge=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),hge=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",L6=t=>t.split("?")[0],F6=10,fge=dge();let pge=class{constructor(e){if(this.url=e,this.events=new ms.EventEmitter,this.registering=!1,!M6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Fa(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!M6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=nge.isReactNative()?void 0:{rejectUnauthorized:!uge(e)},i=new fge(e,[],s);hge()?i.onerror=a=>{const o=a;r(this.emitError(o.error))}:i.on("error",a=>{r(this.emitError(a))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Vc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=r0(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return UD(e,L6(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>F6&&this.events.setMaxListeners(F6)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${L6(this.url)}`));return this.events.emit("register_error",n),n}};var mge={};const FD="wc",jD=2,b_="core",qi=`${FD}@2:${b_}:`,gge={logger:"error"},yge={database:":memory:"},wge="crypto",j6="client_ed25519_seed",bge=we.ONE_DAY,vge="keychain",_ge="0.3",Ege="messages",xge="0.3",Age=we.SIX_HOURS,Sge="publisher",zD="irn",Ige="error",WD="wss://relay.walletconnect.org",Tge="relayer",rn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Cge="_subscription",Es={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},kge=.1,v_="2.22.4",zt={link_mode:"link_mode",relay:"relay"},xm={inbound:"inbound",outbound:"outbound"},Oge="0.3",Pge="WALLETCONNECT_CLIENT_ID",z6="WALLETCONNECT_LINK_MODE_APPS",ts={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Rge="subscription",$ge="0.3",Nge="pairing",Dge="0.3",Id={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},dc={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},qs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Uge="history",Bge="0.3",Mge="expirer",Is={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Lge="0.3",Fge="verify-api",jge="https://verify.walletconnect.com",qD="https://verify.walletconnect.org",fh=qD,zge=`${fh}/v3`,Wge=[jge,qD],qge="echo",Vge="https://echo.walletconnect.com",Ti={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ua={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Vs={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Qo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},ec={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Td={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Hge=.1,Kge="event-client",Gge=86400,Yge="https://pulse.walletconnect.org/batch";function Zge(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,c=t.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,_=0,A=p.length;_!==A&&p[_]===0;)_++,m++;for(var w=(A-_)*u+1>>>0,y=new Uint8Array(w);_!==A;){for(var E=p[_],b=0,S=w-1;(E!==0||b<g)&&S!==-1;S--,b++)E+=256*y[S]>>>0,y[S]=E%o>>>0,E=E/o>>>0;if(E!==0)throw new Error("Non-zero carry");g=b,_++}for(var $=w-g;$!==w&&y[$]===0;)$++;for(var P=c.repeat(m);$<w;++$)P+=t.charAt(y[$]);return P}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,_=0;p[m]===c;)g++,m++;for(var A=(p.length-m)*l+1>>>0,w=new Uint8Array(A);p[m];){var y=n[p.charCodeAt(m)];if(y===255)return;for(var E=0,b=A-1;(y!==0||E<_)&&b!==-1;b--,E++)y+=o*w[b]>>>0,w[b]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");_=E,m++}if(p[m]!==" "){for(var S=A-_;S!==A&&w[S]===0;)S++;for(var $=new Uint8Array(g+(A-S)),P=g;S!==A;)$[P++]=w[S++];return $}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Jge=Zge,Xge=Jge;const VD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Qge=t=>new TextEncoder().encode(t),eye=t=>new TextDecoder().decode(t);class tye{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nye{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return HD(this,e)}}class rye{constructor(e){this.decoders=e}or(e){return HD(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const HD=(t,e)=>new rye({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class sye{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new tye(e,n,r),this.decoder=new nye(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const i0=({name:t,prefix:e,encode:n,decode:r})=>new sye(t,e,n,r),Xf=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Xge(n,e);return i0({prefix:t,name:e,encode:r,decode:i=>VD(s(i))})},iye=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,o+=n,o>=8&&(o-=8,a[l++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},aye=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},er=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>i0({prefix:e,name:t,encode(s){return aye(s,r,n)},decode(s){return iye(s,r,n,t)}}),oye=i0({prefix:"\0",name:"identity",encode:t=>eye(t),decode:t=>Qge(t)});var cye=Object.freeze({__proto__:null,identity:oye});const lye=er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var uye=Object.freeze({__proto__:null,base2:lye});const dye=er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hye=Object.freeze({__proto__:null,base8:dye});const fye=Xf({prefix:"9",name:"base10",alphabet:"0123456789"});var pye=Object.freeze({__proto__:null,base10:fye});const mye=er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gye=er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yye=Object.freeze({__proto__:null,base16:mye,base16upper:gye});const wye=er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bye=er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vye=er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_ye=er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Eye=er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xye=er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Aye=er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Sye=er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Iye=er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tye=Object.freeze({__proto__:null,base32:wye,base32upper:bye,base32pad:vye,base32padupper:_ye,base32hex:Eye,base32hexupper:xye,base32hexpad:Aye,base32hexpadupper:Sye,base32z:Iye});const Cye=Xf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kye=Xf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Oye=Object.freeze({__proto__:null,base36:Cye,base36upper:kye});const Pye=Xf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rye=Xf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $ye=Object.freeze({__proto__:null,base58btc:Pye,base58flickr:Rye});const Nye=er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dye=er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Uye=er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bye=er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Mye=Object.freeze({__proto__:null,base64:Nye,base64pad:Dye,base64url:Uye,base64urlpad:Bye});const KD=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Lye=KD.reduce((t,e,n)=>(t[n]=e,t),[]),Fye=KD.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function jye(t){return t.reduce((e,n)=>(e+=Lye[n],e),"")}function zye(t){const e=[];for(const n of t){const r=Fye[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Wye=i0({prefix:"🚀",name:"base256emoji",encode:jye,decode:zye});var qye=Object.freeze({__proto__:null,base256emoji:Wye}),Vye=GD,W6=128,Hye=-128,Kye=Math.pow(2,31);function GD(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Kye;)e[n++]=t&255|W6,t/=128;for(;t&Hye;)e[n++]=t&255|W6,t>>>=7;return e[n]=t|0,GD.bytes=n-r+1,e}var Gye=__,Yye=128,q6=127;function __(t,r){var n=0,r=r||0,s=0,i=r,a,o=t.length;do{if(i>=o)throw __.bytes=0,new RangeError("Could not decode varint");a=t[i++],n+=s<28?(a&q6)<<s:(a&q6)*Math.pow(2,s),s+=7}while(a>=Yye);return __.bytes=i-r,n}var Zye=Math.pow(2,7),Jye=Math.pow(2,14),Xye=Math.pow(2,21),Qye=Math.pow(2,28),e0e=Math.pow(2,35),t0e=Math.pow(2,42),n0e=Math.pow(2,49),r0e=Math.pow(2,56),s0e=Math.pow(2,63),i0e=function(t){return t<Zye?1:t<Jye?2:t<Xye?3:t<Qye?4:t<e0e?5:t<t0e?6:t<n0e?7:t<r0e?8:t<s0e?9:10},a0e={encode:Vye,decode:Gye,encodingLength:i0e},YD=a0e;const V6=(t,e,n=0)=>(YD.encode(t,e,n),e),H6=t=>YD.encodingLength(t),E_=(t,e)=>{const n=e.byteLength,r=H6(t),s=r+H6(n),i=new Uint8Array(s+n);return V6(t,i,0),V6(n,i,r),i.set(e,s),new o0e(t,n,e,i)};class o0e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const ZD=({name:t,code:e,encode:n})=>new c0e(t,e,n);class c0e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?E_(this.code,n):n.then(r=>E_(this.code,r))}else throw Error("Unknown type, must be binary type")}}const JD=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),l0e=ZD({name:"sha2-256",code:18,encode:JD("SHA-256")}),u0e=ZD({name:"sha2-512",code:19,encode:JD("SHA-512")});var d0e=Object.freeze({__proto__:null,sha256:l0e,sha512:u0e});const XD=0,h0e="identity",QD=VD,f0e=t=>E_(XD,QD(t)),p0e={code:XD,name:h0e,encode:QD,digest:f0e};var m0e=Object.freeze({__proto__:null,identity:p0e});new TextEncoder,new TextDecoder;const K6={...cye,...uye,...hye,...pye,...yye,...Tye,...Oye,...$ye,...Mye,...qye};({...d0e,...m0e});function e9(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function g0e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?e9(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function t9(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G6=t9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ab=t9("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=g0e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),y0e={utf8:G6,"utf-8":G6,hex:K6.base16,latin1:Ab,ascii:Ab,binary:Ab,...K6};function w0e(t,e="utf8"){const n=y0e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?e9(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var b0e=Object.defineProperty,v0e=(t,e,n)=>e in t?b0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ei=(t,e,n)=>v0e(t,typeof e!="symbol"?e+"":e,n);let _0e=class{constructor(e,n){this.core=e,this.logger=n,Ei(this,"keychain",new Map),Ei(this,"name",vge),Ei(this,"version",_ge),Ei(this,"initialized",!1),Ei(this,"storagePrefix",qi),Ei(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Ei(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Ei(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Ei(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ye("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Ei(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=gs(n,this.name)}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,t_(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?n_(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var E0e=Object.defineProperty,x0e=(t,e,n)=>e in t?E0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$n=(t,e,n)=>x0e(t,typeof e!="symbol"?e+"":e,n);let A0e=class{constructor(e,n,r){this.core=e,this.logger=n,$n(this,"name",wge),$n(this,"keychain"),$n(this,"randomSessionIdentifier",f_()),$n(this,"initialized",!1),$n(this,"clientId"),$n(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),$n(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),$n(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=yT(s),a=wN(i.publicKey);return this.clientId=a,a}),$n(this,"generateKeyPair",()=>{this.isInitialized();const s=dfe();return this.setPrivateKey(s.publicKey,s.privateKey)}),$n(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),a=yT(i),o=this.randomSessionIdentifier;return await $ce(o,s,bge,a)}),$n(this,"generateSharedKey",(s,i,a)=>{this.isInitialized();const o=this.getPrivateKey(s),c=hfe(o,i);return this.setSymKey(c,a)}),$n(this,"setSymKey",async(s,i)=>{this.isInitialized();const a=i||vm(s);return await this.keychain.set(a,s),a}),$n(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),$n(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),$n(this,"encode",async(s,i,a)=>{this.isInitialized();const o=kD(a),c=Fa(i);if(h6(o))return mfe(c,a?.encoding);if(d6(o)){const h=o.senderPublicKey,f=o.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=o;return ffe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:a?.encoding})}),$n(this,"decode",async(s,i,a)=>{this.isInitialized();const o=yfe(i,a);if(h6(o)){const c=gfe(i,a?.encoding);return Vc(c)}if(d6(o)){const c=o.receiverPublicKey,l=o.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=pfe({symKey:c,encoded:i,encoding:a?.encoding});return Vc(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),$n(this,"getPayloadType",(s,i=Ur)=>{const a=nf({encoded:s,encoding:i});return Kc(a.type)}),$n(this,"getPayloadSenderPublicKey",(s,i=Ur)=>{const a=nf({encoded:s,encoding:i});return a.senderPublicKey?zr(a.senderPublicKey,Er):void 0}),this.core=e,this.logger=gs(n,this.name),this.keychain=r||new _0e(this.core,this.logger)}get context(){return Hr(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(j6)}catch{e=f_(),await this.keychain.set(j6,e)}return w0e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var S0e=Object.defineProperty,I0e=Object.defineProperties,T0e=Object.getOwnPropertyDescriptors,Y6=Object.getOwnPropertySymbols,C0e=Object.prototype.hasOwnProperty,k0e=Object.prototype.propertyIsEnumerable,x_=(t,e,n)=>e in t?S0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O0e=(t,e)=>{for(var n in e||(e={}))C0e.call(e,n)&&x_(t,n,e[n]);if(Y6)for(var n of Y6(e))k0e.call(e,n)&&x_(t,n,e[n]);return t},P0e=(t,e)=>I0e(t,T0e(e)),Xr=(t,e,n)=>x_(t,typeof e!="symbol"?e+"":e,n);let R0e=class extends hme{constructor(e,n){super(e,n),this.logger=e,this.core=n,Xr(this,"messages",new Map),Xr(this,"messagesWithoutClientAck",new Map),Xr(this,"name",Ege),Xr(this,"version",xge),Xr(this,"initialized",!1),Xr(this,"storagePrefix",qi),Xr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Xr(this,"set",async(r,s,i)=>{this.isInitialized();const a=Os(s);let o=this.messages.get(r);if(typeof o>"u"&&(o={}),typeof o[a]<"u")return a;if(o[a]=s,this.messages.set(r,o),i===xm.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,P0e(O0e({},c),{[a]:s}))}return await this.persist(),a}),Xr(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Xr(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const a=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(a)}return s}),Xr(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),a=Os(s);return typeof i[a]<"u"}),Xr(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const a=Os(s);delete i[a],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Xr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=gs(e,this.name),this.core=n}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,t_(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,t_(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?n_(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?n_(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var $0e=Object.defineProperty,N0e=Object.defineProperties,D0e=Object.getOwnPropertyDescriptors,Z6=Object.getOwnPropertySymbols,U0e=Object.prototype.hasOwnProperty,B0e=Object.prototype.propertyIsEnumerable,A_=(t,e,n)=>e in t?$0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cl=(t,e)=>{for(var n in e||(e={}))U0e.call(e,n)&&A_(t,n,e[n]);if(Z6)for(var n of Z6(e))B0e.call(e,n)&&A_(t,n,e[n]);return t},J6=(t,e)=>N0e(t,D0e(e)),xs=(t,e,n)=>A_(t,typeof e!="symbol"?e+"":e,n);class M0e extends fme{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,xs(this,"events",new ms.EventEmitter),xs(this,"name",Sge),xs(this,"queue",new Map),xs(this,"publishTimeout",we.toMiliseconds(we.ONE_MINUTE)),xs(this,"initialPublishTimeout",we.toMiliseconds(we.ONE_SECOND*15)),xs(this,"needsTransportRestart",!1),xs(this,"publish",async(r,s,i)=>{var a,o,c,l,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const d=i?.ttl||Age,h=i?.prompt||!1,f=i?.tag||0,p=i?.id||Ro().toString(),m=Jl(Ng().protocol),g={id:p,method:i?.publishMethod||m.publish,params:Cl({topic:r,message:s,ttl:d,prompt:h,tag:f,attestation:i?.attestation},i?.tvf)},_=`Failed to publish payload, please try again. id:${p} tag:${f}`;try{In((a=g.params)==null?void 0:a.prompt)&&((o=g.params)==null||delete o.prompt),In((c=g.params)==null?void 0:c.tag)&&((l=g.params)==null||delete l.tag);const A=new Promise(async w=>{const y=({id:b})=>{var S;((S=g.id)==null?void 0:S.toString())===b.toString()&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(rn.publish,y),w())};this.relayer.events.on(rn.publish,y);const E=$i(new Promise((b,S)=>{this.rpcPublish(g,i).then(b).catch($=>{this.logger.warn($,$?.message),S($)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${f}`);try{await E,this.events.removeListener(rn.publish,y)}catch(b){this.queue.set(p,{request:g,opts:i,attempt:1}),this.logger.warn(b,b?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:r,message:s,opts:i}}),await $i(A,this.publishTimeout,_)}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(u=i?.internal)!=null&&u.throwOnFailedPublish)throw A}finally{this.queue.delete(p)}}),xs(this,"publishCustom",async r=>{var s,i,a,o,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:r});const{payload:l,opts:u={}}=r,{attestation:d,tvf:h,publishMethod:f,prompt:p,tag:m,ttl:g=we.FIVE_MINUTES}=u,_=u.id||Ro().toString(),A=Jl(Ng().protocol),w=f||A.publish,y={id:_,method:w,params:Cl(J6(Cl({},l),{ttl:g,prompt:p,tag:m,attestation:d}),h)},E=`Failed to publish custom payload, please try again. id:${_} tag:${m}`;try{In((s=y.params)==null?void 0:s.prompt)&&((i=y.params)==null||delete i.prompt),In((a=y.params)==null?void 0:a.tag)&&((o=y.params)==null||delete o.tag);const b=new Promise(async S=>{const $=({id:C})=>{var B;((B=y.id)==null?void 0:B.toString())===C.toString()&&(this.removeRequestFromQueue(C),this.relayer.events.removeListener(rn.publish,$),S())};this.relayer.events.on(rn.publish,$);const P=$i(new Promise((C,B)=>{this.rpcPublish(y,u).then(C).catch(k=>{this.logger.warn(k,k?.message),B(k)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${w} id:${_} tag:${m}`);try{await P,this.events.removeListener(rn.publish,$)}catch(C){this.queue.set(_,{request:y,opts:u,attempt:1}),this.logger.warn(C,C?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:_,payload:l,opts:u}}),await $i(b,this.publishTimeout,E)}catch(b){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(b),(c=u?.internal)!=null&&c.throwOnFailedPublish)throw b}finally{this.queue.delete(_)}}),xs(this,"on",(r,s)=>{this.events.on(r,s)}),xs(this,"once",(r,s)=>{this.events.once(r,s)}),xs(this,"off",(r,s)=>{this.events.off(r,s)}),xs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=gs(n,this.name),this.registerEventListeners()}get context(){return Hr(this.logger)}async rpcPublish(e,n){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const r=await this.relayer.request(e);return this.relayer.events.emit(rn.publish,Cl(Cl({},e),n)),this.logger.debug("Successfully Published Payload"),r}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{var r;const s=e.attempt+1;this.queue.set(n,J6(Cl({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(r=e.request.params)==null?void 0:r.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ll.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(rn.connection_stalled);return}this.checkQueue()}),this.relayer.on(rn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var L0e=Object.defineProperty,F0e=(t,e,n)=>e in t?L0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kl=(t,e,n)=>F0e(t,typeof e!="symbol"?e+"":e,n);class j0e{constructor(){kl(this,"map",new Map),kl(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),kl(this,"get",e=>this.map.get(e)||[]),kl(this,"exists",(e,n)=>this.get(e).includes(n)),kl(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),kl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var z0e=Object.defineProperty,W0e=Object.defineProperties,q0e=Object.getOwnPropertyDescriptors,X6=Object.getOwnPropertySymbols,V0e=Object.prototype.hasOwnProperty,H0e=Object.prototype.propertyIsEnumerable,S_=(t,e,n)=>e in t?z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cd=(t,e)=>{for(var n in e||(e={}))V0e.call(e,n)&&S_(t,n,e[n]);if(X6)for(var n of X6(e))H0e.call(e,n)&&S_(t,n,e[n]);return t},Sb=(t,e)=>W0e(t,q0e(e)),Pt=(t,e,n)=>S_(t,typeof e!="symbol"?e+"":e,n);let K0e=class extends gme{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Pt(this,"subscriptions",new Map),Pt(this,"topicMap",new j0e),Pt(this,"events",new ms.EventEmitter),Pt(this,"name",Rge),Pt(this,"version",$ge),Pt(this,"pending",new Map),Pt(this,"cached",[]),Pt(this,"initialized",!1),Pt(this,"storagePrefix",qi),Pt(this,"subscribeTimeout",we.toMiliseconds(we.ONE_MINUTE)),Pt(this,"initialSubscribeTimeout",we.toMiliseconds(we.ONE_SECOND*15)),Pt(this,"clientId"),Pt(this,"batchSubscribeTopicsLimit",500),Pt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Pt(this,"subscribe",async(r,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const a=Ng(s),o={topic:r,relay:a,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(r,o);const c=await this.rpcSubscribe(r,a,s);return typeof c=="string"&&(this.onSubscribe(c,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),c}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),Pt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Pt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Pt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Pt(this,"on",(r,s)=>{this.events.on(r,s)}),Pt(this,"once",(r,s)=>{this.events.once(r,s)}),Pt(this,"off",(r,s)=>{this.events.off(r,s)}),Pt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Pt(this,"start",async()=>{await this.onConnect()}),Pt(this,"stop",async()=>{await this.onDisconnect()}),Pt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Pt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Pt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ll.pulse,async()=>{await this.checkPending()}),this.events.on(ts.created,async r=>{const s=ts.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(ts.deleted,async r=>{const s=ts.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=gs(n,this.name),this.clientId=""}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=Ng(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s,i;const a=await this.getSubscriptionId(e);if((s=r?.internal)!=null&&s.skipSubscribe)return a;(!r||r?.transportType===zt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const o={method:Jl(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});const c=(i=r?.internal)==null?void 0:i.throwOnFailedPublish;try{if(r?.transportType===zt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(o).catch(d=>this.logger.warn(d))},we.toMiliseconds(we.ONE_SECOND)),a;const l=new Promise(async d=>{const h=f=>{f.topic===e&&(this.events.removeListener(ts.created,h),d(f.id))};this.events.on(ts.created,h);try{const f=await $i(new Promise((p,m)=>{this.relayer.request(o).catch(g=>{this.logger.warn(g,g?.message),m(g)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ts.created,h),d(f)}catch{}}),u=await $i(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(rn.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Jl(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await $i(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(rn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Jl(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await $i(new Promise((i,a)=>{this.relayer.request(r).catch(o=>{this.logger.warn(o),a(o)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(rn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Jl(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,Sb(Cd({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Cd({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Cd({},n)),this.topicMap.set(n.topic,e),this.events.emit(ts.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ts.deleted,Sb(Cd({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ts.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ts.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(n=>{var r;return n.topic===((r=this.subscriptions.get(n.id))==null?void 0:r.topic)})){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>Sb(Cd({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await $ue(we.toMiliseconds(we.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Os(e+await this.getClientId())}};var G0e=Object.defineProperty,Q6=Object.getOwnPropertySymbols,Y0e=Object.prototype.hasOwnProperty,Z0e=Object.prototype.propertyIsEnumerable,I_=(t,e,n)=>e in t?G0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eC=(t,e)=>{for(var n in e||(e={}))Y0e.call(e,n)&&I_(t,n,e[n]);if(Q6)for(var n of Q6(e))Z0e.call(e,n)&&I_(t,n,e[n]);return t},yt=(t,e,n)=>I_(t,typeof e!="symbol"?e+"":e,n);let J0e=class extends pme{constructor(e){var n;super(e),yt(this,"protocol","wc"),yt(this,"version",2),yt(this,"core"),yt(this,"logger"),yt(this,"events",new ms.EventEmitter),yt(this,"provider"),yt(this,"messages"),yt(this,"subscriber"),yt(this,"publisher"),yt(this,"name",Tge),yt(this,"transportExplicitlyClosed",!1),yt(this,"initialized",!1),yt(this,"connectionAttemptInProgress",!1),yt(this,"relayUrl"),yt(this,"projectId"),yt(this,"packageName"),yt(this,"bundleId"),yt(this,"hasExperiencedNetworkDisruption",!1),yt(this,"pingTimeout"),yt(this,"heartBeatTimeout",we.toMiliseconds(we.THIRTY_SECONDS+we.FIVE_SECONDS)),yt(this,"reconnectTimeout"),yt(this,"connectPromise"),yt(this,"reconnectInProgress",!1),yt(this,"requestsInFlight",[]),yt(this,"connectTimeout",we.toMiliseconds(we.ONE_SECOND*15)),yt(this,"request",async r=>{var s,i;this.logger.debug("Publishing Request Payload");const a=r.id||Ro().toString();await this.toEstablishConnection();try{this.logger.trace({id:a,method:r.method,topic:(s=r.params)==null?void 0:s.topic},"relayer.request - publishing...");const o=`${a}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==o),c}catch(o){throw this.logger.debug(`Failed to Publish Request: ${a}`),o}}),yt(this,"resetPingTimeout",()=>{Cg()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,s,i,a;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(a=(i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||a.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),yt(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),yt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(rn.connect)}),yt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),yt(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(rn.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),yt(this,"registerProviderListeners",()=>{this.provider.on(Es.payload,this.onPayloadHandler),this.provider.on(Es.connect,this.onConnectHandler),this.provider.on(Es.disconnect,this.onDisconnectHandler),this.provider.on(Es.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=wx({logger:(n=e.logger)!=null?n:Ige,name:this.name}),this.messages=new R0e(this.logger,e.core),this.subscriber=new K0e(this,this.logger),this.publisher=new M0e(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||WD,yue()?this.packageName=$T():wue()&&(this.bundleId=$T()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Hr(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:zt.relay},xm.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const a=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(ts.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(ts.created,l)}),new Promise(async(u,d)=>{o=await this.subscriber.subscribe(e,eC({internal:{throwOnFailedPublish:a}},n)).catch(h=>{a&&d(h)})||o,u()})]),o}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await $i(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await S6())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=hn(we.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(rn.message,e),await this.recordMessageEvent(e,xm.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Es.disconnect,i),await $i(new Promise((a,o)=>{this.provider.connect().then(a).catch(o)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{s(a)}).finally(()=>{this.provider.off(Es.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(a,o)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Es.disconnect,c),await this.subscriber.start().then(a).catch(o).finally(()=>{this.provider.off(Es.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,we.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Cg())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(a){this.logger.warn(a,a?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _x(new pge(xue({sdkVersion:v_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),vx(e)){if(!e.method.endsWith(Cge))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:a}=n.data,o={topic:r,message:s,publishedAt:i,transportType:zt.relay,attestation:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(eC({type:"event",event:n.id},o)),this.events.emit(n.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else s0(e)&&this.events.emit(rn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,xm.inbound),this.events.emit(rn.message,e))}async acknowledgePayload(e){const n=sf(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Es.payload,this.onPayloadHandler),this.provider.off(Es.connect,this.onConnectHandler),this.provider.off(Es.disconnect,this.onDisconnectHandler),this.provider.off(Es.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await S6();gpe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ll.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&bpe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(rn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},we.toMiliseconds(kge)))))}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}};function X0e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function tC(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function nC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Q0e="[object RegExp]",ewe="[object String]",twe="[object Number]",nwe="[object Boolean]",rC="[object Arguments]",rwe="[object Symbol]",swe="[object Date]",iwe="[object Map]",awe="[object Set]",owe="[object Array]",cwe="[object Function]",lwe="[object ArrayBuffer]",Ib="[object Object]",uwe="[object Error]",dwe="[object DataView]",hwe="[object Uint8Array]",fwe="[object Uint8ClampedArray]",pwe="[object Uint16Array]",mwe="[object Uint32Array]",gwe="[object BigUint64Array]",ywe="[object Int8Array]",wwe="[object Int16Array]",bwe="[object Int32Array]",vwe="[object BigInt64Array]",_we="[object Float32Array]",Ewe="[object Float64Array]";function xwe(){}function sC(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Awe(t,e,n){return Jd(t,e,void 0,void 0,void 0,void 0,n)}function Jd(t,e,n,r,s,i,a){const o=a(t,e,n,r,s,i);if(o!==void 0)return o;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return ph(t,e,i,a)}return ph(t,e,i,a)}function ph(t,e,n,r){if(Object.is(t,e))return!0;let s=nC(t),i=nC(e);if(s===rC&&(s=Ib),i===rC&&(i=Ib),s!==i)return!1;switch(s){case ewe:return t.toString()===e.toString();case twe:{const c=t.valueOf(),l=e.valueOf();return X0e(c,l)}case nwe:case swe:case rwe:return Object.is(t.valueOf(),e.valueOf());case Q0e:return t.source===e.source&&t.flags===e.flags;case cwe:return t===e}n=n??new Map;const a=n.get(t),o=n.get(e);if(a!=null&&o!=null)return a===e;n.set(t,e),n.set(e,t);try{switch(s){case iwe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Jd(l,e.get(c),c,t,e,n,r))return!1;return!0}case awe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Jd(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case owe:case hwe:case fwe:case pwe:case mwe:case gwe:case ywe:case wwe:case bwe:case vwe:case _we:case Ewe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Jd(t[c],e[c],c,t,e,n,r))return!1;return!0}case lwe:return t.byteLength!==e.byteLength?!1:ph(new Uint8Array(t),new Uint8Array(e),n,r);case dwe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:ph(new Uint8Array(t),new Uint8Array(e),n,r);case uwe:return t.name===e.name&&t.message===e.message;case Ib:{if(!(ph(t.constructor,e.constructor,n,r)||sC(t)&&sC(e)))return!1;const c=[...Object.keys(t),...tC(t)],l=[...Object.keys(e),...tC(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Jd(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Swe(t,e){return Awe(t,e,xwe)}var Iwe=Object.defineProperty,iC=Object.getOwnPropertySymbols,Twe=Object.prototype.hasOwnProperty,Cwe=Object.prototype.propertyIsEnumerable,T_=(t,e,n)=>e in t?Iwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aC=(t,e)=>{for(var n in e||(e={}))Twe.call(e,n)&&T_(t,n,e[n]);if(iC)for(var n of iC(e))Cwe.call(e,n)&&T_(t,n,e[n]);return t},Or=(t,e,n)=>T_(t,typeof e!="symbol"?e+"":e,n);let dl=class extends mme{constructor(e,n,r,s=qi,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Or(this,"map",new Map),Or(this,"version",Oge),Or(this,"cached",[]),Or(this,"initialized",!1),Or(this,"getKey"),Or(this,"storagePrefix",qi),Or(this,"recentlyDeleted",[]),Or(this,"recentlyDeletedLimit",200),Or(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!In(a)?this.map.set(this.getKey(a),a):Kfe(a)?this.map.set(a.id,a):Gfe(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)}),Or(this,"set",async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())}),Or(this,"get",a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a))),Or(this,"getAll",a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(c=>Swe(o[c],a[c]))):this.values)),Or(this,"update",async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const c=aC(aC({},this.getData(a)),o);this.map.set(a,c),await this.persist()}),Or(this,"delete",async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),this.addToRecentlyDeleted(a),await this.persist())}),this.logger=gs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var kwe=Object.defineProperty,Owe=(t,e,n)=>e in t?kwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ot=(t,e,n)=>Owe(t,typeof e!="symbol"?e+"":e,n);let Pwe=class{constructor(e,n){this.core=e,this.logger=n,ot(this,"name",Nge),ot(this,"version",Dge),ot(this,"events",new j2),ot(this,"pairings"),ot(this,"initialized",!1),ot(this,"storagePrefix",qi),ot(this,"ignoredPayloadTypes",[Ra]),ot(this,"registeredMethods",[]),ot(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ot(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ot(this,"create",async r=>{this.isInitialized();const s=f_(),i=await this.core.crypto.setSymKey(s),a=hn(we.FIVE_MINUTES),o={protocol:zD},c={topic:i,expiry:a,relay:o,active:!1,methods:r?.methods},l=g6({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:o,expiryTimestamp:a,methods:r?.methods});return this.events.emit(dc.create,c),this.core.expirer.set(i,a),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r?.transportType,internal:r?.internal}),{topic:i,uri:l}}),ot(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[Ti.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:a,relay:o,expiryTimestamp:c,methods:l}=m6(r.uri);s.props.properties.topic=i,s.addTrace(Ti.pairing_uri_validation_success),s.addTrace(Ti.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Ti.existing_pairing),u.active)throw s.setError(ua.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ti.pairing_not_expired)}const d=c||hn(we.FIVE_MINUTES),h={topic:i,relay:o,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Ti.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(dc.create,h),s.addTrace(Ti.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(a,i),s.addTrace(Ti.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ua.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:o})}catch(f){throw s.setError(ua.subscribe_pairing_topic_failure),f}return s.addTrace(Ti.subscribe_pairing_topic_success),h}),ot(this,"activate",async({topic:r})=>{this.isInitialized();const s=hn(we.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),ot(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:c}=sc();this.events.once(Et("pairing_ping",i),({error:l})=>{l?c(l):o()}),await a()}}),ot(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),ot(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),ot(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ot(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(s))}),ot(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:a,methods:o}=r,c=this.core.crypto.keychain.get(s);return g6({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:a,methods:o})}),ot(this,"sendRequest",async(r,s,i)=>{const a=Xs(s,i),o=await this.core.crypto.encode(r,a),c=Id[s].req;return this.core.history.set(r,a),this.core.relayer.publish(r,o,c),a.id}),ot(this,"sendResult",async(r,s,i)=>{const a=sf(r,i),o=await this.core.crypto.encode(s,a),c=(await this.core.history.get(s,r)).request.method,l=Id[c].res;await this.core.relayer.publish(s,o,l),await this.core.history.resolve(a)}),ot(this,"sendError",async(r,s,i)=>{const a=r0(r,i),o=await this.core.crypto.encode(s,a),c=(await this.core.history.get(s,r)).request.method,l=Id[c]?Id[c].res:Id.unregistered_method.res;await this.core.relayer.publish(s,o,l),await this.core.history.resolve(a)}),ot(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),ot(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Pi(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),ot(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),ot(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,a=(await this.core.history.get(s,i.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(a)}}),ot(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(dc.ping,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ot(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ki(s)?this.events.emit(Et("pairing_ping",i),{}):Ps(s)&&this.events.emit(Et("pairing_ping",i),{error:s.error})},500)}),ot(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(dc.delete,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ot(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=Wt("WC_METHOD_UNSUPPORTED",a);await this.sendError(i,r,o),this.logger.error(o)}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ot(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",r))}),ot(this,"isValidPair",(r,s)=>{var i;if(!Rr(r)){const{message:o}=ye("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(ua.malformed_pairing_uri),new Error(o)}if(!Hfe(r.uri)){const{message:o}=ye("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(ua.malformed_pairing_uri),new Error(o)}const a=m6(r?.uri);if(!((i=a?.relay)!=null&&i.protocol)){const{message:o}=ye("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ua.malformed_pairing_uri),new Error(o)}if(!(a!=null&&a.symKey)){const{message:o}=ye("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ua.malformed_pairing_uri),new Error(o)}if(a!=null&&a.expiryTimestamp&&we.toMiliseconds(a?.expiryTimestamp)<Date.now()){s.setError(ua.pairing_expired);const{message:o}=ye("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}}),ot(this,"isValidPing",async r=>{if(!Rr(r)){const{message:i}=ye("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ot(this,"isValidDisconnect",async r=>{if(!Rr(r)){const{message:i}=ye("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ot(this,"isValidPairingTopic",async r=>{if(!gn(r,!1)){const{message:s}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Pi(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ye("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=gs(n,this.name),this.pairings=new dl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Hr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(rn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==zt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);vx(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):s0(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Is.expired,async e=>{const{topic:n}=RN(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(dc.expire,{topic:n}))})}};var Rwe=Object.defineProperty,$we=(t,e,n)=>e in t?Rwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qn=(t,e,n)=>$we(t,typeof e!="symbol"?e+"":e,n);let Nwe=class extends dme{constructor(e,n){super(e,n),this.core=e,this.logger=n,qn(this,"records",new Map),qn(this,"events",new ms.EventEmitter),qn(this,"name",Uge),qn(this,"version",Bge),qn(this,"cached",[]),qn(this,"initialized",!1),qn(this,"storagePrefix",qi),qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),qn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const a={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:hn(we.THIRTY_DAYS)};this.records.set(a.id,a),this.persist(),this.events.emit(qs.created,a)}),qn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ps(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(qs.updated,s))}),qn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),qn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(qs.deleted,i)}}),this.persist()}),qn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=gs(n,this.name)}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Xs(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(qs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(qs.created,e=>{const n=qs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(qs.updated,e=>{const n=qs.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(qs.deleted,e=>{const n=qs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ll.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{we.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(qs.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Dwe=Object.defineProperty,Uwe=(t,e,n)=>e in t?Dwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>Uwe(t,typeof e!="symbol"?e+"":e,n);let Bwe=class extends yme{constructor(e,n){super(e,n),this.core=e,this.logger=n,ar(this,"expirations",new Map),ar(this,"events",new ms.EventEmitter),ar(this,"name",Mge),ar(this,"version",Lge),ar(this,"cached",[]),ar(this,"initialized",!1),ar(this,"storagePrefix",qi),ar(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ar(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ar(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),a={target:i,expiry:s};this.expirations.set(i,a),this.checkExpiry(i,a),this.events.emit(Is.created,{target:i,expiration:a})}),ar(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ar(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Is.deleted,{target:s,expiration:i})}}),ar(this,"on",(r,s)=>{this.events.on(r,s)}),ar(this,"once",(r,s)=>{this.events.once(r,s)}),ar(this,"off",(r,s)=>{this.events.off(r,s)}),ar(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=gs(n,this.name)}get context(){return Hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Aue(e);if(typeof e=="number")return Sue(e);const{message:n}=ye("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Is.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ye("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ye("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;we.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Is.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ll.pulse,()=>this.checkExpirations()),this.events.on(Is.created,e=>{const n=Is.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Is.expired,e=>{const n=Is.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Is.deleted,e=>{const n=Is.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Mwe=Object.defineProperty,Lwe=(t,e,n)=>e in t?Mwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,un=(t,e,n)=>Lwe(t,typeof e!="symbol"?e+"":e,n);let Fwe=class extends wme{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,un(this,"name",Fge),un(this,"abortController"),un(this,"isDevEnv"),un(this,"verifyUrlV3",zge),un(this,"storagePrefix",qi),un(this,"version",jD),un(this,"publicKey"),un(this,"fetchPromise"),un(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&we.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),un(this,"register",async s=>{if(!Qu()||this.isDevEnv)return;const i=window.location.origin,{id:a,decryptedId:o}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${a}&decryptedId=${o}`;try{const l=La.getDocument(),u=this.startAbortTimer(we.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",g),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const g=_=>{if(_.data&&typeof _.data=="string")try{const A=JSON.parse(_.data);if(A.type==="verify_attestation"){if(Q1(A.attestation).payload.id!==a)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",g),h(A.attestation===null?"":A.attestation)}}catch(A){this.logger.warn(A)}};l.body.appendChild(m),window.addEventListener("message",g,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(l){this.logger.warn(l)}return""}),un(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:a,encryptedId:o}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Q1(i).payload.id!==o)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!a)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(a,c)}),un(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const a=this.startAbortTimer(we.ONE_SECOND*5),o=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(a),o.status===200?await o.json():void 0}),un(this,"getVerifyUrl",s=>{let i=s||fh;return Wge.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${fh}`),i=fh),i}),un(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(we.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),un(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),un(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),un(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}const a=await this.fetchAndPersistPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}}),un(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),un(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const a=await this.fetchPublicKey();a&&(await this.persistPublicKey(a),i(a))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),un(this,"validateAttestation",(s,i)=>{const a=bfe(s,i.publicKey),o={hasExpired:we.toMiliseconds(a.exp)<Date.now(),payload:a};if(o.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:o.payload.origin,isScam:o.payload.isScam,isVerified:o.payload.isVerified}}),this.logger=gs(n,this.name),this.abortController=new AbortController,this.isDevEnv=ax(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Hr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(e))}};var jwe=Object.defineProperty,zwe=(t,e,n)=>e in t?jwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oC=(t,e,n)=>zwe(t,typeof e!="symbol"?e+"":e,n);let Wwe=class extends bme{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,oC(this,"context",qge),oC(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:a,enableEncrypted:o=!1}=r,c=`${Vge}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:a,token:i,always_raw:o})})}),this.logger=gs(n,this.context)}};var qwe=Object.defineProperty,cC=Object.getOwnPropertySymbols,Vwe=Object.prototype.hasOwnProperty,Hwe=Object.prototype.propertyIsEnumerable,C_=(t,e,n)=>e in t?qwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kd=(t,e)=>{for(var n in e||(e={}))Vwe.call(e,n)&&C_(t,n,e[n]);if(cC)for(var n of cC(e))Hwe.call(e,n)&&C_(t,n,e[n]);return t},Nn=(t,e,n)=>C_(t,typeof e!="symbol"?e+"":e,n);let Kwe=class extends vme{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Nn(this,"context",Kge),Nn(this,"storagePrefix",qi),Nn(this,"storageVersion",Hge),Nn(this,"events",new Map),Nn(this,"shouldPersist",!1),Nn(this,"init",async()=>{if(!ax())try{const s={eventId:DT(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:ON(this.core.relayer.protocol,this.core.relayer.version,v_)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Nn(this,"createEvent",s=>{const{event:i="ERROR",type:a="",properties:{topic:o,trace:c}}=s,l=DT(),u=this.core.projectId||"",d=Date.now(),h=kd({eventId:l,timestamp:d,props:{event:i,type:a,properties:{topic:o,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Nn(this,"getEvent",s=>{const{eventId:i,topic:a}=s;if(i)return this.events.get(i);const o=Array.from(this.events.values()).find(c=>c.props.properties.topic===a);if(o)return kd(kd({},o),this.setMethods(o.eventId))}),Nn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Nn(this,"setEventListeners",()=>{this.core.heartbeat.on(ll.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{we.fromMiliseconds(Date.now())-we.fromMiliseconds(s.timestamp)>Gge&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Nn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Nn(this,"addTrace",(s,i)=>{const a=this.events.get(s);a&&(a.props.properties.trace.push(i),this.events.set(s,a),this.shouldPersist=!0)}),Nn(this,"setError",(s,i)=>{const a=this.events.get(s);a&&(a.props.type=i,a.timestamp=Date.now(),this.events.set(s,a),this.shouldPersist=!0)}),Nn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Nn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,kd(kd({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Nn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,a]of this.events)a.props.type&&s.push(a);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Nn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Yge}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${v_}${i}`,{method:"POST",body:JSON.stringify(s)})}),Nn(this,"getAppDomain",()=>kN().url),this.logger=gs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var Gwe=Object.defineProperty,lC=Object.getOwnPropertySymbols,Ywe=Object.prototype.hasOwnProperty,Zwe=Object.prototype.propertyIsEnumerable,k_=(t,e,n)=>e in t?Gwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uC=(t,e)=>{for(var n in e||(e={}))Ywe.call(e,n)&&k_(t,n,e[n]);if(lC)for(var n of lC(e))Zwe.call(e,n)&&k_(t,n,e[n]);return t},$t=(t,e,n)=>k_(t,typeof e!="symbol"?e+"":e,n);let Jwe=class n9 extends ome{constructor(e){var n;super(e),$t(this,"protocol",FD),$t(this,"version",jD),$t(this,"name",b_),$t(this,"relayUrl"),$t(this,"projectId"),$t(this,"customStoragePrefix"),$t(this,"events",new ms.EventEmitter),$t(this,"logger"),$t(this,"heartbeat"),$t(this,"relayer"),$t(this,"crypto"),$t(this,"storage"),$t(this,"history"),$t(this,"expirer"),$t(this,"pairing"),$t(this,"verify"),$t(this,"echoClient"),$t(this,"linkModeSupportedApps"),$t(this,"eventClient"),$t(this,"initialized",!1),$t(this,"logChunkController"),$t(this,"on",(o,c)=>this.events.on(o,c)),$t(this,"once",(o,c)=>this.events.once(o,c)),$t(this,"off",(o,c)=>this.events.off(o,c)),$t(this,"removeListener",(o,c)=>this.events.removeListener(o,c)),$t(this,"dispatchEnvelope",({topic:o,message:c,sessionExists:l})=>{if(!o||!c)return;const u={topic:o,message:c,publishedAt:Date.now(),transportType:zt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(o){console.warn("Failed to copy global core",o)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||WD,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=nue({level:typeof e?.logger=="string"&&e.logger?e.logger:gge.logger,name:b_}),{logger:i,chunkLoggerController:a}=TN({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,c;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=gs(i,this.name),this.heartbeat=new kpe,this.crypto=new A0e(this,this.logger,e?.keychain),this.history=new Nwe(this,this.logger),this.expirer=new Bwe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new sme(uC(uC({},yge),e?.storageOptions)),this.relayer=new J0e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Pwe(this,this.logger),this.verify=new Fwe(this,this.logger,this.storage),this.echoClient=new Wwe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Kwe(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new n9(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Pge,r),n}get context(){return Hr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(z6,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(z6)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&mge.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Xwe=Jwe,r9="wc",s9=2,i9="client",Ex=`${r9}@${s9}:${i9}:`,Tb={name:i9,logger:"error"},dC="WALLETCONNECT_DEEPLINK_CHOICE",Qwe="proposal",hC="Proposal expired",ebe="session",Ol=we.SEVEN_DAYS,tbe="engine",Vn={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1114},res:{ttl:we.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:we.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:we.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1119}}},Cb={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},xi={idle:"IDLE",active:"ACTIVE"},nbe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},rbe="request",sbe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ibe="wc",abe="auth",obe="authKeys",cbe="pairingTopics",lbe="requests",a0=`${ibe}@${1.5}:${abe}:`,Am=`${a0}:PUB_KEY`;var ube=Object.defineProperty,dbe=Object.defineProperties,hbe=Object.getOwnPropertyDescriptors,fC=Object.getOwnPropertySymbols,fbe=Object.prototype.hasOwnProperty,pbe=Object.prototype.propertyIsEnumerable,O_=(t,e,n)=>e in t?ube(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tt=(t,e)=>{for(var n in e||(e={}))fbe.call(e,n)&&O_(t,n,e[n]);if(fC)for(var n of fC(e))pbe.call(e,n)&&O_(t,n,e[n]);return t},or=(t,e)=>dbe(t,hbe(e)),le=(t,e,n)=>O_(t,typeof e!="symbol"?e+"":e,n);let mbe=class extends Ame{constructor(e){super(e),le(this,"name",tbe),le(this,"events",new j2),le(this,"initialized",!1),le(this,"requestQueue",{state:xi.idle,queue:[]}),le(this,"sessionRequestQueue",{state:xi.idle,queue:[]}),le(this,"emittedSessionRequests",new Nue({limit:500})),le(this,"requestQueueDelay",we.ONE_SECOND),le(this,"expectedPairingMethodMap",new Map),le(this,"recentlyDeletedMap",new Map),le(this,"recentlyDeletedLimit",200),le(this,"relayMessageCache",[]),le(this,"pendingSessions",new Map),le(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Vn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))}),le(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=or(Tt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=jfe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:o,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const b=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=b.active}}catch(b){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),b}if(!u||!h){const{topic:b,uri:S}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});u=b,d=S}if(!u){const{message:b}=ye("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(b)}const f=await this.client.core.crypto.generateKeyPair(),p=Vn.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,m=hn(p),g=or(Tt(Tt({requiredNamespaces:i,optionalNamespaces:a,relays:l??[{protocol:zD}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},o&&{sessionProperties:o}),c&&{scopedProperties:c}),{id:Ci()}),_=Et("session_connect",g.id),{reject:A,resolve:w,done:y}=sc(p,hC),E=({id:b})=>{b===g.id&&(this.client.events.off("proposal_expire",E),this.pendingSessions.delete(g.id),this.events.emit(_,{error:{message:hC,code:0}}))};return this.client.events.on("proposal_expire",E),this.events.once(_,({error:b,session:S})=>{this.client.events.off("proposal_expire",E),b?A(b):S&&w(S)}),await this.sendProposeSession({proposal:g,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:g.id}}}),await this.setProposal(g.id,g),{uri:d,approval:y}}),le(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),le(this,"approve",async n=>{var r,s,i;const a=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[Vs.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw a.setError(Qo.no_internet_connection),P}try{await this.isValidProposalId(n?.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),a.setError(Qo.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),a.setError(Qo.session_approve_namespace_validation_failure),P}const{id:o,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:a.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:g,optionalNamespaces:_}=f;let A=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});A||(A=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Vs.session_approve_started,properties:{topic:p,trace:[Vs.session_approve_started,Vs.session_namespaces_validation_success]}}));const w=await this.client.core.crypto.generateKeyPair(),y=m.publicKey,E=await this.client.core.crypto.generateSharedKey(w,y),b=Tt(Tt(Tt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:w,metadata:this.client.metadata},expiry:hn(Ol)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=zt.relay;A.addTrace(Vs.subscribing_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:S,internal:{skipSubscribe:!0}})}catch(P){throw A.setError(Qo.subscribe_session_topic_failure),P}A.addTrace(Vs.subscribe_session_topic_success);const $=or(Tt({},b),{topic:E,requiredNamespaces:g,optionalNamespaces:_,pairingTopic:p,acknowledged:!1,self:b.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:w,transportType:zt.relay});await this.client.session.set(E,$),A.addTrace(Vs.store_session);try{await this.sendApproveSession({sessionTopic:E,proposal:f,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:w},sessionSettleRequest:b,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:o}}}),A.addTrace(Vs.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(E,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),P}return this.client.core.eventClient.deleteEvent({eventId:A.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(o),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(E,hn(Ol)),{topic:E,acknowledged:()=>Promise.resolve(this.client.session.get(E))}}),le(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(a){throw this.client.logger.error("reject() -> isValidReject() failed"),a}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(a){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),a}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Vn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),le(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:a,reject:o}=sc(),c=Ci(),l=Ro().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Et("session_update",c),({error:d})=>{d?o(d):a()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),o(d)}),{acknowledged:i}}),le(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Ci(),{done:i,resolve:a,reject:o}=sc();return this.events.once(Et("session_extend",s),({error:c})=>{c?o(c):a()}),await this.setExpiry(r,hn(Ol)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{o(c)}),{acknowledged:i}}),le(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(g){throw this.client.logger.error("request() -> isValidRequest() failed"),g}const{chainId:r,request:s,topic:i,expiry:a=Vn.wc_sessionRequest.req.ttl}=n,o=this.client.session.get(i);o?.transportType===zt.relay&&await this.confirmOnlineStateOrThrow();const c=Ci(),l=Ro().toString(),{done:u,resolve:d,reject:h}=sc(a,"Request expired. Please try again.");this.events.once(Et("session_request",c),({error:g,result:_})=>{g?h(g):d(_)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:or(Tt({},s),{expiryTimestamp:hn(a)}),chainId:r},expiry:a,throwOnFailedPublish:!0,appLink:p}).catch(g=>h(g)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const m={request:or(Tt({},s),{expiryTimestamp:hn(a)}),chainId:r};return await Promise.all([new Promise(async g=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:m,expiry:a,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(_=>h(_)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),g()}),new Promise(async g=>{var _;if(!((_=o.sessionConfig)!=null&&_.disableDeepLink)){const A=await kue(this.client.core.storage,dC);await Iue({id:c,topic:i,wcDeepLink:A})}g()}),u()]).then(g=>g[2])}),le(this,"respond",async n=>{var r,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:n?.topic||((s=(r=n?.response)==null?void 0:r.id)==null?void 0:s.toString()),trace:[Vs.session_request_response_started]}});try{await this.isValidRespond(n)}catch(d){throw i.addTrace(d?.message),i.setError(Qo.session_request_response_validation_failure),d}i.addTrace(Vs.session_request_response_validation_success);const{topic:a,response:o}=n,{id:c}=o,l=this.client.session.get(a);l.transportType===zt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);try{i.addTrace(Vs.session_request_response_publish_started),ki(o)?await this.sendResult({id:c,topic:a,result:o.result,throwOnFailedPublish:!0,appLink:u}):Ps(o)&&await this.sendError({id:c,topic:a,error:o.error,appLink:u}),this.cleanupAfterResponse(n)}catch(d){throw i.addTrace(d?.message),i.setError(Qo.session_request_response_publish_failure),d}}),le(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Ci(),i=Ro().toString(),{done:a,resolve:o,reject:c}=sc();this.events.once(Et("session_ping",s),({error:l})=>{l?c(l):o()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),a()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),le(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,a=Ro().toString(),o=Ci();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:a,clientRpcId:o})}),le(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ye("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),le(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>qfe(r,n)))),le(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),le(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),a=i?zt.link_mode:zt.relay;a===zt.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:m=[],expiry:g}=n,_=[...n.resources||[]],{topic:A,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:A,uri:w}});const y=await this.client.core.crypto.generateKeyPair(),E=vm(y);if(await Promise.all([this.client.auth.authKeys.set(Am,{responseTopic:E,publicKey:y}),this.client.auth.pairingTopics.set(E,{topic:E,pairingTopic:A})]),await this.client.core.relayer.subscribe(E,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${A}`),m.length>0){const{namespace:I}=Pa(o[0]);let F=Vde(I,"request",m);bm(_)&&(F=Kde(F,_.pop())),_.push(F)}const b=g&&g>Vn.wc_sessionAuthenticate.req.ttl?g:Vn.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:o,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:_},requester:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:hn(b)},$={eip155:{chains:o,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:$,relays:[{protocol:"irn"}],pairingTopic:A,proposer:{publicKey:y,metadata:this.client.metadata},expiryTimestamp:hn(Vn.wc_sessionPropose.req.ttl),id:Ci()},{done:C,resolve:B,reject:k}=sc(b,"Request expired"),D=Ci(),L=Et("session_connect",P.id),v=Et("session_request",D),x=async({error:I,session:F})=>{this.events.off(v,O),I?k(I):F&&B({session:F})},O=async I=>{var F,V,q;if(await this.deletePendingAuthRequest(D,{message:"fulfilled",code:0}),I.error){const ce=Wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return I.error.code===ce.code?void 0:(this.events.off(L,x),k(I.error.message))}await this.deleteProposal(P.id),this.events.off(L,x);const{cacaos:J,responder:G}=I.result,K=[],ue=[];for(const ce of J){await HT({cacao:ce,projectId:this.client.core.projectId})||(this.client.logger.error(ce,"Signature verification failed"),k(Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:oe}=ce,X=bm(oe.resources),Re=[r_(oe.iss)],Me=Og(oe.iss);if(X){const Oe=KT(X),st=GT(X);K.push(...Oe),Re.push(...st)}for(const Oe of Re)ue.push(`${Oe}:${Me}`)}const fe=await this.client.core.crypto.generateSharedKey(y,G.publicKey);let Ee;K.length>0&&(Ee={topic:fe,acknowledged:!0,self:{publicKey:y,metadata:this.client.metadata},peer:G,controller:G.publicKey,expiry:hn(Ol),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:A,namespaces:v6([...new Set(K)],[...new Set(ue)]),transportType:a},await this.client.core.relayer.subscribe(fe,{transportType:a}),await this.client.session.set(fe,Ee),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:G.metadata}),Ee=this.client.session.get(fe)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(V=G.metadata.redirect)!=null&&V.linkMode&&(q=G.metadata.redirect)!=null&&q.universal&&r&&(this.client.core.addLinkModeSupportedApp(G.metadata.redirect.universal),this.client.session.update(fe,{transportType:zt.link_mode})),B({auths:J,session:Ee})};this.events.once(L,x),this.events.once(v,O);let U;try{if(i){const I=Xs("wc_sessionAuthenticate",S,D);this.client.core.history.set(A,I);const F=await this.client.core.crypto.encode("",I,{type:Zf,encoding:So});U=Wp(r,A,F)}else await Promise.all([this.sendRequest({topic:A,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:D}),this.sendRequest({topic:A,method:"wc_sessionPropose",params:P,expiry:Vn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(I){throw this.events.off(L,x),this.events.off(v,O),I}return await this.setProposal(P.id,P),await this.setAuthRequest(D,{request:or(Tt({},S),{verifyContext:{}}),pairingTopic:A,transportType:a}),{uri:U??w,response:C}}),le(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[ec.authenticated_session_approve_started]}});try{this.isInitialized()}catch(g){throw i.setError(Td.no_internet_connection),g}const a=this.getPendingAuthRequest(r);if(!a)throw i.setError(Td.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const o=a.transportType||zt.relay;o===zt.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=vm(c),d={type:Ra,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const g of s){if(!await HT({cacao:g,projectId:this.client.core.projectId})){i.setError(Td.invalid_cacao);const E=Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:E,encodeOpts:d}),new Error(E.message)}i.addTrace(ec.cacaos_verified);const{p:_}=g,A=bm(_.resources),w=[r_(_.iss)],y=Og(_.iss);if(A){const E=KT(A),b=GT(A);h.push(...E),w.push(...b)}for(const E of w)f.push(`${E}:${y}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(ec.create_authenticated_session_topic);let m;if(h?.length>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:a.requester.metadata},controller:c,expiry:hn(Ol),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:a.pairingTopic,namespaces:v6([...new Set(h)],[...new Set(f)]),transportType:o},i.addTrace(ec.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:o})}catch(g){throw i.setError(Td.subscribe_authenticated_session_topic_failure),g}i.addTrace(ec.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),i.addTrace(ec.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:a.pairingTopic,metadata:a.requester.metadata})}i.addTrace(ec.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(a.requester.metadata,o)})}catch(g){throw i.setError(Td.authenticated_session_approve_publish_failure),g}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),le(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===zt.relay&&await this.confirmOnlineStateOrThrow();const a=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),c=vm(a),l={type:Ra,receiverPublicKey:a,senderPublicKey:o};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Vn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),le(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return GN(r,s)}),le(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),le(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var a,o;return((a=i.peerMetadata)==null?void 0:a.url)&&((o=i.peerMetadata)==null?void 0:o.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),le(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:a=!0,id:o=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(dC).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=xi.idle),a&&this.client.events.emit("session_delete",{id:o,topic:s})}),le(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Qo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),le(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=xi.idle,this.client.events.emit("session_request_expire",{id:n}))}),le(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),le(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),le(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,hn(Vn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),le(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:a=zt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:a})}),le(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:a}=n,o=i.request.expiryTimestamp||hn(Vn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,o),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:a})}),le(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:a,relayRpcId:o,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d,publishOpts:h={}}=n,f=Xs(s,i,c);let p;const m=!!u;try{const A=m?So:Ur;p=await this.client.core.crypto.encode(r,f,{encoding:A})}catch(A){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),A}let g;if(sbe.includes(s)){const A=Os(JSON.stringify(f)),w=Os(p);g=await this.client.core.verify.register({id:w,decryptedId:A})}const _=Tt(Tt({},Vn[s].req),h);if(_.attestation=g,a&&(_.ttl=a),o&&(_.id=o),this.client.core.history.set(r,f),m){const A=Wp(u,r,p);await global.Linking.openURL(A,this.client.name)}else _.tvf=or(Tt({},d),{correlationId:f.id}),l?(_.internal=or(Tt({},_.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,_)):this.client.core.relayer.publish(r,p,_).catch(A=>this.client.logger.error(A));return f.id}),le(this,"sendProposeSession",async n=>{const{proposal:r,publishOpts:s}=n,i=Xs("wc_sessionPropose",r,r.id);this.client.core.history.set(r.pairingTopic,i);const a=await this.client.core.crypto.encode(r.pairingTopic,i,{encoding:Ur}),o=Os(JSON.stringify(i)),c=Os(a),l=await this.client.core.verify.register({id:c,decryptedId:o});await this.client.core.relayer.publishCustom({payload:{pairingTopic:r.pairingTopic,sessionProposal:a},opts:or(Tt({},s),{publishMethod:"wc_proposeSession",attestation:l})})}),le(this,"sendApproveSession",async n=>{const{sessionTopic:r,pairingProposalResponse:s,proposal:i,sessionSettleRequest:a,publishOpts:o}=n,c=sf(i.id,s),l=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:Ur}),u=Xs("wc_sessionSettle",a,o?.id),d=await this.client.core.crypto.encode(r,u,{encoding:Ur});this.client.core.history.set(r,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:r,pairingTopic:i.pairingTopic,sessionProposalResponse:l,sessionSettlementRequest:d},opts:or(Tt({},o),{publishMethod:"wc_approveSession"})})}),le(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:a,encodeOpts:o,appLink:c}=n,l=sf(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?So:Ur;u=await this.client.core.crypto.encode(s,l,or(Tt({},o||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m?.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Wp(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,m=Vn[p].res;m.tvf=or(Tt({},f),{correlationId:r}),a?(m.internal=or(Tt({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,m)):this.client.core.relayer.publish(s,u,m).catch(g=>this.client.logger.error(g))}await this.client.core.history.resolve(l)}),le(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:a,rpcOpts:o,appLink:c}=n,l=r0(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?So:Ur;u=await this.client.core.crypto.encode(s,l,or(Tt({},a||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Wp(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=o||Vn[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),le(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Pi(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Pi(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),le(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),le(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),le(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===xi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=xi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=xi.idle}),le(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:a,encryptedId:o}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),le(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,a=(await this.client.core.history.get(r,s.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${a}`)}}),le(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ye("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),le(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),le(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:a}=n,{params:o,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(ua.proposal_listener_not_found)),this.isValidConnect(Tt({},s.params));const u=o.expiryTimestamp||hn(Vn.wc_sessionPropose.req.ttl),d=Tt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:a},o);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Os(JSON.stringify(s)),encryptedId:a,metadata:d.proposer.metadata});l?.addTrace(Ti.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Vn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),le(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(ki(r)){const{result:a}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const c=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ps(r)){await this.deleteProposal(i);const a=Et("session_connect",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(a,{error:r.error})}}),le(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:a,controller:o,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(g=>g.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),m=or(Tt(Tt(Tt({topic:n,relay:a,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:o.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:zt.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Et("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),le(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;ki(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Et("session_approve",s),{})):Ps(r)&&(await this.client.session.delete(n,Wt("USER_DISCONNECTED")),this.events.emit(Et("session_approve",s),{error:r.error}))}),le(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const a=`${n}_session_update`,o=Sd.get(a);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Tt({topic:n},s));try{Sd.set(a,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Sd.delete(a),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),le(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),le(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Et("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ki(r)?this.events.emit(Et("session_update",s),{}):Ps(r)&&this.events.emit(Et("session_update",s),{error:r.error})}),le(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,hn(Ol)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),le(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Et("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ki(r)?this.events.emit(Et("session_extend",s),{}):Ps(r)&&this.events.emit(Et("session_extend",s),{error:r.error})}),le(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),le(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Et("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ki(r)?this.events.emit(Et("session_ping",s),{}):Ps(r)&&this.events.emit(Et("session_ping",s),{error:r.error})},500)}),le(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(rn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),le(this,"onSessionRequest",async n=>{var r,s,i;const{topic:a,payload:o,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=o;try{await this.isValidRequest(Tt({topic:a},h));const f=this.client.session.get(a),p=await this.getVerifyContext({attestationId:c,hash:Os(JSON.stringify(Xs("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:d,topic:a,params:h,verifyContext:p};await this.setPendingSessionRequest(m),u===zt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:a,error:f}),this.client.logger.error(f)}}),le(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Et("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ki(r)?this.events.emit(Et("session_request",s),{result:r.result}):Ps(r)&&this.events.emit(Et("session_request",s),{error:r.error})}),le(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const a=`${n}_session_event_${i.event.name}`,o=Sd.get(a);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Tt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Sd.set(a,s)}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),le(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),ki(r)?this.events.emit(Et("session_request",s),{result:r.result}):Ps(r)&&this.events.emit(Et("session_request",s),{error:r.error})}),le(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:a,encryptedId:o,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:a,hash:Os(JSON.stringify(i)),encryptedId:o,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===zt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Ra,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Vn.wc_sessionAuthenticate.autoReject,appLink:h})}}),le(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),le(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=xi.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))}),le(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const a=i.request.id,o=Et("session_request",a);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(Et("session_request",i.request.id),{error:r})})}),le(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===xi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),le(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=xi.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),le(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Xs("wc_sessionPropose",or(Tt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),le(this,"isValidConnect",async n=>{if(!Rr(n)){const{message:l}=ye("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:a,scopedProperties:o,relays:c}=n;if(In(r)||await this.isValidPairingTopic(r),!npe(c)){const{message:l}=ye("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(s&&!In(s)&&Li(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!In(i)&&Li(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),a&&!In(a)&&this.validateSessionProps(a,"sessionProperties"),o&&!In(o)){this.validateSessionProps(o,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(o).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),le(this,"validateNamespaces",(n,r)=>{const s=tpe(n,"connect()",r);if(s)throw new Error(s.message)}),le(this,"isValidApprove",async n=>{if(!Rr(n))throw new Error(ye("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:a,scopedProperties:o}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=bb(s,"approve()");if(l)throw new Error(l.message);const u=x6(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!gn(i,!0)){const{message:d}=ye("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(a&&!In(a)&&this.validateSessionProps(a,"sessionProperties"),o&&!In(o)){this.validateSessionProps(o,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(o).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),le(this,"isValidReject",async n=>{if(!Rr(n)){const{message:i}=ye("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!spe(s)){const{message:i}=ye("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),le(this,"isValidSessionSettleRequest",n=>{if(!Rr(n)){const{message:l}=ye("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:a}=n;if(!PD(r)){const{message:l}=ye("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const o=Yfe(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);const c=bb(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Pi(a)){const{message:l}=ye("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),le(this,"isValidUpdate",async n=>{if(!Rr(n)){const{message:c}=ye("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),a=bb(s,"update()");if(a)throw new Error(a.message);const o=x6(i.requiredNamespaces,s,"update()");if(o)throw new Error(o.message)}),le(this,"isValidExtend",async n=>{if(!Rr(n)){const{message:s}=ye("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),le(this,"isValidRequest",async n=>{if(!Rr(n)){const{message:c}=ye("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:a}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!E6(o,i)){const{message:c}=ye("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ipe(s)){const{message:c}=ye("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!cpe(o,i,s.method)){const{message:c}=ye("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(a&&!hpe(a,Cb)){const{message:c}=ye("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${Cb.min} and ${Cb.max}`);throw new Error(c)}}),le(this,"isValidRespond",async n=>{var r;if(!Rr(n)){const{message:o}=ye("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!ape(i)){const{message:o}=ye("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}const a=this.client.pendingRequest.get(i.id);if(a.topic!==s){const{message:o}=ye("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${a.topic}, received topic: ${s}`);throw new Error(o)}}),le(this,"isValidPing",async n=>{if(!Rr(n)){const{message:s}=ye("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),le(this,"isValidEmit",async n=>{if(!Rr(n)){const{message:o}=ye("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(o)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!E6(a,i)){const{message:o}=ye("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!ope(s)){const{message:o}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!lpe(a,i,s.name)){const{message:o}=ye("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}}),le(this,"isValidDisconnect",async n=>{if(!Rr(n)){const{message:s}=ye("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),le(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:a}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!gn(s,!1))throw new Error("uri is required parameter");if(!gn(i,!1))throw new Error("domain is required parameter");if(!gn(a,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Pa(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=Pa(r[0]);if(o!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),le(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:a,transportType:o}=n,c={verified:{verifyUrl:a.verifyUrl||fh,validation:"UNKNOWN",origin:a.url||""}};try{if(o===zt.link_mode){const u=this.getAppLinkIfEnabled(a,o);return c.verified.validation=u&&new URL(u).origin===new URL(a.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:a.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(a.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),le(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:a}=ye("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(a)}})}),le(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),le(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const a of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(a)}}}),le(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ye("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),le(this,"isLinkModeEnabled",(n,r)=>{var s,i,a,o,c,l,u,d,h;return!n||r!==zt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((o=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:o.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n?.redirect)==null?void 0:u.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),le(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),le(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=NT(n,"topic")||"",s=decodeURIComponent(NT(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:zt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),le(this,"registerLinkModeListeners",async()=>{var n;if(ax()||qo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),le(this,"getTVFParams",(n,r,s)=>{var i,a,o;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(o=(a=r.request.params)==null?void 0:a[0])==null?void 0:o.to]:[]}catch(l){this.client.logger.warn(l,"Error getting TVF params")}return c}),le(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),le(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,a=nbe[i];if(i==="sui_signTransaction")return[Cde(r.transactionBytes)];if(i==="near_signTransaction")return[zT(r)];if(i==="near_signTransactions")return r.map(c=>zT(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Tpe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Ns(r)?r.map(c=>WT(c)):[WT(r)];if(i==="cosmos_signDirect")return[Ode(r)];if(i==="wallet_sendCalls")return Pde(r);if(typeof r=="string")return[r];const o=r[a.key];if(Ns(o))return i==="solana_signAllTransactions"?o.map(c=>Tde(c)):o;if(typeof o=="string")return[o]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=ye("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(rn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:a}=this.client.auth.authKeys.keys.includes(Am)?this.client.auth.authKeys.get(Am):{publicKey:void 0};try{const o=await this.client.core.crypto.decode(n,r,{receiverPublicKey:a,encoding:i===zt.link_mode?So:Ur});vx(o)?(this.client.core.history.set(n,o),await this.onRelayEventRequest({topic:n,payload:o,attestation:s,transportType:i,encryptedId:Os(r)})):s0(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o,transportType:i}),this.client.core.history.delete(n,o.id)):await this.onRelayEventUnknownPayload({topic:n,payload:o,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(Is.expired,async e=>{const{topic:n,id:r}=RN(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ye("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ye("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(dc.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(dc.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!gn(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Pi(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ye("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!gn(e,!1)){const{message:n}=ye("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Pi(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ye("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ye("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(gn(e,!1)){const{message:n}=ye("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ye("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!rpe(e)){const{message:n}=ye("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ye("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Pi(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ye("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}};class gbe extends dl{constructor(e,n){super(e,n,Qwe,Ex),this.core=e,this.logger=n}}let ybe=class extends dl{constructor(e,n){super(e,n,ebe,Ex),this.core=e,this.logger=n}},wbe=class extends dl{constructor(e,n){super(e,n,rbe,Ex,r=>r.id),this.core=e,this.logger=n}},bbe=class extends dl{constructor(e,n){super(e,n,obe,a0,()=>Am),this.core=e,this.logger=n}},vbe=class extends dl{constructor(e,n){super(e,n,cbe,a0),this.core=e,this.logger=n}},_be=class extends dl{constructor(e,n){super(e,n,lbe,a0,r=>r.id),this.core=e,this.logger=n}};var Ebe=Object.defineProperty,xbe=(t,e,n)=>e in t?Ebe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kb=(t,e,n)=>xbe(t,typeof e!="symbol"?e+"":e,n);let Abe=class{constructor(e,n){this.core=e,this.logger=n,kb(this,"authKeys"),kb(this,"pairingTopics"),kb(this,"requests"),this.authKeys=new bbe(this.core,this.logger),this.pairingTopics=new vbe(this.core,this.logger),this.requests=new _be(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var Sbe=Object.defineProperty,Ibe=(t,e,n)=>e in t?Sbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>Ibe(t,typeof e!="symbol"?e+"":e,n);let Tbe=class a9 extends xme{constructor(e){super(e),ct(this,"protocol",r9),ct(this,"version",s9),ct(this,"name",Tb.name),ct(this,"metadata"),ct(this,"core"),ct(this,"logger"),ct(this,"events",new ms.EventEmitter),ct(this,"engine"),ct(this,"session"),ct(this,"proposal"),ct(this,"pendingRequest"),ct(this,"auth"),ct(this,"signConfig"),ct(this,"on",(r,s)=>this.events.on(r,s)),ct(this,"once",(r,s)=>this.events.once(r,s)),ct(this,"off",(r,s)=>this.events.off(r,s)),ct(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),ct(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),ct(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),ct(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||Tb.name,this.metadata=vue(e?.metadata),this.signConfig=e?.signConfig;const n=wx({logger:e?.logger||Tb.logger,name:this.name});this.logger=n,this.core=e?.core||new Xwe(e),this.session=new ybe(this.core,this.logger),this.proposal=new gbe(this.core,this.logger),this.pendingRequest=new wbe(this.core,this.logger),this.engine=new mbe(this),this.auth=new Abe(this.core,this.logger)}static async init(e){const n=new a9(e);return await n.initialize(),n}get context(){return Hr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const Cbe=Tbe;var Vp={exports:{}},pC;function kbe(){return pC||(pC=1,(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Oi<"u"&&Oi,r=(function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i})();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof Oi<"u"&&Oi||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function l(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&u.indexOf(Object.prototype.toString.call(v))>-1};function h(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function f(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var x={next:function(){var O=v.shift();return{done:O===void 0,value:O}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function m(v){this.map={},v instanceof m?v.forEach(function(x,O){this.append(O,x)},this):Array.isArray(v)?v.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(x){this.append(x,v[x])},this)}m.prototype.append=function(v,x){v=h(v),x=f(x);var O=this.map[v];this.map[v]=O?O+", "+x:x},m.prototype.delete=function(v){delete this.map[h(v)]},m.prototype.get=function(v){return v=h(v),this.has(v)?this.map[v]:null},m.prototype.has=function(v){return this.map.hasOwnProperty(h(v))},m.prototype.set=function(v,x){this.map[h(v)]=f(x)},m.prototype.forEach=function(v,x){for(var O in this.map)this.map.hasOwnProperty(O)&&v.call(x,this.map[O],O,this)},m.prototype.keys=function(){var v=[];return this.forEach(function(x,O){v.push(O)}),p(v)},m.prototype.values=function(){var v=[];return this.forEach(function(x){v.push(x)}),p(v)},m.prototype.entries=function(){var v=[];return this.forEach(function(x,O){v.push([O,x])}),p(v)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function _(v){return new Promise(function(x,O){v.onload=function(){x(v.result)},v.onerror=function(){O(v.error)}})}function A(v){var x=new FileReader,O=_(x);return x.readAsArrayBuffer(v),O}function w(v){var x=new FileReader,O=_(x),U=/charset=([A-Za-z0-9_-]+)/.exec(v.type),I=U?U[1]:"utf-8";return x.readAsText(v,I),O}function y(v){for(var x=new Uint8Array(v),O=new Array(x.length),U=0;U<x.length;U++)O[U]=String.fromCharCode(x[U]);return O.join("")}function E(v){if(v.slice)return v.slice(0);var x=new Uint8Array(v.byteLength);return x.set(new Uint8Array(v)),x.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&l(v)?(this._bodyArrayBuffer=E(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=E(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=g(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=g(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=g(this);if(v)return v;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function $(v){var x=v.toUpperCase();return S.indexOf(x)>-1?x:v}function P(v,x){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var O=x.body;if(v instanceof P){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,x.headers||(this.headers=new m(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!O&&v._bodyInit!=null&&(O=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new m(x.headers)),this.method=$(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||(function(){if("AbortController"in o){var F=new AbortController;return F.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function C(v){var x=new FormData;return v.trim().split("&").forEach(function(O){if(O){var U=O.split("="),I=U.shift().replace(/\+/g," "),F=U.join("=").replace(/\+/g," ");x.append(decodeURIComponent(I),decodeURIComponent(F))}}),x}function B(v){var x=new m,O=v.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var I=U.split(":"),F=I.shift().trim();if(F){var V=I.join(":").trim();try{x.append(F,V)}catch(q){console.warn("Response "+q.message)}}}),x}b.call(P.prototype);function k(v,x){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new m(x.headers),this.url=x.url||"",this._initBody(v)}b.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},k.error=function(){var v=new k(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var D=[301,302,303,307,308];k.redirect=function(v,x){if(D.indexOf(x)===-1)throw new RangeError("Invalid status code");return new k(null,{status:x,headers:{location:v}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(x,O){this.message=x,this.name=O;var U=Error(x);this.stack=U.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function L(v,x){return new Promise(function(O,U){var I=new P(v,x);if(I.signal&&I.signal.aborted)return U(new a.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function V(){F.abort()}F.onload=function(){var G={statusText:F.statusText,headers:B(F.getAllResponseHeaders()||"")};I.url.indexOf("file://")===0&&(F.status<200||F.status>599)?G.status=200:G.status=F.status,G.url="responseURL"in F?F.responseURL:G.headers.get("X-Request-URL");var K="response"in F?F.response:F.responseText;setTimeout(function(){O(new k(K,G))},0)},F.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){U(new a.DOMException("Aborted","AbortError"))},0)};function q(G){try{return G===""&&o.location.href?o.location.href:G}catch{return G}}if(F.open(I.method,q(I.url),!0),I.credentials==="include"?F.withCredentials=!0:I.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(c.blob?F.responseType="blob":c.arrayBuffer&&(F.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof m||o.Headers&&x.headers instanceof o.Headers)){var J=[];Object.getOwnPropertyNames(x.headers).forEach(function(G){J.push(h(G)),F.setRequestHeader(G,f(x.headers[G]))}),I.headers.forEach(function(G,K){J.indexOf(K)===-1&&F.setRequestHeader(K,G)})}else I.headers.forEach(function(G,K){F.setRequestHeader(K,G)});I.signal&&(I.signal.addEventListener("abort",V),F.onreadystatechange=function(){F.readyState===4&&I.signal.removeEventListener("abort",V)}),F.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return L.polyfill=!0,o.fetch||(o.fetch=L,o.Headers=m,o.Request=P,o.Response=k),a.Headers=m,a.Request=P,a.Response=k,a.fetch=L,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Vp,Vp.exports)),Vp.exports}var Obe=kbe();const mC=Jc(Obe);var Pbe=Object.defineProperty,Rbe=Object.defineProperties,$be=Object.getOwnPropertyDescriptors,gC=Object.getOwnPropertySymbols,Nbe=Object.prototype.hasOwnProperty,Dbe=Object.prototype.propertyIsEnumerable,yC=(t,e,n)=>e in t?Pbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wC=(t,e)=>{for(var n in e||(e={}))Nbe.call(e,n)&&yC(t,n,e[n]);if(gC)for(var n of gC(e))Dbe.call(e,n)&&yC(t,n,e[n]);return t},bC=(t,e)=>Rbe(t,$be(e));const Ube={Accept:"application/json","Content-Type":"application/json"},Bbe="POST",vC={headers:Ube,method:Bbe},_C=10;let o9=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ms.EventEmitter,this.isAvailable=!1,this.registering=!1,!B6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Fa(e),r=await(await mC(this.url,bC(wC({},vC),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!B6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Fa({id:1,jsonrpc:"2.0",method:"test",params:[]});await mC(e,bC(wC({},vC),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Vc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=r0(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return UD(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>_C&&this.events.setMaxListeners(_C)}};function xx(t){return t==null||typeof t!="object"&&typeof t!="function"}function c9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function l9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Mbe="[object RegExp]",u9="[object String]",d9="[object Number]",h9="[object Boolean]",f9="[object Arguments]",Lbe="[object Symbol]",Fbe="[object Date]",jbe="[object Map]",zbe="[object Set]",Wbe="[object Array]",qbe="[object ArrayBuffer]",Vbe="[object Object]",Hbe="[object DataView]",Kbe="[object Uint8Array]",Gbe="[object Uint8ClampedArray]",Ybe="[object Uint16Array]",Zbe="[object Uint32Array]",Jbe="[object Int8Array]",Xbe="[object Int16Array]",Qbe="[object Int32Array]",eve="[object Float32Array]",tve="[object Float64Array]";function Ax(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nve(t,e){return Ql(t,void 0,t,new Map,e)}function Ql(t,e,n,r=new Map,s=void 0){const i=s?.(t,e,n,r);if(i!=null)return i;if(xx(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const a=new Array(t.length);r.set(t,a);for(let o=0;o<t.length;o++)a[o]=Ql(t[o],o,n,r,s);return Object.hasOwn(t,"index")&&(a.index=t.index),Object.hasOwn(t,"input")&&(a.input=t.input),a}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const a=new RegExp(t.source,t.flags);return a.lastIndex=t.lastIndex,a}if(t instanceof Map){const a=new Map;r.set(t,a);for(const[o,c]of t)a.set(o,Ql(c,o,n,r,s));return a}if(t instanceof Set){const a=new Set;r.set(t,a);for(const o of t)a.add(Ql(o,void 0,n,r,s));return a}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Ax(t)){const a=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,a);for(let o=0;o<t.length;o++)a[o]=Ql(t[o],o,n,r,s);return a}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const a=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,a),hc(a,t,n,r,s),a}if(typeof File<"u"&&t instanceof File){const a=new File([t],t.name,{type:t.type});return r.set(t,a),hc(a,t,n,r,s),a}if(t instanceof Blob){const a=new Blob([t],{type:t.type});return r.set(t,a),hc(a,t,n,r,s),a}if(t instanceof Error){const a=new t.constructor;return r.set(t,a),a.message=t.message,a.name=t.name,a.stack=t.stack,a.cause=t.cause,hc(a,t,n,r,s),a}if(typeof t=="object"&&rve(t)){const a=Object.create(Object.getPrototypeOf(t));return r.set(t,a),hc(a,t,n,r,s),a}return t}function hc(t,e,n=t,r,s){const i=[...Object.keys(e),...c9(e)];for(let a=0;a<i.length;a++){const o=i[a],c=Object.getOwnPropertyDescriptor(t,o);(c==null||c.writable)&&(t[o]=Ql(e[o],o,n,r,s))}}function rve(t){switch(l9(t)){case f9:case Wbe:case qbe:case Hbe:case h9:case Fbe:case eve:case tve:case Jbe:case Xbe:case Qbe:case jbe:case d9:case Vbe:case Mbe:case zbe:case u9:case Lbe:case Kbe:case Gbe:case Ybe:case Zbe:return!0;default:return!1}}function sve(t,e){return nve(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case d9:case u9:case h9:{const a=new t.constructor(t?.valueOf());return hc(a,t),a}case f9:{const a={};return hc(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function EC(t){return sve(t)}function xC(t){return t!==null&&typeof t=="object"&&l9(t)==="[object Arguments]"}function AC(t){return typeof t=="object"&&t!==null}function ive(){}function ave(t){return Ax(t)}function ove(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function cve(t){if(xx(t))return t;if(Array.isArray(t)||Ax(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function lve(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const a=n[i];s=P_(s,a,r,new Map)}return s}function P_(t,e,n,r){if(xx(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return cve(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...c9(e)];for(let i=0;i<s.length;i++){const a=s[i];let o=e[a],c=t[a];if(xC(o)&&(o={...o}),xC(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(o)&&(o=EC(o)),Array.isArray(o))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,o,a,t,e,r);l!=null?t[a]=l:Array.isArray(o)||AC(c)&&AC(o)?t[a]=P_(c,o,n,r):c==null&&ove(o)?t[a]=P_({},o,n,r):c==null&&ave(o)?t[a]=EC(o):(c===void 0||o!==void 0)&&(t[a]=o)}return t}function uve(t,...e){return lve(t,...e,ive)}const SC="error",dve="wss://relay.walletconnect.org",hve="wc",p9="universal_provider",Hp=`${hve}@2:${p9}:`,m9="https://rpc.walletconnect.org/v1/",g9="generic",fve=`${m9}bundler`,hu="call_status",pve=86400,Sx={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var mve=Object.defineProperty,gve=Object.defineProperties,yve=Object.getOwnPropertyDescriptors,IC=Object.getOwnPropertySymbols,wve=Object.prototype.hasOwnProperty,bve=Object.prototype.propertyIsEnumerable,TC=(t,e,n)=>e in t?mve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kp=(t,e)=>{for(var n in e||(e={}))wve.call(e,n)&&TC(t,n,e[n]);if(IC)for(var n of IC(e))bve.call(e,n)&&TC(t,n,e[n]);return t},vve=(t,e)=>gve(t,yve(e));function y9(t,e,n){var r;const s=Pa(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${m9}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function _ve(t){return t.includes(":")?t.split(":")[1]:t}function w9(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Eve(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function CC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n?.chains)==null?void 0:r.length)&&((s=n?.chains)==null?void 0:s.length)>0}))}function Gp(t={},e={}){const n=CC(kC(t)),r=CC(kC(e));return uve(n,r)}function kC(t){var e,n,r,s,i;const a={};if(!Li(t))return a;for(const[o,c]of Object.entries(t)){const l=n0(o)?[o]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Xl(o);a[f]=vve(Kp(Kp({},a[f]),c),{chains:Mi(l,(e=a[f])==null?void 0:e.chains),methods:Mi(u,(n=a[f])==null?void 0:n.methods),events:Mi(d,(r=a[f])==null?void 0:r.events)}),(Li(h)||Li(((s=a[f])==null?void 0:s.rpcMap)||{}))&&(a[f].rpcMap=Kp(Kp({},h),(i=a[f])==null?void 0:i.rpcMap))}return a}function OC(t){return t.includes(":")?t.split(":")[2]:t}function PC(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],a=r.accounts||[],o=n0(n)?[n]:r.chains?r.chains:w9(r.accounts);e[n]={chains:o,methods:s,events:i,accounts:a}}return e}function Ob(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function xve(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const b9={},fu=t=>b9[t],Pb=(t,e)=>{b9[t]=e};var Ave=Object.defineProperty,RC=Object.getOwnPropertySymbols,Sve=Object.prototype.hasOwnProperty,Ive=Object.prototype.propertyIsEnumerable,$C=(t,e,n)=>e in t?Ave(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NC=(t,e)=>{for(var n in e||(e={}))Sve.call(e,n)&&$C(t,n,e[n]);if(RC)for(var n of RC(e))Ive.call(e,n)&&$C(t,n,e[n]);return t};const DC="eip155",Tve=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Cve=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Rb=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,UC=t=>Object.keys(t).filter(e=>Tve.includes(e)).reduce((e,n)=>(e[n]=kve(t[n]),e),{}),kve=t=>typeof t=="string"&&xve(t)?JSON.parse(t):t,Ove=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Li(s)&&!Li(r))return;const a=UC(r);for(const o of n){const c=Cve(o);if(!c)continue;i[Rb(c)]=a;const l=s?.[`${DC}:${c}`];if(l){const u=l?.[`${DC}:${c}:${e}`];i[Rb(c)]=NC(NC({},i[Rb(c)]),UC(u||l))}}for(const[o,c]of Object.entries(i))Object.keys(c).length===0&&delete i[o];return Object.keys(i).length>0?i:void 0};var Pve=Object.defineProperty,Rve=(t,e,n)=>e in t?Pve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$ve=(t,e,n)=>Rve(t,e+"",n);let $b,Nve=class v9{constructor(e){$ve(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,n){return await this.storage.setItem(e,n)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return $b||($b=new v9(e)),$b}};var Dve=Object.defineProperty,Uve=Object.defineProperties,Bve=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,Mve=Object.prototype.hasOwnProperty,Lve=Object.prototype.propertyIsEnumerable,MC=(t,e,n)=>e in t?Dve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fve=(t,e)=>{for(var n in e||(e={}))Mve.call(e,n)&&MC(t,n,e[n]);if(BC)for(var n of BC(e))Lve.call(e,n)&&MC(t,n,e[n]);return t},jve=(t,e)=>Uve(t,Bve(e));async function zve(t,e){const n=Pa(t.result.capabilities.caip345.caip2),r=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(r.map(d=>Wve(n.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const a=!i.length||i.some(d=>!d),o=i.every(d=>d?.status==="0x1"),c=i.every(d=>d?.status==="0x0"),l=i.some(d=>d?.status==="0x0");let u;return a?u=100:o?u=200:c?u=500:l&&(u=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:u}}async function Wve(t,e,n){return await n(parseInt(t)).request(Xs("eth_getTransactionReceipt",[e]))}async function qve({sendCalls:t,storage:e}){const n=await e.getItem(hu);await e.setItem(hu,jve(Fve({},n),{[t.result.id]:{request:t.request,result:t.result,expiry:hn(pve)}}))}async function Vve({resultId:t,storage:e}){const n=await e.getItem(hu);if(n){delete n[t],await e.setItem(hu,n);for(const r in n)Pi(n[r].expiry)&&delete n[r];await e.setItem(hu,n)}}async function Hve({resultId:t,storage:e}){const n=await e.getItem(hu),r=n?.[t];if(r&&!Pi(r.expiry))return r;await Vve({resultId:t,storage:e})}var Kve=Object.defineProperty,Gve=Object.defineProperties,Yve=Object.getOwnPropertyDescriptors,LC=Object.getOwnPropertySymbols,Zve=Object.prototype.hasOwnProperty,Jve=Object.prototype.propertyIsEnumerable,R_=(t,e,n)=>e in t?Kve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nb=(t,e)=>{for(var n in e||(e={}))Zve.call(e,n)&&R_(t,n,e[n]);if(LC)for(var n of LC(e))Jve.call(e,n)&&R_(t,n,e[n]);return t},Db=(t,e)=>Gve(t,Yve(e)),tc=(t,e,n)=>R_(t,typeof e!="symbol"?e+"":e,n);class Xve{constructor(e){tc(this,"name","eip155"),tc(this,"client"),tc(this,"chainId"),tc(this,"namespace"),tc(this,"httpProviders"),tc(this,"events"),tc(this,"storage"),this.namespace=e.namespace,this.events=fu("events"),this.client=fu("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=Nve.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n);const r=this.chainId;this.chainId=parseInt(e),this.events.emit(Sx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||y9(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new _x(new o9(r,fu("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(_ve(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(e){const n=e||this.chainId;return this.httpProviders[n]||(this.httpProviders=Db(Nb({},this.httpProviders),{[n]:this.createHttpProvider(n)}),this.httpProviders[n])}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,a;const o=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!o)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((a=l?.sessionProperties)==null?void 0:a.capabilities)||{},d=`${o}${c.join(",")}`,h=u?.[d];if(h)return h;let f;try{f=Ove(l,o,c)}catch(m){console.warn("Failed to extract capabilities from session",m)}if(f)return f;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Db(Nb({},l.sessionProperties||{}),{capabilities:Db(Nb({},u||{}),{[d]:p})})})}catch(m){console.warn("Failed to update session with capabilities",m)}return p}async getCallStatus(e){var n,r,s;const i=this.client.session.get(e.topic),a=(n=i.sessionProperties)==null?void 0:n.bundler_name;if(a){const l=this.getBundlerUrl(e.chainId,a);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const o=(r=i.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,o)}const c=await Hve({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await zve(c,this.getHttpProvider.bind(this))}catch(l){console.warn("Failed to fetch call status from stored send calls",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xs("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${fve}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}async sendCalls(e){var n,r,s;const i=await this.client.request(e),a=(n=e.request.params)==null?void 0:n[0],o=i?.id,c=i?.capabilities||{},l=(r=c?.caip345)==null?void 0:r.caip2,u=(s=c?.caip345)==null?void 0:s.transactionHashes;return!o||!l||!(u!=null&&u.length)||await qve({sendCalls:{request:a,result:i},storage:this.storage}),i}}var Qve=Object.defineProperty,e1e=(t,e,n)=>e in t?Qve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pl=(t,e,n)=>e1e(t,typeof e!="symbol"?e+"":e,n);class t1e{constructor(e){Pl(this,"name",g9),Pl(this,"client"),Pl(this,"httpProviders"),Pl(this,"events"),Pl(this,"namespace"),Pl(this,"chainId"),this.namespace=e.namespace,this.events=fu("events"),this.client=fu("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n);const r=this.chainId;this.chainId=e,this.events.emit(Sx.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${r}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Pa(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{var i,a;const o=Pa(s),c=(a=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:a[`${o.namespace}:${o.reference}`];r[o.reference]=this.createHttpProvider(s,c)}),r}getHttpProvider(e){const n=Pa(e).reference,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||y9(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new _x(new o9(r,fu("disableProviderPing")))}}var n1e=Object.defineProperty,r1e=Object.defineProperties,s1e=Object.getOwnPropertyDescriptors,FC=Object.getOwnPropertySymbols,i1e=Object.prototype.hasOwnProperty,a1e=Object.prototype.propertyIsEnumerable,$_=(t,e,n)=>e in t?n1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Od=(t,e)=>{for(var n in e||(e={}))i1e.call(e,n)&&$_(t,n,e[n]);if(FC)for(var n of FC(e))a1e.call(e,n)&&$_(t,n,e[n]);return t},Yp=(t,e)=>r1e(t,s1e(e)),As=(t,e,n)=>$_(t,typeof e!="symbol"?e+"":e,n);class Ix{constructor(e){As(this,"client"),As(this,"namespaces"),As(this,"optionalNamespaces"),As(this,"sessionProperties"),As(this,"scopedProperties"),As(this,"events",new j2),As(this,"rpcProviders",{}),As(this,"session"),As(this,"providerOpts"),As(this,"logger"),As(this,"uri"),As(this,"disableProviderPing",!1);var n,r;this.providerOpts=e,this.logger=wx({logger:(n=e.logger)!=null?n:SC,name:(r=this.providerOpts.name)!=null?r:p9}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new Ix(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Od({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(a=>n(null,sf(i,a))).catch(a=>n(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const a=PC(this.session.namespaces);this.namespaces=Gp(this.namespaces,a),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=PC(s.namespaces);return this.namespaces=Gp(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e);this.getProvider(r).setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(!Ns(n))return;for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}catch(n){this.logger.warn(n,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Cbe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||SC,relayUrl:this.providerOpts.relayUrl||dve,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error(r,"Failed to get session"),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Xl(n)))];Pb("client",this.client),Pb("events",this.events),Pb("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Eve(n,this.session);if(r?.length===0)return;const s=w9(r),i=Gp(this.namespaces,this.optionalNamespaces),a=Yp(Od({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Xve({namespace:a});break;default:this.rpcProviders[n]=new t1e({namespace:a})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const a=i.data;a&&Ns(a)&&this.events.emit("accountsChanged",a.map(OC))}else if(i.name==="chainChanged"){const a=r.chainId,o=r.event.data,c=Xl(a),l=Ob(a)!==Ob(o)?`${c}:${Ob(o)}`:a;this.onChainChanged({currentCaipChainId:l})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,a=(s=this.client)==null?void 0:s.session.get(e);this.session=Yp(Od({},a),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Yp(Od({},Wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Sx.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(Yp(Od({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[g9]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Gp(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(a=>Xl(a)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Xl(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:n,internal:r=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),r?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:n})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:n,previousCaipChainId:r}){var s,i;try{if(r===n)return;const a=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!a)return;const o=a.filter(c=>c.includes(`${n}:`)).map(OC);if(!Ns(o))return;this.events.emit("accountsChanged",o)}catch(a){this.logger.warn(a,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Hp}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Hp}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Hp}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Hp)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn(n,"Failed to cleanup storage")}}}const o1e=Ix,c1e="wc",l1e="ethereum_provider",u1e=`${c1e}@2:${l1e}:`,d1e="https://rpc.walletconnect.org/v1/",N_=["eth_sendTransaction","personal_sign"],_9=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],D_=["chainChanged","accountsChanged"],E9=["chainChanged","accountsChanged","message","disconnect","connect"],h1e=async()=>{const{createAppKit:t}=await xe(()=>import("./core.CSdGW7J-.js").then(e=>e.ai),__vite__mapDeps([2,1]));return t};var f1e=Object.defineProperty,p1e=Object.defineProperties,m1e=Object.getOwnPropertyDescriptors,jC=Object.getOwnPropertySymbols,g1e=Object.prototype.hasOwnProperty,y1e=Object.prototype.propertyIsEnumerable,U_=(t,e,n)=>e in t?f1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ic=(t,e)=>{for(var n in e||(e={}))g1e.call(e,n)&&U_(t,n,e[n]);if(jC)for(var n of jC(e))y1e.call(e,n)&&U_(t,n,e[n]);return t},Pd=(t,e)=>p1e(t,m1e(e)),Qr=(t,e,n)=>U_(t,typeof e!="symbol"?e+"":e,n);function Ug(t){return Number(t[0].split(":")[1])}function Zp(t){return`0x${t.toString(16)}`}function w1e(t){const{chains:e,optionalChains:n,methods:r,optionalMethods:s,events:i,optionalEvents:a,rpcMap:o}=t;if(!Ns(e))throw new Error("Invalid chains");const c={chains:e,methods:r||N_,events:i||D_,rpcMap:ic({},e.length?{[Ug(e)]:o[Ug(e)]}:{})},l=i?.filter(f=>!D_.includes(f)),u=r?.filter(f=>!N_.includes(f));if(!n&&!a&&!s&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const d=l?.length&&u?.length||!n,h={chains:[...new Set(d?c.chains.concat(n||[]):n)],methods:[...new Set(c.methods.concat(s!=null&&s.length?s:_9))],events:[...new Set(c.events.concat(a!=null&&a.length?a:E9))],rpcMap:o};return{required:e.length?c:void 0,optional:n.length?h:void 0}}class Tx{constructor(){Qr(this,"events",new ms.EventEmitter),Qr(this,"namespace","eip155"),Qr(this,"accounts",[]),Qr(this,"signer"),Qr(this,"chainId",1),Qr(this,"modal"),Qr(this,"rpc"),Qr(this,"STORAGE_KEY",u1e),Qr(this,"on",(e,n)=>(this.events.on(e,n),this)),Qr(this,"once",(e,n)=>(this.events.once(e,n),this)),Qr(this,"removeListener",(e,n)=>(this.events.removeListener(e,n),this)),Qr(this,"off",(e,n)=>(this.events.off(e,n),this)),Qr(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const n=new Tx;return await n.initialize(e),n}async request(e,n){return await this.signer.request(e,this.formatChainId(this.chainId),n)}sendAsync(e,n,r){this.signer.sendAsync(e,n,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=w1e(this.rpc);try{const i=await new Promise(async(o,c)=>{var l,u;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(u=this.modal)==null||u.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const d=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(Pd(ic({namespaces:ic({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e?.pairingTopic,scopedProperties:d})).then(h=>{o(h)}).catch(h=>{var f;(f=this.modal)==null||f.showErrorMessage("Unable to connect"),c(new Error(h.message))})});if(!i)return;const a=kT(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:Zp(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{(n=this.modal)==null||n.close()}}async authenticate(e,n){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const s=await new Promise(async(a,o)=>{var c,l;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(l=this.modal)==null||l.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(Pd(ic({},e),{chains:this.rpc.chains}),n).then(u=>{a(u)}).catch(u=>{var d;(d=this.modal)==null||d.showErrorMessage("Unable to connect"),o(new Error(u.message))})}),i=s.session;if(i){const a=kT(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:Zp(this.chainId)})}return s}catch(s){throw this.signer.logger.error(s),s}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:n}=e,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const n=parseInt(e);this.chainId=n,this.events.emit("chainChanged",Zp(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Pd(ic({},Wt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const n=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",Zp(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const n=this.parseChainId(e);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(e){const[n,r,s]=e.split(":");return{chainId:`${n}:${r}`,address:s}}setAccounts(e){this.accounts=e.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var n,r;const s=(n=e?.chains)!=null?n:[],i=(r=e?.optionalChains)!=null?r:[],a=s.concat(i);if(!a.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=s.length?e?.methods||N_:[],c=s.length?e?.events||D_:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],d=e?.rpcMap||this.buildRpcMap(a,e.projectId),h=e?.qrModalOptions||void 0;return{chains:s?.map(f=>this.formatChainId(f)),optionalChains:i.map(f=>this.formatChainId(f)),methods:o,events:c,optionalMethods:l,optionalEvents:u,rpcMap:d,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,n){const r={};return e.forEach(s=>{r[s]=this.getRpcUrl(s,n)}),r}async initialize(e){var n;if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Ug(this.rpc.chains):Ug(this.rpc.optionalChains),this.signer=await o1e.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const s=await h1e(),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return k1e}),a=i(Pd(ic({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!a.networks.length)throw new Error("No networks found for WalletConnect·");r=s(Pd(ic({},a),{universalProvider:this.signer,manualWCControl:!0,enableMobileFullScreen:((n=this.rpc.qrModalOptions)==null?void 0:n.enableMobileFullScreen)===!0}))}catch(s){throw console.warn(s),new Error("To use QR modal, please install @reown/appkit package")}if(r)try{this.modal=r}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:n,optionalChains:r,rpcMap:s}=e;n&&Ns(n)&&(this.rpc.chains=n.map(i=>this.formatChainId(i)),n.forEach(i=>{this.rpc.rpcMap[i]=s?.[i]||this.getRpcUrl(i)})),r&&Ns(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(i=>this.formatChainId(i)),r.forEach(i=>{this.rpc.rpcMap[i]=s?.[i]||this.getRpcUrl(i)}))}getRpcUrl(e,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${d1e}?chainId=eip155:${e}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:n?.accounts),this.setAccounts(n?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(n=>this.signer.logger.warn(n))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(n=>this.parseAccount(n))}}const b1e=Tx;var v1e=Object.defineProperty,_1e=Object.defineProperties,E1e=Object.getOwnPropertyDescriptors,zC=Object.getOwnPropertySymbols,x1e=Object.prototype.hasOwnProperty,A1e=Object.prototype.propertyIsEnumerable,WC=(t,e,n)=>e in t?v1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x9=(t,e)=>{for(var n in e||(e={}))x1e.call(e,n)&&WC(t,n,e[n]);if(zC)for(var n of zC(e))A1e.call(e,n)&&WC(t,n,e[n]);return t},S1e=(t,e)=>_1e(t,E1e(e));function I1e(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const T1e=t=>{const[e,n]=t.split(":");return A9({id:n,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function C1e(t){var e,n,r,s,i,a,o;const c=(e=t.chains)==null?void 0:e.map(T1e).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const l=c.find(d=>{var h;return d.id===((h=t.defaultChain)==null?void 0:h.id)}),u={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:I1e(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:l,metadata:S1e(x9({},t.metadata),{name:((n=t.metadata)==null?void 0:n.name)||"WalletConnect",description:((r=t.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((s=t.metadata)==null?void 0:s.url)||"https://walletconnect.org",icons:((i=t.metadata)==null?void 0:i.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((a=t.mobileWallets)!=null&&a.length||(o=t.desktopWallets)!=null&&o.length){const d=[...(t.mobileWallets||[]).map(p=>({id:p.id,name:p.name,links:p.links})),...(t.desktopWallets||[]).map(p=>({id:p.id,name:p.name,links:{native:p.links.native,universal:p.links.universal}}))],h=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],f=d.filter(p=>!h.includes(p.id));f.length&&(u.customWallets=f)}return u}function A9(t){return x9({formatters:void 0,fees:void 0,serializers:void 0},t)}var k1e=Object.freeze({__proto__:null,convertWCMToAppKitOptions:C1e,defineChain:A9});const O1e=({origin:t,path:e,query:n={},hash:r={}})=>{let s=new URL(e,t.endsWith("/")?t:`${t}/`);for(let[a,o]of Object.entries(n))o!==void 0&&s.searchParams.set(a,o);let i=Object.entries(r);if(i.length>0){let a=new URLSearchParams;for(let[o,c]of i)c!==void 0&&a.append(o,c);s.hash=a.toString()}return s.href},S9=T.createContext({plugins:{current:{}}}),P1e=({children:t,configPlugins:e})=>{let n=T.useRef({});return T.useEffect((()=>{if(e&&e.length!==0){for(let r of e)n.current[r.id]=r;return()=>{for(let r of e)delete n.current[r.id]}}}),[e]),R.jsx(S9.Provider,{value:{plugins:n},children:t})},R1e=()=>{let{plugins:t}=T.useContext(S9);return T.useCallback((e=>t.current[e]),[t])},qC=Symbol("data-suffix-plugin");var $1e=Object.defineProperty,Cx=(t,e)=>{for(var n in e)$1e(t,n,{get:e[n],enumerable:!0})},N1e={84532:{usdcAddress:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",usdcName:"USDC"},8453:{usdcAddress:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",usdcName:"USD Coin"},43113:{usdcAddress:"0x5425890298aed601595a70AB815c96711a31Bc65",usdcName:"USD Coin"},43114:{usdcAddress:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",usdcName:"USD Coin"},4689:{usdcAddress:"0xcdf79194c6c285077a58da47641d4dbe51f63542",usdcName:"Bridged USDC"},103:{usdcAddress:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",usdcName:"USDC"},101:{usdcAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",usdcName:"USDC"},1328:{usdcAddress:"0x4fcf1784b31630811181f670aea7a7bef803eaed",usdcName:"USDC"},1329:{usdcAddress:"0xe15fc38f6d8c56af07bbcbe3baf5708a2bf42392",usdcName:"USDC"},137:{usdcAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",usdcName:"USD Coin"},80002:{usdcAddress:"0x41E94Eb019C0762f9Bfcf9Fb1E58725BfB0e7582",usdcName:"USDC"},3338:{usdcAddress:"0xbbA60da06c2c5424f03f7434542280FCAd453d10",usdcName:"USDC"},2741:{usdcAddress:"0x84a71ccd554cc1b02749b35d22f684cc8ec987e1",usdcName:"Bridged USDC"},11124:{usdcAddress:"0xe4C7fBB0a626ed208021ccabA6Be1566905E2dFc",usdcName:"Bridged USDC"},1514:{usdcAddress:"0xF1815bd50389c46847f0Bda824eC8da914045D14",usdcName:"Bridged USDC"},41923:{usdcAddress:"0x12a272A581feE5577A5dFa371afEB4b2F3a8C2F8",usdcName:"Bridged USDC (Stargate)"},324705682:{usdcAddress:"0x2e08028E3C4c2356572E096d8EF835cD5C6030bD",usdcName:"Bridged USDC (SKALE Bridge)"}},D1e=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"authorizer",type:"address"},{indexed:!0,internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"AuthorizationUsed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"Blacklisted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newBlacklister",type:"address"}],name:"BlacklisterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"burner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newMasterMinter",type:"address"}],name:"MasterMinterChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"MinterConfigured",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldMinter",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"previousOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newAddress",type:"address"}],name:"PauserChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_account",type:"address"}],name:"UnBlacklisted",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[],name:"CANCEL_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"RECEIVE_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"TRANSFER_WITH_AUTHORIZATION_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"authorizationState",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"blacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"blacklister",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"authorizer",type:"address"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"cancelAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"uint256",name:"minterAllowedAmount",type:"uint256"}],name:"configureMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currency",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"decrement",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"increment",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"tokenName",type:"string"},{internalType:"string",name:"tokenSymbol",type:"string"},{internalType:"string",name:"tokenCurrency",type:"string"},{internalType:"uint8",name:"tokenDecimals",type:"uint8"},{internalType:"address",name:"newMasterMinter",type:"address"},{internalType:"address",name:"newPauser",type:"address"},{internalType:"address",name:"newBlacklister",type:"address"},{internalType:"address",name:"newOwner",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newName",type:"string"}],name:"initializeV2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"lostAndFound",type:"address"}],name:"initializeV2_1",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"accountsToBlacklist",type:"address[]"},{internalType:"string",name:"newSymbol",type:"string"}],name:"initializeV2_2",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"masterMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"minterAllowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"receiveWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"removeMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"validAfter",type:"uint256"},{internalType:"uint256",name:"validBefore",type:"uint256"},{internalType:"bytes32",name:"nonce",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"transferWithAuthorization",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"unBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newBlacklister",type:"address"}],name:"updateBlacklister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newMasterMinter",type:"address"}],name:"updateMasterMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newPauser",type:"address"}],name:"updatePauser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"}];const kx=50000n,VC=dj*32n,I9={block:g8({format(t){const e=t.transactions?.map(n=>{if(typeof n=="string")return n;const r=I9.transaction?.format(n);return r.typeHex==="0x71"?r.type="eip712":r.typeHex==="0xff"&&(r.type="priority"),r});return{l1BatchNumber:t.l1BatchNumber?xt(t.l1BatchNumber):null,l1BatchTimestamp:t.l1BatchTimestamp?xt(t.l1BatchTimestamp):null,transactions:e}}}),transaction:m8({format(t){const e={};return t.type==="0x71"?e.type="eip712":t.type==="0xff"&&(e.type="priority"),{...e,l1BatchNumber:t.l1BatchNumber?xt(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?xt(t.l1BatchTxIndex):null}}}),transactionReceipt:Q8({format(t){return{l1BatchNumber:t.l1BatchNumber?xt(t.l1BatchNumber):null,l1BatchTxIndex:t.l1BatchTxIndex?xt(t.l1BatchTxIndex):null,logs:t.logs.map(e=>({...Fi(e),l1BatchNumber:e.l1BatchNumber?xt(e.l1BatchNumber):null,transactionLogIndex:us(e.transactionLogIndex),logType:e.logType})),l2ToL1Logs:t.l2ToL1Logs.map(e=>({blockNumber:xt(e.blockHash),blockHash:e.blockHash,l1BatchNumber:e.l1BatchNumber?xt(e.l1BatchNumber):null,transactionIndex:xt(e.transactionIndex),shardId:xt(e.shardId),isService:e.isService,sender:e.sender,key:e.key,value:e.value,transactionHash:e.transactionHash,logIndex:xt(e.logIndex)}))}}}),transactionRequest:cj({exclude:["customSignature","factoryDeps","gasPerPubdata","paymaster","paymasterInput"],format(t){return t.gasPerPubdata||t.paymaster&&t.paymasterInput||t.factoryDeps||t.customSignature?{eip712Meta:{...t.gasPerPubdata?{gasPerPubdata:Ye(t.gasPerPubdata)}:{gasPerPubdata:Ye(kx)},...t.paymaster&&t.paymasterInput?{paymasterParams:{paymaster:t.paymaster,paymasterInput:Array.from(wr(t.paymasterInput))}}:{},...t.factoryDeps?{factoryDeps:t.factoryDeps.map(e=>Array.from(wr(e)))}:{},...t.customSignature?{customSignature:Array.from(wr(t.customSignature))}:{}},type:"0x71"}:{}}})};class T9 extends re{constructor(){super(["Transaction is not an EIP712 transaction.","","Transaction must:",'  - include `type: "eip712"`',"  - include one of the following: `customSignature`, `paymaster`, `paymasterInput`, `gasPerPubdata`, `factoryDeps`"].join(`
`),{name:"InvalidEip712TransactionError"})}}function Qf(t){return!!(t.type==="eip712"||"customSignature"in t&&t.customSignature||"paymaster"in t&&t.paymaster||"paymasterInput"in t&&t.paymasterInput||"gasPerPubdata"in t&&typeof t.gasPerPubdata=="bigint"||"factoryDeps"in t&&t.factoryDeps)}function C9(t){const{chainId:e,to:n,from:r,paymaster:s,paymasterInput:i}=t;if(!Qf(t))throw new T9;if(!e||e<=0)throw new Cf({chainId:e});if(n&&!Dt(n))throw new bn({address:n});if(r&&!Dt(r))throw new bn({address:r});if(s&&!Dt(s))throw new bn({address:s});if(s&&!i)throw new re("`paymasterInput` must be provided when `paymaster` is defined");if(!s&&i)throw new re("`paymaster` must be provided when `paymasterInput` is defined")}function U1e(t,e){return Qf(t)?M1e(t):WE(t,e)}const B1e={transaction:U1e};function M1e(t){const{chainId:e,gas:n,nonce:r,to:s,from:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,customSignature:l,factoryDeps:u,paymaster:d,paymasterInput:h,gasPerPubdata:f,data:p}=t;C9(t);const m=[r?Ye(r):"0x",c?Ye(c):"0x",o?Ye(o):"0x",n?Ye(n):"0x",s??"0x",a?Ye(a):"0x",p??"0x",Ye(e),Ye(""),Ye(""),Ye(e),i??"0x",Ye(f||kx),u??[],l??"0x",d&&h?[d,h]:[]];return Ms(["0x71",Na(m)])}class L1e extends re{constructor({givenLength:e,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class F1e extends re{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class j1e extends re{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function B_(t){const e=Sa(t);if(e.length%32!==0)throw new j1e({givenLength:e.length});if(e.length>VC)throw new L1e({givenLength:e.length,maxBytecodeSize:VC});const n=b8(e),r=Sa(n),s=e.length/32;if(s%2===0)throw new F1e({givenLengthInWords:s});const i=Sa(s),a=Xc(i,{size:2}),o=new Uint8Array([1,0]);return r.set(o,0),r.set(a,2),r}const z1e=t=>{C9(t);const e=W1e(t);return{domain:{name:"zkSync",version:"2",chainId:t.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:e}};function W1e(t){const{gas:e,nonce:n,to:r,from:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:o,factoryDeps:c,paymaster:l,paymasterInput:u,gasPerPubdata:d,data:h}=t;return{txType:113n,from:BigInt(s),to:r?BigInt(r):0n,gasLimit:e??0n,gasPerPubdataByteLimit:d??kx,maxFeePerGas:a??0n,maxPriorityFeePerGas:o??0n,paymaster:l?BigInt(l):0n,nonce:n?BigInt(n):0n,value:i??0n,data:h??"0x",factoryDeps:c?.map(f=>Ye(B_(f)))??[],paymasterInput:u||"0x"}}const k9={blockTime:1e3,formatters:I9,serializers:B1e,custom:{getEip712Domain:z1e}},q1e=Jn({...k9,blockTime:200,id:2741,name:"Abstract",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.mainnet.abs.xyz"],webSocket:["wss://api.mainnet.abs.xyz/ws"]}},blockExplorers:{default:{name:"Etherscan",url:"https://abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.mainnet.abs.xyz"}},contracts:{multicall3:{address:"0xAa4De41dba0Ca5dCBb288b7cC6b708F3aaC759E7",blockCreated:5288},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:5263}}}),V1e=Jn({...k9,blockTime:200,id:11124,name:"Abstract Testnet",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://api.testnet.abs.xyz"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.abscan.org"},native:{name:"Abstract Explorer",url:"https://explorer.testnet.abs.xyz"}},testnet:!0,contracts:{multicall3:{address:"0xF9cda624FBC7e059355ce98a31693d299FACd963",blockCreated:358349},erc6492Verifier:{address:"0xfB688330379976DA81eB64Fe4BF50d7401763B9C",blockCreated:431682}}}),H1e={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},K1e={block:g8({format(t){return{transactions:t.transactions?.map(n=>{if(typeof n=="string")return n;const r=Ef(n);return r.typeHex==="0x7e"&&(r.isSystemTx=n.isSystemTx,r.mint=n.mint?xt(n.mint):void 0,r.sourceHash=n.sourceHash,r.type="deposit"),r}),stateRoot:t.stateRoot}}}),transaction:m8({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?xt(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:Q8({format(t){return{l1GasPrice:t.l1GasPrice?xt(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?xt(t.l1GasUsed):null,l1Fee:t.l1Fee?xt(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function G1e(t,e){return J1e(t)?Z1e(t):WE(t,e)}const Y1e={transaction:G1e};function Z1e(t){X1e(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:a,to:o,value:c}=t,l=[e,r,o??"0x",a?Ye(a):"0x",c?Ye(c):"0x",s?Ye(s):"0x",i?"0x1":"0x",n??"0x"];return Ms(["0x7e",Na(l)])}function J1e(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function X1e(t){const{from:e,to:n}=t;if(e&&!Dt(e))throw new bn({address:e});if(n&&!Dt(n))throw new bn({address:n})}const Bg={blockTime:2e3,contracts:H1e,formatters:K1e,serializers:Y1e},Q1e=Jn({id:43114,name:"Avalanche",blockTime:1700,nativeCurrency:{decimals:18,name:"Avalanche",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://snowtrace.io",apiUrl:"https://api.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:11907934}}}),e_e=Jn({id:43113,name:"Avalanche Fuji",nativeCurrency:{decimals:18,name:"Avalanche Fuji",symbol:"AVAX"},rpcUrls:{default:{http:["https://api.avax-test.network/ext/bc/C/rpc"]}},blockExplorers:{default:{name:"SnowTrace",url:"https://testnet.snowtrace.io",apiUrl:"https://api-testnet.snowtrace.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7096959}},testnet:!0}),Rd=1,O9=Jn({...Bg,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...Bg.contracts,disputeGameFactory:{[Rd]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[Rd]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[Rd]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[Rd]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:Rd});({...O9});const $d=11155111,P9=Jn({...Bg,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...Bg.contracts,disputeGameFactory:{[$d]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[$d]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[$d]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[$d]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:$d});({...P9});const t_e=Jn({id:41923,name:"EDU Chain",nativeCurrency:{decimals:18,name:"EDU",symbol:"EDU"},rpcUrls:{default:{http:["https://rpc.edu-chain.raas.gelato.cloud"]}},blockExplorers:{default:{name:"EDU Chain Explorer",url:"https://educhain.blockscout.com/"}},testnet:!1}),n_e=Jn({id:4689,name:"IoTeX",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.mainnet.iotex.io"],webSocket:["wss://babel-api.mainnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://iotexscan.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:22163670}}}),r_e=Jn({id:4690,name:"IoTeX Testnet",nativeCurrency:{decimals:18,name:"IoTeX",symbol:"IOTX"},rpcUrls:{default:{http:["https://babel-api.testnet.iotex.io"],webSocket:["wss://babel-api.testnet.iotex.io"]}},blockExplorers:{default:{name:"IoTeXScan",url:"https://testnet.iotexscan.io"}},contracts:{multicall3:{address:"0xb5cecD6894c6f473Ec726A176f1512399A2e355d",blockCreated:24347592}},testnet:!0}),s_e=Jn({id:3338,name:"Peaq",nativeCurrency:{decimals:18,name:"peaq",symbol:"PEAQ"},rpcUrls:{default:{http:["https://quicknode1.peaq.xyz","https://quicknode2.peaq.xyz","https://quicknode3.peaq.xyz"],webSocket:["wss://quicknode1.peaq.xyz","wss://quicknode2.peaq.xyz","wss://quicknode3.peaq.xyz"]}},blockExplorers:{default:{name:"Subscan",url:"https://peaq.subscan.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3566354}}}),i_e=Jn({id:137,name:"Polygon",blockTime:2e3,nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),a_e=Jn({id:80002,name:"Polygon Amoy",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://rpc-amoy.polygon.technology"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://amoy.polygonscan.com",apiUrl:"https://api.etherscan.io/v2/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3127388}},testnet:!0}),o_e=Jn({id:1329,name:"Sei Network",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc.sei-apis.com/"],webSocket:["wss://evm-ws.sei-apis.com/"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com",apiUrl:"https://seitrace.com/pacific-1/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11"}}}),c_e=Jn({id:1328,name:"Sei Testnet",nativeCurrency:{name:"Sei",symbol:"SEI",decimals:18},rpcUrls:{default:{http:["https://evm-rpc-testnet.sei-apis.com"],webSocket:["wss://evm-ws-testnet.sei-apis.com"]}},blockExplorers:{default:{name:"Seitrace",url:"https://seitrace.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:98697651}},testnet:!0}),l_e=Jn({id:1514,name:"Story",nativeCurrency:{decimals:18,name:"IP Token",symbol:"IP"},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:340998},ensRegistry:{address:"0x5dc881dda4e4a8d312be3544ad13118d1a04cb17",blockCreated:648924},ensUniversalResolver:{address:"0xddfb18888a9466688235887dec2a10c4f5effee9",blockCreated:649114}},rpcUrls:{default:{http:["https://mainnet.storyrpc.io"]}},blockExplorers:{default:{name:"Story explorer",url:"https://storyscan.io",apiUrl:"https://storyscan.io/api/v2"}},ensTlds:[".ip"],testnet:!1});function u_e(t){if(typeof t=="string"){if(!Dt(t,{strict:!1}))throw new bn({address:t});return{address:t,type:"json-rpc"}}if(!Dt(t.address,{strict:!1}))throw new bn({address:t.address});return{address:t.address,nonceManager:t.nonceManager,sign:t.sign,signAuthorization:t.signAuthorization,signMessage:t.signMessage,signTransaction:t.signTransaction,signTypedData:t.signTypedData,source:"custom",type:"local"}}let Ub=!1;async function ep({hash:t,privateKey:e,to:n="object"}){const{r,s,recovery:i}=dy.sign(t.slice(2),e.slice(2),{lowS:!0,extraEntropy:yr(Ub,{strict:!1})?wr(Ub):Ub}),a={r:he(r,{size:32}),s:he(s,{size:32}),v:i?28n:27n,yParity:i};return n==="bytes"||n==="hex"?GO({...a,to:n}):a}async function d_e(t){const{chainId:e,nonce:n,privateKey:r,to:s="object"}=t,i=t.contractAddress??t.address,a=await ep({hash:d8({address:i,chainId:e,nonce:n}),privateKey:r,to:s});return s==="object"?{address:i,chainId:e,nonce:n,...a}:a}async function h_e({message:t,privateKey:e}){return await ep({hash:qE(t),privateKey:e,to:"hex"})}async function f_e(t){const{privateKey:e,transaction:n,serializer:r=WE}=t,s=n.type==="eip4844"?{...n,sidecars:!1}:n,i=await ep({hash:Mn(await r(s)),privateKey:e});return await r(n,i)}async function p_e(t){const{privateKey:e,...n}=t;return await ep({hash:gO(n),privateKey:e,to:"hex"})}function m_e(t,e={}){const{nonceManager:n}=e,r=Ye(dy.getPublicKey(t.slice(2),!1)),s=o8(r);return{...u_e({address:s,nonceManager:n,async sign({hash:a}){return ep({hash:a,privateKey:t,to:"hex"})},async signAuthorization(a){return d_e({...a,privateKey:t})},async signMessage({message:a}){return h_e({message:a,privateKey:t})},async signTransaction(a,{serializer:o}={}){return f_e({privateKey:t,transaction:a,serializer:o})},async signTypedData(a){return p_e({...a,privateKey:t})}}),publicKey:r,source:"privateKey"}}const g_e="0x0000000000000000000000000000000000008006",y_e="0x0000000000000000000000000000000000010000",HC=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],name:"AccountNonceOrderingUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"accountAddress",type:"address"},{indexed:!1,internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"aaVersion",type:"uint8"}],name:"AccountVersionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"deployerAddress",type:"address"},{indexed:!0,internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{indexed:!0,internalType:"address",name:"contractAddress",type:"address"}],name:"ContractDeployed",type:"event"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"create2",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"create2Account",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"},{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_aaVersion",type:"uint8"}],name:"createAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"extendedAccountVersion",outputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_keccak256BytecodeHash",type:"bytes32"}],name:"forceDeployKeccak256",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment",name:"_deployment",type:"tuple"},{internalType:"address",name:"_sender",type:"address"}],name:"forceDeployOnAddress",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"bytecodeHash",type:"bytes32"},{internalType:"address",name:"newAddress",type:"address"},{internalType:"bool",name:"callConstructor",type:"bool"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"input",type:"bytes"}],internalType:"struct ContractDeployer.ForceDeployment[]",name:"_deployments",type:"tuple[]"}],name:"forceDeployOnAddresses",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getAccountInfo",outputs:[{components:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"supportedAAVersion",type:"uint8"},{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"nonceOrdering",type:"uint8"}],internalType:"struct IContractDeployer.AccountInfo",name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"uint256",name:"_senderNonce",type:"uint256"}],name:"getNewAddressCreate",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_sender",type:"address"},{internalType:"bytes32",name:"_bytecodeHash",type:"bytes32"},{internalType:"bytes32",name:"_salt",type:"bytes32"},{internalType:"bytes",name:"_input",type:"bytes"}],name:"getNewAddressCreate2",outputs:[{internalType:"address",name:"newAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountAbstractionVersion",name:"_version",type:"uint8"}],name:"updateAccountVersion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"enum IContractDeployer.AccountNonceOrdering",name:"_nonceOrdering",type:"uint8"}],name:"updateNonceOrdering",outputs:[],stateMutability:"nonpayable",type:"function"}],KC=1,Bb="/docs/contract/encodeDeployData";function w_e(t){const{abi:e,args:n,bytecode:r,deploymentType:s,salt:i}=t;if(!n||n.length===0){const{functionName:u,argsContractDeployer:d}=GC(s,i??YA,Ye(B_(r)),"0x");return xr({abi:HC,functionName:u,args:d})}const a=e.find(u=>"type"in u&&u.type==="constructor");if(!a)throw new k3({docsPath:Bb});if(!("inputs"in a))throw new km({docsPath:Bb});if(!a.inputs||a.inputs.length===0)throw new km({docsPath:Bb});const o=jo(a.inputs,n),{functionName:c,argsContractDeployer:l}=GC(s,i??YA,Ye(B_(r)),o);return xr({abi:HC,functionName:c,args:l})}function GC(t,e,n,r){const s=[e,n,r];return{create:{functionName:"create",argsContractDeployer:s},create2:{functionName:"create2",argsContractDeployer:s},createAccount:{functionName:"createAccount",argsContractDeployer:[...s,KC]},create2Account:{functionName:"create2Account",argsContractDeployer:[...s,KC]}}[t||"create"]}function R9(t){if(!Qf(t))throw new T9;Vi(t)}async function b_e(t,e){const{account:n=t.account,chain:r=t.chain,...s}=e,i=n?Ut(n):t.account;if(!i)throw new Ki({docsPath:"/docs/actions/wallet/signTransaction"});if(R9({account:i,chain:r,...e}),!r?.custom?.getEip712Domain)throw new re("`getEip712Domain` not found on chain.");if(!r?.serializers?.transaction)throw new re("transaction serializer not found on chain.");const a=await Ae(t,Hi,"getChainId")({});r!==null&&Of({currentChainId:a,chain:r});const o=r?.custom.getEip712Domain({...s,chainId:a,from:i.address,type:"eip712"}),c=await eP(t,{...o,account:i});return r?.serializers?.transaction({chainId:a,...s,customSignature:c,type:"eip712"},{r:"0x0",s:"0x0",v:0n})}async function $9(t,e){return Qf(e)?b_e(t,e):await QO(t,e)}async function N9(t,e){const{account:n=t.account,chain:r=t.chain}=e,s=n?Ut(n):t.account;if(!s)throw new Ki({docsPath:"/docs/actions/wallet/sendTransaction"});try{R9(e);const i=await Ku(t,{...e,nonceManager:s.nonceManager,parameters:["gas","nonce","fees"]});let a;r!==null&&(a=await Ae(t,Hi,"getChainId")({}),Of({currentChainId:a,chain:r}));const o=await $9(t,{...i,chainId:a});return await Ae(t,oy,"sendRawTransaction")({serializedTransaction:o})}catch(i){throw xf(i,{...e,account:s,chain:r})}}function v_e(t,e){const{abi:n,args:r,bytecode:s,deploymentType:i,salt:a,...o}=e,c=w_e({abi:n,args:r,bytecode:s,deploymentType:i,salt:a});return o.factoryDeps=o.factoryDeps||[],o.factoryDeps.includes(s)||o.factoryDeps.push(s),N9(t,{...o,data:c,to:i==="create2"||i==="create2Account"?y_e:g_e})}async function YC(t,e){return Qf(e)?N9(t,e):Pf(t,e)}function __e(){return t=>({sendTransaction:e=>YC(t,e),signTransaction:e=>$9(t,e),deployContract:e=>v_e(t,e),writeContract:e=>Eu(Object.assign(t,{sendTransaction:n=>YC(t,n)}),e)})}var E_e=10,x_e=-32700,A_e=-32603,S_e=-32602,I_e=-32601,T_e=-32600,C_e=-32015,k_e=-32014,O_e=-32012,P_e=-32010,R_e=-32009,$_e=-32007,N_e=-32006,D_e=-32004,ZC=-32002,U_e=-32001,B_e=28e5,M_e=2800001,L_e=2800003,F_e=2800006,j_e=2800007,D9=2800008,z_e=2800009,R8e=32300001,$8e=3230004,W_e=361e4,q_e=3610001,V_e=3610003,H_e=3610005,K_e=3610006,G_e=3610007,Y_e=3611e3,Z_e=3704e3,J_e=3704001,X_e=3704004,Q_e=4615e3,eEe=4615026,tEe=5663e3,JC=5663001,nEe=5663004,rEe=5663005,sEe=5663006,iEe=5663007,aEe=5663008,oEe=5663015,cEe=5663016,lEe=5663017,U9=5663021,uEe=705e4,dEe=7050030,hEe=7050031,fEe=7050035,pEe=8078e3,mEe=8078001,gEe=8078004,yEe=8078005,wEe=8078006,bEe=8078007,vEe=8078011,Mg=8078012,_Ee=8078013,EEe=8078014,xEe=8078017,B9=81e5,AEe=8100002,SEe=8100003,IEe=819e4,TEe=8190001,CEe=8190002,M_=8190003,kEe=8190004,OEe=99e5,PEe=9900001,REe=9900004;function M9(t){return Array.isArray(t)?"%5B"+t.map(M9).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function $Ee([t,e]){return`${t}=${M9(e)}`}function NEe(t){const e=Object.entries(t).map($Ee).join("&");return btoa(e)}function DEe(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${NEe(e)}'`),`${n}\``}}function L9(t,e){return t instanceof Error&&t.name==="SolanaError"?e!==void 0?t.context.__code===e:!0:!1}var Pe=class extends Error{cause=this.cause;context;constructor(...[t,e]){let n,r;e&&Object.entries(Object.getOwnPropertyDescriptors(e)).forEach(([i,a])=>{i==="cause"?r={cause:a.value}:(n===void 0&&(n={__code:t}),Object.defineProperty(n,i,a))});const s=DEe(t,n);super(s,r),this.context=Object.freeze(n===void 0?{__code:t}:n),this.name="SolanaError"}};function o0(...t){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...t)}function F9({errorCodeBaseOffset:t,getErrorContext:e,orderedErrorNames:n,rpcEnumError:r},s){let i,a;typeof r=="string"?i=r:(i=Object.keys(r)[0],a=r[i]);const o=n.indexOf(i),c=t+o,l=e(c,i,a),u=new Pe(c,l);return o0(u,s),u}var UEe=["GenericError","InvalidArgument","InvalidInstructionData","InvalidAccountData","AccountDataTooSmall","InsufficientFunds","IncorrectProgramId","MissingRequiredSignature","AccountAlreadyInitialized","UninitializedAccount","UnbalancedInstruction","ModifiedProgramId","ExternalAccountLamportSpend","ExternalAccountDataModified","ReadonlyLamportChange","ReadonlyDataModified","DuplicateAccountIndex","ExecutableModified","RentEpochModified","NotEnoughAccountKeys","AccountDataSizeChanged","AccountNotExecutable","AccountBorrowFailed","AccountBorrowOutstanding","DuplicateAccountOutOfSync","Custom","InvalidError","ExecutableDataModified","ExecutableLamportChange","ExecutableAccountNotRentExempt","UnsupportedProgramId","CallDepth","MissingAccount","ReentrancyNotAllowed","MaxSeedLengthExceeded","InvalidSeeds","InvalidRealloc","ComputationalBudgetExceeded","PrivilegeEscalation","ProgramEnvironmentSetupFailure","ProgramFailedToComplete","ProgramFailedToCompile","Immutable","IncorrectAuthority","BorshIoError","AccountNotRentExempt","InvalidAccountOwner","ArithmeticOverflow","UnsupportedSysvar","IllegalOwner","MaxAccountsDataAllocationsExceeded","MaxAccountsExceeded","MaxInstructionTraceLengthExceeded","BuiltinProgramsMustConsumeComputeUnits"];function j9(t,e){const n=Number(t);return F9({errorCodeBaseOffset:4615001,getErrorContext(r,s,i){return r===Q_e?{errorName:s,index:n,...i!==void 0?{instructionErrorContext:i}:null}:r===eEe?{code:Number(i),index:n}:{index:n}},orderedErrorNames:UEe,rpcEnumError:e},j9)}var BEe=["AccountInUse","AccountLoadedTwice","AccountNotFound","ProgramAccountNotFound","InsufficientFundsForFee","InvalidAccountForFee","AlreadyProcessed","BlockhashNotFound","CallChainTooDeep","MissingSignatureForFee","InvalidAccountIndex","SignatureFailure","InvalidProgramForExecution","SanitizeFailure","ClusterMaintenance","AccountBorrowOutstanding","WouldExceedMaxBlockCostLimit","UnsupportedVersion","InvalidWritableAccount","WouldExceedMaxAccountCostLimit","WouldExceedAccountDataBlockLimit","TooManyAccountLocks","AddressLookupTableNotFound","InvalidAddressLookupTableOwner","InvalidAddressLookupTableData","InvalidAddressLookupTableIndex","InvalidRentPayingAccount","WouldExceedMaxVoteCostLimit","WouldExceedAccountDataTotalLimit","DuplicateInstruction","InsufficientFundsForRent","MaxLoadedAccountsDataSizeExceeded","InvalidLoadedAccountsDataSizeLimit","ResanitizationNeeded","ProgramExecutionTemporarilyRestricted","UnbalancedTransaction"];function z9(t){return typeof t=="object"&&"InstructionError"in t?j9(...t.InstructionError):F9({errorCodeBaseOffset:7050001,getErrorContext(e,n,r){if(e===uEe)return{errorName:n,...r!==void 0?{transactionErrorContext:r}:null};if(e===dEe)return{index:Number(r)};if(e===hEe||e===fEe)return{accountIndex:Number(r.account_index)}},orderedErrorNames:BEe,rpcEnumError:t},z9)}function Lg(t){let e;if(MEe(t)){const{code:n,data:r,message:s}=t,i=Number(n);if(i===ZC){const{err:a,...o}=r,c=a?{cause:z9(a)}:null;e=new Pe(ZC,{...o,...c})}else{let a;switch(i){case A_e:case S_e:case T_e:case I_e:case x_e:case O_e:case U_e:case D_e:case k_e:case P_e:case R_e:case $_e:case N_e:case C_e:a={__serverMessage:s};break;default:typeof r=="object"&&!Array.isArray(r)&&(a=r)}e=new Pe(i,a)}}else{const n=typeof t=="object"&&t!==null&&"message"in t&&typeof t.message=="string"?t.message:"Malformed JSON-RPC error with no message attribute";e=new Pe(E_e,{error:t,message:n})}return o0(e,Lg),e}function MEe(t){return typeof t=="object"&&t!==null&&"code"in t&&"message"in t&&(typeof t.code=="number"||typeof t.code=="bigint")&&typeof t.message=="string"}function LEe(t,e){if(t.length>=e)return t;const n=new Uint8Array(e).fill(0);return n.set(t),n}var FEe=(t,e)=>LEe(t.length<=e?t:t.slice(0,e),e);function jEe(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}function Gc(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Zn(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Gc(e,t));return t.write(e,n,0),n}})}function dr(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function on(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function zEe(t){return!on(t)}function WEe(t,e){if(on(t)!==on(e))throw new Pe(gEe);if(on(t)&&on(e)&&t.fixedSize!==e.fixedSize)throw new Pe(yEe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!on(t)&&!on(e)&&t.maxSize!==e.maxSize)throw new Pe(wEe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function qEe(t,e,n=0){if(e.length-n<=0)throw new Pe(pEe,{codecDescription:t})}function Ox(t,e,n,r=0){const s=n.length-r;if(s<e)throw new Pe(mEe,{bytesLength:s,codecDescription:t,expected:e})}function XC(t,e,n){if(e<0||e>n)throw new Pe(EEe,{bytesLength:n,codecDescription:t,offset:e})}function VEe(t,e){const n=((a,o,c)=>{const l=t.encode(a);return c=e.write(l.length,o,c),o.set(l,c),c+l.length});if(on(e)&&on(t))return Zn({...t,fixedSize:e.fixedSize+t.fixedSize,write:n});const r=on(e)?e.fixedSize:e.maxSize??null,s=on(t)?t.fixedSize:t.maxSize??null,i=r!==null&&s!==null?r+s:null;return Zn({...t,...i!==null?{maxSize:i}:{},getSizeFromValue:a=>{const o=Gc(a,t);return Gc(o,e)+o},write:n})}function HEe(t,e){const n=((a,o)=>{const[c,l]=e.read(a,o),u=Number(c);return o=l,(o>0||a.length>u)&&(a=a.slice(o,o+u)),Ox("addDecoderSizePrefix",u,a),[t.decode(a),o+u]});if(on(e)&&on(t))return dr({...t,fixedSize:e.fixedSize+t.fixedSize,read:n});const r=on(e)?e.fixedSize:e.maxSize??null,s=on(t)?t.fixedSize:t.maxSize??null,i=r!==null&&s!==null?r+s:null;return dr({...t,...i!==null?{maxSize:i}:{},read:n})}function Fg(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;let i;return typeof SharedArrayBuffer>"u"?i=t.buffer:t.buffer instanceof SharedArrayBuffer?(i=new ArrayBuffer(t.length),new Uint8Array(i).set(new Uint8Array(t))):i=t.buffer,(r===0||r===-t.byteLength)&&s===t.byteLength?i:i.slice(r,r+s)}function Px(t,e){return Zn({fixedSize:e,write:(n,r,s)=>{const i=t.encode(n),a=i.length>e?i.slice(0,e):i;return r.set(a,s),s+e}})}function Rx(t,e){return dr({fixedSize:e,read:(n,r)=>{Ox("fixCodecSize",e,n,r),(r>0||n.length>e)&&(n=n.slice(r,r+e)),on(t)&&(n=FEe(n,t.fixedSize));const[s]=t.read(n,0);return[s,r+e]}})}function KEe(t,e){return dr({...t,read:(n,r)=>{const s=l=>GEe(l,n.length),i=e.preOffset?e.preOffset({bytes:n,preOffset:r,wrapBytes:s}):r;XC("offsetDecoder",i,n.length);const[a,o]=t.read(n,i),c=e.postOffset?e.postOffset({bytes:n,newPreOffset:i,postOffset:o,preOffset:r,wrapBytes:s}):o;return XC("offsetDecoder",c,n.length),[a,c]}})}function GEe(t,e){return e===0?0:(t%e+e)%e}function YEe(t,e){if(on(t)){const n=e(t.fixedSize);if(n<0)throw new Pe(_Ee,{bytesLength:n,codecDescription:"resizeDecoder"});return dr({...t,fixedSize:n})}return t}function ZEe(t,e){return KEe(YEe(t,n=>n+e),{postOffset:({postOffset:n})=>n+e})}function td(t,e){return Zn({...zEe(t)?{...t,getSizeFromValue:n=>t.getSizeFromValue(e(n))}:t,write:(n,r,s)=>t.write(e(n),r,s)})}function $x(t,e){return dr({...t,read:(n,r)=>{const[s,i]=t.read(n,r);return[e(s,n,r),i]}})}function JEe(t,e,n=e){if(!e.match(new RegExp(`^[${t}]*$`)))throw new Pe(Mg,{alphabet:t,base:t.length,value:n})}var XEe=t=>Zn({getSizeFromValue:e=>{const[n,r]=QC(e,t[0]);if(!r)return e.length;const s=ek(r,t);return n.length+Math.ceil(s.toString(16).length/2)},write(e,n,r){if(JEe(t,e),e==="")return r;const[s,i]=QC(e,t[0]);if(!i)return n.set(new Uint8Array(s.length).fill(0),r),r+s.length;let a=ek(i,t);const o=[];for(;a>0n;)o.unshift(Number(a%256n)),a/=256n;const c=[...Array(s.length).fill(0),...o];return n.set(c,r),r+c.length}}),QEe=t=>dr({read(e,n){const r=n===0?e:e.slice(n);if(r.length===0)return["",0];let s=r.findIndex(c=>c!==0);s=s===-1?r.length:s;const i=t[0].repeat(s);if(s===r.length)return[i,e.length];const a=r.slice(s).reduce((c,l)=>c*256n+BigInt(l),0n),o=e2e(a,t);return[i+o,e.length]}});function QC(t,e){const[n,r]=t.split(new RegExp(`((?!${e}).*)`));return[n,r]}function ek(t,e){const n=BigInt(e.length);let r=0n;for(const s of t)r*=n,r+=BigInt(e.indexOf(s));return r}function e2e(t,e){const n=BigInt(e.length),r=[];for(;t>0n;)r.unshift(e[Number(t%n)]),t/=n;return r.join("")}var W9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t2e=()=>XEe(W9),n2e=()=>QEe(W9),tk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r2e=()=>Zn({getSizeFromValue:t=>{try{return atob(t).length}catch{throw new Pe(Mg,{alphabet:tk,base:64,value:t})}},write(t,e,n){try{const r=atob(t).split("").map(s=>s.charCodeAt(0));return e.set(r,n),r.length+n}catch{throw new Pe(Mg,{alphabet:tk,base:64,value:t})}}}),s2e=()=>dr({read(t,e=0){const n=t.slice(e);return[btoa(String.fromCharCode(...n)),t.length]}});function i2e(){if(typeof globalThis.crypto>"u"||typeof globalThis.crypto.getRandomValues!="function")throw new Pe(Y_e)}function c0(){if(!globalThis.isSecureContext)throw new Pe(W_e)}function a2e(){if(c0(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.digest!="function")throw new Pe(q_e)}function q9(){if(c0(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.exportKey!="function")throw new Pe(V_e)}function o2e(){if(c0(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.sign!="function")throw new Pe(H_e)}function c2e(){if(c0(),typeof globalThis.crypto>"u"||typeof globalThis.crypto.subtle?.verify!="function")throw new Pe(K_e)}var Mb,Lb;function Nx(){return Mb||(Mb=t2e()),Mb}function l2e(){return Lb||(Lb=n2e()),Lb}function u2e(t){if(t.length<32||t.length>44)return!1;const e=Nx();try{return e.encode(t).byteLength===32}catch{return!1}}function L_(t){if(t.length<32||t.length>44)throw new Pe(M_e,{actualLength:t.length});const r=Nx().encode(t).byteLength;if(r!==32)throw new Pe(B_e,{actualLength:r})}function d2e(t){return L_(t),t}function pu(){return td(Px(Nx(),32),t=>d2e(t))}function tp(){return Rx(l2e(),32)}function h2e(){return WEe(pu(),tp())}function Dx(){return new Intl.Collator("en",{caseFirst:"lower",ignorePunctuation:!1,localeMatcher:"best fit",numeric:!1,sensitivity:"variant",usage:"sort"}).compare}var f2e=37095705934669439343138083508754565189542113879843219016388785533085940283555n,mr=57896044618658097711785492504343953926634992332820282019728792003956564819949n,nk=19681161376707505956807079304988542015446066515923890162744021073123829784752n;function ks(t){const e=t%mr;return e>=0n?e:mr+e}function Ai(t,e){let n=t;for(;e-- >0n;)n*=n,n%=mr;return n}function p2e(t){const n=t*t%mr*t%mr,r=Ai(n,2n)*n%mr,s=Ai(r,1n)*t%mr,i=Ai(s,5n)*s%mr,a=Ai(i,10n)*i%mr,o=Ai(a,20n)*a%mr,c=Ai(o,40n)*o%mr,l=Ai(c,80n)*c%mr,u=Ai(l,80n)*c%mr,d=Ai(u,10n)*i%mr;return Ai(d,2n)*t%mr}function m2e(t,e){const n=ks(e*e*e),r=ks(n*n*e),s=p2e(t*r);let i=ks(t*n*s);const a=ks(e*i*i),o=i,c=ks(i*nk),l=a===t,u=a===ks(-t),d=a===ks(-t*nk);return l&&(i=o),(u||d)&&(i=c),(ks(i)&1n)===1n&&(i=ks(-i)),!l&&!u?null:i}function g2e(t,e){const n=ks(t*t),r=ks(n-1n),s=ks(f2e*n+1n),i=m2e(r,s);if(i===null)return!1;const a=(e&128)!==0;return!(i===0n&&a)}function y2e(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function w2e(t){const n=`0x${t.reduce((r,s,i)=>`${y2e(i===31?s&-129:s)}${r}`,"")}`;return BigInt(n)}function b2e(t){if(t.byteLength!==32)return!1;const e=w2e(t);return g2e(e,t[31])}var rk=32,sk=16,v2e=[80,114,111,103,114,97,109,68,101,114,105,118,101,100,65,100,100,114,101,115,115];async function _2e({programAddress:t,seeds:e}){if(a2e(),e.length>sk)throw new Pe(F_e,{actual:e.length,maxSeeds:sk});let n;const r=e.reduce((c,l,u)=>{const d=typeof l=="string"?(n||=new TextEncoder).encode(l):l;if(d.byteLength>rk)throw new Pe(j_e,{actual:d.byteLength,index:u,maxSeedLength:rk});return c.push(...d),c},[]),s=h2e(),i=s.encode(t),a=await crypto.subtle.digest("SHA-256",new Uint8Array([...r,...i,...v2e])),o=new Uint8Array(a);if(b2e(o))throw new Pe(D9);return s.decode(o)}async function E2e({programAddress:t,seeds:e}){let n=255;for(;n>0;)try{return[await _2e({programAddress:t,seeds:[...e,new Uint8Array([n])]}),n]}catch(r){if(L9(r,D9))n--;else throw r}throw new Pe(z_e)}async function V9(t){if(q9(),t.type!=="public"||t.algorithm.name!=="Ed25519")throw new Pe(L_e);const e=await crypto.subtle.exportKey("raw",t);return tp().decode(new Uint8Array(e))}function H9(t,e,n,r){if(r<e||r>n)throw new Pe(vEe,{codecDescription:t,max:n,min:e,value:r})}function K9(t){return t?.endian!==1}function Ux(t){return Zn({fixedSize:t.size,write(e,n,r){t.range&&H9(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,K9(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function G9(t){return dr({fixedSize:t.size,read(e,n=0){qEe(t.name,e,n),Ox(t.name,t.size,e,n);const r=new DataView(Fg(e,n,t.size));return[t.get(r,K9(t.config)),n+t.size]}})}var Yc=()=>Zn({getSizeFromValue:t=>t<=127?1:t<=16383?2:3,maxSize:3,write:(t,e,n)=>{H9("shortU16",0,65535,t);const r=[0];for(let s=0;;s+=1){const i=Number(t)>>s*7;if(i===0)break;const a=127&i;r[s]=a,s>0&&(r[s-1]|=128)}return e.set(r,n),n+r.length}}),Fo=()=>dr({maxSize:3,read:(t,e)=>{let n=0,r=0;for(;++r;){const s=r-1,i=t[e+s],a=127&i;if(n|=a<<s*7,(i&128)===0)break}return[n,e+r]}}),x2e=(t={})=>Ux({config:t,name:"u32",range:[0,+"0xffffffff"],set:(e,n,r)=>e.setUint32(0,Number(n),r),size:4}),A2e=(t={})=>G9({config:t,get:(e,n)=>e.getUint32(0,n),name:"u32",size:4}),S2e=(t={})=>Ux({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Bu=()=>Ux({name:"u8",range:[0,+"0xff"],set:(t,e)=>t.setUint8(0,Number(e)),size:1}),af=()=>G9({get:t=>t.getUint8(0),name:"u8",size:1});function I2e(t,e,n){if(e!==n)throw new Pe(bEe,{actual:n,codecDescription:t,expected:e})}function T2e(t){return t.reduce((e,n)=>e===null||n===null?null:Math.max(e,n),0)}function Mu(t){return t.reduce((e,n)=>e===null||n===null?null:e+n,0)}function np(t){return on(t)?t.fixedSize:null}function nd(t){return on(t)?t.fixedSize:t.maxSize??null}function Lu(t,e={}){const n=e.size??x2e(),r=jg(n,np(t)),s=jg(n,nd(t))??void 0;return Zn({...r!==null?{fixedSize:r}:{getSizeFromValue:i=>(typeof n=="object"?Gc(i.length,n):0)+[...i].reduce((o,c)=>o+Gc(c,t),0),maxSize:s},write:(i,a,o)=>(typeof n=="number"&&I2e("array",n,i.length),typeof n=="object"&&(o=n.write(i.length,a,o)),i.forEach(c=>{o=t.write(c,a,o)}),o)})}function Zc(t,e={}){const n=e.size??A2e(),r=np(t),s=jg(n,r),i=jg(n,nd(t))??void 0;return dr({...s!==null?{fixedSize:s}:{maxSize:i},read:(a,o)=>{const c=[];if(typeof n=="object"&&a.slice(o).length===0)return[c,o];if(n==="remainder"){for(;o<a.length;){const[d,h]=t.read(a,o);o=h,c.push(d)}return[c,o]}const[l,u]=typeof n=="number"?[n,o]:n.read(a,o);o=u;for(let d=0;d<l;d+=1){const[h,f]=t.read(a,o);o=f,c.push(h)}return[c,o]}})}function jg(t,e){return typeof t!="number"?null:t===0?0:e===null?null:e*t}function Bx(){return Zn({getSizeFromValue:t=>t.length,write:(t,e,n)=>(e.set(t,n),n+t.length)})}function F_(){return dr({read:(t,e)=>{const n=t.slice(e);return[n,e+n.length]}})}function C2e(t){return Zn({fixedSize:t.length,write:(e,n,r)=>(n.set(t,r),r+t.length)})}function k2e(t){const e=Mu(t.map(np)),n=Mu(t.map(nd))??void 0;return dr({...e===null?{maxSize:n}:{fixedSize:e},read:(r,s)=>{const i=[];return t.forEach(a=>{const[o,c]=a.read(r,s);i.push(o),s=c}),[i,s]}})}function O2e(t,e){const n=P2e(t),r=(i,a,o)=>{const c=e(i);return ik(t,c),t[c].write(i,a,o)};if(n!==null)return Zn({fixedSize:n,write:r});const s=R2e(t);return Zn({...s!==null?{maxSize:s}:{},getSizeFromValue:i=>{const a=e(i);return ik(t,a),Gc(i,t[a])},write:r})}function ik(t,e){if(typeof t[e]>"u")throw new Pe(xEe,{maxRange:t.length-1,minRange:0,variant:e})}function P2e(t){if(t.length===0)return 0;if(!on(t[0]))return null;const e=t[0].fixedSize;return t.every(r=>on(r)&&r.fixedSize===e)?e:null}function R2e(t){return T2e(t.map(e=>nd(e)))}function Ho(t){const e=t.map(([,s])=>s),n=Mu(e.map(np)),r=Mu(e.map(nd))??void 0;return Zn({...n===null?{getSizeFromValue:s=>t.map(([i,a])=>Gc(s[i],a)).reduce((i,a)=>i+a,0),maxSize:r}:{fixedSize:n},write:(s,i,a)=>(t.forEach(([o,c])=>{a=c.write(s[o],i,a)}),a)})}function rp(t){const e=t.map(([,s])=>s),n=Mu(e.map(np)),r=Mu(e.map(nd))??void 0;return dr({...n===null?{maxSize:r}:{fixedSize:n},read:(s,i)=>{const a={};return t.forEach(([o,c])=>{const[l,u]=c.read(s,i);i=u,a[o]=l}),[a,i]}})}function hl(t,...e){return e.reduce((n,r)=>r(n),t)}var wn=(t=>(t[t.WRITABLE_SIGNER=3]="WRITABLE_SIGNER",t[t.READONLY_SIGNER=2]="READONLY_SIGNER",t[t.WRITABLE=1]="WRITABLE",t[t.READONLY=0]="READONLY",t))(wn||{}),$2e=2,N2e=1;function Fu(t){return t>=2}function of(t){return(t&N2e)!==0}function ak(t,e){return t|e}function D2e(t){return t|$2e}function U2e(t){return u2e(t)}function B2e(t){return"lifetimeConstraint"in t&&typeof t.lifetimeConstraint.blockhash=="string"&&typeof t.lifetimeConstraint.lastValidBlockHeight=="bigint"&&U2e(t.lifetimeConstraint.blockhash)}function M2e(t,e){return"lifetimeConstraint"in e&&e.lifetimeConstraint&&"blockhash"in e.lifetimeConstraint&&e.lifetimeConstraint.blockhash===t.blockhash&&e.lifetimeConstraint.lastValidBlockHeight===t.lastValidBlockHeight?e:Object.freeze({...e,lifetimeConstraint:Object.freeze(t)})}function L2e(t,e,n=e){if(!e.match(new RegExp(`^[${t}]*$`)))throw new Pe(Mg,{alphabet:t,base:t.length,value:n})}var F2e=t=>Zn({getSizeFromValue:e=>{const[n,r]=ok(e,t[0]);if(!r)return e.length;const s=ck(r,t);return n.length+Math.ceil(s.toString(16).length/2)},write(e,n,r){if(L2e(t,e),e==="")return r;const[s,i]=ok(e,t[0]);if(!i)return n.set(new Uint8Array(s.length).fill(0),r),r+s.length;let a=ck(i,t);const o=[];for(;a>0n;)o.unshift(Number(a%256n)),a/=256n;const c=[...Array(s.length).fill(0),...o];return n.set(c,r),r+c.length}}),j2e=t=>dr({read(e,n){const r=n===0?e:e.slice(n);if(r.length===0)return["",0];let s=r.findIndex(c=>c!==0);s=s===-1?r.length:s;const i=t[0].repeat(s);if(s===r.length)return[i,e.length];const a=r.slice(s).reduce((c,l)=>c*256n+BigInt(l),0n),o=z2e(a,t);return[i+o,e.length]}});function ok(t,e){const[n,r]=t.split(new RegExp(`((?!${e}).*)`));return[n,r]}function ck(t,e){const n=BigInt(e.length);let r=0n;for(const s of t)r*=n,r+=BigInt(e.indexOf(s));return r}function z2e(t,e){const n=BigInt(e.length),r=[];for(;t>0n;)r.unshift(e[Number(t%n)]),t/=n;return r.join("")}var Y9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",W2e=()=>F2e(Y9),q2e=()=>j2e(Y9),Fb;function V2e(){if(!Fb){const t=Lu(Bu(),{size:Yc()});Fb=Ho([["lookupTableAddress",pu()],["writableIndexes",t],["readonlyIndexes",t]])}return Fb}var jb;function H2e(){if(!jb){const t=Zc(af(),{size:Fo()});jb=rp([["lookupTableAddress",tp()],["writableIndexes",t],["readonlyIndexes",t]])}return jb}var zb;function Wb(){return zb||(zb=Bu()),zb}var qb;function Vb(){return qb||(qb=af()),qb}function K2e(){return Ho([["numSignerAccounts",Wb()],["numReadonlySignerAccounts",Wb()],["numReadonlyNonSignerAccounts",Wb()]])}function G2e(){return rp([["numSignerAccounts",Vb()],["numReadonlySignerAccounts",Vb()],["numReadonlyNonSignerAccounts",Vb()]])}var Hb;function Y2e(){return Hb||(Hb=td(Ho([["programAddressIndex",Bu()],["accountIndices",Lu(Bu(),{size:Yc()})],["data",VEe(Bx(),Yc())]]),t=>t.accountIndices!==void 0&&t.data!==void 0?t:{...t,accountIndices:t.accountIndices??[],data:t.data??new Uint8Array(0)})),Hb}var Kb;function Z2e(){return Kb||(Kb=$x(rp([["programAddressIndex",af()],["accountIndices",Zc(af(),{size:Fo()})],["data",HEe(F_(),Fo())]]),t=>{if(t.accountIndices.length&&t.data.byteLength)return t;const{accountIndices:e,data:n,...r}=t;return{...r,...e.length?{accountIndices:e}:null,...n.byteLength?{data:n}:null}})),Kb}var Z9=0,j_=128;function J2e(){return Zn({getSizeFromValue:t=>t==="legacy"?0:1,maxSize:1,write:(t,e,n)=>{if(t==="legacy")return n;if(t<0||t>127)throw new Pe(nEe,{actualVersion:t});if(t>Z9)throw new Pe(U9,{unsupportedVersion:t});return e.set([t|j_],n),n+1}})}function J9(){return dr({maxSize:1,read:(t,e)=>{const n=t[e];if((n&j_)===0)return["legacy",e];{const r=n^j_;if(r>Z9)throw new Pe(U9,{unsupportedVersion:r});return[r,e+1]}}})}function lk(){return Ho(X9())}function uk(){return td(Ho([...X9(),["addressTableLookups",Q2e()]]),t=>t.version==="legacy"?t:{...t,addressTableLookups:t.addressTableLookups??[]})}function X9(){const t=O2e([C2e(new Uint8Array(32)),Px(W2e(),32)],e=>e===void 0?0:1);return[["version",J2e()],["header",K2e()],["staticAccounts",Lu(pu(),{size:Yc()})],["lifetimeToken",t],["instructions",Lu(Y2e(),{size:Yc()})]]}function X2e(){return[["version",J9()],["header",G2e()],["staticAccounts",Zc(tp(),{size:Fo()})],["lifetimeToken",Rx(q2e(),32)],["instructions",Zc(Z2e(),{size:Fo()})],["addressTableLookups",exe()]]}function Q2e(){return Lu(V2e(),{size:Yc()})}function exe(){return Zc(H2e(),{size:Fo()})}function txe(){return Zn({getSizeFromValue:t=>t.version==="legacy"?lk().getSizeFromValue(t):uk().getSizeFromValue(t),write:(t,e,n)=>t.version==="legacy"?lk().write(t,e,n):uk().write(t,e,n)})}function nxe(){return $x(rp(X2e()),({addressTableLookups:t,...e})=>e.version==="legacy"||!t?.length?e:{...e,addressTableLookups:t})}function dk(t,e,n){t[e]=n(t[e]??{role:wn.READONLY})}var fn=Symbol("AddressMapTypeProperty");function rxe(t,e){const n={[t]:{[fn]:0,role:wn.WRITABLE_SIGNER}},r=new Set;for(const s of e){dk(n,s.programAddress,a=>{if(r.add(s.programAddress),fn in a){if(of(a.role))switch(a[fn]){case 0:throw new Pe(tEe,{programAddress:s.programAddress});default:throw new Pe(JC,{programAddress:s.programAddress})}if(a[fn]===2)return a}return{[fn]:2,role:wn.READONLY}});let i;if(s.accounts)for(const a of s.accounts)dk(n,a.address,o=>{const{address:c,...l}=a;if(fn in o)switch(o[fn]){case 0:return o;case 1:{const u=ak(o.role,l.role);if("lookupTableAddress"in l){if(o.lookupTableAddress!==l.lookupTableAddress&&(i||=Dx())(l.lookupTableAddress,o.lookupTableAddress)<0)return{[fn]:1,...l,role:u}}else if(Fu(l.role))return{[fn]:2,role:u};return o.role!==u?{...o,role:u}:o}case 2:{const u=ak(o.role,l.role);if(r.has(a.address)){if(of(l.role))throw new Pe(JC,{programAddress:a.address});return o.role!==u?{...o,role:u}:o}else return"lookupTableAddress"in l&&!Fu(o.role)?{...l,[fn]:1,role:u}:o.role!==u?{...o,role:u}:o}}return"lookupTableAddress"in l?{...l,[fn]:1}:{...l,[fn]:2}})}return n}function sxe(t){let e;return Object.entries(t).sort(([r,s],[i,a])=>{if(s[fn]!==a[fn]){if(s[fn]===0)return-1;if(a[fn]===0)return 1;if(s[fn]===2)return-1;if(a[fn]===2)return 1}const o=Fu(s.role);if(o!==Fu(a.role))return o?-1:1;const c=of(s.role);return c!==of(a.role)?c?-1:1:(e||=Dx(),s[fn]===1&&a[fn]===1&&s.lookupTableAddress!==a.lookupTableAddress?e(s.lookupTableAddress,a.lookupTableAddress):e(r,i))}).map(([r,s])=>({address:r,...s}))}function ixe(t){const e={};for(const n of t){if(!("lookupTableAddress"in n))continue;const r=e[n.lookupTableAddress]||={readonlyIndexes:[],writableIndexes:[]};n.role===wn.WRITABLE?r.writableIndexes.push(n.addressIndex):r.readonlyIndexes.push(n.addressIndex)}return Object.keys(e).sort(Dx()).map(n=>({lookupTableAddress:n,...e[n]}))}function axe(t){let e=0,n=0,r=0;for(const s of t){if("lookupTableAddress"in s)break;const i=of(s.role);Fu(s.role)?(r++,i||n++):i||e++}return{numReadonlyNonSignerAccounts:e,numReadonlySignerAccounts:n,numSignerAccounts:r}}function oxe(t){const e={};for(const[n,r]of t.entries())e[r.address]=n;return e}function cxe(t,e){const n=oxe(e);return t.map(({accounts:r,data:s,programAddress:i})=>({programAddressIndex:n[i],...r?{accountIndices:r.map(({address:a})=>n[a])}:null,...s?{data:s}:null}))}function lxe(t){return"nonce"in t?t.nonce:t.blockhash}function uxe(t){const e=t.findIndex(r=>"lookupTableAddress"in r);return(e===-1?t:t.slice(0,e)).map(({address:r})=>r)}function dxe(t){const e=rxe(t.feePayer.address,t.instructions),n=sxe(e),r=t.lifetimeConstraint;return{...t.version!=="legacy"?{addressTableLookups:ixe(n)}:null,...r?{lifetimeToken:lxe(r)}:null,header:axe(n),instructions:cxe(t.instructions,n),staticAccounts:uxe(n),version:t.version}}function hxe(t){return Object.freeze({instructions:Object.freeze([]),version:t.version})}var Q9="SysvarRecentB1ockHashes11111111111111111111",eU="11111111111111111111111111111111";function hk(t,e){return{accounts:[{address:t,role:wn.WRITABLE},{address:Q9,role:wn.READONLY},{address:e,role:wn.READONLY_SIGNER}],data:new Uint8Array([4,0,0,0]),programAddress:eU}}function Mx(t){return t.programAddress===eU&&t.data!=null&&fxe(t.data)&&t.accounts?.length===3&&t.accounts[0].address!=null&&t.accounts[0].role===wn.WRITABLE&&t.accounts[1].address===Q9&&t.accounts[1].role===wn.READONLY&&t.accounts[2].address!=null&&Fu(t.accounts[2].role)}function fxe(t){return t.byteLength===4&&t[0]===4&&t[1]===0&&t[2]===0&&t[3]===0}function tU(t){return"lifetimeConstraint"in t&&typeof t.lifetimeConstraint.nonce=="string"&&t.instructions[0]!=null&&Mx(t.instructions[0])}function pxe(t,e,n){return t.accounts[0].address===e&&t.accounts[2].address===n}function mxe({nonce:t,nonceAccountAddress:e,nonceAuthorityAddress:n},r){let s;const i=r.instructions[0];if(i&&Mx(i))if(pxe(i,e,n)){if(tU(r)&&r.lifetimeConstraint.nonce===t)return r;s=[i,...r.instructions.slice(1)]}else s=[Object.freeze(hk(e,n)),...r.instructions.slice(1)];else s=[Object.freeze(hk(e,n)),...r.instructions];return Object.freeze({...r,instructions:Object.freeze(s),lifetimeConstraint:Object.freeze({nonce:t})})}function gxe(t,e){if("feePayer"in e&&t===e.feePayer?.address&&yxe(e.feePayer))return e;const n={...e,feePayer:Object.freeze({address:t})};return Object.freeze(n),n}function yxe(t){return!!t&&"address"in t&&typeof t.address=="string"&&Object.keys(t).length===1}function wxe(t,e){return bxe([t],e)}function bxe(t,e){return Object.freeze({...e,instructions:Object.freeze([...e.instructions,...t])})}function vxe(t){const{header:e}=t,n=e.numSignerAccounts-e.numReadonlySignerAccounts,r=t.staticAccounts.length-e.numSignerAccounts-e.numReadonlyNonSignerAccounts,s=[];let i=0;for(let a=0;a<n;a++)s.push({address:t.staticAccounts[i],role:wn.WRITABLE_SIGNER}),i++;for(let a=0;a<e.numReadonlySignerAccounts;a++)s.push({address:t.staticAccounts[i],role:wn.READONLY_SIGNER}),i++;for(let a=0;a<r;a++)s.push({address:t.staticAccounts[i],role:wn.WRITABLE}),i++;for(let a=0;a<e.numReadonlyNonSignerAccounts;a++)s.push({address:t.staticAccounts[i],role:wn.READONLY}),i++;return s}function _xe(t,e){const r=t.map(a=>a.lookupTableAddress).filter(a=>e[a]===void 0);if(r.length>0)throw new Pe(rEe,{lookupTableAddresses:r});const s=[],i=[];for(const a of t){const o=e[a.lookupTableAddress],c=a.readonlyIndexes,l=a.writableIndexes,u=Math.max(...c,...l);if(u>=o.length)throw new Pe(sEe,{highestKnownIndex:o.length-1,highestRequestedIndex:u,lookupTableAddress:a.lookupTableAddress});const d=c.map(f=>({address:o[f],addressIndex:f,lookupTableAddress:a.lookupTableAddress,role:wn.READONLY}));s.push(...d);const h=l.map(f=>({address:o[f],addressIndex:f,lookupTableAddress:a.lookupTableAddress,role:wn.WRITABLE}));i.push(...h)}return[...i,...s]}function Exe(t,e){const n=e[t.programAddressIndex]?.address;if(!n)throw new Pe(iEe,{index:t.programAddressIndex});const r=t.accountIndices?.map(i=>e[i]),{data:s}=t;return Object.freeze({programAddress:n,...r&&r.length?{accounts:Object.freeze(r)}:{},...s&&s.length?{data:s}:{}})}function xxe(t,e,n){if(!e||!Mx(e))return{blockhash:t,lastValidBlockHeight:2n**64n-1n};{const r=e.accounts[0].address;L_(r);const s=e.accounts[2].address;return L_(s),{nonce:t,nonceAccountAddress:r,nonceAuthorityAddress:s}}}function N8e(t,e){const n=t.staticAccounts[0];if(!n)throw new Pe(aEe);const r=vxe(t),s="addressTableLookups"in t&&t.addressTableLookups!==void 0&&t.addressTableLookups.length>0?_xe(t.addressTableLookups,{}):[],i=[...r,...s],a=t.instructions.map(l=>Exe(l,i)),o=a[0],c=xxe(t.lifetimeToken,o);return hl(hxe({version:t.version}),l=>gxe(n,l),l=>a.reduce((u,d)=>wxe(d,u),l),l=>"blockhash"in c?M2e(c,l):mxe(c,l))}var l0=Object.freeze({name:"Ed25519"});function Axe(t){return new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,112,4,34,4,32,...t])}async function z_(t,e=!1){const n=t.byteLength;if(n!==32)throw new Pe(J_e,{actualLength:n});const r=Axe(t);return await crypto.subtle.importKey("pkcs8",r,l0,e,["sign"])}async function Sxe(t,e=!1){if(q9(),t.extractable===!1)throw new Pe(G_e,{key:t});const n=await crypto.subtle.exportKey("jwk",t);return await crypto.subtle.importKey("jwk",{crv:"Ed25519",ext:e,key_ops:["verify"],kty:"OKP",x:n.x},"Ed25519",e,["verify"])}async function Lx(t,e){o2e();const n=await crypto.subtle.sign(l0,t,Fg(e));return new Uint8Array(n)}async function Ixe(t,e,n){return c2e(),await crypto.subtle.verify(l0,t,Fg(e),Fg(n))}async function Txe(t,e=!1){if(i2e(),t.byteLength!==64)throw new Pe(Z_e,{byteLength:t.byteLength});const[n,r]=await Promise.all([crypto.subtle.importKey("raw",t.slice(32),l0,!0,["verify"]),z_(t.slice(0,32),e)]),s=new Uint8Array(32);crypto.getRandomValues(s);const i=await Lx(r,s);if(!await Ixe(n,i,s))throw new Pe(X_e);return{privateKey:r,publicKey:n}}async function Cxe(t,e=!1){const n=z_(t,e),[r,s]=await Promise.all([(e?n:z_(t,!0)).then(async i=>await Sxe(i,!0)),n]);return{privateKey:s,publicKey:r}}function kxe(t){const e=Object.values(t);if(e.length===0)throw new Pe(cEe);return e.map(n=>n||new Uint8Array(64).fill(0))}function Oxe(){return td(Lu(Px(Bx(),64),{size:Yc()}),kxe)}function Pxe(){return Ho([["signatures",Oxe()],["messageBytes",Bx()]])}function Rxe(){return $x(rp([["signatures",Zc(Rx(F_(),64),{size:Fo()})],["messageBytes",F_()]]),$xe)}function $xe(t){const{messageBytes:e,signatures:n}=t,r=k2e([J9(),ZEe(af(),2),Zc(tp(),{size:Fo()})]),[s,i,a]=r.decode(e),o=a.slice(0,i);if(o.length!==n.length)throw new Pe(lEe,{numRequiredSignatures:i,signaturesLength:n.length,signerAddresses:o});const c={};return o.forEach((l,u)=>{const d=n[u];d.every(h=>h===0)?c[l]=null:c[l]=d}),{messageBytes:e,signatures:Object.freeze(c)}}function D8e(t){const e=dxe(t),n=txe().encode(e),r=e.staticAccounts.slice(0,e.header.numSignerAccounts),s={};for(const a of r)s[a]=null;let i;return B2e(t)?i={blockhash:t.lifetimeConstraint.blockhash,lastValidBlockHeight:t.lifetimeConstraint.lastValidBlockHeight}:tU(t)&&(i={nonce:t.lifetimeConstraint.nonce,nonceAccountAddress:t.instructions[0].accounts[0].address}),Object.freeze({...i?{lifetimeConstraint:i}:void 0,messageBytes:n,signatures:Object.freeze(s)})}async function Nxe(t,e){let n,r;if(await Promise.all(t.map(async s=>{const i=await V9(s.publicKey),a=e.signatures[i];if(a===void 0){r||=new Set,r.add(i);return}if(r)return;const o=await Lx(s.privateKey,e.messageBytes);a!==null&&jEe(o,a)||(n||={},n[i]=o)})),r&&r.size>0){const s=Object.keys(e.signatures);throw new Pe(oEe,{expectedAddresses:s,unexpectedAddresses:[...r]})}return n?Object.freeze({...e,signatures:Object.freeze({...e.signatures,...n})}):e}function Dxe(t){const e=Pxe().encode(t);return s2e().decode(e)}function fk(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function Uxe(t){const e=new Set,n={deferreds:e,settled:!1};return Promise.resolve(t).then(r=>{for(const{resolve:s}of e)s(r);e.clear(),n.settled=!0},r=>{for(const{reject:s}of e)s(r);e.clear(),n.settled=!0}),n}var Gb=new WeakMap;async function Bxe(t){let e;return await new Promise((r,s)=>{e={reject:s,resolve:r};for(const i of t){if(!fk(i)){Promise.resolve(i).then(r,s);continue}let a=Gb.get(i);a===void 0?(a=Uxe(i),a.deferreds.add(e),Gb.set(i,a)):a.settled?Promise.resolve(i).then(r,s):a.deferreds.add(e)}}).finally(()=>{for(const r of t)fk(r)&&Gb.get(r).deferreds.delete(e)})}function nU(t){return JSON.parse(Mxe(t),(e,n)=>zxe(n)?jxe(n):n)}function Mxe(t){const e=[];let n=!1;for(let r=0;r<t.length;r++){let s=!1;if(t[r]==="\\"&&(e.push(t[r++]),s=!s),t[r]==='"'){e.push(t[r]),s||(n=!n);continue}if(!n){const i=Lxe(t,r);if(i?.length){r+=i.length-1,i.match(/\.|[eE]-/)?e.push(i):e.push(Fxe(i));continue}}e.push(t[r])}return e.join("")}function Lxe(t,e){const n=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?/;if(!t[e]?.match(/[-\d]/))return null;const r=t.slice(e).match(n);return r?r[0]:null}function Fxe(t){return`{"$n":"${t}"}`}function jxe({$n:t}){if(t.match(/[eE]/)){const[e,n]=t.split(/[eE]/);return BigInt(e)*BigInt(10)**BigInt(n)}return BigInt(t)}function zxe(t){return!!t&&typeof t=="object"&&"$n"in t&&typeof t.$n=="string"}var pk=0n;function Wxe(){const t=pk;return pk++,t.toString()}function W_(t){return{id:Wxe(),jsonrpc:"2.0",method:t.methodName,params:t.params}}function rU(t,e){return Vxe(JSON.stringify(t,(n,r)=>typeof r=="bigint"?qxe(r):r,e))}function qxe(t){return{$n:`${t}`}}function Vxe(t){return t.replace(/\{\s*"\$n"\s*:\s*"(-?\d+)"\s*\}/g,"$1")}function Hxe(t){return Kxe(t)}function Kxe(t){return new Proxy(t.api,{defineProperty(){return!1},deleteProperty(){return!1},get(e,n,r){if(n!=="then")return function(...s){const i=n.toString(),a=Reflect.get(e,i,r);if(!a)throw new Pe(SEe,{method:i,params:s});const o=a(...s);return Gxe(t,o)}}})}function Gxe({transport:t},e){return{async send(n){return await e.execute({signal:n?.abortSignal,transport:t})}}}function Yxe(t){return new Proxy({},{defineProperty(){return!1},deleteProperty(){return!1},get(...e){const[n,r]=e,s=r.toString();return function(...i){const a=Object.freeze({methodName:s,params:i}),o=t?.requestTransformer?t?.requestTransformer(a):a;return Object.freeze({execute:async({signal:c,transport:l})=>{const u=W_(o),d=await l({payload:u,signal:c});return t?.responseTransformer?t.responseTransformer(d,o):d}})}}})}function sU(t){return t==null||typeof t!="object"||Array.isArray(t)?!1:"jsonrpc"in t&&t.jsonrpc==="2.0"&&"method"in t&&typeof t.method=="string"&&"params"in t}function Zxe(t){return typeof t=="bigint"?Number(t):t}var pe={};function iU(t){return function e(n,r){if(Array.isArray(n))return n.map((s,i)=>{const a={...r,keyPath:[...r.keyPath,i]};return e(s,a)});if(typeof n=="object"&&n!==null){const s={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const a={...r,keyPath:[...r.keyPath,i]};s[i]=e(n[i],a)}return s}else return t.reduce((s,i)=>i(s,r),n)}}function aU(t,e){return n=>{const r=iU(t);return Object.freeze({...n,params:r(n.params,e)})}}function oU(t,e){return n=>iU(t)(n,e)}function Jxe(){return aU([Zxe],{keyPath:[]})}function Xxe({commitmentPropertyName:t,params:e,optionsObjectPositionInParams:n,overrideCommitment:r}){const s=e[n];if(s===void 0||s&&typeof s=="object"&&!Array.isArray(s)){if(s&&t in s){if(!s[t]||s[t]==="finalized"){const i=[...e],{[t]:a,...o}=s;return Object.keys(o).length>0?i[n]=o:n===i.length-1?i.length--:i[n]=void 0,i}}else if(r!=="finalized"){const i=[...e];return i[n]={...s,[t]:r},i}}return e}function Qxe({defaultCommitment:t,optionsObjectPositionByMethod:e}){return n=>{const{params:r,methodName:s}=n;if(!Array.isArray(r))return n;const i=e[s];return i==null?n:Object.freeze({methodName:s,params:Xxe({commitmentPropertyName:s==="sendTransaction"?"preflightCommitment":"commitment",optionsObjectPositionInParams:i,overrideCommitment:t,params:r})})}}function eAe(t){return(e,{keyPath:n})=>(typeof e=="bigint"&&t&&(e>Number.MAX_SAFE_INTEGER||e<-Number.MAX_SAFE_INTEGER)&&t(n,e),e)}function tAe(t){return e=>aU([eAe((...r)=>t(e,...r))],{keyPath:[]})(e)}var nAe={accountNotifications:1,blockNotifications:1,getAccountInfo:1,getBalance:1,getBlock:1,getBlockHeight:0,getBlockProduction:0,getBlocks:2,getBlocksWithLimit:2,getEpochInfo:0,getFeeForMessage:1,getInflationGovernor:0,getInflationReward:1,getLargestAccounts:0,getLatestBlockhash:0,getLeaderSchedule:1,getMinimumBalanceForRentExemption:1,getMultipleAccounts:1,getProgramAccounts:1,getSignaturesForAddress:1,getSlot:0,getSlotLeader:0,getStakeMinimumDelegation:0,getSupply:0,getTokenAccountBalance:1,getTokenAccountsByDelegate:2,getTokenAccountsByOwner:2,getTokenLargestAccounts:1,getTokenSupply:1,getTransaction:1,getTransactionCount:0,getVoteAccounts:0,isBlockhashValid:1,logsNotifications:1,programNotifications:1,requestAirdrop:2,sendTransaction:1,signatureNotifications:1,simulateTransaction:1};function cU(t){const e=t?.onIntegerOverflow;return n=>hl(n,e?tAe(e):r=>r,Jxe(),Qxe({defaultCommitment:t?.defaultCommitment,optionsObjectPositionByMethod:nAe}))}function lU(t){return function(n,{keyPath:r}){return typeof n=="number"&&Number.isInteger(n)||typeof n=="bigint"?rAe(r,t)?Number(n):BigInt(n):n}}function rAe(t,e){return e.some(n=>{if(n.length!==t.length)return!1;for(let r=t.length-1;r>=0;r--){const s=t[r],i=n[r];if(i!==s&&(i!==pe||typeof s!="number"))return!1}return!0})}function uU(t){return oU([lU(t)],{keyPath:[]})}function sAe(){return t=>t.result}var q_=[["data","parsed","info","tokenAmount","decimals"],["data","parsed","info","tokenAmount","uiAmount"],["data","parsed","info","rentExemptReserve","decimals"],["data","parsed","info","rentExemptReserve","uiAmount"],["data","parsed","info","delegatedAmount","decimals"],["data","parsed","info","delegatedAmount","uiAmount"],["data","parsed","info","extensions",pe,"state","olderTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",pe,"state","newerTransferFee","transferFeeBasisPoints"],["data","parsed","info","extensions",pe,"state","preUpdateAverageRate"],["data","parsed","info","extensions",pe,"state","currentRate"]],Ec=[...q_,["data","parsed","info","lastExtendedSlotStartIndex"],["data","parsed","info","slashPenalty"],["data","parsed","info","warmupCooldownRate"],["data","parsed","info","decimals"],["data","parsed","info","numRequiredSigners"],["data","parsed","info","numValidSigners"],["data","parsed","info","stake","delegation","warmupCooldownRate"],["data","parsed","info","exemptionThreshold"],["data","parsed","info","burnPercent"],["data","parsed","info","commission"],["data","parsed","info","votes",pe,"confirmationCount"]],Sm=[["index"],["instructions",pe,"accounts",pe],["instructions",pe,"programIdIndex"],["instructions",pe,"stackHeight"]],mk=[["addressTableLookups",pe,"writableIndexes",pe],["addressTableLookups",pe,"readonlyIndexes",pe],["header","numReadonlySignedAccounts"],["header","numReadonlyUnsignedAccounts"],["header","numRequiredSignatures"],["instructions",pe,"accounts",pe],["instructions",pe,"programIdIndex"],["instructions",pe,"stackHeight"]];function iAe(){return[["loadedAccountsDataSize"],...Ec.map(t=>["accounts",pe,...t]),...Sm.map(t=>["innerInstructions",pe,...t])]}function aAe(){return(t,e)=>{const n=t;if("error"in n){const{error:r}=n;if(r&&typeof r=="object"&&"code"in r&&(r.code===-32002||r.code===-32002n)&&"data"in r&&r.data){const a=oU([lU(iAe())],{keyPath:[]})(r.data,e),o={...r,data:a};throw Lg(o)}throw Lg(n.error)}return n}}function oAe(t){return(e,n)=>{const r=n.methodName,s=t?.allowedNumericKeyPaths&&r?t.allowedNumericKeyPaths[r]:void 0;return hl(e,i=>aAe()(i,n),i=>sAe()(i,n),i=>uU(s??[])(i,n))}}function cAe(t){return(e,n)=>{const r=n.methodName,s=t?.allowedNumericKeyPaths&&r?t.allowedNumericKeyPaths[r]:void 0;return hl(e,i=>uU(s??[])(i,n))}}function lAe(t){return Yxe({requestTransformer:cU(t),responseTransformer:oAe({allowedNumericKeyPaths:uAe()})})}var Yb;function uAe(){return Yb||(Yb={getAccountInfo:Ec.map(t=>["value",...t]),getBlock:[["transactions",pe,"meta","preTokenBalances",pe,"accountIndex"],["transactions",pe,"meta","preTokenBalances",pe,"uiTokenAmount","decimals"],["transactions",pe,"meta","postTokenBalances",pe,"accountIndex"],["transactions",pe,"meta","postTokenBalances",pe,"uiTokenAmount","decimals"],["transactions",pe,"meta","rewards",pe,"commission"],...Sm.map(t=>["transactions",pe,"meta","innerInstructions",pe,...t]),...mk.map(t=>["transactions",pe,"transaction","message",...t]),["rewards",pe,"commission"]],getClusterNodes:[[pe,"featureSet"],[pe,"shredVersion"]],getInflationGovernor:[["initial"],["foundation"],["foundationTerm"],["taper"],["terminal"]],getInflationRate:[["foundation"],["total"],["validator"]],getInflationReward:[[pe,"commission"]],getMultipleAccounts:Ec.map(t=>["value",pe,...t]),getProgramAccounts:Ec.flatMap(t=>[["value",pe,"account",...t],[pe,"account",...t]]),getRecentPerformanceSamples:[[pe,"samplePeriodSecs"]],getTokenAccountBalance:[["value","decimals"],["value","uiAmount"]],getTokenAccountsByDelegate:q_.map(t=>["value",pe,"account",...t]),getTokenAccountsByOwner:q_.map(t=>["value",pe,"account",...t]),getTokenLargestAccounts:[["value",pe,"decimals"],["value",pe,"uiAmount"]],getTokenSupply:[["value","decimals"],["value","uiAmount"]],getTransaction:[["meta","preTokenBalances",pe,"accountIndex"],["meta","preTokenBalances",pe,"uiTokenAmount","decimals"],["meta","postTokenBalances",pe,"accountIndex"],["meta","postTokenBalances",pe,"uiTokenAmount","decimals"],["meta","rewards",pe,"commission"],...Sm.map(t=>["meta","innerInstructions",pe,...t]),...mk.map(t=>["transaction","message",...t])],getVersion:[["feature-set"]],getVoteAccounts:[["current",pe,"commission"],["delinquent",pe,"commission"]],simulateTransaction:[["value","loadedAccountsDataSize"],...Ec.map(t=>["value","accounts",pe,...t]),...Sm.map(t=>["value","innerInstructions",pe,...t])]}),Yb}function dAe(t){const e={};for(const n in t)e[n.toLowerCase()]=t[n];return e}function hAe(t){const{fromJson:e,headers:n,toJson:r,url:s}=t;let i;const a=n&&dAe(n);return async function({payload:c,signal:l}){const u=r?r(c):JSON.stringify(c),d={...i,body:u,headers:{...a,accept:"application/json","content-length":u.length.toString(),"content-type":"application/json; charset=utf-8"},method:"POST",signal:l},h=await fetch(s,d);if(!h.ok)throw new Pe(AEe,{headers:h.headers,message:h.statusText,statusCode:h.status});return e?e(await h.text(),c):await h.json()}}var fAe=["getAccountInfo","getBalance","getBlock","getBlockCommitment","getBlockHeight","getBlockProduction","getBlocks","getBlocksWithLimit","getBlockTime","getClusterNodes","getEpochInfo","getEpochSchedule","getFeeForMessage","getFirstAvailableBlock","getGenesisHash","getHealth","getHighestSnapshotSlot","getIdentity","getInflationGovernor","getInflationRate","getInflationReward","getLargestAccounts","getLatestBlockhash","getLeaderSchedule","getMaxRetransmitSlot","getMaxShredInsertSlot","getMinimumBalanceForRentExemption","getMultipleAccounts","getProgramAccounts","getRecentPerformanceSamples","getRecentPrioritizationFees","getSignaturesForAddress","getSignatureStatuses","getSlot","getSlotLeader","getSlotLeaders","getStakeMinimumDelegation","getSupply","getTokenAccountBalance","getTokenAccountsByDelegate","getTokenAccountsByOwner","getTokenLargestAccounts","getTokenSupply","getTransaction","getTransactionCount","getVersion","getVoteAccounts","index","isBlockhashValid","minimumLedgerSlot","requestAirdrop","sendTransaction","simulateTransaction"];function gk(t){return sU(t)&&fAe.includes(t.method)}function pAe(t){return hAe({...t,fromJson:(e,n)=>gk(n)?nU(e):JSON.parse(e),toJson:e=>gk(e)?rU(e):JSON.stringify(e)})}var mAe=Object.prototype.toString,gAe=Object.keys||function(t){const e=[];for(const n in t)e.push(n);return e};function Xd(t,e){let n,r,s,i,a,o,c;if(t===!0)return"true";if(t===!1)return"false";switch(typeof t){case"object":if(t===null)return null;if("toJSON"in t&&typeof t.toJSON=="function")return Xd(t.toJSON(),e);if(c=mAe.call(t),c==="[object Array]"){for(s="[",r=t.length-1,n=0;n<r;n++)s+=Xd(t[n],!0)+",";return r>-1&&(s+=Xd(t[n],!0)),s+"]"}else if(c==="[object Object]"){for(i=gAe(t).sort(),r=i.length,s="",n=0;n<r;)a=i[n],o=Xd(t[a],!1),o!==void 0&&(s&&(s+=","),s+=JSON.stringify(a)+":"+o),n++;return"{"+s+"}"}else return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"bigint":return`${t.toString()}n`;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}function dU(t){const e=Xd(t,!1);if(e!==void 0)return""+e}function hU(t,e,n){let r="";if(typeof e[0]=="number"){const a=e[0]+1,o=a%10,c=a%100;o==1&&c!=11?r=a+"st":o==2&&c!=12?r=a+"nd":o==3&&c!=13?r=a+"rd":r=a+"th"}else r=`\`${e[0].toString()}\``;const s=e.length>1?e.slice(1).map(a=>typeof a=="number"?`[${a}]`:a).join("."):void 0,i=new Pe(B9,{argumentLabel:r,keyPath:e,methodName:t,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...s!==void 0?{path:s}:void 0});return o0(i,hU),i}var yAe={defaultCommitment:"confirmed",onIntegerOverflow(t,e,n){throw hU(t.methodName,e,n)}},wAe=globalThis.AbortController,yk;function wk(){return{}}function bAe(t,e){let n;return async function(s){const{payload:i,signal:a}=s,o=e(i);if(o===void 0)return await t(s);if(n||(queueMicrotask(()=>{n=void 0}),n={}),n[o]==null){const l=new wAe,u=(async()=>{try{return await t({...s,signal:l.signal})}catch(d){if(d===(yk||=wk()))return;throw d}})();n[o]={abortController:l,numConsumers:0,responsePromise:u}}const c=n[o];if(c.numConsumers++,a){const l=c.responsePromise;return await new Promise((u,d)=>{const h=f=>{a.removeEventListener("abort",h),c.numConsumers-=1,queueMicrotask(()=>{c.numConsumers===0&&c.abortController.abort(yk||=wk())}),d(f.target.reason)};a.addEventListener("abort",h),l.then(u).catch(d).finally(()=>{a.removeEventListener("abort",h)})})}else return await c.responsePromise}}function vAe(t){return sU(t)?dU([t.method,t.params]):void 0}function _Ae(t){const e={};for(const n in t)e[n.toLowerCase()]=t[n];return e}function EAe(t){return hl(pAe({...t,headers:{...t.headers?_Ae(t.headers):void 0,"solana-client":"js/5.5.1"}}),e=>bAe(e,vAe))}function fU(t,e){return xAe(EAe({url:t,...e}))}function xAe(t){return Hxe({api:lAe(yAe),transport:t})}var AAe=globalThis.AbortController,SAe=globalThis.EventTarget,bk;function vk(){return Symbol(void 0)}var Zb=Symbol();function IAe({abortSignal:t,dataChannelName:e,dataPublisher:n,errorChannelName:r}){const s=new Map;function i(l){for(const[u,d]of s.entries())d.__hasPolled?(s.delete(u),d.onError(l)):d.publishQueue.push({__type:1,err:l})}const a=new AAe;t.addEventListener("abort",()=>{a.abort(),i(bk||=vk())});const o={signal:a.signal};let c=Zb;return n.on(r,l=>{c===Zb&&(c=l,a.abort(),i(l))},o),n.on(e,l=>{s.forEach((u,d)=>{if(u.__hasPolled){const{onData:h}=u;s.set(d,{__hasPolled:!1,publishQueue:[]}),h(l)}else u.publishQueue.push({__type:0,data:l})})},o),{async*[Symbol.asyncIterator](){if(t.aborted)return;if(c!==Zb)throw c;const l=Symbol();s.set(l,{__hasPolled:!1,publishQueue:[]});try{for(;;){const u=s.get(l);if(!u)throw new Pe(OEe);if(u.__hasPolled)throw new Pe(PEe);const d=u.publishQueue;try{if(d.length){u.publishQueue=[];for(const h of d)if(h.__type===0)yield h.data;else throw h.err}else yield await new Promise((h,f)=>{s.set(l,{__hasPolled:!0,onData:h,onError:f})})}catch(h){if(h===(bk||=vk()))return;throw h}}}finally{s.delete(l)}}}}function pU(t){return{on(e,n,r){function s(i){if(i instanceof CustomEvent){const a=i.detail;n(a)}else n()}return t.addEventListener(e,s,r),()=>{t.removeEventListener(e,s)}}}}function TAe(t,e,n){let r;const s=new SAe,i=pU(s);return{...i,on(a,o,c){r||(r={dispose:t.on(e,f=>{const p=n(f);if(!p)return;const[m,g]=p;s.dispatchEvent(new CustomEvent(m,{detail:g}))}),numSubscribers:0}),r.numSubscribers++;const l=i.on(a,o,c);let u=!0;function d(){u&&(u=!1,c?.signal.removeEventListener("abort",d),r.numSubscribers--,r.numSubscribers===0&&(r.dispose(),r=void 0),l())}return c?.signal.addEventListener("abort",d),d}}}function CAe(t){return new Proxy(t.api,{defineProperty(){return!1},deleteProperty(){return!1},get(e,n,r){if(n!=="then")return function(...s){const i=n.toString(),a=Reflect.get(e,i,r);if(!a)throw new Pe(IEe,{notificationName:i});const o=a(...s);return kAe(t.transport,o)}}})}function kAe(t,e){return{async subscribe({abortSignal:n}){const r=await t({signal:n,...e});return IAe({abortSignal:n,dataChannelName:"notification",dataPublisher:r,errorChannelName:"error"})}}}function OAe(t){return new Proxy({},{defineProperty(){return!1},deleteProperty(){return!1},get(...e){const[n,r]=e,s=r.toString();return function(...i){const a={methodName:s,params:i},o=t.requestTransformer?t.requestTransformer(a):a;return{execute(c){return t.planExecutor({...c,request:o})},request:o}}}})}function PAe(t,e){return Object.freeze({...t,on(n,r,s){return n!=="message"?t.on(n,r,s):t.on("message",i=>r(e(i)),s)}})}function RAe(t,e){return Object.freeze({...t,send:n=>t.send(e(n))})}var $Ae=globalThis.AbortController,V_=new WeakMap;function NAe(t,e){return mU(-1,t,e)}function DAe(t,e){mU(1,t,e)}function UAe(t){let e=V_.get(t);return e||V_.set(t,e={}),e}function mU(t,e,n){if(n===void 0)return;const r=UAe(e);!r[n]&&t>0&&(r[n]=0);const s=t+r[n];return s<=0?delete r[n]:r[n]=s,s}var _k=new WeakMap;function BAe(t,e,n){let r=_k.get(t);r||_k.set(t,r=new WeakMap);const s=n??t;let i=r.get(s);return i||r.set(s,i=TAe(t,"message",a=>{const o=a;if(!("method"in o))return;const c=n?n(o.params.result,e):o.params.result;return[`notification:${o.params.subscription}`,c]})),i}async function MAe({channel:t,responseTransformer:e,signal:n,subscribeRequest:r,unsubscribeMethodName:s}){let i;t.on("error",()=>{i=void 0,V_.delete(t)},{signal:n});const a=new Promise((d,h)=>{function f(){if(NAe(t,i)===0){const p=W_({methodName:s,params:[i]});i=void 0,t.send(p).catch(()=>{})}h(this.reason)}n.aborted?f.call(n):n.addEventListener("abort",f)}),o=W_(r);await t.send(o);const c=new Promise((d,h)=>{const f=new $Ae;n.addEventListener("abort",f.abort.bind(f));const p={signal:f.signal};t.on("error",m=>{f.abort(),h(m)},p),t.on("message",m=>{m&&typeof m=="object"&&"id"in m&&m.id===o.id&&(f.abort(),"error"in m?h(Lg(m.error)):d(m.result))},p)});if(i=await Bxe([a,c]),i==null)throw new Pe(TEe);DAe(t,i);const l=BAe(t,r,e),u=`notification:${i}`;return{on(d,h,f){switch(d){case"notification":return l.on(u,h,f);case"error":return t.on("error",h,f);default:throw new Pe(REe,{channelName:d,supportedChannelNames:["notification","error"]})}}}}function LAe(t){const e=cU(t),n=cAe({allowedNumericKeyPaths:jAe()});return OAe({planExecutor({request:r,...s}){return MAe({...s,responseTransformer:n,subscribeRequest:{...r,methodName:r.methodName.replace(/Notifications$/,"Subscribe")},unsubscribeMethodName:r.methodName.replace(/Notifications$/,"Unsubscribe")})},requestTransformer:e})}function FAe(t){return LAe(t)}var Jb;function jAe(){return Jb||(Jb={accountNotifications:Ec.map(t=>["value",...t]),blockNotifications:[["value","block","transactions",pe,"meta","preTokenBalances",pe,"accountIndex"],["value","block","transactions",pe,"meta","preTokenBalances",pe,"uiTokenAmount","decimals"],["value","block","transactions",pe,"meta","postTokenBalances",pe,"accountIndex"],["value","block","transactions",pe,"meta","postTokenBalances",pe,"uiTokenAmount","decimals"],["value","block","transactions",pe,"meta","rewards",pe,"commission"],["value","block","transactions",pe,"meta","innerInstructions",pe,"index"],["value","block","transactions",pe,"meta","innerInstructions",pe,"instructions",pe,"programIdIndex"],["value","block","transactions",pe,"meta","innerInstructions",pe,"instructions",pe,"accounts",pe],["value","block","transactions",pe,"transaction","message","addressTableLookups",pe,"writableIndexes",pe],["value","block","transactions",pe,"transaction","message","addressTableLookups",pe,"readonlyIndexes",pe],["value","block","transactions",pe,"transaction","message","instructions",pe,"programIdIndex"],["value","block","transactions",pe,"transaction","message","instructions",pe,"accounts",pe],["value","block","transactions",pe,"transaction","message","header","numReadonlySignedAccounts"],["value","block","transactions",pe,"transaction","message","header","numReadonlyUnsignedAccounts"],["value","block","transactions",pe,"transaction","message","header","numRequiredSignatures"],["value","block","rewards",pe,"commission"]],programNotifications:Ec.flatMap(t=>[["value",pe,"account",...t],[pe,"account",...t]])}),Jb}var zAe=globalThis.EventTarget,Nd=globalThis.WebSocket,Ek=1e3;function WAe({sendBufferHighWatermark:t,signal:e,url:n}){if(e.aborted)return Promise.reject(e.reason);let r,s=!1;const i=new Set;function a(){i.forEach(_=>{_()}),i.clear()}function o(){a(),s||m(e.reason),p.readyState!==Nd.CLOSED&&p.readyState!==Nd.CLOSING&&p.close(Ek)}function c(_){a(),r?.onCancel(),e.removeEventListener("abort",o),p.removeEventListener("close",c),p.removeEventListener("error",l),p.removeEventListener("message",u),p.removeEventListener("open",f),!e.aborted&&!(_.wasClean&&_.code===Ek)&&d.dispatchEvent(new CustomEvent("error",{detail:new Pe(M_,{cause:_})}))}function l(_){if(!e.aborted&&!s){const A=new Pe(kEe,{errorEvent:_});m(A),d.dispatchEvent(new CustomEvent("error",{detail:A}))}}function u(_){e.aborted||d.dispatchEvent(new CustomEvent("message",{detail:_.data}))}const d=new zAe,h=pU(d);function f(){s=!0,g({...h,async send(_){if(p.readyState!==Nd.OPEN)throw new Pe(M_);if(!r&&p.bufferedAmount>t){let A;const w=new Promise((y,E)=>{const b=setInterval(()=>{(p.readyState!==Nd.OPEN||!(p.bufferedAmount>t))&&(clearInterval(b),r=void 0,y())},16);A=()=>{r=void 0,clearInterval(b),E(new Pe(CEe))}});r={onCancel:A,promise:w}}if(r){if(ArrayBuffer.isView(_)&&!(_ instanceof DataView)){const A=_.constructor;_=new A(_)}await r.promise}p.send(_)}})}const p=new Nd(n);e.addEventListener("abort",o),p.addEventListener("close",c),p.addEventListener("error",l),p.addEventListener("message",u),p.addEventListener("open",f);let m,g;return new Promise((_,A)=>{m=A,g=_})}function gU(t,e,n){let r="";if(typeof e[0]=="number"){const a=e[0]+1,o=a%10,c=a%100;o==1&&c!=11?r=a+"st":o==2&&c!=12?r=a+"nd":o==3&&c!=13?r=a+"rd":r=a+"th"}else r=`\`${e[0].toString()}\``;const s=e.length>1?e.slice(1).map(a=>typeof a=="number"?`[${a}]`:a).join("."):void 0,i=new Pe(B9,{argumentLabel:r,keyPath:e,methodName:t,optionalPathLabel:s?` at path \`${s}\``:"",value:n,...s!==void 0?{path:s}:void 0});return o0(i,gU),i}var qAe={defaultCommitment:"confirmed",onIntegerOverflow(t,e,n){throw gU(t.methodName,e,n)}},Fx=globalThis.AbortController,VAe={jsonrpc:"2.0",method:"ping"};function HAe({abortSignal:t,channel:e,intervalMs:n}){let r;function s(){e.send(VAe).catch(o=>{L9(o,M_)&&a.abort()})}function i(){clearInterval(r),r=setInterval(s,n)}const a=new Fx;return a.signal.addEventListener("abort",()=>{clearInterval(r)}),t.addEventListener("abort",()=>{a.abort()}),e.on("error",()=>{a.abort()},{signal:a.signal}),e.on("message",i,{signal:a.signal}),globalThis.navigator.onLine&&i(),globalThis.addEventListener("offline",function(){clearInterval(r)},{signal:a.signal}),globalThis.addEventListener("online",function(){s(),i()},{signal:a.signal}),{...e,send(...o){return a.signal.aborted||i(),e.send(...o)}}}function KAe(){return{entries:[],freeChannelIndex:-1}}function GAe(t,{maxSubscriptionsPerChannel:e,minChannels:n}){const r=KAe();function s(){if(r.entries.length<n){r.freeChannelIndex=-1;return}let i;for(let a=0;a<r.entries.length;a++){const o=(r.freeChannelIndex+a+2)%r.entries.length,c=r.entries[o];c.subscriptionCount<e&&(!i||i.subscriptionCount>=c.subscriptionCount)&&(i={poolIndex:o,subscriptionCount:c.subscriptionCount})}r.freeChannelIndex=i?.poolIndex??-1}return function({abortSignal:a}){let o;function c(){const l=r.entries.findIndex(u=>u===o);r.entries.splice(l,1),o.dispose(),s()}if(r.freeChannelIndex===-1){const l=new Fx,u=t({abortSignal:l.signal});u.then(d=>{d.on("error",c,{signal:l.signal})}).catch(c),o={channel:u,dispose(){l.abort()},subscriptionCount:0},r.entries.push(o)}else o=r.entries[r.freeChannelIndex];return o.subscriptionCount++,a.addEventListener("abort",function(){o.subscriptionCount--,o.subscriptionCount===0?c():r.freeChannelIndex!==-1&&(r.freeChannelIndex--,s())}),s(),o.channel}}function YAe(t){return hl(t,e=>PAe(e,nU),e=>RAe(e,rU))}function ZAe(t){return JAe({...t,jsonSerializer:YAe})}function JAe(t){if(/^wss?:/i.test(t.url)===!1){const s=t.url.match(/^([^:]+):/);throw new DOMException(s?`Failed to construct 'WebSocket': The URL's scheme must be either 'ws' or 'wss'. '${s[1]}:' is not allowed.`:`Failed to construct 'WebSocket': The URL '${t.url}' is invalid.`)}const{intervalMs:e,...n}=t;return GAe((({abortSignal:s})=>WAe({...n,sendBufferHighWatermark:t.sendBufferHighWatermark??131072,signal:s}).then(t.jsonSerializer).then(i=>HAe({abortSignal:s,channel:i,intervalMs:e??5e3}))),{maxSubscriptionsPerChannel:t.maxSubscriptionsPerChannel??100,minChannels:t.minChannels??1})}function XAe(t){const e=new Map;return function(r){const{request:s,signal:i}=r,a=dU([s.methodName,s.params]);let o=e.get(a);if(!o){const c=new Fx,l=t({...r,signal:c.signal});l.then(u=>{u.on("error",()=>{e.delete(a),c.abort()},{signal:c.signal})}).catch(()=>{}),e.set(a,o={abortController:c,dataPublisherPromise:l,numSubscribers:0})}return o.numSubscribers++,i.addEventListener("abort",()=>{o.numSubscribers--,o.numSubscribers===0&&queueMicrotask(()=>{o.numSubscribers===0&&(e.delete(a),o.abortController.abort())})},{signal:o.abortController.signal}),o.dataPublisherPromise}}function QAe({createChannel:t}){return hl(eSe(t),e=>XAe(e))}function eSe(t){return(async({execute:e,signal:n})=>{const r=await t({abortSignal:n});return await e({channel:r,signal:n})})}function tSe(t,e){const n=QAe({createChannel:ZAe({...e,url:t})});return nSe(n)}function xk(t,e){return tSe(t,e)}function nSe(t){return CAe({api:FAe(qAe),transport:t})}function yU(t){return"modifyAndSignTransactions"in t&&typeof t.modifyAndSignTransactions=="function"}function wU(t){return"signTransactions"in t&&typeof t.signTransactions=="function"}function rSe(t){return"signAndSendTransactions"in t&&typeof t.signAndSendTransactions=="function"}function bU(t){return wU(t)||yU(t)||rSe(t)}function U8e(t,e){Object.freeze(t);const n={...e,feePayer:t};return Object.freeze(n),n}async function vU(t){const e=await V9(t.publicKey);return Object.freeze({address:e,keyPair:t,signMessages:r=>Promise.all(r.map(async s=>Object.freeze({[e]:await Lx(t.privateKey,s.content)}))),signTransactions:r=>Promise.all(r.map(async s=>{const i=await Nxe([t],s);return Object.freeze({[e]:i.signatures[e]})}))})}async function sSe(t,e){return await vU(await Txe(t,e))}async function iSe(t,e){return await vU(await Cxe(t,e))}var aSe="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",_U="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA";function oSe(t){if(!t)throw new Error("Expected a Address.");return typeof t=="object"&&"address"in t?t.address:Array.isArray(t)?t[0]:t}function EU(t,e){return n=>{if(!n.value)return Object.freeze({address:t,role:wn.READONLY});const r=n.isWritable?wn.WRITABLE:wn.READONLY;return Object.freeze({address:oSe(n.value),role:Ak(n.value)?D2e(r):r,...Ak(n.value)?{signer:n.value}:{}})}}function Ak(t){return!!t&&typeof t=="object"&&"address"in t&&bU(t)}async function B8e(t,e={}){const{programAddress:n="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}=e;return await E2e({programAddress:n,seeds:[pu().encode(t.owner),pu().encode(t.tokenProgram),pu().encode(t.mint)]})}var cSe=1;function lSe(){return td(Ho([["discriminator",Bu()]]),t=>({...t,discriminator:cSe}))}function M8e(t,e){const n=aSe,s={payer:{value:t.payer??null,isWritable:!0},ata:{value:t.ata??null,isWritable:!0},owner:{value:t.owner??null,isWritable:!1},mint:{value:t.mint??null,isWritable:!1},systemProgram:{value:t.systemProgram??null,isWritable:!1},tokenProgram:{value:t.tokenProgram??null,isWritable:!1}};s.tokenProgram.value||(s.tokenProgram.value="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s.systemProgram.value||(s.systemProgram.value="11111111111111111111111111111111");const i=EU(n);return Object.freeze({accounts:[i(s.payer),i(s.ata),i(s.owner),i(s.mint),i(s.systemProgram),i(s.tokenProgram)],data:lSe().encode({}),programAddress:n})}var uSe=3;function dSe(){return td(Ho([["discriminator",Bu()],["amount",S2e()]]),t=>({...t,discriminator:uSe}))}function L8e(t,e){const n=_U,s={source:{value:t.source??null,isWritable:!0},destination:{value:t.destination??null,isWritable:!0},authority:{value:t.authority??null,isWritable:!1}},i={...t},a=(i.multiSigners??[]).map(c=>({address:c.address,role:wn.READONLY_SIGNER,signer:c})),o=EU(n);return Object.freeze({accounts:[o(s.source),o(s.destination),o(s.authority),...a],data:dSe().encode(i),programAddress:n})}var hSe="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb";lP([Nt().transform(t=>t.replace(/[^0-9.-]+/g,"")),Rs()]).pipe(YH.number().min(1e-4).max(999999999));var u0=Gi(["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","solana-devnet","solana","sei","sei-testnet","polygon","polygon-amoy","peaq","story","educhain","skale-base-sepolia"]),fSe=["abstract","abstract-testnet","base-sepolia","base","avalanche-fuji","avalanche","iotex","sei","sei-testnet","polygon","polygon-amoy","peaq","story","educhain","skale-base-sepolia"],pSe=new Map([["abstract",2741],["abstract-testnet",11124],["base-sepolia",84532],["base",8453],["avalanche-fuji",43113],["avalanche",43114],["iotex",4689],["sei",1329],["sei-testnet",1328],["polygon",137],["polygon-amoy",80002],["peaq",3338],["story",1514],["educhain",41923],["skale-base-sepolia",324705682]]),xU=["solana-devnet","solana"];Object.fromEntries([...fSe,...xU].map(t=>[pSe.get(t),t]));var mSe={id:324705682,name:"SKALE Base Sepolia",nativeCurrency:{name:"Credits",symbol:"CREDITS",decimals:18},rpcUrls:{default:{http:["https://base-sepolia-testnet.skalenodes.com/v1/jubilant-horrible-ancha"]}},blockExplorers:{default:{name:"Blockscout",url:"https://base-sepolia-testnet-explorer.skalenodes.com",apiUrl:"https://base-sepolia-testnet-explorer.skalenodes.com/api"}}};function jx(t){const e=Wx(t);return t2({chain:e,transport:py()}).extend(Bm)}function gSe(){return jx("base-sepolia")}function ySe(){return jx("avalanche-fuji")}function zx(t,e){const n=Wx(t),r=HV({chain:n,transport:py(),account:m_e(e)});return AU(n)?r.extend(Bm).extend(__e()):r.extend(Bm)}function wSe(t){return zx("base-sepolia",t)}function bSe(t){return zx("avalanche-fuji",t)}function vSe(t){return typeof t=="object"&&t!==null&&"chain"in t&&"transport"in t}function _Se(t){const e=t;return typeof t=="object"&&t!==null&&typeof e.address=="string"&&typeof e.type=="string"&&typeof e.sign=="function"&&typeof e.signMessage=="function"&&typeof e.signTypedData=="function"&&typeof e.signTransaction=="function"}function Wx(t){if(!t)throw new Error("NETWORK environment variable is not set");switch(t){case"abstract":return q1e;case"abstract-testnet":return V1e;case"base":return O9;case"base-sepolia":return P9;case"avalanche":return Q1e;case"avalanche-fuji":return e_e;case"sei":return o_e;case"sei-testnet":return c_e;case"polygon":return i_e;case"polygon-amoy":return a_e;case"peaq":return s_e;case"story":return l_e;case"educhain":return t_e;case"iotex":return n_e;case"iotex-testnet":return r_e;case"skale-base-sepolia":return mSe;default:throw new Error(`Unsupported network: ${t}`)}}var ESe=new Set([2741,11124]);function AU(t){return ESe.has(t.id)}var xSe="https://api.devnet.solana.com",ASe="https://api.mainnet-beta.solana.com",SSe="wss://api.devnet.solana.com",ISe="wss://api.mainnet-beta.solana.com";function SU(t){return fU(t||xSe)}function IU(t){return fU(t||ASe)}function TU(t,e){if(t==="solana-devnet")return SU(e);if(t==="solana")return IU(e);throw new Error("Invalid network")}function TSe(t,e){if(t==="solana-devnet")return xk(e?Sk(e):SSe);if(t==="solana")return xk(e?Sk(e):ISe);throw new Error("Invalid network")}function Sk(t){return t.startsWith("http")?t.replace("http","ws"):t}function CSe(t){if(!xU.find(e=>e===t))throw new Error(`Unsupported SVM network: ${t}`);return TU(t)}async function kSe(t){const e=lee.decode(t);if(e.length===64)return await sSe(e);if(e.length===32)return await iSe(e);throw new Error(`Unexpected key length: ${e.length}. Expected 32 or 64 bytes.`)}function OSe(t){return typeof t=="object"&&t!==null&&bU(t)}var PSe={};Cx(PSe,{authorizationPrimaryType:()=>$Se,authorizationTypes:()=>RSe,config:()=>N1e,createClientAvalancheFuji:()=>ySe,createClientSepolia:()=>gSe,createConnectedClient:()=>jx,createSigner:()=>zx,createSignerAvalancheFuji:()=>bSe,createSignerSepolia:()=>wSe,getChainFromNetwork:()=>Wx,isAccount:()=>_Se,isSignerWallet:()=>vSe,isZkStackChain:()=>AU,usdcABI:()=>D1e});var RSe={TransferWithAuthorization:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"validAfter",type:"uint256"},{name:"validBefore",type:"uint256"},{name:"nonce",type:"bytes32"}]},$Se="TransferWithAuthorization",NSe={};Cx(NSe,{SvmAddressRegex:()=>qx});var qx=/^[1-9A-HJ-NP-Za-km-z]{32,44}$/,DSe=/^[A-Za-z0-9+/]*={0,2}$/,USe=18,H_=/^0x[0-9a-fA-F]{40}$/,Vx=/^0x[a-fA-F0-9]{40}|[A-Za-z0-9][A-Za-z0-9-]{0,34}[A-Za-z0-9]$/,BSe=/^0x[0-9a-fA-F]{64}$/,MSe=/^0x[0-9a-fA-F]+$/,Hx=["exact"],sp=[1],Kx=["insufficient_funds","invalid_exact_evm_payload_authorization_valid_after","invalid_exact_evm_payload_authorization_valid_before","invalid_exact_evm_payload_authorization_value","invalid_exact_evm_payload_signature","invalid_exact_evm_payload_undeployed_smart_wallet","invalid_exact_evm_payload_recipient_mismatch","invalid_exact_svm_payload_transaction","invalid_exact_svm_payload_transaction_amount_mismatch","invalid_exact_svm_payload_transaction_create_ata_instruction","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_payee","invalid_exact_svm_payload_transaction_create_ata_instruction_incorrect_asset","invalid_exact_svm_payload_transaction_instructions","invalid_exact_svm_payload_transaction_instructions_length","invalid_exact_svm_payload_transaction_instructions_compute_limit_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction","invalid_exact_svm_payload_transaction_instructions_compute_price_instruction_too_high","invalid_exact_svm_payload_transaction_instruction_not_spl_token_transfer_checked","invalid_exact_svm_payload_transaction_instruction_not_token_2022_transfer_checked","invalid_exact_svm_payload_transaction_fee_payer_included_in_instruction_accounts","invalid_exact_svm_payload_transaction_fee_payer_transferring_funds","invalid_exact_svm_payload_transaction_not_a_transfer_instruction","invalid_exact_svm_payload_transaction_receiver_ata_not_found","invalid_exact_svm_payload_transaction_sender_ata_not_found","invalid_exact_svm_payload_transaction_simulation_failed","invalid_exact_svm_payload_transaction_transfer_to_incorrect_ata","invalid_network","invalid_payload","invalid_payment_requirements","invalid_scheme","invalid_payment","payment_expired","unsupported_scheme","invalid_x402_version","invalid_transaction_state","invalid_x402_version","settle_exact_svm_block_height_exceeded","settle_exact_svm_transaction_confirmation_timed_out","unsupported_scheme","unexpected_settle_error","unexpected_verify_error"],Im=t=>Number.isInteger(Number(t))&&Number(t)>=0,LSe=t=>e=>e.length<=t,Gx=Nt().regex(H_).or(Nt().regex(qx)),FSe=Nt().regex(Vx).or(Nt().regex(qx)),ip=Fn({scheme:Gi(Hx),network:u0,maxAmountRequired:Nt().refine(Im),resource:Nt().url(),description:Nt(),mimeType:Nt(),outputSchema:Ic(Su()).optional(),payTo:Gx,maxTimeoutSeconds:Rs().int(),asset:FSe,extra:Ic(Su()).optional()}),jSe=Fn({from:Nt().regex(H_),to:Nt().regex(H_),value:Nt().refine(Im).refine(LSe(USe)),validAfter:Nt().refine(Im),validBefore:Nt().refine(Im),nonce:Nt().regex(BSe)}),zSe=Fn({signature:Nt().regex(MSe),authorization:jSe}),WSe=Fn({transaction:Nt().regex(DSe)}),CU=Fn({x402Version:Rs().refine(t=>sp.includes(t)),scheme:Gi(Hx),network:u0,payload:lP([zSe,WSe])});Fn({x402Version:Rs().refine(t=>sp.includes(t)),error:Gi(Kx).optional(),accepts:my(ip).optional(),payer:Nt().regex(Vx).optional()});var qSe=Gi(["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD"]),VSe=Fn({type:GH("http"),method:qSe,queryParams:Ic(Nt(),Nt()).optional(),bodyType:Gi(["json","form-data","multipart-form-data","text","binary"]).optional(),bodyFields:Ic(Nt(),Su()).optional(),headerFields:Ic(Nt(),Su()).optional()});KH("type",[VSe]);var HSe=Fn({resource:Nt(),type:Gi(["http"]),x402Version:Rs().refine(t=>sp.includes(t)),accepts:my(ip),lastUpdated:HH(),metadata:Ic(Su()).optional()});Fn({paymentPayload:CU,paymentRequirements:ip});Fn({paymentPayload:CU,paymentRequirements:ip});Fn({isValid:cP(),invalidReason:Gi(Kx).optional(),payer:Gx.optional()});Fn({success:cP(),errorReason:Gi(Kx).optional(),payer:Gx.optional(),transaction:Nt().regex(Vx),network:u0});Fn({type:Nt().optional(),limit:Rs().optional(),offset:Rs().optional()});Fn({x402Version:Rs().refine(t=>sp.includes(t)),items:my(HSe),pagination:Fn({limit:Rs(),offset:Rs(),total:Rs()})});var KSe=Fn({x402Version:Rs().refine(t=>sp.includes(t)),scheme:Gi(Hx),network:u0,extra:Ic(Su()).optional()});Fn({kinds:my(KSe)});var GSe={};Cx(GSe,{createDevnetRpcClient:()=>SU,createMainnetRpcClient:()=>IU,createSignerFromBase58:()=>kSe,createSvmConnectedClient:()=>CSe,decodeTransactionFromPayload:()=>YSe,getRpcClient:()=>TU,getRpcSubscriptions:()=>TSe,getTokenPayerFromTransaction:()=>ZSe,isSignerWallet:()=>OSe,signAndSimulateTransaction:()=>JSe,signTransactionWithSigner:()=>kU});function YSe(t){try{const n=r2e().encode(t.transaction);return Rxe().decode(n)}catch(e){throw console.error("error",e),new Error("invalid_exact_svm_payload_transaction")}}function ZSe(t){const e=nxe().decode(t.messageBytes),n=e.staticAccounts??[],r=e.instructions??[];for(const s of r){const i=s.programAddressIndex,a=n[i].toString();if(a===_U.toString()||a===hSe.toString()){const o=s.accountIndices??[];if(o.length>=4){const c=o[3],l=n[c].toString();if(l)return l}}}return""}async function JSe(t,e,n){const r=await kU(t,e),s=Dxe(r),i={sigVerify:!0,replaceRecentBlockhash:!1,commitment:"confirmed",encoding:"base64",accounts:void 0,innerInstructions:void 0,minContextSlot:void 0};return await n.simulateTransaction(s,i).send()}async function kU(t,e){if(yU(t)){const[n]=await t.modifyAndSignTransactions([e]);if(!n)throw new Error("transaction_signer_failed_to_return_transaction");return n}if(wU(t)){const[n]=await t.signTransactions([e]);if(!n)throw new Error("transaction_signer_failed_to_return_signatures");return XSe(e,n)}throw new Error("transaction_signer_must_support_offline_signing")}function XSe(t,e){return Object.freeze({...t,signatures:Object.freeze({...t.signatures,...e})})}Fn({paymentHeader:Nt(),paymentRequirements:ip});class Io{static parse(e){try{return new Io(e)}catch{return null}}static throwIfNotWellFormedJwt(e){return uv(e),e}get subject(){return this._decoded.sub}get expiration(){return this._decoded.exp}get issuer(){return this._decoded.iss}get audience(){return this._decoded.aud}isExpired(e=0){return Date.now()>=1e3*(this.expiration-e)}constructor(e){this.value=e,this._decoded=uv(e)}}class Yx extends Io{static parse(e){try{return new Yx(e)}catch{return null}}get appId(){return this._decoded.aid?this._decoded.aid:this.audience}}const F8e=({style:t,...e})=>R.jsxs("svg",{viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"28px",width:"28px",...t},...e,children:[R.jsx("rect",{width:"1024",height:"1024",fill:"#0052FF",rx:100,ry:100}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z",fill:"white"})]}),QSe="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PScwIDAgMTAyNCAxMDI0JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHN0eWxlPSdoZWlnaHQ6MjhweDt3aWR0aDoyOHB4Jz48cmVjdCB3aWR0aD0nMTAyNCcgaGVpZ2h0PScxMDI0JyBmaWxsPScjMDA1MkZGJyByeD0nMTAwJyByeT0nMTAwJz48L3JlY3Q+PHBhdGggZmlsbC1ydWxlPSdldmVub2RkJyBjbGlwLXJ1bGU9J2V2ZW5vZGQnIGQ9J00xNTIgNTEyQzE1MiA3MTAuODIzIDMxMy4xNzcgODcyIDUxMiA4NzJDNzEwLjgyMyA4NzIgODcyIDcxMC44MjMgODcyIDUxMkM4NzIgMzEzLjE3NyA3MTAuODIzIDE1MiA1MTIgMTUyQzMxMy4xNzcgMTUyIDE1MiAzMTMuMTc3IDE1MiA1MTJaTTQyMCAzOTZDNDA2Ljc0NSAzOTYgMzk2IDQwNi43NDUgMzk2IDQyMFY2MDRDMzk2IDYxNy4yNTUgNDA2Ljc0NSA2MjggNDIwIDYyOEg2MDRDNjE3LjI1NSA2MjggNjI4IDYxNy4yNTUgNjI4IDYwNFY0MjBDNjI4IDQwNi43NDUgNjE3LjI1NSAzOTYgNjA0IDM5Nkg0MjBaJyBmaWxsPSd3aGl0ZSc+PC9wYXRoPjwvc3ZnPg==",eIe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAALZJREFUaEPtmjEOhDAMBNc/O14GvOzys3CAKK6eAlmaVGl2Zc+kTOU685vkc9/bnD2prZK5/TZY24z9P+g4F5hNh7/GdoG37WlAA5CATwgCxHENYISwQAMQII5rACOEBRqAAHFcAxghLNAABIjjGsAIYYEGIEAc1wBGCAs0AAHiuAYwQligAQgQxzWAEcICDUCAOK4BjBAWaAACxHENYISwQAMQII6fBjr+VHkW3+u+tfyxMpJaDgYzYxb/ALZVAAAAAElFTkSuQmCC";let Rl,Dd;class tIe extends sl{async initialize(){await this.importPromise,await this.syncAccounts(),this.initialized=!0,this.emit("initialized")}async connect(e){return e.showPrompt&&await this.promptConnection(),await this.isConnected()?this.getConnectedWallet():null}disconnect(){this.proxyProvider.walletProvider.disconnect(),this.onDisconnect()}get walletBranding(){return{name:this.displayName,icon:eIe,id:"com.coinbase.wallet"}}async promptConnection(){try{await this.importPromise;let e=await this.proxyProvider.request({method:"eth_requestAccounts"});if(!e||e.length===0||!e[0])throw new qt("Unable to retrieve accounts");this.connected=!0,await this.syncAccounts([e[0]])}catch(e){throw Wo(e)}}constructor(e,n,r,s,i){super("base_account",e,n,r),this.connectorType="base_account",this.walletClientType="base_account",this.displayName="Base",this.setBaseAccountSdk=i,this.proxyProvider=new il(void 0,this.rpcTimeoutDuration),this.subscribeListeners(),this.baseAccountConfig={...s,appChainIds:[n.id].concat(e.map((a=>a.id)))},Rl?(this.proxyProvider.setWalletProvider(Rl.getProvider()),this.setBaseAccountSdk(Rl)):this.importPromise=xe(()=>import("./index.D-Tq3YiE.js"),__vite__mapDeps([3,1,4,5])).then((({createBaseAccountSDK:a})=>{Rl=a(this.baseAccountConfig),this.proxyProvider.setWalletProvider(Rl.getProvider()),this.setBaseAccountSdk(Rl)})).catch(console.error)}}let nIe=[1,11155111,137,10,8453,84532,42161,7777777,43114,56];class rIe extends sl{async initialize(){await this.syncAccounts(),this.initialized=!0,this.emit("initialized")}async connect(e){return e.showPrompt&&await this.promptConnection(),await this.isConnected()?this.getConnectedWallet():null}disconnect(){this.proxyProvider.walletProvider.disconnect(),this.onDisconnect()}get walletBranding(){return{name:this.displayName,icon:QSe,id:"com.coinbase.wallet"}}async promptConnection(){try{let e=await this.proxyProvider.request({method:"eth_requestAccounts"});if(!e||e.length===0||!e[0])throw new qt("Unable to retrieve accounts");this.connected=!0,await this.syncAccounts([e[0]])}catch(e){throw Wo(e)}}updateConnectionPreference(e){this.coinbaseWalletConfig={...this.coinbaseWalletConfig,preference:{...this.coinbaseWalletConfig.preference,options:e}},this.walletClientType=e==="smartWalletOnly"?"coinbase_smart_wallet":"coinbase_wallet",Dd=ZI({...this.coinbaseWalletConfig}),this.proxyProvider.setWalletProvider(Dd.getProvider())}constructor(e,n,r,s){if(super("coinbase_wallet",e,n,r),this.connectorType="coinbase_wallet",this.displayName="Coinbase Wallet",this.proxyProvider=new il(void 0,this.rpcTimeoutDuration),this.subscribeListeners(),this.coinbaseWalletConfig={...s,appChainIds:[n.id].concat(e.map((i=>i.id)))},this.walletClientType=this.coinbaseWalletConfig.preference?.options==="smartWalletOnly"?"coinbase_smart_wallet":"coinbase_wallet",this.walletClientType==="coinbase_smart_wallet"&&(this.displayName="Coinbase Smart Wallet"),!Dd){let i=this.coinbaseWalletConfig.preference?.options!=="eoaOnly"?(this.coinbaseWalletConfig.appChainIds??[]).filter((a=>!nIe.includes(a))):[];i.length>0&&!i.every((a=>_L.has(a)))&&console.info(`The configured chains are not supported by Coinbase Smart Wallet: ${i.join(", ")}`),Dd=ZI(this.coinbaseWalletConfig)}this.proxyProvider.setWalletProvider(Dd.getProvider())}}const sIe=({...t})=>R.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.37126 11.0323C2.37126 12.696 3.90598 13.4421 5.40654 13.4468C8.91753 13.4468 12.8021 11.2897 12.7819 7.67984C12.7673 5.07728 10.3748 2.86167 7.54357 2.88296C4.8495 2.88296 2.21821 4.6411 2.21803 7.03628C2.21803 7.67951 2.58722 8.30178 3.55231 8.37184C2.74763 9.16826 2.37126 10.1225 2.37126 11.0323ZM7.55283 8.68012C8.11562 8.68012 8.57186 8.13217 8.57186 7.45624C8.57186 6.78032 8.11562 6.23237 7.55283 6.23237C6.99003 6.23237 6.53379 6.78032 6.53379 7.45624C6.53379 8.13217 6.99003 8.68012 7.55283 8.68012ZM10.4747 8.68012C11.0375 8.68012 11.4937 8.13217 11.4937 7.45625C11.4937 6.78032 11.0375 6.23237 10.4747 6.23237C9.91186 6.23237 9.45562 6.78032 9.45562 7.45625C9.45562 8.13217 9.91186 8.68012 10.4747 8.68012Z",fill:t.color||"var(--privy-color-foreground-3)"})});class Ik extends sl{async initialize(){await this.syncAccounts(),this.initialized=!0,this.emit("initialized")}async connect(e){return await this.isConnected()?(await this.proxyProvider.request({method:"wallet_switchEthereumChain",params:[_1(e?.chainId||"0x1")]}),this.getConnectedWallet()):null}get walletBranding(){return{name:"Privy Wallet",icon:sIe,id:"io.privy.wallet"}}disconnect(){this.connected=!1}async promptConnection(){}constructor({provider:e,chains:n,defaultChain:r,rpcConfig:s,imported:i,walletIndex:a}){super("privy",n,r,s),this.connectorType="embedded",this.proxyProvider=e,this.walletIndex=a,i&&(this.connectorType="embedded_imported"),this.subscribeListeners()}}async function jt(){let t=HU();return t?t.getAccessToken():Promise.resolve(Ne.get(im)||Ne.get(jd)||null)}const iIe=["eth_sign","eth_populateTransactionRequest","eth_signTransaction","personal_sign","eth_signTypedData_v4","csw_signUserOperation","secp256k1_sign"];function cf(t){return t?{"privy-ui":"t"}:void 0}class eu{async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.email||!this.meta.emailCode)throw new Y("Email and email code must be set prior to calling authenticate.");try{return await this.api.post(uQ,{email:this.meta.email,code:this.meta.emailCode,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"})}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.email||!this.meta.emailCode)throw new Y("Email and email code must be set prior to calling authenticate.");try{return await this.api.post(dQ,{email:this.meta.email,code:this.meta.emailCode})}catch(e){throw dt(e)}}async sendCodeEmail({email:e,captchaToken:n,withPrivyUi:r}){if(!this.api)throw new Y("Auth flow has no API instance");if(e&&(this.meta.email=e),n&&(this.meta.captchaToken=n),!this.meta.email)throw new Y("Email must be set when initialzing authentication.");let s=cf(r);try{return await this.api.post(lQ,{email:this.meta.email,token:this.meta.captchaToken},{headers:{...s}})}catch(i){throw dt(i)}}constructor({email:e,captchaToken:n,disableSignup:r}){this.meta={email:e,captchaToken:n,disableSignup:r??!1}}}class aIe extends eu{async link(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.email||!this.meta.emailCode||!this.meta.oldAddress)throw new Y("Email, email code, and an old email address must be set prior to calling update.");try{return await this.api.post(fQ,{oldAddress:this.meta.oldAddress,newAddress:this.meta.email,code:this.meta.emailCode})}catch(e){throw dt(e)}}constructor(e,n,r){super({email:n,captchaToken:r}),this.meta={email:n,captchaToken:r,oldAddress:e,disableSignup:!1}}}class ni{execute(e){return this.promise===null&&(this.promise=(async()=>{try{return await this.fn(e)}finally{this.promise=null}})()),this.promise}constructor(e){this.promise=null,this.fn=e}}class Tk{get meta(){return this._meta}async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.channelToken)throw new Y("Auth flow must be initialized first");try{let e=await this.api.post(sQ,{channel_token:this.meta.channelToken,message:this.message,signature:this.signature,fid:this.fid,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"});if(!e)throw new Y("No response from authentication");return e}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(iQ,{channel_token:this.meta.channelToken,message:this.message,signature:this.signature,fid:this.fid})}catch(e){throw dt(e)}}async _startChannelOnce(){if(!this.api)throw new Y("Auth flow has no API instance");let e=await this.api.post(rQ,{token:this.captchaToken});Ba.isMobile&&!Ba.isIOS&&e.connect_uri&&p$(e.connect_uri,"_blank"),this._meta={...this._meta,connectUri:e.connect_uri,channelToken:e.channel_token}}async initializeFarcasterConnect(){if(!this.api)throw new Y("Auth flow has no API instance");await this.startChannelOnce.execute()}async _pollForReady(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.channelToken)throw new Y("Auth flow must be initialized first");let e=await this.api.get(aQ,{headers:{"farcaster-channel-token":this.meta.channelToken}});return e.state==="completed"&&(this.message=e.message,this.signature=e.signature,this.fid=e.fid,!0)}constructor(e,n=!1){this._meta={disableSignup:!1},this.captchaToken=e,this.startChannelOnce=new ni(this._startChannelOnce.bind(this)),this.pollForReady=new ni(this._pollForReady.bind(this)),this._meta.disableSignup=n}}function Zx(){return typeof window<"u"&&window.location.protocol==="chrome-extension:"&&"chrome"in window}function OU(){return Zx()?window.chrome?.runtime?.id:void 0}function K_(){return Zx()?typeof window.chrome?.identity?.launchWebAuthFlow=="function":!1}async function Ck(t){return new Promise(((e,n)=>{K_()?window.chrome.identity.launchWebAuthFlow({url:t,interactive:!0},(async r=>{try{let s=(function(){return Zx()?window.chrome?.runtime?.lastError?.message:void 0})();if(s||!r){let l=`WebAuthFlow failed: ${s||"Response URI missing"}`;throw Error(l)}let i=new URL(r),a=OU();if(!a)throw Error("Invalid extension context");if(i.protocol==="chrome-extension:"){if(i.hostname!==a)throw Error("Invalid responseUri origin")}else{if(i.protocol!=="https:")throw Error("Invalid responseUri protocol");{let l=i.hostname.split(".");if(l.length!==3||l[1]!=="chromiumapp"||l[2]!=="org"||l[0]!==a)throw Error("Invalid responseUri origin")}}let o=i.searchParams.get("privy_oauth_state"),c=i.searchParams.get("privy_oauth_code");if(!o||!c)throw Error("Invalid responseUri - missing required parameters");e({privyOAuthState:o,privyOAuthCode:c})}catch(s){n(s)}})):n(Error("Chrome identity API not available"))}))}function G_(t){return crypto.getRandomValues(new Uint8Array(t))}function Jx(){return Cc(G_(36))}function PU(){return Jx()}async function RU(t,e="S256"){if(e!="S256")return t;{let n=await(async function(r){let s=new TextEncoder().encode(r);return new Uint8Array(await crypto.subtle.digest("SHA-256",s))})(t);return Cc(n)}}class jl{addCaptchaToken(e){this.meta.captchaToken=e}isActive(){return!!(this.meta.authorizationCode&&this.meta.stateCode&&this.meta.provider)}async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.authorizationCode||!this.meta.stateCode)throw new Y("[OAuth AuthFlow] Authorization and state codes code must be set prior to calling authenticate.");if(this.meta.authorizationCode==="undefined")throw new Y("User denied confirmation during OAuth flow");let e=(function(){let n=Ne.get(ud);if(!n)throw new Y("Authentication error.");return n})();try{let n=await this.api.post(c$,{authorization_code:this.meta.authorizationCode,state_code:this.meta.stateCode,code_verifier:e,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"});return Ne.del(ud),Ne.del(Qm),Ne.del(th),n}catch(n){let r=dt(n);throw r.privyErrorCode?new Y(r.message||"Invalid code during OAuth flow.",void 0,r.privyErrorCode):r.message==="User denied confirmation during OAuth flow"?new Y("Invalid code during oauth flow.",void 0,ie.OAUTH_USER_DENIED):new Y("Invalid code during OAuth flow.",void 0,ie.UNKNOWN_AUTH_ERROR)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.authorizationCode||!this.meta.stateCode)throw new Y("[OAuth AuthFlow] Authorization and state codes code must be set prior to calling link.");if(this.meta.authorizationCode==="undefined")throw new Y("User denied confirmation during OAuth flow");let e=Ne.get(ud);if(!e)throw new Y("Authentication error.");try{let n=await this.api.post(l$,{authorization_code:this.meta.authorizationCode,state_code:this.meta.stateCode,code_verifier:e});return Ne.del(ud),n}catch(n){throw dt(n)}}async getAuthorizationUrl(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.provider)throw new Y("Provider must be set when initializing OAuth authentication.");let e=Jx();Ne.put(ud,e);let n=PU();Ne.put(Xm,n);let r=await RU(e);this.meta.withPrivyUi||Ne.put(Qm,!0),this.meta.disableSignup?Ne.put(th,!0):Ne.del(th);let s=cf(this.meta.withPrivyUi),i=window.location.href,a=(function(){let o=OU();if(o)return`https://${o}.chromiumapp.org`})();a&&(i=a);try{return await this.api.post(o$,{provider:this.meta.provider,redirect_to:this.meta.customOAuthRedirectUrl||i,token:this.meta.captchaToken,code_challenge:r,state_code:n},{headers:{...s}})}catch(o){throw dt(o)}}constructor(e){this.meta=e}}function oIe(){let t=new URLSearchParams(window.location.search),e=t.get("privy_oauth_code"),n=t.get("privy_oauth_state"),r=t.get("privy_oauth_provider");if(!e||!n||!r)return{inProgress:!1};let s=!1;try{s=!!window.opener.location.origin}catch{}return{inProgress:!0,authorizationCode:e,stateCode:n,provider:r,withPrivyUi:!Ne.get(Qm),popupFlow:window.opener!==null&&s,disableSignup:!!Ne.get(th)}}function j8e(){let t=new URL(window.location.href);t.searchParams.delete("privy_oauth_code"),t.searchParams.delete("privy_oauth_provider"),t.searchParams.delete("privy_oauth_state"),Ne.del(Xm),window.history.replaceState({},"",t)}class $l{async initRegisterFlow(e){if(!this.api)throw new Y("Auth flow has no API instance");this.authenticateForRegistration=!0,this.meta.initRegisterResponse=await this.initRegisterOnce.execute(e)}async initAuthenticationFlow(e){if(!this.api)throw new Y("Auth flow has no API instance");this.authenticateForRegistration=!1,this.meta.initAuthenticateResponse=await this.initAuthenticateOnce.execute(e)}async initLinkFlow(){if(!this.api)throw new Y("Auth flow has no API instance");this.meta.initLinkResponse=await this.initLinkOnce.execute()}async register(){let e=await xe(()=>import("./index.D9std1Z8.js"),[]);if(!this.api)throw new Y("Auth flow has no API instance");if(!e.browserSupportsWebAuthn())throw new Y("WebAuthn is not supported in this browser");this.meta.initRegisterResponse||(this.meta.initRegisterResponse=await this.initRegisterOnce.execute());try{let n=this.meta.initRegisterResponse.options,r=await e.startRegistration({optionsJSON:this._transformInitLinkOptionsToCamelCase(n)});return this.meta.setPasskeyAuthState?.({status:"submitting-response"}),await this.api.post(CQ,{relying_party:this.meta.initRegisterResponse.relying_party,authenticator_response:this._transformRegistrationResponseToSnakeCase(r)})}catch(n){throw n.name==="NotAllowedError"?new Y("Passkey request timed out or rejected by user.",void 0,ie.PASSKEY_NOT_ALLOWED):dt(n)}}async authenticate(){if(this.authenticateForRegistration)return this.register();let e=await xe(()=>import("./index.D9std1Z8.js"),[]);if(!this.api)throw new Y("Auth flow has no API instance");if(!e.browserSupportsWebAuthn())throw new Y("WebAuthn is not supported in this browser");this.meta.initAuthenticateResponse||(this.meta.initAuthenticateResponse=await this.initAuthenticateOnce.execute());let n=this.meta.allowedCredentialsIds?.map((r=>({type:"public-key",id:r})))??this.meta.initAuthenticateResponse.options.allow_credentials;try{let r=await e.startAuthentication({optionsJSON:this._transformInitAuthenticateOptionsToCamelCase({...this.meta.initAuthenticateResponse.options,allow_credentials:n})});return this.meta.setPasskeyAuthState?.({status:"submitting-response"}),await this.api.post(TQ,{relying_party:this.meta.initAuthenticateResponse.relying_party,challenge:this.meta.initAuthenticateResponse.options.challenge,authenticator_response:this._transformAuthenticationResponseToSnakeCase(r)})}catch(r){throw r.name==="NotAllowedError"?new Y("Passkey request timed out or rejected by user.",void 0,ie.PASSKEY_NOT_ALLOWED):dt(r)}}async link(){let e=await xe(()=>import("./index.D9std1Z8.js"),[]);if(!this.api)throw new Y("Auth flow has no API instance");if(!e.browserSupportsWebAuthn())throw new Y("WebAuthn is not supported in this browser");this.meta.initLinkResponse||(this.meta.initLinkResponse=await this.initLinkOnce.execute());try{let n=this.meta.initLinkResponse.options,r=await e.startRegistration({optionsJSON:this._transformInitLinkOptionsToCamelCase(n)});return this.meta.setPasskeyAuthState?.({status:"submitting-response"}),await this.api.post(IQ,{relying_party:this.meta.initLinkResponse.relying_party,authenticator_response:this._transformRegistrationResponseToSnakeCase(r)})}catch(n){throw n.name==="NotAllowedError"?new Y("Passkey request timed out or rejected by user.",void 0,ie.PASSKEY_NOT_ALLOWED):dt(n)}}async _initRegisterOnce(e){if(!this.api)throw new Y("Auth flow has no API instance");let n=cf(e);return await this.api.post(SQ,{token:this.meta.captchaToken},{headers:{...n}})}async _initAuthenticateOnce(e){if(!this.api)throw new Y("Auth flow has no API instance");let n=cf(e);return await this.api.post(AQ,{token:this.meta.captchaToken},{headers:{...n}})}async _initLinkOnce(){if(!this.api)throw new Y("Auth flow has no API instance");return await this.api.post(xQ,{})}_transformInitLinkOptionsToCamelCase(e){return{rp:e.rp,user:{id:e.user.id,name:e.user.name,displayName:e.user.display_name},challenge:e.challenge,pubKeyCredParams:e.pub_key_cred_params.map((n=>({type:n.type,alg:n.alg}))),timeout:e.timeout,excludeCredentials:e.exclude_credentials?.map((n=>({id:n.id,type:n.type,transports:n.transports}))),authenticatorSelection:{authenticatorAttachment:e.authenticator_selection?.authenticator_attachment,requireResidentKey:e.authenticator_selection?.require_resident_key,residentKey:e.authenticator_selection?.resident_key,userVerification:e.authenticator_selection?.user_verification},attestation:e.attestation,extensions:{appid:e.extensions?.app_id,credProps:e.extensions?.cred_props?.rk,hmacCreateSecret:e.extensions?.hmac_create_secret},hints:this.meta.hints}}_transformRegistrationResponseToSnakeCase(e){return{id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,attestation_object:e.response.attestationObject,authenticator_data:e.response.authenticatorData},authenticator_attachment:e.authenticatorAttachment,client_extension_results:{app_id:e.clientExtensionResults.appid,cred_props:e.clientExtensionResults.credProps,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret},type:e.type}}_transformInitAuthenticateOptionsToCamelCase(e){return{rpId:e.rp_id,challenge:e.challenge,allowCredentials:e.allow_credentials?.map((n=>({id:n.id,type:n.type,transports:n.transports})))||[],timeout:e.timeout,extensions:{appid:e.extensions?.app_id,credProps:e.extensions?.cred_props,hmacCreateSecret:e.extensions?.hmac_create_secret},userVerification:e.user_verification}}_transformAuthenticationResponseToSnakeCase(e){return{id:e.id,raw_id:e.rawId,response:{client_data_json:e.response.clientDataJSON,authenticator_data:e.response.authenticatorData,signature:e.response.signature,user_handle:e.response.userHandle},authenticator_attachment:e.authenticatorAttachment,client_extension_results:{app_id:e.clientExtensionResults.appid,cred_props:e.clientExtensionResults.credProps,hmac_create_secret:e.clientExtensionResults.hmacCreateSecret},type:e.type}}constructor({captchaToken:e,setPasskeyAuthState:n,hints:r}){this.authenticateForRegistration=!1,this.initRegisterOnce=new ni(this._initRegisterOnce.bind(this)),this.initAuthenticateOnce=new ni(this._initAuthenticateOnce.bind(this)),this.initLinkOnce=new ni(this._initLinkOnce.bind(this)),this.meta={captchaToken:e,setPasskeyAuthState:n,hints:r}}}const Y_=({address:t,chainId:e,nonce:n})=>`${window.location.host} wants you to sign in with your Ethereum account:
${t}

By signing, you are proving you own this wallet and logging in. This does not initiate a transaction or cost any fees.

URI: ${window.location.origin}
Version: 1
Chain ID: ${e}
Nonce: ${n}
Issued At: ${new Date().toISOString()}
Resources:
- https://privy.io`;class Tm{get meta(){return{connectorType:this.wallet?.connectorType,walletClientType:this.wallet?.walletClientType,chainId:this.wallet?.chainId,address:this.wallet?.address,disableSignup:this._meta.disableSignup}}async authenticate(){if(!this.client)throw new Y("SiweFlow has no client instance");try{if(this.preparedMessage&&this.signature)return await this.client.authenticateWithSiweInternal({message:this.preparedMessage,signature:this.signature,chainId:this.wallet?.chainId,walletClientType:this.walletClientType??this.wallet?.walletClientType,connectorType:this.connectorType??this.wallet?.connectorType,mode:this._meta.disableSignup?"no-signup":"login-or-sign-up"});if(!this.wallet)throw new Y("SiweFlow has no wallet instance");let{message:e,signature:n}=await this.sign();return await this.client.authenticateWithSiweInternal({message:e,signature:n,chainId:this.wallet.chainId,walletClientType:this.wallet.walletClientType,connectorType:this.wallet.connectorType,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"})}catch(e){throw dt(e)}}async link(){if(!this.client)throw new Y("SiweFlow has no client instance");try{if(!this.wallet)throw new Y("SiweFlow has no wallet instance");let{message:e,signature:n}=await this.sign();return await this.client.linkWithSiweInternal({message:e,signature:n,chainId:this.wallet.chainId,walletClientType:this.wallet.walletClientType,connectorType:this.wallet.connectorType})}catch(e){throw dt(e)}}async sign(){if(!this.client)throw new Y("SiweFlow has no client instance");if(await this.buildMessage(),!this.preparedMessage)throw new Y("Could not prepare SIWE message");if(!this.wallet)throw new Y("SiweFlow has no wallet instance");let e=await this.wallet.sign(this.preparedMessage);return{message:this.preparedMessage,signature:e}}async _getNonceOnce(){if(!this.client)throw new Y("SiweFlow has no client instance");if(!this.wallet)throw new Y("UI SiweFlow has no wallet instance");return await this.client.generateSiweNonce({address:this.wallet.address,captchaToken:this.captchaToken})}async buildMessage(){if(!this.client)throw new Y("SiweFlow has no client instance");if(!this.wallet)throw new Y("SiweFlow has no wallet instance");let e=this.wallet.address,n=this.wallet.chainId.replace("eip155:","");return this.nonce||(this.nonce=await this.getNonceOnce.execute()),this.preparedMessage=Y_({address:e,chainId:n,nonce:this.nonce}),this.preparedMessage}constructor(e,n,r,s=!1,i){this._meta={disableSignup:!1},this.getNonceOnce=new ni(this._getNonceOnce.bind(this)),this.wallet=n,this.captchaToken=r,this.client=e,this._meta.disableSignup=s,this.preparedMessage=i?.message,this.signature=i?.signature,this.walletClientType=i?.walletClientType,this.connectorType=i?.connectorType}}class kk{get meta(){return{connectorType:this.wallet.connectorType,walletClientType:this.wallet.walletClientType,disableSignup:this._meta.disableSignup,messageType:this._meta.messageType,address:this.wallet?.address}}set messageType(e){this._meta.messageType=e}async authenticate(){if(!this.client)throw new Y("SiwsFlow has no client instance");try{let{message:e,signature:n}=await this.sign();return await this.client.authenticateWithSiwsInternal({message:e,signature:n,walletClientType:this.wallet.walletClientType,connectorType:this.wallet.connectorType,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up",messageType:this.meta.messageType})}catch(e){throw dt(e)}}async link(){if(!this.client)throw new Y("SiwsFlow has no client instance");try{let{message:e,signature:n}=await this.sign();return await this.client.linkWithSiwsInternal({message:e,signature:n,walletClientType:this.wallet.walletClientType,connectorType:this.wallet.connectorType,messageType:this.meta.messageType})}catch(e){throw dt(e)}}async sign(){let e,n;if(!this.client)throw new Y("SiwsFlow has no client instance");await this.buildMessage();let r=this.meta.messageType==="transaction";if(!this.preparedMessage)throw new Y("Could not prepare SIWS message");if(!r&&!this.wallet.provider.signMessage||r&&!this.wallet.provider.signTransaction)throw new Y("Wallet does not support the necessary signing methods");if(r&&this._plugin){let s=await this.wallet.provider.signTransaction({transaction:Aw.decode(this.preparedMessage)});e=Aw.encode(s.signedTransaction),n=this._plugin.getSignatureFromTransaction(s.signedTransaction,this.wallet.address)}else{e=this.preparedMessage;let s=await this.wallet.provider.signMessage({message:new TextEncoder().encode(this.preparedMessage)});n=Aw.encode(s.signature)}return{message:e,signature:n}}async _getNonceOnce(){if(!this.client)throw new Y("SiwsFlow has no client instance");return await this.client.generateSiwsNonce({address:this.wallet.address,captchaToken:this.captchaToken})}async buildMessage(){if(!this.client)throw new Y("SiwsFlow has no client instance");let e=this.wallet.address;return this.nonce||(this.nonce=await this.getNonceOnce.execute()),this.meta.messageType==="transaction"&&this._plugin?this.preparedMessage=this._plugin.createSiwsMemoTransaction({address:e,nonce:this.nonce}):this.preparedMessage=YQ({address:e,nonce:this.nonce}),this.preparedMessage}constructor(e,n,r,s=!1,i="plain",a){this._meta={disableSignup:!1,messageType:"plain"},this.getNonceOnce=new ni(this._getNonceOnce.bind(this)),this.wallet=e,this.captchaToken=r,this.client=n,this._meta.disableSignup=s,this._meta.messageType=i,this._plugin=a}}class tu{async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.phoneNumber||!this.meta.smsCode)throw new Y("phone number and sms code must be set prior to calling authenticate.");try{return await this.api.post(wQ,{phoneNumber:this.meta.phoneNumber,code:this.meta.smsCode,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"})}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.phoneNumber||!this.meta.smsCode)throw new Y("phone number and sms code must be set prior to calling authenticate.");try{return await this.api.post(gQ,{phoneNumber:this.meta.phoneNumber,code:this.meta.smsCode})}catch(e){throw dt(e)}}async sendSmsCode({phoneNumber:e,captchaToken:n,withPrivyUi:r}){if(!this.api)throw new Y("Auth flow has no API instance");if(e&&(this.meta.phoneNumber=e),n&&(this.meta.captchaToken=n),!this.meta.phoneNumber)throw new Y("phone nNumber must be set when initialzing authentication.");let s=cf(r);try{return await this.api.post(mQ,{phoneNumber:this.meta.phoneNumber,token:this.meta.captchaToken},{headers:{...s}})}catch(i){throw dt(i)}}constructor({phoneNumber:e,captchaToken:n,disableSignup:r}){this.meta={phoneNumber:e,captchaToken:n,disableSignup:r??!1}}}class cIe extends tu{async link(){if(!this.api)throw new Y("Auth flow has no API instance");if(!this.meta.phoneNumber||!this.meta.smsCode||!this.meta.oldPhoneNumber)throw new Y("Phone number, sms code, and an old phone number must be set prior to calling update.");try{return await this.api.post(bQ,{old_phone_number:this.meta.oldPhoneNumber,new_phone_number:this.meta.phoneNumber,code:this.meta.smsCode})}catch(e){throw dt(e)}}constructor(e,n,r){super({phoneNumber:n,captchaToken:r}),this.meta={phoneNumber:n,captchaToken:r,oldPhoneNumber:e,disableSignup:!1}}}const $U=T.createContext({enabled:!1,siteKey:"",provider:void 0,appId:void 0,token:void 0,error:void 0,status:"disabled",setToken:te,setError:te,setExecuting:te,waitForResult:()=>Promise.resolve(""),ref:{current:null},remove:kP,reset:te,execute:te});class Z_ extends zo{constructor(e,n,r){super(e||"Captcha failed"),this.type="Captcha",n instanceof Error&&(this.cause=n),this.privyErrorCode=r}}const lIe=({children:t,appId:e,captchaSiteKey:n,enabledCaptchaProvider:r})=>{let s=T.useRef(null),i=T.useRef(null),[a,o]=T.useState(),[c,l]=T.useState(),[u,d]=T.useState(!1),h=T.useMemo((()=>r?u||a||c?!u||a||c?a&&!c?{status:"success",token:a}:c?{status:"error",error:c}:{status:"ready"}:{status:"loading"}:{status:"ready"}:{status:"disabled"}),[r,a,c,u]),f=T.useMemo((()=>r?r==="turnstile"?{remove:()=>{s.current?.remove(),d(!1),l(void 0),o(void 0)},reset:()=>{s.current?.reset(),d(!1),l(void 0),o(void 0)},execute:()=>{d(!0),s.current?.execute()},waitForResult:async()=>{try{return await lI((()=>s.current?.getResponse()),{interval:200,timeout:2e4})}catch{throw new Z_("Captcha failed",null,ie.CAPTCHA_TIMEOUT)}}}:{remove:()=>{i.current?.removeCaptcha(),d(!1),l(void 0),o(void 0)},reset:()=>{i.current?.resetCaptcha(),d(!1),l(void 0),o(void 0)},execute:()=>{d(!0),i.current?.execute()},waitForResult:async()=>{try{return await lI((()=>{let m=i.current?.getResponse();if(m)return m}),{interval:200,timeout:2e4})}catch{throw new Z_("Captcha failed",null,ie.CAPTCHA_TIMEOUT)}}}:null),[r]),p=T.useMemo((()=>{if(!r||!f)return{...h,enabled:!1,siteKey:"",appId:e,setToken:te,setError:te,setExecuting:te,waitForResult:()=>Promise.resolve(void 0),remove:kP,reset:te,execute:te,provider:void 0,ref:{current:null}};let m={...h,enabled:!0,appId:e,setToken:o,setError:l,setExecuting:d};return r==="turnstile"?{...m,provider:"turnstile",ref:s,siteKey:n.split("t:")[1]??"",...f}:{...m,provider:"hcaptcha",ref:i,siteKey:n.split("h:")[1]??"",...f}}),[h,r,f,e,n]);return R.jsx($U.Provider,{value:p,children:t})},NU=()=>T.useContext($U);class Ud{async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(kQ,{captcha_token:this.meta.captchaToken,telegram_auth_result:this.meta.telegramAuthResult,telegram_web_app_data:this.meta.telegramWebAppData,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"})}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(OQ,{telegram_auth_result:this.meta.telegramAuthResult,telegram_web_app_data:this.meta.telegramWebAppData})}catch(e){throw dt(e)}}constructor(e,n=!1){this.meta={disableSignup:!1},this.meta={captchaToken:e,disableSignup:!1},this.meta.disableSignup=n}}function z8e(t){let e={detail:"",retryable:!1};return t?.privyErrorCode===ie.LINKED_TO_ANOTHER_USER&&(e.detail="This account has already been linked to another user."),t?.privyErrorCode===ie.DISALLOWED_LOGIN_METHOD&&(e.detail="Login with Telegram not allowed."),t?.privyErrorCode===ie.INVALID_DATA&&(e.retryable=!0,e.detail="Something went wrong. Try again."),t?.privyErrorCode===ie.CANNOT_LINK_MORE_OF_TYPE&&(e.retryable=!0,e.detail="Something went wrong. Try again."),t?.privyErrorCode===ie.INVALID_CREDENTIALS&&(e.retryable=!0,e.detail="Something went wrong. Try again."),t?.privyErrorCode===ie.TOO_MANY_REQUESTS&&(e.detail="Too many requests. Please wait before trying again."),t?.privyErrorCode===ie.TOO_MANY_REQUESTS&&t.message.includes("rate limit")&&(e.detail="Request limit reached for Telegram. Please wait a moment and try again."),t instanceof Z_&&(e.retryable=!0,e.detail="Something went wrong. Try again."),e}function Ok(t){return Object.fromEntries(decodeURIComponent(t).split("&").map((e=>e.split("=").map(decodeURIComponent))))}function Pk(){let t=new URL(window.location.href);t.searchParams.delete("id"),t.searchParams.delete("hash"),t.searchParams.delete("auth_date"),t.searchParams.delete("first_name"),t.searchParams.delete("last_name"),t.searchParams.delete("username"),t.searchParams.delete("photo_url"),t.hash="",window.history.replaceState({},"",t)}let uIe=T.lazy((()=>xe(()=>import("./TurnstileWrapper-Co-t5mTh.8sGpBxK9.js"),__vite__mapDeps([6,1])))),dIe=T.lazy((()=>xe(()=>import("./HCaptchaWrapper-CUi9LJsp.DMsR-ddz.js"),__vite__mapDeps([7,1]))));const hIe=t=>{let e=NU();return T.useEffect((()=>e.remove),[e.remove]),e.enabled&&e.provider?R.jsx(T.Suspense,{fallback:null,children:R.jsxs("div",{className:"hidden h-0 w-0",children:[e.provider==="turnstile"&&R.jsx(uIe,{...t,captchaContext:e}),e.provider==="hcaptcha"&&R.jsx(dIe,{...t,captchaContext:e})]})}):null};var d0=Object.freeze({__proto__:null,AccountNotFoundScreen:()=>xe(()=>import("./AccountNotFoundScreen-DvDKQEeR.DePqOw3m.js"),__vite__mapDeps([8,9,10,1,11,12,13])),AffirmativeConsentScreen:()=>xe(()=>import("./AffirmativeConsentScreen-DmjKmR3p.BnFN7MpI.js"),__vite__mapDeps([14,1,10,15,9,11,12,13,16])),AllowlistRejectionScreen:()=>xe(()=>import("./AllowlistRejectionScreen-Dzgqqss9.DCzrD5S0.js"),__vite__mapDeps([17,1,9,10,11,12,18,13])),AuthenticateWithWalletScreen:()=>xe(()=>import("./AuthenticateWithWalletScreen-DqEYmKRq.COSFm11i.js"),__vite__mapDeps([19,1,20,10,21,22,23,24,25,26,27,28,11,12])),AwaitingEvmToSolBridgingScreen:()=>xe(()=>import("./AwaitingEvmToSolBridgingScreen-mM0yFabb.BuZgqEUw.js"),__vite__mapDeps([29,30,1,31,10,32,33,12,34,35,36,37,38,39,40,41,42,43,44,26,45,46,47,48,49,50,51,52,13,53,54,55,56,57,58,59,60,61,9,11,62,63,64,65])),AwaitingExternalEthereumTransferScreen:()=>xe(()=>import("./AwaitingExternalEthereumTransferScreen-B8RwfC4k.BnfOO-HA.js"),__vite__mapDeps([66,30,1,31,10,32,33,12,34,35,67,57,58,36,37,41,42,43,44,26,45,46,47,38,48,49,50,51,52,13,53,54,55,56,59,60,61,9,11,62,63,64,68,5,65])),AwaitingPasswordlessCodeScreen:()=>xe(()=>import("./AwaitingPasswordlessCodeScreen-DiwMdkl1.DRqqhR2L.js"),__vite__mapDeps([69,1,70,71,31,22,15,9,10,11,12])),AwaitingSolToEvmBridgingScreen:()=>xe(()=>import("./AwaitingSolToEvmBridgingScreen-DDjqJpxK.BRdj_dbw.js"),__vite__mapDeps([72,30,1,31,10,32,33,12,36,37,49,50,47,43,44,51,52,13,53,54,68,5])),CaptchaScreen:()=>xe(()=>import("./CaptchaScreen-DRpV5XFL.XE8FiBbt.js"),__vite__mapDeps([73,1,9,10,11,12,62,13,74])),CoinbaseOnrampStatusScreen:()=>xe(()=>import("./CoinbaseOnrampStatusScreen-B5SpiCFR.99ZZdimH.js"),__vite__mapDeps([75,76,1,77,10,31,36])),ConnectLedgerScreen:()=>xe(()=>import("./ConnectLedgerScreen-D54DrxnP.BgyMxybD.js"),__vite__mapDeps([78,9,10,1,11,12,13])),ConnectOnlyLandingScreen:()=>xe(()=>import("./ConnectOnlyLandingScreen-Cm10LiWd.jAhfnwNY.js"),__vite__mapDeps([79,1,20,10,21,22,23,24,25,26,27,28,11,12])),ConnectOnlyStatusScreen:()=>xe(()=>import("./ConnectOnlyStatusScreen-Bz7rafsR.hHqyraWG.js"),__vite__mapDeps([80,1,9,10,11,12,81,22,27,15])),ConnectOrCreateScreen:()=>xe(()=>import("./ConnectOrCreateScreen-aeQK2RJ_.D7dNVQnA.js"),__vite__mapDeps([82,83,1,10,20,21,22,23,24,25,26,27,28,11,12,84,48,44,85,13,86,87,88,89,90,91,9])),ConnectionStatusScreen:()=>xe(()=>import("./ConnectionStatusScreen-_g1A1Dg2.C78MTtz7.js"),__vite__mapDeps([81,1,22,27,15,9,10,11,12])),CrossAppAuthScreen:()=>xe(()=>import("./CrossAppAuthScreen-4oQDzYzy.SFf_FSJQ.js"),__vite__mapDeps([92,1,15,9,10,11,12])),DelegatedActionsConsentScreen:()=>xe(()=>import("./DelegatedActionsConsentScreen-Cj9bU7Q1.D7at-FDY.js"),__vite__mapDeps([93,1,94,10,26,95,51,52,13,53,55,9,11,12,96,62])),DelegatedActionsRevokeScreen:()=>xe(()=>import("./DelegatedActionsRevokeScreen-DGFRARuM.D5ISrtkz.js"),__vite__mapDeps([97,1,9,10,11,12,96,13,62])),EmbeddedWalletConnectingScreen:()=>xe(()=>import("./EmbeddedWalletConnectingScreen-Cmt8I8TX.DmV-20w5.js"),__vite__mapDeps([98,1,9,10,11,12,74,13])),EmbeddedWalletCreatedScreen:()=>xe(()=>import("./EmbeddedWalletCreatedScreen-Dj_JuLO5.uu6aD4-j.js"),__vite__mapDeps([99,1,9,10,11,12,62,13])),EmbeddedWalletKeyExportScreen:()=>xe(()=>import("./EmbeddedWalletKeyExportScreen-sjrAvCm3.Bc7_6dkw.js"),__vite__mapDeps([100,1,101,102,94,10,26,95,51,52,13,53,55,9,11,12])),EmbeddedWalletOnAccountCreateScreen:()=>xe(()=>import("./EmbeddedWalletOnAccountCreateScreen-BOS_pyDI.Ciy5F2No.js"),__vite__mapDeps([103,1,9,10,11,12,74,13])),EmbeddedWalletPasswordCreateScreen:()=>xe(()=>import("./RecoveryPasswordCreateScreen-BDCDfQzo.CVpMFU5C.js"),__vite__mapDeps([104,1,105,102,31,10,106,107,77,32])),EmbeddedWalletPasswordUpdateScreen:()=>xe(()=>import("./EmbeddedWalletPasswordUpdateScreen-DulDjFpp.BUaMyKWa.js"),__vite__mapDeps([108,1,105,102,31,10,106,107,77,32])),EmbeddedWalletPasswordUpdateSplashScreen:()=>xe(()=>import("./EmbeddedWalletPasswordUpdateSplashScreen-BkwyRHPS.HQSNhpNI.js"),__vite__mapDeps([109,9,10,1,11,12,18,13])),ErrorScreen:()=>xe(()=>import("./ErrorScreen-8UMMZ6is.0ylxDhjt.js"),__vite__mapDeps([110,37,1,9,10,11,12,13,18])),FarcasterConnectStatusScreen:()=>xe(()=>import("./FarcasterConnectStatusScreen-BLgCDUxR.-I9FGFii.js"),__vite__mapDeps([111,1,112,23,24,10,95,15,9,11,12,86,52,13,53])),FarcasterSignerStatusScreen:()=>xe(()=>import("./FarcasterSignerStatusScreen-RHH68QtJ.Cy3v-_GQ.js"),__vite__mapDeps([113,1,114,21,112,23,24,9,10,11,12,86])),FundSolWalletWithExternalSolanaWallet:()=>xe(()=>import("./FundSolWalletWithExternalSolanaWallet-DVgX3EaM.Dorqnwmk.js"),__vite__mapDeps([115,30,1,10,31,32,33,50,47,12,43,44,116,34,35,36,40,117,38,64])),FundingAmountEditScreen:()=>xe(()=>import("./FundingEditAmountScreen-D10JPLdP.DOrY_BUw.js"),__vite__mapDeps([118,1,10,31,33,12,46,34,35,58,59,60,61,13,52,9,11,62,63])),FundingMethodSelectionScreen:()=>xe(()=>import("./FundingMethodSelectionScreen-BuWGEgge.BwSqBp1C.js"),__vite__mapDeps([119,1,76,10,33,120,121,122,28,123,124,36,59,60,61,13,52,9,11,12,62,63])),InAppBrowserLoginNotPossible:()=>xe(()=>import("./InAppBrowserLoginNotPossible-TigdvlfS.Blpqrll8.js"),__vite__mapDeps([125,9,10,1,11,12,16,13])),InstallWalletScreen:()=>xe(()=>import("./InstallWalletScreen-DgyXxk_4.DnKFcQmI.js"),__vite__mapDeps([126,22,61,1,13,52,9,10,11,12])),LandingScreen:()=>xe(()=>import("./LandingScreen-C6rQCvI5.RfAY_Ffe.js"),__vite__mapDeps([127,83,1,10,20,21,22,23,24,25,26,27,28,11,12,84,48,44,85,13,86,87,88,89,90,91,9])),LinkConflictScreen:()=>xe(()=>import("./LinkConflictScreen-DOsLOvpT.lTIFXDt2.js"),__vite__mapDeps([128,102,1,47,10,129,51,52,13,53,130,121])),LinkEmailScreen:()=>xe(()=>import("./LinkEmailScreen-C7CpFuoA.D4N0j1DF.js"),__vite__mapDeps([131,70,1,84,10,48,44,25,26,85,13,31,9,11,12])),LinkPasskeyScreen:()=>xe(()=>import("./LinkPasskeyScreen-jzRj6Yq0.CHUIblrj.js"),__vite__mapDeps([60,1,61,13,52,9,10,11,12,62,63])),LinkPhoneScreen:()=>xe(()=>import("./LinkPhoneScreen-BKHv_Kdp.BhONwHHP.js"),__vite__mapDeps([132,71,1,88,10,48,44,9,11,12])),LoginFailedScreen:()=>xe(()=>import("./LoginFailedScreen-CJgWFc1S.BLQ-fg8Z.js"),__vite__mapDeps([133,9,10,1,11,12,74,13])),ManualTransferScreen:()=>xe(()=>import("./ManualTransferScreen-CFNzuajf.DY5eIa5_.js"),__vite__mapDeps([134,1,10,31,23,24,33,122,45,46,94,26,95,51,52,13,53,55,135,36,38,117,40,39,42,64])),MfaAuthEnrollmentFlowScreen:()=>xe(()=>import("./MfaAuthEnrollmentFlowScreen-DflCQFD5.bAazBxIf.js"),__vite__mapDeps([136,10,1,137,138,139,87,71,48,44,110,37,9,11,12,13,18,60,61,52,62,63,114,21,31,95,45,46,55,23,24])),MfaAuthVerifyFlowScreen:()=>xe(()=>import("./MfaAuthVerifyFlowScreen-D0KWDrSF.84QNjuuW.js"),__vite__mapDeps([140,1,141,139,87,71,137,10,9,11,12,102,129,34,35,142,143,58,40,39,31,56])),MfaEnrollmentFlowScreen:()=>xe(()=>import("./MfaEnrollmentFlowScreen-B5CTxsyW.BLpn8eY8.js"),__vite__mapDeps([144,10,1,137,138,139,87,71,48,44,110,37,9,11,12,13,18,60,61,52,62,63,114,21,31,95,45,46,55,23,24,30,88])),MoonpayStatusScreen:()=>xe(()=>import("./MoonpayStatusScreen-BgCvITlM.CltIns2G.js"),__vite__mapDeps([145,76,1,77,10,31,124,36])),OAuthStatusScreen:()=>xe(()=>import("./OAuthStatusScreen-B9LjQopq.CVXorDsl.js"),__vite__mapDeps([146,1,89,54,15,9,10,11,12,130])),PasskeySelectSignupOrLogin:()=>xe(()=>import("./PasskeySelectSignupOrLogin-BH-9DnYX.DDYhH64e.js"),__vite__mapDeps([147,9,10,1,11,12,63,13])),PasskeyStatusScreen:()=>xe(()=>import("./PasskeyStatusScreen-B0BMf34N.CP3bInbR.js"),__vite__mapDeps([148,1,15,9,10,11,12,63,13])),PasswordRecoveryScreen:()=>xe(()=>import("./PasswordRecoveryScreen-BGO3xmU6.B51G-lUd.js"),__vite__mapDeps([149,137,1,10,31,106,11,12])),RecoveryOAuthScreen:()=>xe(()=>import("./RecoveryOAuthStatusScreen-9ngTLe_q.BUUyQN7x.js"),__vite__mapDeps([150,1,10,32,151])),RecoverySelectionScreen:()=>xe(()=>import("./RecoverySelectionScreen-0YIfrkiv.DG6jl9qc.js"),__vite__mapDeps([152,153,1,10,32,151])),SendTransactionScreen:()=>xe(()=>import("./index-tsoVOGEt.CXpcfCu1.js"),__vite__mapDeps([154,1,51,10,52,13,53,34,35,135,123,57,58,110,37,9,11,12,18,155,156,43,44,26,95,45,46,94,55,107,120,121,101,102,56,64,31,32,142,143,40,39,67])),SetAutomaticRecoveryScreen:()=>xe(()=>import("./SetAutomaticRecoveryScreen-BAAv--Sk.CKJrcK1f.js"),__vite__mapDeps([157,102,1,153,10,45,46])),SignRequestScreen:()=>xe(()=>import("./SignRequestScreen-YrG-iwWX.Bp6FauCx.js"),__vite__mapDeps([158,1,114,21,31,155,9,10,11,12,13])),StandardSignAndSendTransactionScreen:()=>xe(()=>import("./StandardSignAndSendTransactionScreen-Csw3bRQ4.Dhnzo6AG.js"),__vite__mapDeps([159,1,35,110,37,9,10,11,12,13,18,30,31,32,43,44,143,58,40,39,129,156,26,95,45,46,51,52,53,94,55,107,120,121,101,102,56,64,116])),TelegramAuthScreen:()=>xe(()=>import("./TelegramAuthScreen-CXnXpJTY.DB-lyc67.js"),__vite__mapDeps([160,1,15,9,10,11,12,90])),TransferFromWalletScreen:()=>xe(()=>import("./TransferFromWalletScreen-BOOq-OqM.D9HlWRWP.js"),__vite__mapDeps([161,1,10,32,33,48,44,45,91,13,50,47,59,60,61,52,9,11,12,62,63])),UpdateEmailScreen:()=>xe(()=>import("./UpdateEmailScreen-B4u7SqtR.BzG09OkW.js"),__vite__mapDeps([162,70,1,31,10,25,26,9,11,12,85,13])),UpdatePhoneScreen:()=>xe(()=>import("./UpdatePhoneScreen-Dz75pT5l.DNZnLdA6.js"),__vite__mapDeps([163,71,1,88,10,48,44,9,11,12])),UserLimitReachedScreen:()=>xe(()=>import("./UserLimitReachedScreen-BEQAxJvA.DiD2LhiO.js"),__vite__mapDeps([164,9,10,1,11,12])),WalletInterstitialScreen:()=>xe(()=>import("./WalletInterstitialScreen-jHLFeLvC.BHihHPQh.js"),__vite__mapDeps([165,1,9,10,11,12]))});function fIe(t){Df("configureMfa",t)}const lf=rl((()=>({inProgressMfaFlow:void 0}))),pIe=wZ`
  :root {
     ${t=>mIe(t.palette)}
  };
`,mIe=t=>{let e=(function(n){return{"--privy-color-background":n.background,"--privy-color-background-2":n.background2,"--privy-color-background-3":n.background3,"--privy-color-foreground":n.foreground,"--privy-color-foreground-2":n.foreground2,"--privy-color-foreground-3":n.foreground3,"--privy-color-foreground-4":n.foreground4,"--privy-color-foreground-accent":n.foregroundAccent,"--privy-color-accent":n.accent,"--privy-color-accent-light":n.accentLight,"--privy-color-accent-hover":n.accentHover,"--privy-color-accent-dark":n.accentDark,"--privy-color-accent-darkest":n.accentDarkest,"--privy-color-success":n.success,"--privy-color-success-dark":n.successDark,"--privy-color-success-light":n.successLight,"--privy-color-success-bg":n.successBg,"--privy-color-error":n.error,"--privy-color-error-light":n.errorLight,"--privy-color-error-bg":n.errorBg,"--privy-color-error-bg-hover":n.errorBgHover,"--privy-color-warn":n.warn,"--privy-color-warn-light":n.warnLight,"--privy-color-warn-bg":n.warnBg,"--privy-color-warning-dark":n.warningDark,"--privy-color-error-dark":n.errorDark,"--privy-color-info-bg":n.infoBg,"--privy-color-info-bg-hover":n.infoBgHover,"--privy-color-border-default":n.borderDefault,"--privy-color-border-hover":n.borderHover,"--privy-color-border-focus":n.borderFocus,"--privy-color-border-error":n.borderError,"--privy-color-border-success":n.borderSuccess,"--privy-color-border-warning":n.borderWarning,"--privy-color-border-info":n.borderInfo,"--privy-color-border-interactive":n.borderInteractive,"--privy-color-border-interactive-hover":n.borderInteractiveHover,"--privy-color-background-hover":n.backgroundHover,"--privy-color-background-clicked":n.backgroundClicked,"--privy-color-background-disabled":n.backgroundDisabled,"--privy-color-background-interactive":n.backgroundInteractive,"--privy-color-background-interactive-hover":n.backgroundInteractiveHover,"--privy-color-background-interactive-clicked":n.backgroundInteractiveClicked,"--privy-color-background-interactive-disabled":n.backgroundInteractiveDisabled,"--privy-color-foreground-hover":n.foregroundHover,"--privy-color-foreground-clicked":n.foregroundClicked,"--privy-color-foreground-disabled":n.foregroundDisabled,"--privy-color-foreground-interactive":n.foregroundInteractive,"--privy-color-foreground-interactive-hover":n.foregroundInteractiveHover,"--privy-link-navigation-color":n.linkNavigationColor,"--privy-link-navigation-decoration":n.linkNavigationDecoration,"--privy-accent-has-good-contrast":n.accentHasGoodContrast,"--privy-color-icon-default":n.iconDefault,"--privy-color-icon-muted":n.iconMuted,"--privy-color-icon-subtle":n.iconSubtle,"--privy-color-icon-inverse":n.iconInverse,"--privy-color-icon-success":n.iconSuccess,"--privy-color-icon-warning":n.iconWarning,"--privy-color-icon-error":n.iconError,"--privy-color-icon-interactive":n.iconInteractive,"--privy-color-icon-default-hover":n.iconDefaultHover,"--privy-color-icon-muted-hover":n.iconMutedHover,"--privy-color-icon-subtle-hover":n.iconSubtleHover,"--privy-color-icon-default-clicked":n.iconDefaultClicked,"--privy-color-icon-muted-clicked":n.iconMutedClicked,"--privy-color-icon-subtle-clicked":n.iconSubtleClicked,"--privy-color-icon-default-disabled":n.iconDefaultDisabled,"--privy-color-icon-muted-disabled":n.iconMutedDisabled,"--privy-color-icon-subtle-disabled":n.iconSubtleDisabled,"--privy-color-icon-error-hover":n.iconErrorHover,"--privy-color-icon-interactive-hover":n.iconInteractiveHover,"--privy-color-icon-error-clicked":n.iconErrorClicked,"--privy-color-icon-interactive-clicked":n.iconInteractiveClicked,"--privy-color-icon-muted-disabled-alt":n.iconMutedDisabledAlt,"--privy-color-icon-subtle-disabled-alt":n.iconSubtleDisabledAlt,"--privy-border-radius-xs":"6px","--privy-border-radius-sm":"8px","--privy-border-radius-md":"12px","--privy-border-radius-mdlg":"16px","--privy-border-radius-lg":"24px","--privy-border-radius-full":"9999px","--privy-height-modal-full":"620px","--privy-height-modal-compact":"480px"}})(t);return Nf`
    ${Object.entries(e).map((([n,r])=>`${n}: ${r};`)).join(`
`)}
  `},Rk=Bt.div`
  // css normalize only the privy application to avoid conflicts
  // with consuming application
  ${`
  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
  }

  line-height: 1.15;
  -webkit-text-size-adjust: 100%;
  -moz-tab-size: 4;
  tab-size: 4;
  font-feature-settings: normal;

  margin: 0;
  font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif,
    'Apple Color Emoji', 'Segoe UI Emoji';

  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }

  abbr:where([title]) {
    text-decoration: underline dotted;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-size: inherit;
    font-weight: inherit;
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif,
    'Apple Color Emoji', 'Segoe UI Emoji';
    display: inline;
  }

  a {
    color: inherit;
    text-decoration: inherit;
  }

  b,
  strong {
    font-weight: bolder;
  }

  code,
  kbd,
  samp,
  pre {
    font-family: ui-monospace, SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 1em;
  }

  small {
    font-size: 80%;
  }

  sub,
  sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }

  sub {
    bottom: -0.25em;
  }

  sup {
    top: -0.5em;
  }

  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }

  button,
  input,
  optgroup,
  select,
  textarea {
    font-family: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    color: inherit;
    margin: 0;
    padding: 0;
  }

  button,
  select {
    text-transform: none;
  }

  button,
  [type='button'],
  [type='reset'],
  [type='submit'] {
    -webkit-appearance: button;
    background-color: transparent;
    background-image: none;
  }

  ::-moz-focus-inner {
    border-style: none;
    padding: 0;
  }

  :-moz-focusring {
    outline: 1px dotted ButtonText;
  }

  :-moz-ui-invalid {
    box-shadow: none;
  }

  legend {
    padding: 0;
  }

  progress {
    vertical-align: baseline;
  }

  ::-webkit-inner-spin-button,
  ::-webkit-outer-spin-button {
    height: auto;
  }

  [type='search'] {
    -webkit-appearance: textfield;
    outline-offset: -2px;
  }

  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }

  ::-webkit-file-upload-button {
    -webkit-appearance: button;
    font: inherit;
  }

  summary {
    display: list-item;
  }

  blockquote,
  dl,
  dd,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  hr,
  figure,
  p,
  pre {
    margin: 0;
  }

  fieldset {
    margin: 0;
    padding: 0;
  }

  legend {
    padding: 0;
  }

  ol,
  ul,
  menu {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  textarea {
    resize: vertical;
  }

  input::placeholder,
  textarea::placeholder {
    opacity: 1;
    color: #9ca3af;
  }

  button,
  [role='button'] {
    cursor: pointer;
  }

  :disabled {
    cursor: default;
  }

  img,
  svg,
  video,
  canvas,
  audio,
  iframe,
  embed,
  object {
    display: block;
  }

  img,
  video {
    max-width: 100%;
    height: auto;
  }

  [hidden] {
    display: none;
  }
`}

  // Privy styles
  color: var(--privy-color-foreground-2);

  h3 {
    font-size: 16px;
    line-height: 24px;
    font-weight: 500;
    color: var(--privy-color-foreground-2);
  }

  h4 {
    font-size: 14px;
    line-height: 20px;
    font-weight: 500;
    color: var(--privy-color-foreground);
  }

  p {
    font-size: 13px;
    line-height: 20px;
    color: var(--privy-color-foreground-2);
  }

  button:focus,
  input:focus,
  optgroup:focus,
  select:focus,
  textarea:focus {
    outline: none;
    border-color: var(--privy-color-accent-light);
    box-shadow: 0 0 0 3px var(--privy-color-border-focus);
  }

  .mobile-only {
    @media (min-width: 441px) {
      display: none;
    }
  }

  /* Animations */

  @keyframes fadein {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
`,gIe=({children:t,open:e,onClick:n,...r})=>R.jsx(Q$,{show:e,as:Te.Fragment,children:R.jsxs(fne,{onClose:n,...r,as:wIe,children:[R.jsx(Yh,{as:Te.Fragment,enterFrom:"entering",leaveTo:"leaving",children:R.jsx(yIe,{id:"privy-dialog-backdrop","aria-hidden":"true"})}),R.jsx(bIe,{children:R.jsx(Yh,{as:Te.Fragment,enterFrom:"entering",leaveTo:"leaving",children:R.jsx(e4,{as:vIe,children:t})})})]})});let yIe=Bt.div`
  position: fixed;
  inset: 0;

  transition: backdrop-filter 100ms ease;
  backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);

  &.entering,
  &.leaving {
    backdrop-filter: unset;
    -webkit-backdrop-filter: unset;
  }
`,wIe=Bt.div`
  position: relative;
  z-index: 999999;
`,bIe=Bt.div`
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100vw;
  min-height: 100vh;
`;const vIe=Bt.div`
  // reset some default dialog styles
  padding: 0;
  background: transparent;
  border: none;
  width: 100%;
  pointer-events: auto;

  outline: none;
  display: block;

  /*
   * Normally it is bad to mix media queries like this We are doing
   * this here specifically for animations to avoid weird jank.
   */
  /* Mobile animation is a bottom drawer */
  @media (max-width: 440px) {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    transition: transform 200ms ease-in;
    position: fixed;
    bottom: 0;

    &.entering,
    &.leaving {
      opacity: 0;
      transform: translate3d(0, 100%, 0);
      transition:
        transform 150ms ease-in 0ms,
        opacity 0ms ease 150ms;
    }
  }

  /* Tablet/Desktop animation is a fade in */
  @media (min-width: 441px) {
    opacity: 1;
    transition: opacity 100ms ease-in;

    &.entering,
    &.leaving {
      opacity: 0;
      transition-delay: 5ms;
    }

    margin: auto;
    width: 360px;
    box-shadow: 0px 8px 36px rgba(55, 65, 81, 0.15);
    border-radius: var(--privy-border-radius-lg);
  }
`;Bt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
`;const _Ie=()=>{let{ready:t}=Zu(),{currentScreen:e}=Iu(),[n,r]=T.useState(null),[s,i]=T.useState(!1),a=(function(o){let[c,l]=T.useState(!1),u=T.useRef(null),d=T.useRef(null),h=T.useRef(null);return T.useEffect((()=>{if(u.current&&(clearTimeout(u.current),u.current=null),d.current&&(clearTimeout(d.current),d.current=null),o)h.current=Date.now(),u.current=setTimeout((()=>{l(!0)}),150);else if(h.current!==null){let f=Date.now()-h.current;if(f>=150){let p=Math.max(0,400-(f-150));d.current=setTimeout((()=>{l(!1),h.current=null}),p)}else u.current&&(clearTimeout(u.current),u.current=null),l(!1),h.current=null}return()=>{u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)}}),[o]),c})(s);return T.useEffect((()=>{if(!e)return r(null),void i(!1);i(!0),d0[e]().then((o=>{(!e||t||o.default.isShownBeforeReady)&&(r((()=>o.default.component)),i(!1))})).catch((()=>{r(null),i(!1)}))}),[e,t]),{component:n,isLoading:a}};let $k=T.lazy((()=>xe(()=>import("./MfaVerifyFlowScreen-Bds0d6wr.CQ6flJpr.js"),__vite__mapDeps([166,1,141,139,87,71,137,10,9,11,12,102,129,34,35,142,143,58,40,39,31,56])))),EIe=T.lazy((()=>(t=>d0[t]().then((e=>({default:e.default.component}))))("MfaAuthVerifyFlowScreen"))),xIe=()=>R.jsx(TIe,{children:R.jsx(Iy,{})}),DU=()=>{let{currentScreen:t}=Iu(),e=lf((i=>i.inProgressMfaFlow)),n=()=>lf.setState({inProgressMfaFlow:void 0}),{component:r,isLoading:s}=_Ie();return(function(){let{isModalOpen:i}=Zu(),{headless:a}=ps(),{currentScreen:o}=Iu(),{status:c,execute:l,reset:u,enabled:d}=NU(),[h,f]=T.useState(!1);T.useEffect((()=>{!i&&d&&u()}),[i,d,u]),T.useEffect((()=>{o?d0[o]().then((p=>{f(!!p.default.isCaptchaRequired)})).catch((()=>{f(!1)})):f(!1)}),[o]),T.useEffect((()=>{i&&h&&!a&&c==="ready"&&d&&l()}),[i,h,a,c,d,l])})(),t||e!=="txn"?s?R.jsx(xIe,{}):r?R.jsxs(R.Fragment,{children:[R.jsx(wR,{$if:!!e,children:R.jsx(T.Suspense,{children:R.jsx(r,{})})}),R.jsxs(T.Suspense,{children:[e==="txn"&&R.jsx($k,{onClose:n}),e==="auth"&&R.jsx(EIe,{})]})]}):null:R.jsx(T.Suspense,{children:R.jsx($k,{onClose:n})})},AIe=()=>{let t=T.useRef(null);return R.jsx(IIe,{style:{height:UZ(t)},id:"privy-modal-content",children:R.jsx("div",{ref:t,children:R.jsx(DU,{})})})};const SIe=({open:t})=>{let e=ps(),{gracefulClosePrivyModal:n}=(()=>{let{closePrivyModal:s}=qa(),{onUserCloseViaDialogOrKeybindRef:i}=Iu();return{gracefulClosePrivyModal:T.useCallback((()=>{if(!i?.current)return s({shouldCallAuthOnSuccess:!1});i.current()}),[s])}})(),r=lf((s=>s.inProgressMfaFlow));return fIe({onMfaRequired:()=>{e.mfa.noPromptOnMfaRequired||lf.setState({inProgressMfaFlow:"txn"})}}),e.render.standalone?R.jsx(Rk,{children:R.jsx(UU,{id:"privy-modal-content",children:R.jsx(DU,{})})}):R.jsx(gIe,{open:!(!t&&!r),id:"privy-dialog","aria-label":"log in or sign up","aria-labelledby":"privy-dialog-title",onClick:()=>n(),children:R.jsx(Rk,{children:R.jsx(AIe,{})})})};let UU=Bt.div`
  display: flex;
  flex-direction: column;
  text-align: center;
  font-size: 14px;
  line-height: 20px;
  width: 100%;
  background: var(--privy-color-background);
  padding: 0 16px;
`,IIe=Bt(UU)`
  transition: height 150ms ease-out;
  overflow-x: hidden;
  overflow-y: auto;
  scrollbar-width: none;

  // Ensure the modal gets pinned to the top if it ever gets too tall
  max-height: calc(100svh - 32px);

  border-radius: var(--privy-border-radius-lg) var(--privy-border-radius-lg) 0 0;
  box-shadow: 0px 0px 36px rgba(55, 65, 81, 0.15);

  @media (min-width: 441px) {
    box-shadow: 0px 8px 36px rgba(55, 65, 81, 0.15);
    border-radius: var(--privy-border-radius-lg);
  }
`,TIe=Bt.div`
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  padding: 2rem;
`;function CIe(t){let e=T.useRef(null),n=T.useRef();return T.useEffect((()=>{n.current?.remove(),n.current=(function({botUsername:r,scriptHost:s}){let i=document.createElement("script"),{origin:a}=new URL(s);return i.async=!0,i.src=`${a}/js/telegram-login.js`,i.setAttribute("data-telegram-login",r),i.setAttribute("data-request-access","write"),i.setAttribute("data-lang","en"),i})(t),e.current?.after(n.current)}),[t]),R.jsx("div",{ref:e,hidden:!0})}const kIe=()=>{let{ready:t}=EZ(),{client:e}=qa();return T.useEffect((()=>{let n=()=>{if(!e.connectors||!t)return;let r=e.connectors.wallets.map((s=>({address:s.address,connectorType:s.connectorType,walletClientType:s.walletClientType,connectedAt:s.connectedAt,id:s.meta.id})));Ne.put(vP,r)};return e.connectors?.on("walletsUpdated",n),()=>{e.connectors?.off("walletsUpdated",n)}}),[t,e.connectors]),null};class J_ extends sl{async initialize(){let e=await this.createProvider();this.provider=e,this.proxyProvider.setWalletProvider(e),this.subscribeListeners(),e.session&&(this.walletProvider?.session?.peer.metadata.url&&(this.walletEntry=uw(this.walletProvider?.session?.peer.metadata.url),this.walletClientType=this.walletEntry?.slug||"unknown"),this.connected=!0,await this.syncAccounts()),this.initialized=!0,this.emit("initialized")}async connect(e){return e.showPrompt&&await this.promptConnection(),this.getConnectedWallet()}async isConnected(){return!!this.walletProvider?.connected}get walletBranding(){let e=this.walletProvider?.session?.peer.metadata.icons?.[0];return{name:$Z(this.walletProvider?.session?.peer.metadata.name||"")||"WalletConnect",icon:typeof e=="string"?e:CZ,id:this.walletProvider?.session?.peer.metadata.name.toLowerCase()||"wallet_connect_v2"}}async resetConnection(e){this.walletProvider&&this.walletProvider.connected&&(await this.walletProvider.disconnect(),this.walletProvider.signer.session=void 0,this.walletClientType=e,this.redirectUri=void 0,this.fallbackUniversalRedirectUri=void 0,HQ(),this.onDisconnect())}async promptConnection(){if(this.provider)return new Promise(((e,n)=>{(async()=>{let r="",s=await Promise.race([this.walletProvider?.enable(),this.proxyProvider.walletTimeout()]);if(s?.length&&(r=s[0]),!r||r==="")throw new qt("Unable to retrieve address");this.walletProvider?.session?.peer.metadata.url&&(this.walletEntry=uw(this.walletProvider?.session?.peer.metadata.url),this.walletClientType=this.walletEntry?.slug||"unknown",this.proxyProvider.rpcTimeoutDuration=g2(this.rpcConfig,this.walletClientType)),this.connected=!0,await this.syncAccounts(s),e()})().catch((r=>{n(r?Wo(r):new qt("Unknown error during connection"))}))}))}disconnect(){this.walletProvider?.disconnect().then((()=>this.onDisconnect())).catch((()=>console.warn("Unable to disconnect WalletConnect provider")))}get walletProvider(){return this.proxyProvider.walletProvider}setWalletProvider(e){this.proxyProvider.setWalletProvider(e)}async createProvider(){let e={};for(let i of this.chains){let a=DZ(i.id,this.chains,this.rpcConfig,this.privyAppId);a&&(e[i.id]=a)}let n=this.shouldEnforceDefaultChainOnConnect?[this.defaultChain.id]:[],r=this.chains.map((i=>i.id)),s=await b1e.init({projectId:this.walletConnectCloudProjectId,chains:n,optionalChains:r,optionalEvents:E9,optionalMethods:_9,rpcMap:e,showQrModal:!1,metadata:{description:this.privyAppName,name:this.privyAppName,url:window.location.origin,icons:[]}});return s.on("display_uri",(i=>{if(s.signer.abortPairingAttempt(),GQ(),!this.showPrivyQrModal)throw new qt("WalletConnect modal not available - Privy handles wallet connections through its own UI");if(Ba.isMobile&&this.walletEntry){let{redirect:a,href:o}=VQ(i,this.walletEntry);p$(a,"_self"),KQ({href:o,name:this.walletEntry.metadata?.shortName||this.walletEntry.name});let c=JI(i,this.walletEntry);return this.redirectUri=a,this.fallbackUniversalRedirectUri=c?.redirect,this.showPrivyQrModal({native:a,universal:a})}if(this.redirectUri=void 0,this.walletEntry){let a=JI(i,this.walletEntry);this.fallbackUniversalRedirectUri=a?.redirect}this.showPrivyQrModal({native:i,universal:void 0})})),s.on("connect",(()=>{s.session?.peer.metadata.url&&(this.walletEntry=uw(s.session?.peer.metadata.url),this.walletClientType=this.walletEntry?.slug||"unknown")})),s}async enableProvider(){return this.walletProvider?.connected?Promise.resolve(this.walletProvider.accounts):await this.walletProvider?.enable()}setWalletEntry(e,n){this.walletEntry=e,this.showPrivyQrModal=n}constructor({walletConnectCloudProjectId:e,rpcConfig:n,chains:r,defaultChain:s,shouldEnforceDefaultChainOnConnect:i,privyAppId:a,privyAppName:o,walletClientType:c}){super(c||"unknown",r,s,n),this.connectorType="wallet_connect_v2",this.privyAppId=a,this.privyAppName=o,this.walletConnectCloudProjectId=e,this.rpcConfig=n,this.shouldEnforceDefaultChainOnConnect=i,this.proxyProvider=new il(void 0,this.rpcTimeoutDuration),c&&(this.walletEntry=PZ(c),this.walletClientType=c)}}const OIe=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","missing_or_invalid_mfa","mfa_verification_max_attempts_reached","mfa_timeout","twilio_verification_failed"];class Xt extends Error{constructor(e,n){super(n),this.type=e}}function rd(t){let e=t.type;return typeof e=="string"&&OIe.includes(e)}function zg(t){return rd(t)&&t.type==="wallet_not_on_device"}function W8e(t){return rd(t)&&(t.type==="invalid_recovery_pin"||t.type==="invalid_request_arguments")}function q8e(t){return!!rd(t)&&t.type==="mfa_timeout"}function V8e(t){return!!rd(t)&&t.type==="missing_or_invalid_mfa"}function H8e(t){return!!rd(t)&&t.type==="mfa_verification_max_attempts_reached"}function K8e(t){return!(!rd(t)||!t.message.includes("code 429"))}function G8e(t){return!!(function(e){let n=e.type;return typeof n=="string"&&n==="client_error"})(t)&&t.message==="MFA canceled"}async function Ss(t,e,n,r,s,i=!1){let a=i,o=async l=>{if(a&&e&&e.length>0){l===(i?0:1)?s("configureMfa","onMfaRequired",{mfaMethods:e}):r.current?.reject(new Xt("missing_or_invalid_mfa","MFA verification failed, retry."));let u=await new Promise(((d,h)=>{n.current={resolve:d,reject:h},setTimeout((()=>{let f=new Xt("mfa_timeout","Timed out waiting for MFA code");r.current?.reject(f),h(f)}),3e5)}));return await t(u)}return await t()},c=null;for(let l=0;l<4;l++)try{c=await o(l),r.current?.resolve(void 0);break}catch(u){if(u.type!=="missing_or_invalid_mfa")throw r.current?.resolve(void 0),u;a=!0}if(c===null){let l=new Xt("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw r.current?.reject(l),l}return c}var Nk;let PIe=(Nk=0,()=>"id-"+Nk++);function En(t){return t.error!==void 0}let dn=new class{enqueue(t,e){this.callbacks[t]=e}dequeue(t,e){let n=this.callbacks[e];if(!n)throw Error(`cannot dequeue ${t} event: no event found for id ${e}`);switch(delete this.callbacks[e],t){case"privy:iframe:ready":case"privy:user-signer:sign":case"privy:wallets:add":case"privy:wallets:import":case"privy:wallets:set-recovery":case"privy:wallets:connect":case"privy:wallets:recover":case"privy:wallets:rpc":case"privy:wallet:create":case"privy:mfa:verify":case"privy:mfa:init-enrollment":case"privy:mfa:submit-enrollment":case"privy:mfa:unenroll":case"privy:mfa:clear":case"privy:auth:unlink-passkey":case"privy:farcaster:init-signer":case"privy:farcaster:sign":case"privy:solana-wallet:create":case"privy:delegated-actions:consent":return n;default:throw Error(`invalid wallet event type ${t}`)}}constructor(){this.callbacks={}}},Xb=new Map,RIe=(t,e)=>typeof e=="bigint"?e.toString():e;function xn(t,e,n,r){let s=n.contentWindow;if(!s)throw Error("iframe not initialized");let i=((o,c)=>`${o}${JSON.stringify(c,RIe)}`)(t,e);if(t==="privy:wallet:create"){let o=Xb.get(i);if(o)return o}let a=new Promise(((o,c)=>{let l=PIe();dn.enqueue(l,{resolve:o,reject:c}),s.postMessage({id:l,event:t,data:e},r)})).finally((()=>{Xb.delete(i)}));return Xb.set(i,a),a}function $Ie(t){let e=xP(),n=T.useRef(null),r=T.useRef(t.mfaMethods),s=Sy(),[i,a]=T.useState(!1);return T.useEffect((()=>{r.current=t.mfaMethods}),[t.mfaMethods]),T.useEffect((()=>{if(!i)return;let o=n.current;if(!o)return;function c(d){var h;d&&d.origin===t.origin&&typeof(h=d.data).event=="string"&&/^privy:.+/.test(h.event)&&(function(f){switch(f.event){case"privy:iframe:ready":let p=dn.dequeue(f.event,f.id);return En(f)?p.reject(new Xt(f.error.type,f.error.message)):p.resolve(f.data);case"privy:user-signer:sign":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallets:add":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallets:set-recovery":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallets:connect":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallets:recover":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallets:rpc":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:wallet:create":let m=dn.dequeue(f.event,f.id);return En(f)?m.reject(new Xt(f.error.type,f.error.message)):m.resolve(f.data);case"privy:wallets:import":let g=dn.dequeue(f.event,f.id);return En(f)?g.reject(new Xt(f.error.type,f.error.message)):g.resolve(f.data);case"privy:mfa:verify":let _=dn.dequeue(f.event,f.id);return En(f)?_.reject(new Xt(f.error.type,f.error.message)):_.resolve(f.data);case"privy:mfa:init-enrollment":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:mfa:submit-enrollment":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:mfa:unenroll":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:mfa:clear":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:auth:unlink-passkey":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:solana-wallet:create":let A=dn.dequeue(f.event,f.id);return En(f)?A.reject(new Xt(f.error.type,f.error.message)):A.resolve(f.data);case"privy:farcaster:init-signer":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:farcaster:sign":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}case"privy:delegated-actions:consent":{let w=dn.dequeue(f.event,f.id);return En(f)?w.reject(new Xt(f.error.type,f.error.message)):w.resolve(f.data)}default:console.warn("Unsupported wallet proxy method:",f)}})(d.data)}let l={signWithUserSigner:d=>Ss((h=>xn("privy:user-signer:sign",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),addWallet:d=>Ss((h=>xn("privy:wallets:add",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),setRecovery:d=>Ss((h=>xn("privy:wallets:set-recovery",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),connect:d=>Ss((h=>xn("privy:wallets:connect",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),recover:d=>Ss((h=>xn("privy:wallets:recover",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s,!d.recoveryAccessToken&&!d.recoveryPassword&&!d.recoverySecretOverride),rpc:d=>Ss((h=>xn("privy:wallets:rpc",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),create:d=>xn("privy:wallet:create",d,o,t.origin),importWallet:d=>xn("privy:wallets:import",d,o,t.origin),createSolana:d=>Ss((h=>xn("privy:solana-wallet:create",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),createDelegatedAction:d=>xn("privy:delegated-actions:consent",d,o,t.origin),verifyMfa:d=>Ss((h=>xn("privy:mfa:verify",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s,!0),initEnrollMfa:d=>Ss((h=>xn("privy:mfa:init-enrollment",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),submitEnrollMfa:d=>Ss((h=>xn("privy:mfa:submit-enrollment",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),unenrollMfa:d=>Ss((h=>xn("privy:mfa:unenroll",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),clearMfa:d=>xn("privy:mfa:clear",d,o,t.origin),unlinkPasskeyAccount:d=>Ss((h=>xn("privy:auth:unlink-passkey",{...d,...h},o,t.origin)),r.current,t.mfaPromise,t.mfaSubmitPromise,s),initFarcasterSigner:d=>xn("privy:farcaster:init-signer",d,o,t.origin),signFarcasterMessage:d=>xn("privy:farcaster:sign",d,o,t.origin)};window.addEventListener("message",c);let u=new AbortController;return v1((()=>xn("privy:iframe:ready",{},o,t.origin)),{abortSignal:u.signal}).then((()=>t.onLoad(l)),((...d)=>{console.warn("Privy iframe failed to load: ",...d),t.onLoadFailed()})),()=>{window.removeEventListener("message",c),u.abort()}}),[i]),e?R.jsx("iframe",{ref:n,width:"0",height:"0",style:{display:"none",height:"0px",width:"0px"},onLoad:()=>a(!0),src:O1e({origin:t.origin,path:`/apps/${t.appId}/embedded-wallets`,query:{caid:t.clientAnalyticsId,client_id:t.appClientId}})}):null}const NIe=({address:t,user:e})=>{let n=e.linkedAccounts.find((r=>r.type==="wallet"&&r.walletClientType==="privy"&&r.address===t));if(!n)throw new Y("Address to delegate is not associated with current user.");if(!Ay(n))throw new Y(`useDelegatedActions is not supported for ${n.chainType} wallets. Use the useSessionSigners hook to provision server side access on behalf of your users.`);return{address:n.address,chainType:n.chainType,walletIndex:n.walletIndex??0}},DIe=({address:t,user:e})=>{let n=e.linkedAccounts.find((s=>s.type==="wallet"&&s.walletClientType==="privy"&&s.address===t));if(!n)throw new Y("Address to delegate is not associated with current user.");let r=n.imported?n:jh(e);if(!r)throw new Y("Unable to determine root address for delegated address.");if(!Ay(r))throw new Y(`useDelegatedActions is not supported for ${r.chainType} wallets. Use the useSessionSigners hook to provision server side access on behalf of your users.`);return{address:r.address,chainType:r.chainType,imported:r.imported}},Dk=t=>t.linkedAccounts.filter((e=>e.type==="wallet"&&e.walletClientType==="privy"&&e.delegated)),Uk="popup-privy-oauth",Bk="PRIVY_OAUTH_USE_BROADCAST_CHANNEL";class UIe{async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(c$,{authorization_code:this.meta.authorizationCode,state_code:this.meta.stateCode,code_verifier:this.meta.codeVerifier,provider:this.meta.provider,mode:this.meta.disableSignup?"no-signup":"login-or-sign-up"})}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(l$,{authorization_code:this.meta.authorizationCode,state_code:this.meta.stateCode,code_verifier:this.meta.codeVerifier,provider:this.meta.provider})}catch(e){throw dt(e)}}constructor(e){this.meta=e}}async function BU({api:t,requesterAppId:e,providerAppId:n}){let r=(await t.get(`/api/v1/apps/${e}/cross-app/connections`)).connections.find((s=>s.provider_app_id===n));if(!r)throw new Y("Invalid connected app");return{name:r.provider_app_name,logoUrl:r.provider_app_icon_url||void 0,apiUrl:r.provider_app_custom_api_url,readOnly:r.read_only,customAuthAuthorizeUrl:r.provider_app_custom_auth_authorize_url,customAuthTransactUrl:r.provider_app_custom_auth_transact_url}}const Jp=async({user:t,address:e,client:n,request:r,requesterAppId:s,reconnect:i})=>{n.createAnalyticsEvent({eventName:"cross_app_request_started",payload:{address:e,method:r.method}});let a=t?.linkedAccounts.find((d=>d.type==="cross_app"&&(d.embeddedWallets.some((h=>h.address===e))||d.smartWallets.some((h=>h.address===e)))));if(!t||!a)throw n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:"Cannot request a signature with this wallet address",address:e}}),new Y("Cannot request a signature with this wallet address");let o=n.getProviderAccessToken(a.providerApp.id),c=await BU({api:n.api,requesterAppId:s,providerAppId:a.providerApp.id});if(!o){if(c.readOnly)throw console.error("cannot transact against a read-only provider app"),new Y("Cannot transact against a read-only provider app");await i({appId:a.providerApp.id,action:"link"})&&(o=n.getProviderAccessToken(a.providerApp.id))}if(!o)throw n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:"Transactions require a valid token",address:e}}),new Y("Transactions require a valid token");let l=new URL(c.customAuthTransactUrl||`${c.apiUrl}/oauth/transact`);l.searchParams.set("token",o||""),l.searchParams.set("request",BIe(r));let u=s$({location:l.href});if(!u)throw n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:"Missing token",address:e}}),new Y("Failed to initialize signature request");return new Promise(((d,h)=>{let f=setTimeout((()=>{g(),h(new Y("Request timeout")),n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:"Request timeout",address:e}})}),12e4),p=setInterval((()=>{u.closed&&(g(),h(new Y("User rejected request")),n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:"User rejected request",address:e}}))}),300),m=_=>{_.data&&(_.data.token?.action==="set"&&_.data.token?.value!==void 0?n.storeProviderAccessToken(a.providerApp.id,_.data.token.value):_.data.token?.action==="clear"&&n.storeProviderAccessToken(a.providerApp.id,null),_.data.type==="PRIVY_CROSS_APP_ACTION_RESPONSE"&&_.data.result&&(g(),d(_.data.result),n.createAnalyticsEvent({eventName:"cross_app_request_success",payload:{address:e,method:r.method}})),_.data.type==="PRIVY_CROSS_APP_ACTION_ERROR"&&_.data.error&&(g(),h(_.data.error),n.createAnalyticsEvent({eventName:"cross_app_request_error",payload:{error:_.data.error,address:e}})))};window.addEventListener("message",m);let g=()=>{u.close(),clearInterval(p),clearTimeout(f),window.removeEventListener("message",m)}}))};let BIe=t=>JSON.stringify({content:{request:{request:X_(t,Ye)}},timestamp:Date.now(),callbackUrl:window.origin});const X_=(t,e)=>typeof t=="bigint"?e(t):Array.isArray(t)?t.map((n=>X_(n,e))):t&&typeof t=="object"?Object.fromEntries(Object.entries(t).map((([n,r])=>[n,X_(r,e)]))):t;function MIe({isCreatingWallet:t,skipSplashScreen:e}){return t?"EmbeddedWalletPasswordCreateScreen":e?"EmbeddedWalletPasswordUpdateScreen":"EmbeddedWalletPasswordUpdateSplashScreen"}function LIe({walletAction:t,availableRecoveryMethods:e,legacySetWalletPasswordFlow:n,isResettingPassword:r,showAutomaticRecovery:s}){return s?"SetAutomaticRecoveryScreen":n||e.length===1?MIe({isCreatingWallet:t==="create",skipSplashScreen:r}):"RecoverySelectionScreen"}function FIe(t){switch(t){case"user-passcode":return"PasswordRecoveryScreen";case"google-drive":case"icloud":return"RecoveryOAuthScreen";default:throw Error("Recovery method not supported")}}function Mk(t,e){if(t.onComplete)switch(e){case"external":t.fundingResult?t.onComplete({...t.fundingResult,fundingMethod:e}):t.onComplete({status:"cancelled",address:t.address,fundingMethod:e,amount:t.amount});break;case null:t.onComplete({status:"cancelled",address:t.address,fundingMethod:void 0,amount:t.amount});break;default:t.onComplete({status:"completed",address:t.address,fundingMethod:e,amount:t.amount})}}function Y8e(t,e,n,r,s,i,a){return{...t,funding:t?.funding?{...t.funding,fundingResult:{status:e,address:t.funding.address,fundingMethod:void 0,transactionHash:n,amount:t.funding.amount,assetType:s?i?.symbol||"ETH":a.nativeCurrency.symbol||"ETH",metadata:{walletClientType:r}}}:void 0,solanaFundingData:t?.solanaFundingData,sendTransaction:t?.sendTransaction}}const Qb=new Map([["FundingMethodSelectionScreen",null],["TransferFromWalletScreen","external"],["FundingAmountEditScreen","external"],["ConnectOnlyLandingScreen","external"],["ConnectOnlyStatusScreen","external"],["AwaitingExternalEthereumTransferScreen","external"],["AwaitingEvmToSolBridgingScreen","external"],["AwaitingSolToEvmBridgingScreen","external"],["ManualTransferScreen","manual"],["MoonpayStatusScreen","moonpay"]]);function Lk(t){let e=t.toLowerCase();return!!window?.webkit?.messageHandlers?.ReactNativeWebView||!!window?.ReactNativeWebView||["fbav","fban","instagram","snapchat","linkedinapp"].some((n=>e.includes(n)))}async function jIe({rpc:t,address:e}){return(await t.getBalance(e,{commitment:"confirmed"}).send()).value??0n}let zIe={apple_oauth:"apple",custom_auth:"custom",discord_oauth:"discord",email:"email",farcaster:"farcaster",github_oauth:"github",google_oauth:"google",instagram_oauth:"instagram",linkedin_oauth:"linkedin",passkey:"passkey",phone:"sms",spotify_oauth:"spotify",telegram:"telegram",tiktok_oauth:"tiktok",line_oauth:"line",twitch_oauth:"twitch",twitter_oauth:"twitter",wallet:"siwe",smart_wallet:"siwe",cross_app:"privy:"};const WIe=t=>{if(PP(t))return{displayName:t.replace("custom:",""),loginMethod:"custom"};let e=zIe[t];return t==="wallet"||t==="phone"?{displayName:t,loginMethod:e}:{displayName:e,loginMethod:e}};async function Fk(t,e,n,r){let s=Mm(t),{chain:i,...a}=await(async()=>r?await r():await e.prepareTransactionRequest({...s,account:{address:n,type:"json-rpc"}}))();return{...a,type:tP[a.type]}}const qIe=()=>{let t=ps(),{user:e}=Zu(),{client:n,refreshSessionAndUser:r,walletProxy:s}=qa();return{migrate:T.useCallback((async()=>{if(t.embeddedWallets.mode==="legacy-embedded-wallets-only")return{success:!0,migrated:!1};if(!e)throw new Y("User must be authenticated before migrating wallets",ie.MUST_BE_AUTHENTICATED);if(!s)throw new Y("Cannot connect to wallet proxy");let i=await n.getAccessToken();if(!i)throw new Y("User must be authenticated before migrating wallets",ie.MUST_BE_AUTHENTICATED);let a=e.linkedAccounts.filter((l=>l.type==="wallet"&&l.walletClientType==="privy"&&Ay(l)&&!ns(l)));if(a.length===0)return{success:!0,migrated:!1};let o=a.filter((l=>l.imported)),c=a.filter((l=>!l.imported));if(c.length>0){let l=c.find((h=>h.chainType==="ethereum"&&h.walletIndex===0))??c.find((h=>h.chainType==="solana"&&h.walletIndex===0))??null;if(!l)throw new Y("Primary wallet not found");let{entropyId:u,entropyIdVerifier:d}=og(l);try{await s.connect({accessToken:i,entropyId:u,entropyIdVerifier:d})}catch(h){if(!zg(h)||l.recoveryMethod!=="privy")throw h;await s.recover({accessToken:i,entropyId:u,entropyIdVerifier:d})}await s.createDelegatedAction({accessToken:i,rootWallet:{address:l.address,chainType:l.chainType,imported:!1},delegatedWallets:c.map((h=>({address:h.address,chainType:h.chainType,walletIndex:h.walletIndex??0})))})}for(let l of o){let{entropyId:u,entropyIdVerifier:d}=og(l);try{await s.connect({accessToken:i,entropyId:u,entropyIdVerifier:d})}catch(h){if(!zg(h)||l.recoveryMethod!=="privy")throw h;await s.recover({accessToken:i,entropyId:u,entropyIdVerifier:d})}await s.createDelegatedAction({accessToken:i,rootWallet:{address:l.address,chainType:l.chainType,imported:!0},delegatedWallets:[{address:l.address,chainType:l.chainType,walletIndex:l.walletIndex??0}]})}return await r(),{success:!0,migrated:!0}}),[t.embeddedWallets.mode,e,s,n,r])}},VIe=({disabled:t})=>{let{migrate:e}=qIe(),{user:n}=Zu(),{walletProxy:r}=qa(),s=T.useRef(!1);return T.useEffect((()=>{!t&&!s.current&&n&&r&&(s.current=!0,e().catch((i=>{console.debug("Unable to migrate wallets: ",i)})).finally((()=>{s.current=!1})))}),[n,r,t,e]),null},HIe=t=>({id:t.id,raw_id:t.rawId,response:{client_data_json:t.response.clientDataJSON,authenticator_data:t.response.authenticatorData,signature:t.response.signature,user_handle:t.response.userHandle},authenticator_attachment:t.authenticatorAttachment,client_extension_results:{app_id:t.clientExtensionResults.appid,cred_props:t.clientExtensionResults.credProps,hmac_create_secret:t.clientExtensionResults.hmacCreateSecret},type:t.type}),Q_=rl((()=>({ethereum:[]}))),Xp=()=>Q_.getState().ethereum;class MU{async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(UQ,{token:this.meta.token})}catch(e){throw dt(e)}}async link(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(BQ,{token:this.meta.token})}catch(e){throw dt(e)}}constructor(e){this.meta={token:e}}}const KIe=(t,e)=>!To(t)&&(e==="all-users"||e==="users-without-wallets"&&!GIe(t).length);let GIe=t=>t.linkedAccounts.filter((e=>e.type==="wallet"&&e.chainType==="ethereum"));const YIe=(t,e)=>!o2(t)&&(e==="all-users"||e==="users-without-wallets"&&!ZIe(t).length);let ZIe=t=>t.linkedAccounts.filter((e=>e.type==="wallet"&&e.chainType==="solana"));const JIe=()=>{let{walletProxy:t,recoverEmbeddedWallet:e,setUser:n,refreshSessionAndUser:r,privy:s,client:i}=qa(),a=ps();return{create:async({walletIndex:o,chainType:c,latestUser:l,recoveryMethod:u,recoveryPassword:d,recoveryAccessToken:h,idempotencyKey:f})=>{let p=l;p||(p=await r());let m=await i.getAccessToken();if(!p||!m||!t)throw Error("User must be authenticated before creating a Privy wallet");return await m$({appConfig:a,user:p,refreshSessionAndUser:r,privy:s,accessToken:m,proxy:t,recoverEmbeddedWallet:e,setUser:n,walletIndex:o,chainType:c,recoveryMethod:u,recoveryPassword:d,recoveryAccessToken:h,idempotencyKey:f})}}};function XIe({subscribe:t,getExternalJwt:e,enabled:n=!0,onAuthenticated:r,onUnauthenticated:s,onError:i}){let{client:a,setAuthenticated:o,setUser:c,setIsNewUser:l}=qa(),{logout:u,authenticated:d,ready:h}=g$(),{create:f}=JIe(),p=ps();if(!a)throw new Y("`useSyncJwtBasedAuthState` must be used within a `PrivyProvider`");let[m,g]=T.useState({status:"initial"}),_=T.useRef(),A=T.useRef(!1),w=T.useRef(e);T.useEffect((()=>{w.current=e}),[e]);let y=T.useRef(r);T.useEffect((()=>{y.current=r}),[r]);let E=T.useRef(s);T.useEffect((()=>{E.current=s}),[s]);let b=T.useRef(i);T.useEffect((()=>{b.current=i}),[i]);let S=T.useRef(f);T.useEffect((()=>{S.current=f}),[f]);let $=T.useRef(p.embeddedWallets.ethereum.createOnLogin);T.useEffect((()=>{$.current=p.embeddedWallets.ethereum.createOnLogin}),[p.embeddedWallets.ethereum.createOnLogin]);let P=T.useRef(p.embeddedWallets.solana.createOnLogin);T.useEffect((()=>{P.current=p.embeddedWallets.solana.createOnLogin}),[p.embeddedWallets.solana.createOnLogin]);let C=T.useRef(c);T.useEffect((()=>{C.current=c}),[c]);let B=T.useRef(l);T.useEffect((()=>{B.current=l}),[l]);let k=T.useRef(o);return T.useEffect((()=>{k.current=o}),[o]),T.useEffect((()=>{if(!n||!h)return;let D=async()=>{if(!A.current){A.current=!0;try{g({status:"loading"});let L=await w.current();if(_.current!==void 0&&_.current===L)return void g({status:"done"});if(!L)return d&&(await u(),E.current?.()),_.current=L,void g({status:"done"});a.startAuthFlow(new MU(L));let{user:v,isNewUser:x=!1}=await a.authenticate();if(!v)throw new Y("Failed to sync with custom auth provider");y.current?.({user:v,isNewUser:x}),C.current(v),B.current(x),k.current(!0);let O=KIe(v,$.current),U=YIe(v,P.current);if(O&&U){let I=await S.current({chainType:"ethereum",walletIndex:0,latestUser:v});await S.current({chainType:"solana",walletIndex:0,latestUser:I.user})}else U?await S.current({chainType:"solana",walletIndex:0,latestUser:v}):O&&await S.current({chainType:"ethereum",walletIndex:0,latestUser:v});_.current=L,g({status:"done"})}catch(L){if(console.warn(L),await u().catch((()=>{})),E.current?.(),L instanceof tg&&L.privyErrorCode===ie.LINKED_TO_ANOTHER_USER)return g({status:"initial"}),void setTimeout((()=>{D()}),0);b.current?.(L),g({status:"error",error:L})}finally{A.current=!1}}};return D(),t(D)}),[t,a,d,u,n,h]),n?{state:m}:{state:{status:"not-enabled"}}}let QIe=rl((()=>({jwtAuthFlowState:{status:"not-enabled"}})));function e5e({customAuth:t}){let{jwtAuthFlowState:e}=(function({customAuth:n}){let r=Sy(),s=T.useRef(),i=T.useCallback((c=>(s.current=c,()=>{s.current=void 0})),[]),a=n?.getCustomAccessToken??(()=>Promise.resolve(void 0)),{state:o}=XIe({enabled:n?.enabled===!0,subscribe:i,getExternalJwt:a,onAuthenticated:({user:c,isNewUser:l})=>{r("login","onComplete",{user:c,isNewUser:l,wasAlreadyAuthenticated:!1,loginMethod:"custom",loginAccount:null}),r("customAuth","onAuthenticated",{user:c})},onUnauthenticated:()=>{r("customAuth","onUnauthenticated")},onError:c=>{r("login","onError",c.privyErrorCode||ie.UNKNOWN_AUTH_ERROR)}});return T.useEffect((()=>{(async()=>n&&!n.isLoading&&s.current?.())()}),[n?.enabled,n?.getCustomAccessToken,n?.isLoading]),{jwtAuthFlowState:o}})({customAuth:t});return T.useEffect((()=>{QIe.setState({jwtAuthFlowState:e})}),[e]),null}const LU=T.createContext(!1);let FU,jU,zU,WU,qU;const t5e=t=>{let e=t.client,n=t.privy,r=R1e(),s=ps();fR(b1(s?.appearance.walletList??[]));let[i,a]=T.useState(!1),o=lf((N=>N.inProgressMfaFlow)),[c,l]=T.useState(!1),[u,d]=T.useState(null),h=Q_((N=>N.ethereum)),[f,p]=T.useState(void 0),[m,g]=T.useState(!1),[_,A]=T.useState(null),[w,y]=T.useState(!1),[E,b]=T.useState({status:"disconnected",connectedWallet:null,connectError:null,connector:null,connectRetry:te}),[S,$]=T.useState({status:"initial"}),[P,C]=T.useState({status:"initial"}),[B,k]=T.useState({status:"initial"}),[D,L]=T.useState({status:"initial"}),[v,x]=T.useState({status:"initial"}),[O,U]=T.useState({status:"initial"}),[I,F]=T.useState(null),V=xP(),[q,J]=T.useState({}),[G,K]=T.useState(null),ue=T.useRef(null),[fe,Ee]=T.useState(!1),ce=T.useRef(null),oe=T.useRef(null),X=T.useRef(OZ),[Re,Me]=T.useState(!1),[Oe,st]=T.useState(!1),pt=T.useCallback((N=>{st(N),!N&&_&&d0[_]().then((M=>{M.default.isUnauthenticatedScreem&&A(null)}))}),[_]);e.onStoreCustomerAccessToken=N=>{N&&ae(X,"accessToken","onAccessTokenGranted",{accessToken:N})},e.onDeleteCustomerAccessToken=()=>{d(null),pt(!1),ae(X,"accessToken","onAccessTokenRemoved")};let be=T.useRef(null),Ce=T.useRef(null),Sr=T.useRef(!1),tr=({showWalletUIs:N})=>Sr.current?Sr.current:N!==void 0?!N:!s.embeddedWallets.showWalletUIs,He=N=>{A(N),setTimeout((()=>{a(!0)}),15)};T.useEffect((()=>{if(!u)return void e.connectors?.removeEmbeddedWalletConnectors();let N=To(u),M=RP(u),H=l1(u);N&&M.length||e.connectors?.removeEmbeddedWalletConnectors(),H.length||e.connectors?.removeImportedWalletConnectors(),e.connectors?I?(N&&e.connectors.addEmbeddedWalletConnectors({walletProxy:I,user:u,embeddedWallets:M,defaultChain:s.defaultChain,appId:t.appId,privyClient:n}),H.forEach((W=>e.connectors?.addImportedWalletConnector(I,W.address,s.defaultChain,t.appId)))):console.debug("Failed to add embedded wallet connector: Wallet proxy not initialized"):console.debug("Failed to add embedded wallet connector: Client connectors not initialized")}),[I,u]),T.useEffect((()=>{I&&ue.current?.(I)}),[I]),T.useEffect((()=>{if(s.externalWallets.solana.connectors)return s.externalWallets.solana.connectors.onMount(),()=>s.externalWallets.solana.connectors?.onUnmount()}),[s.externalWallets.solana.connectors]),T.useEffect((()=>{!c&&V&&(async function(){let N,M=js(),H=Kr(),W=qX();e.initializeConnectorManager({walletConnectCloudProjectId:s.walletConnectCloudProjectId,rpcConfig:s.rpcConfig,chains:s.chains,defaultChain:s.defaultChain,store:W,walletList:s.appearance.walletList,shouldEnforceDefaultChainOnConnect:s.shouldEnforceDefaultChainOnConnect,externalWalletConfig:s.externalWallets,appName:s.name??"Privy",walletChainType:s.appearance.walletChainType,setBaseAccountSdk:p}),e.connectors?.on("connectorInitialized",(()=>{N&&clearTimeout(N);let se=e.connectors.walletConnectors.length,ge=e.connectors.walletConnectors.reduce(((qe,Xe)=>qe+(Xe.initialized?1:0)),0);ge===se?Me(!0):N=setTimeout((()=>{console.debug({message:"Unable to initialize all expected connectors before timeout",initialized:ge,expected:se}),Me(!0)}),1500)})),e.connectors?.initialize().then((()=>{Cn()}));let Z=await e.getAuthenticatedUser(),ee=!!Z;s.legal.requireUsersAcceptTerms&&Z&&!Z.hasAcceptedTerms?(await e.logout(),Ze.setReadyToTrue(!0),ae(X,"logout","onSuccess")):(s.customAuth?.enabled||(pt(!!Z),Z&&ae(X,"login","onComplete",{user:Z,isNewUser:!1,wasAlreadyAuthenticated:!0,loginMethod:null,loginAccount:null}),d(Z)),M?Ce.current=ee?"link":"login":H&&!ee?(Ce.current="login",J({telegramAuthModalData:{seamlessAuth:!0}}),He("TelegramAuthScreen")):Ze.setReadyToTrue(!!Z))})()}),[e,G,c,V]),T.useEffect((()=>{if(c){if(!u||!u.linkedAccounts.find((N=>N.type==="wallet"&&N.walletClientType==="privy")))return void Ee(!!I);if([...h].some((N=>N.walletClientType==="privy")))return void Ee(!0);Ee(!!I)}}),[c,u,h,I]),T.useEffect((()=>{e.connectors?.setWalletList(s.appearance.walletList)}),[s.appearance.walletList.join()]);let js=()=>{let N=oIe();return N.inProgress&&N.popupFlow?window.opener.location.origin!==window.location.origin?void window.opener.postMessage({type:"PRIVY_OAUTH_ERROR",error:"Origins between parent and child windows do not match."}):N.authorizationCode==="error"?void window.opener.postMessage({type:"PRIVY_OAUTH_ERROR",error:"Something went wrong. Try again."}):void window.opener.postMessage({type:"PRIVY_OAUTH_RESPONSE",stateCode:N.stateCode,authorizationCode:N.authorizationCode}):(N.inProgress&&N.provider.startsWith("privy:")&&!N.popupFlow&&(new BroadcastChannel(Uk).postMessage({type:"PRIVY_OAUTH_RESPONSE",stateCode:N.stateCode,authorizationCode:N.authorizationCode}),window.close()),!!N.inProgress&&!!N.withPrivyUi&&(e.startAuthFlow(new jl({...N,customOAuthRedirectUrl:s.customOAuthRedirectUrl})),He("OAuthStatusScreen"),!0))},Kr=()=>{let N=(function(){let H;return(H=(function(){let W=new URLSearchParams(window.location.search),Z=Number(W.get("id")||""),ee=W.get("hash"),se=Number(W.get("auth_date")||""),ge=W.get("first_name");if(Z&&ge&&se&&ee)return Object.fromEntries(W.entries())})())?(Pk(),{flowType:"login-url",authData:H}):(H=(function(){let W=window.location.hash;if(!W||!W.startsWith("#tgWebAppData"))return;let Z=Ok(W.replace("#tgWebAppData=","")),{user:ee,auth_date:se,hash:ge}=Z;return ee&&se&&ge?Z:void 0})())?(Pk(),{flowType:"web-app",authData:H}):void 0})();if(!N||!s.loginMethods.telegram||!s.loginConfig.telegramAuthConfiguration?.seamlessAuthEnabled)return;let M=new Ud;return e.startAuthFlow(M),N.flowType==="login-url"&&(M.meta.telegramWebAppData=void 0,M.meta.telegramAuthResult=N.authData),N.flowType==="web-app"&&(M.meta.telegramAuthResult=void 0,M.meta.telegramWebAppData=N.authData),!0},hr=async(N,M,H,W)=>{if(N!=="solana_adapter")Ir(await e.connectors?.createEthereumWalletConnector({connectorType:N,walletClientType:M})||null,M,H,W);else{let Z=e.connectors?.findSolanaWalletConnector(M);if(!Z)return;Ir(Z,M,H,W)}};async function Ir(N,M,H,W){if(!N)return b({status:"disconnected",connectedWallet:null,connectError:new qt("Unable to connect to wallet."),connector:null,connectRetry:te}),W?.(null,H);b({status:"disconnected",connectedWallet:null,connectError:null,connector:N,connectRetry:te}),N instanceof J_&&M&&await N.resetConnection(M),b({connector:N,status:"connecting",connectedWallet:null,connectError:null,connectRetry:()=>Ir(N,M,H,W)});try{let Z=await N.connect({showPrompt:!0});if((!Z||po(Z))&&s.shouldEnforceDefaultChainOnConnect&&!s.chains.find((ee=>ee.id===Number(Z?.chainId.replace("eip155:",""))))&&(Z?.connectorType!=="wallet_connect_v2"||Z?.walletClientType!=="metamask")){b((ee=>({...ee,connector:N,status:"switching_to_supported_chain",connectedWallet:null,connectError:null,connectRetry:te})));try{await Z?.switchChain(s.defaultChain.id),Z&&(Z.chainId=rh(Ye(s.defaultChain.id)))}catch{console.warn(`Unable to switch to default chain: ${s.defaultChain.id}`)}}return b((ee=>({...ee,status:"connected",connectedWallet:Z,connectError:null,connectRetry:te}))),Z&&ae(X,"connectWallet","onSuccess",{wallet:Z}),W?.(Z,H)}catch(Z){return Z instanceof zo?(console.warn(Z.cause?Z.cause:Z.message),ae(X,"connectWallet","onError",Z.privyErrorCode||ie.GENERIC_CONNECT_WALLET_ERROR)):(console.warn(Z),ae(X,"connectWallet","onError",ie.UNKNOWN_CONNECT_WALLET_ERROR)),b((ee=>({...ee,status:"disconnected",connectedWallet:null,connectError:Z}))),W?.(null,H)}}let Gr=async(N,M,H)=>{if(N===null||!po(N))return;let W=new Tm(e,N,M,H);e.startAuthFlow(W)},ys=async(N,M,H,W="plain")=>{let Z=r(JQ);if(W==="transaction"&&!Z)throw new Y("useSolanaLedger plugin hook must be mounted");if(N===null||!VZ(N))return;let ee=new kk(N,e,M,H,W,Z);e.startAuthFlow(ee)},Cn=async()=>{let N=new URLSearchParams(window.location.search),M=N.get("privy_connector"),H=N.get("privy_wallet_client"),W=N.get("privy_connect_only")==="true";if(!M||!H)return;let Z=zZ({connectorType:M,walletClientType:H});if(!Z||!Z.isInstalled)return He("LoginFailedScreen");if(!e.connectors)throw new Y("Connector not initialized");await He(W?"ConnectOnlyStatusScreen":"ConnectionStatusScreen");let ee=new URL(window.location.href);ee.searchParams.delete("privy_connector"),ee.searchParams.delete("privy_wallet_client"),ee.searchParams.delete("privy_connect_only"),window.history.pushState({},"",ee),hr(M,H,void 0,W?void 0:M==="solana_adapter"?ys:Gr)};T.useEffect((()=>{c&&Oe&&u===null&&e.getAuthenticatedUser().then(d)}),[c,Oe,u,e]);let mt=N=>{if(!Oe)throw ae(X,"linkAccount","onError",ie.MUST_BE_AUTHENTICATED,{linkMethod:N}),new Y("User must be authenticated before linking an account.")},zs=N=>{if(!Oe||!u)return!1;if(N.walletClientType==="privy")return!0;for(let M of u.linkedAccounts)if(M.type==="wallet"&&M.address===N.address&&M.walletClientType!=="privy")return!0;return!1},Ke=()=>{Q_.setState((N=>{let M=e.connectors?.wallets.filter(po).map((H=>({...H,linked:zs(H),loginOrLink:async()=>{if(!await H.isConnected())throw new Y("Wallet is not connected");if(H.connectorType==="embedded"&&H.walletClientType==="privy")throw new Y("Cannot link or login with embedded wallet");(async W=>{let Z;if(!e.connectors)throw new Y("Connector not initialized");Z=W.type==="ethereum"?e.connectors.findWalletConnector(W.connectorType,W.walletClientType)||null:e.connectors.findSolanaWalletConnector(W.walletClientType)||null,b((ee=>({...ee,connector:Z,status:"connected",connectedWallet:W,connectError:null,connectRetry:te}))),s.captcha.enabledProvider&&!Oe?(J({captchaModalData:{callback:ee=>po(W)?Gr(W,ee):ys(W,ee),userIntentRequired:!1,onSuccessNavigateTo:"ConnectionStatusScreen",onErrorNavigateTo:"ErrorScreen"}}),await He("CaptchaScreen")):(po(W)?await Gr(W):await ys(W),await He("ConnectionStatusScreen"))})(H)},fund:async W=>{await Ze.fundWallet(H.address,W)},unlink:async()=>{if(!Oe)throw new Y("User is not authenticated.");if(H.connectorType==="embedded"&&H.walletClientType==="privy")throw new Y("Cannot unlink an embedded wallet");d(await e.unlinkEthereumWallet(H.address))}})))||[];return gR(N.ethereum,M)?{}:{ethereum:M}}))};T.useEffect((()=>{Ke()}),[u?.linkedAccounts,Oe,c]),T.useEffect((()=>{if(c){if(!e.connectors)throw new Y("Connector not initialized");Ke(),e.connectors.on("walletsUpdated",Ke)}}),[c]),T.useEffect((()=>{[...s.loginMethodsAndOrder?.primary??[],...s.loginMethodsAndOrder?.overflow??[]].filter((N=>N.startsWith("privy:"))).forEach((N=>e.getCrossAppProviderDetails(N.replace("privy:",""))))}),[!!e]);let tt=({transaction:N,sponsor:M,uiOptions:H,fundWalletConfig:W,address:Z,signOnly:ee})=>new Promise((async(se,ge)=>{let{requesterAppId:qe}=H||{},Xe=ee?"signTransaction":"sendTransaction",St=Z?Ll(u,Z):To(u);if(!St&&Z){let ut=sw(Xp(),Z);if(ut){if(M)throw new Y("Cannot sponsor transactions for externally connected wallet.");try{let Ht=await ut.getEthereumProvider(),Ge=N.data,en=r(qC);en&&(Ge=en.appendDataSuffix({data:Ge}));let Zr={...N,from:Z,chainId:N.chainId||Number(ut.chainId.replace("eip155:","")),value:N.value!==void 0?Ye(N.value):void 0,data:Ge},pi=await Ht.request({method:Xe==="sendTransaction"?"eth_sendTransaction":"eth_signTransaction",params:[Zr]});return ae(X,Xe,"onSuccess",{hash:pi}),void se({hash:pi})}catch(Ht){return ae(X,Xe,"onError",ie.TRANSACTION_FAILURE),void ge(Ht??new Si("Unable to "+Xe+Ht))}}}if(!St)return ae(X,Xe,"onError",ie.EMBEDDED_WALLET_NOT_FOUND),void ge(new Y("No embedded or connected wallet found for address."));if(!Oe||!u)return ae(X,Xe,"onError",ie.MUST_BE_AUTHENTICATED),void ge(Error("User must be authenticated before signing with a Privy wallet"));let _t=St.address,Mt=St.walletIndex??0,{entropyId:Ue,entropyIdVerifier:It}=_o(u,St),Qt=Va.wallets.find((ut=>ut.walletClientType==="privy"&&Gn(ut.address)===Gn(_t)));if(!Qt)return ae(X,Xe,"onError",ie.EMBEDDED_WALLET_NOT_FOUND),void ge(Error("Must have a Privy wallet before signing"));let cn=await Qt.getEthereumProvider(),fr=await cn.request({method:"eth_chainId"}),pr=N.chainId?Number(N.chainId):lR(fr);(ut=>{if(!s.chains.map((Ht=>Ht.id)).includes(ut))throw new qt(`Chain ID ${ut} is not supported. It must be added to the config.supportedChains property of the PrivyProvider.`,ie.UNSUPPORTED_CHAIN_ID)})(pr);let jn=N.data,Yr=r(qC);Yr&&(jn=Yr.appendDataSuffix({data:jn}));let Zt={...N,from:N.from??_t,chainId:pr,data:jn},On=await jt();if(!On||!I)return ae(X,Xe,"onError",ie.EMBEDDED_WALLET_NOT_FOUND),void ge(Error("Must have valid access token and Privy wallet to send transaction"));let pl=cg(Zt.chainId,s.chains,s.rpcConfig,{appId:t.appId}),ml=ns(St),lp=async({transactionRequest:ut})=>{try{let Ht;if(!await Ze.recoverEmbeddedWallet({address:_t}))throw ae(X,Xe,"onError",ie.UNKNOWN_CONNECT_WALLET_ERROR),ge(Error("Unable to connect to wallet")),Error("Unable to connect to wallet");if(M){let Ge=await(async({transactionRequest:en})=>{if(!ml)throw new Y("Sponsoring is only supported for wallets on the TEE stack");if(ee)throw new Y("Cannot sponsor a sign transaction request");let Zr=Ha=>Ha==null?void 0:Ye(Ha),pi=await Js(n,(async({message:Ha})=>await I.signWithUserSigner({accessToken:On,requesterAppId:qe,message:Ha})),{chain_type:"ethereum",method:"eth_sendTransaction",caip2:rh(Ye(en.chainId)),sponsor:!0,params:{transaction:{from:en.from,to:en.to,chain_id:Zr(en.chainId),data:yr(en.data)?en.data?en.data:Ye(Uint8Array.from(en.data)):void 0,value:Zr(en.value)}},wallet_id:St.id});if(pi.data&&"hash"in pi.data)return pi.data.hash;throw new Si("Unable to sign transaction")})({transactionRequest:ut});return ae(X,"sendTransaction","onSuccess",{hash:Ge}),Ge}if(ml){let Ge=Zr=>Zr==null?void 0:Ye(Zr),en=await Js(n,(async({message:Zr})=>await I.signWithUserSigner({accessToken:On,requesterAppId:qe,message:Zr})),{chain_type:"ethereum",method:"eth_signTransaction",params:{transaction:{from:ut.from,to:ut.to,nonce:Ge(ut.nonce),chain_id:Ge(ut.chainId),data:yr(ut.data)?ut.data?ut.data:Ye(Uint8Array.from(ut.data)):void 0,value:Ge(ut.value),type:ut.type,gas_limit:Ge(ut.gasLimit??ut.gas),gas_price:Ge(ut.gasPrice??ut.gas),max_fee_per_gas:Ge(ut.maxFeePerGas),max_priority_fee_per_gas:Ge(ut.maxPriorityFeePerGas)}},wallet_id:St.id});if(!en.data||!("signed_transaction"in en.data))throw new Si("Unable to sign transaction");Ht=en.data.signed_transaction}else Ht=await(async function({accessToken:Ge,entropyId:en,entropyIdVerifier:Zr,transactingWalletIndex:pi,walletProxy:Ha,transactionRequest:f0,requesterAppId:p0}){return(await Ha.rpc({entropyId:en,entropyIdVerifier:Zr,hdWalletIndex:pi??0,chainType:"ethereum",accessToken:Ge,requesterAppId:p0,request:{method:"eth_signTransaction",params:[f0]}})).response.data})({accessToken:On,entropyId:Ue,entropyIdVerifier:It,transactingWalletIndex:Mt,walletProxy:I,transactionRequest:ut,requesterAppId:qe});if(ee)return ae(X,"signTransaction","onSuccess",{signature:Ht}),Ht;{let Ge=await pl.sendRawTransaction({serializedTransaction:Ht});return ae(X,"sendTransaction","onSuccess",{hash:Ge}),Ge}}catch(Ht){throw ae(X,Xe,"onError",ie.TRANSACTION_FAILURE),Ht}};if(tr({showWalletUIs:H?.showWalletUIs})){let ut=ee||M?Zt:await Fk(Zt,pl,Zt.from);try{let Ht=await lp({transactionRequest:ut});ee?ae(X,"signTransaction","onSuccess",{signature:Ht}):ae(X,"sendTransaction","onSuccess",{hash:Ht}),se({hash:Ht})}catch(Ht){ae(X,Xe,"onError",ie.TRANSACTION_FAILURE),ge(Ht)}}else{let ut={connectingWalletAddress:_t,recoveryMethod:St.recoveryMethod,entropyId:Ue,entropyIdVerifier:It,onCompleteNavigateTo:"SendTransactionScreen",isUnifiedWallet:ml,onFailure:Ge=>{ae(X,Xe,"onError",ie.UNKNOWN_CONNECT_WALLET_ERROR),ge(Ge)}},Ht=(Ge=>!!Ge.fundingConfig&&m2(Ge.fundingConfig.options).length>=1)(s)?cI({address:_t,appConfig:s,fundWalletConfig:W,methodScreen:"FundingMethodSelectionScreen",chainIdOverride:Zt.chainId,comingFromSendTransactionScreen:!0}):void 0;J({connectWallet:ut,sendTransaction:{transactionRequest:Zt,transactingWalletIndex:Mt,transactingWalletAddress:_t,entropyId:Ue,entropyIdVerifier:It,signOnly:ee,scanTransaction:async()=>{let Ge=await Fk(Zt,pl,Zt.from);return await e.scanTransaction({metadata:{domain:s.embeddedWallets.transactionScanning.domain},chain_id:Ge.chainId.toString(),request:{method:"eth_sendTransaction",params:[{from:Ge.from,to:Ge.to,value:Ge.value?.toString(),gas:Ge.gas?.toString(),gasPrice:Ge.gasPrice?.toString(),nonce:Ge.nonce?.toString(),data:Ge.data}]}})},getIsSponsored:async()=>!!M,onConfirm:({transactionRequest:Ge})=>lp({transactionRequest:Ge}),onSuccess:Ge=>{ee?ae(X,"signTransaction","onSuccess",{signature:Ge.hash}):ae(X,"sendTransaction","onSuccess",{hash:Ge.hash}),se(Ge)},onFailure:Ge=>{ae(X,Xe,"onError",ie.TRANSACTION_FAILURE),ge(Ge)},uiOptions:H||{},fundWalletConfig:W,requesterAppId:qe},funding:Ht}),He("EmbeddedWalletConnectingScreen")}}));function Fe(){return new Promise((async(N,M)=>{let H=await jt();if(!H||!I)throw Error("Must have valid access token to enroll in MFA");try{await I.verifyMfa({accessToken:H}),N()}catch(W){M(W)}}))}let lt=N=>N?.linkedAccounts.filter((M=>M.latestVerifiedAt!==null&&!(M.type==="wallet"&&M.walletClientType==="privy"))).sort(((M,H)=>H.latestVerifiedAt.getTime()-M.latestVerifiedAt.getTime()))[0],At=N=>{let M=u?.linkedAccounts.filter((Z=>Z.type===N)).length??0,{displayName:H,loginMethod:W}=WIe(N);if(N==="passkey"&&M>=5||N!=="passkey"&&M>=1)throw ae(X,"linkAccount","onError",ie.CANNOT_LINK_MORE_OF_TYPE,{linkMethod:W}),new Y(`User already has an account of type ${H} linked.`)};async function kn({showAutomaticRecovery:N=!1,legacySetWalletPasswordFlow:M=!1}){A(null);let H=M?"setWalletPassword":"setWalletRecovery";if(!Oe||!u)throw ae(X,H,"onError",ie.MUST_BE_AUTHENTICATED),Error("User must be authenticated before adding recovery method to Privy wallet");let W=jh(u);if(!W||!I)throw ae(X,H,"onError",ie.EMBEDDED_WALLET_NOT_FOUND),Error("Must have a Privy wallet to add a recovery method");let Z=ns(W);if(Z)throw ae(X,H,"onError",ie.UNSUPPORTED_WALLET_TYPE),new Y("User owned wallet recovery is only supported for on-device execution and this app uses TEE execution. Learn more https://docs.privy.io/recipes/tee-wallet-migration-guide");try{await Fe()}catch(ee){throw ae(X,H,"onError",ie.MISSING_MFA_CREDENTIALS),ee}return new Promise(((ee,se)=>{let ge=W.recoveryMethod==="user-passcode",qe=LIe({walletAction:"update",availableRecoveryMethods:s.embeddedWallets.userOwnedRecoveryOptions,legacySetWalletPasswordFlow:M,isResettingPassword:ge,showAutomaticRecovery:N}),{entropyId:Xe,entropyIdVerifier:St}=_o(u),_t={recoveryMethod:W.recoveryMethod,connectingWalletAddress:W.address,onCompleteNavigateTo:qe,shouldForceMFA:!1,entropyId:Xe,isUnifiedWallet:Z,entropyIdVerifier:St,onFailure:Mt=>{ae(X,H,"onError",ie.UNKNOWN_CONNECT_WALLET_ERROR),se(Mt)}};J({setWalletPassword:{onSuccess:Mt=>{ae(X,H,"onSuccess",{method:"user-passcode",wallet:Mt}),ee(Mt)},onFailure:Mt=>{ae(X,H,"onError",ie.USER_EXITED_SET_PASSWORD_FLOW),se(Mt)},callAuthOnSuccessOnClose:!1},recoverWallet:{entropyId:Xe,entropyIdVerifier:St,onFailure:se},connectWallet:_t,recoverySelection:{isInAccountCreateFlow:!1,isResettingPassword:ge,shouldCreateEth:!1,shouldCreateSol:!1}}),He("EmbeddedWalletConnectingScreen")}))}async function nt({appId:N,action:M,disableSignup:H}){let W=await jt();if(M==="link"&&!W)throw ae(X,"linkAccount","onError",ie.MUST_BE_AUTHENTICATED,{linkMethod:`privy:${N}`}),new Y("User must be authenticated before linking an account.");if(M==="login"&&W)throw ae(X,"login","onError",ie.UNKNOWN_AUTH_ERROR),new Y("Attempted to log in, but user is already logged in. Use a `link` helper instead.");be.current=`privy:${N}`,Ce.current=M;let Z=s$();return e.createAnalyticsEvent({eventName:"cross_app_auth_started",payload:{providerAppId:N}}),new Promise((async(ee,se)=>{let{name:ge,logoUrl:qe}=await BU({api:e.api,providerAppId:N,requesterAppId:s.id});J({crossAppAuth:{appId:N,name:ge,logoUrl:qe,action:M,popup:Z,disableSignup:H,onSuccess:ee,onError:se}}),He("CrossAppAuthScreen")}))}let Le={ready:c,authenticated:Oe,user:u,walletConnectors:e.connectors||null,connectWallet:N=>{N&&"target"in N&&N&&(N=void 0),J({externalConnectWallet:{walletList:N?.walletList&&N?.walletList.length>0?N.walletList:void 0,walletChainType:N?.walletChainType,description:N?.description,hideHeader:N?.hideHeader}}),He("ConnectOnlyLandingScreen")},linkWallet:N=>(N&&"target"in N&&N&&(N=void 0),mt("siwe"),be.current="siwe",Ce.current="link",J({...q,externalConnectWallet:{...q.externalConnectWallet,walletList:N?.walletList,walletChainType:N?.walletChainType,description:N?.description||`Link a wallet to your ${s?.name} account`}}),He("AuthenticateWithWalletScreen")),startCrossAppAuthFlow:nt,linkEmail:()=>{mt("email"),At("email"),be.current="email",Ce.current="link",He("LinkEmailScreen")},linkPhone:()=>{mt("sms"),At("phone"),be.current="sms",Ce.current="link",He("LinkPhoneScreen")},linkGoogle:async()=>{mt("google"),At("google_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("google")},linkTwitter:async()=>{mt("twitter"),At("twitter_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("twitter")},linkTwitch:async()=>{mt("twitch"),At("twitch_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("twitch")},linkDiscord:async()=>{mt("discord"),At("discord_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("discord")},linkGithub:async()=>{mt("github"),At("github_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("github")},linkSpotify:async()=>{mt("spotify"),At("spotify_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("spotify")},linkInstagram:async()=>{mt("instagram"),At("instagram_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("instagram")},linkTiktok:async()=>{mt("tiktok"),At("tiktok_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("tiktok")},linkLine:async()=>{mt("line"),At("line_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("line")},linkLinkedIn:async()=>{mt("linkedin"),At("linkedin_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("linkedin")},linkApple:async()=>{mt("apple"),At("apple_oauth"),Ce.current="link",await Ze.initLoginWithOAuth("apple")},linkPasskey:async()=>{mt("passkey"),At("passkey"),await Ze.initLinkWithPasskey(),He("LinkPasskeyScreen")},linkTelegram:async N=>{if(mt("telegram"),At("telegram"),Ce.current="link",be.current="telegram",N?.launchParams)if(N.launchParams.initDataRaw){let M=new Ud;e.startAuthFlow(M),M.meta.telegramAuthResult=void 0,M.meta.telegramWebAppData=Ok(N.launchParams.initDataRaw),J({telegramAuthModalData:{seamlessAuth:!0}}),He("TelegramAuthScreen")}else ae(X,"linkAccount","onError",ie.INVALID_DATA,{linkMethod:"telegram"});else await Ze.initLoginWithTelegram();He("TelegramAuthScreen")},linkFarcaster:async()=>{mt("farcaster"),At("farcaster"),await Ze.initLoginWithFarcaster(),Ce.current="link",be.current="farcaster",He("FarcasterConnectStatusScreen")},updateEmail:()=>{if(mt("email"),!u?.email)throw new Y("User does not have an email linked to their account.");Ce.current="update",be.current="email",He("UpdateEmailScreen")},updatePhone:()=>{if(mt("sms"),!u?.phone)throw new Y("User does not have a phone number linked to their account.");Ce.current="update",be.current="sms",He("UpdatePhoneScreen")},login:async N=>{N&&"target"in N&&N&&(N=void 0);let M="Attempted to log in, but user is already logged in. Use a `link` helper instead.";if(!c){let H=await new Promise((W=>{K((Z=>W.bind(Z)))}));if(K(null),H)return void console.warn(M)}!u||u.isGuest?(Ce.current="login",J({login:N}),He("LandingScreen")):console.warn(M)},connectOrCreateWallet:async()=>{c||(await new Promise((N=>{K((()=>N))})),K(null)),Oe?console.warn("User must be unauthenticated to `connectOrCreateWallet`"):(Ce.current="connect-or-create",He("ConnectOrCreateScreen"))},logout:async()=>{if(Ce.current=null,be.current=null,u&&e.clearProviderAcccessTokens(u),A(null),await e.logout(),u&&I)try{await I.clearMfa({userId:u.id})}catch{}d(null),pt(!1),C({status:"initial"}),k({status:"initial"}),$({status:"initial"}),L({status:"initial"}),x({status:"initial"}),U({status:"initial"}),ae(X,"logout","onSuccess"),a(!1),Ne.del(o1),Ne.del(bP(s.id))},getAccessToken:T.useCallback((async()=>{let N=await e.getCustomerAccessToken();return N&&!Oe&&pt(!0),N}),[e,Oe]),unlinkWallet:async N=>{let M;return d(M=N.startsWith("0x")?await e.unlinkEthereumWallet(N):await e.unlinkSolanaWallet(N)),M},unlinkEmail:async N=>{let M=await e.unlinkEmail(N);return d(M),M},unlinkPhone:async N=>{let M=await e.unlinkPhone(N);return d(M),M},unlinkGoogle:async N=>{let M=await e.unlinkOAuth("google",N);return d(M),M},unlinkTwitter:async N=>{let M=await e.unlinkOAuth("twitter",N);return d(M),M},unlinkTwitch:async N=>{let M=await e.unlinkOAuth("twitch",N);return d(M),M},unlinkDiscord:async N=>{let M=await e.unlinkOAuth("discord",N);return d(M),M},unlinkGithub:async N=>{let M=await e.unlinkOAuth("github",N);return d(M),M},unlinkSpotify:async N=>{let M=await e.unlinkOAuth("spotify",N);return d(M),M},unlinkInstagram:async N=>{let M=await e.unlinkOAuth("instagram",N);return d(M),M},unlinkTiktok:async N=>{let M=await e.unlinkOAuth("tiktok",N);return d(M),M},unlinkLine:async N=>{let M=await e.unlinkOAuth("line",N);return d(M),M},unlinkLinkedIn:async N=>{let M=await e.unlinkOAuth("linkedin",N);return d(M),M},unlinkApple:async N=>{let M=await e.unlinkOAuth("apple",N);return d(M),M},unlinkFarcaster:async N=>{let M=await e.unlinkFarcaster(N);return d(M),M},unlinkTelegram:async N=>{let M=await e.unlinkTelegram(N);return d(M),M},unlinkPasskey:async N=>{let M=await jt();if(!M)throw Error("Must have valid access token to enroll in MFA");if(!I)throw Error("Wallet proxy not initialized.");let H=s.passkeys.shouldUnenrollMfaOnUnlink;await I.unlinkPasskeyAccount({credentialId:N,accessToken:M,removeAsMfa:H});let W=await e.getAuthenticatedUser();return d(W),W},unlinkCrossAppAccount:async({subject:N})=>{let M=u?.linkedAccounts.find((W=>W.type==="cross_app"&&W.subject===N))?.providerApp;if(!M)throw new Y("Invalid subject");e.storeProviderAccessToken(M.id,null);let H=await e.unlinkOAuth(`privy:${M.id}`,N);return d(H),H},setWalletRecovery:async N=>kn({legacySetWalletPasswordFlow:!1,showAutomaticRecovery:N?.showAutomaticRecovery??!1}),setWalletPassword:async()=>kn({legacySetWalletPasswordFlow:!0,showAutomaticRecovery:!1}),signMessage:(N,M)=>new Promise((async(H,W)=>{let{requesterAppId:Z}=M?.uiOptions||{},ee=N.message,se=M?.address?Ll(u,M.address):To(u);if(!se&&M?.address!==void 0){let Ue=sw(Xp(),M.address);if(Ue)try{let It=await Ue.getEthereumProvider(),Qt=await It.request({method:"personal_sign",params:[ee,Ue.address]});return ae(X,"signMessage","onSuccess",{signature:Qt}),void H({signature:Qt})}catch(It){return ae(X,"signMessage","onError",ie.UNABLE_TO_SIGN),void W(It??new Si("Unable to sign message"))}}if(!se)throw new Y("No embedded or connected wallet found for address.");if(!Oe||!u)return ae(X,"signMessage","onError",ie.MUST_BE_AUTHENTICATED),void W(Error("User must be authenticated before signing with a Privy wallet"));let ge=se.address,qe=se.walletIndex??0,{entropyId:Xe,entropyIdVerifier:St}=_o(u,se),_t=ns(se);if(typeof ee!="string"||ee.length<1)return ae(X,"signMessage","onError",ie.INVALID_MESSAGE),void W(Error("Message must be a non-empty string"));let Mt=async()=>{let Ue;if(!Oe)throw Error("User must be authenticated before signing with a Privy wallet");let It=await jt();if(!I||!It||!await Ze.recoverEmbeddedWallet({address:ge}))throw Error("Unable to connect to wallet");if(e.createAnalyticsEvent({eventName:"embedded_wallet_sign_message_started",payload:{walletAddress:ge,requesterAppId:Z}}),_t){let Qt=yr(N.message,{strict:!0}),cn=await Js(n,(async({message:fr})=>await I.signWithUserSigner({accessToken:It,requesterAppId:Z,message:fr})),{chain_type:"ethereum",method:"personal_sign",params:Qt?{message:ee.slice(2),encoding:"hex"}:{message:ee,encoding:"utf-8"},wallet_id:se.id});if(!cn.data||!("signature"in cn.data))throw new Si("Unable to sign message");Ue=cn.data.signature}else{let{response:Qt}=await I.rpc({accessToken:It,entropyId:Xe,entropyIdVerifier:St,chainType:"ethereum",hdWalletIndex:qe,requesterAppId:Z,request:{method:"personal_sign",params:[ee,ge]}});Ue=Qt.data}return e.createAnalyticsEvent({eventName:"embedded_wallet_sign_message_completed",payload:{walletAddress:ge,requesterAppId:Z}}),Ue};if(tr({showWalletUIs:M?.uiOptions?.showWalletUIs}))try{let Ue=await Mt();ae(X,"signMessage","onSuccess",{signature:Ue}),H({signature:Ue})}catch(Ue){ae(X,"signMessage","onError",ie.UNABLE_TO_SIGN),W(Ue??new Si("Unable to sign message"))}else J({signMessage:{method:"personal_sign",data:ee,confirmAndSign:Mt,onSuccess:Ue=>{ae(X,"signMessage","onSuccess",{signature:Ue}),H({signature:Ue})},onFailure:Ue=>{ae(X,"signMessage","onError",ie.UNABLE_TO_SIGN),W(Ue)},uiOptions:M?.uiOptions||{}},connectWallet:{recoveryMethod:se.recoveryMethod,connectingWalletAddress:ge,entropyId:Xe,entropyIdVerifier:St,onCompleteNavigateTo:"SignRequestScreen",isUnifiedWallet:_t,onFailure:Ue=>{ae(X,"signMessage","onError",ie.UNKNOWN_CONNECT_WALLET_ERROR),W(Ue)}}}),He("EmbeddedWalletConnectingScreen")})),signTypedData:(N,M)=>new Promise((async(H,W)=>{let{requesterAppId:Z}=M?.uiOptions||{},ee=M?.address?Ll(u,M.address):To(u);if(!ee&&M?.address){let Ue=sw(Xp(),M.address);if(Ue)try{let It=await Ue.getEthereumProvider(),Qt=fm(N),cn=await It.request({method:"eth_signTypedData_v4",params:[Ue.address,Qt]});return ae(X,"signTypedData","onSuccess",{signature:cn}),void H({signature:cn})}catch(It){return ae(X,"signTypedData","onError",ie.UNABLE_TO_SIGN),void W(It??new Si("Unable to sign typed data "+It))}}if(!ee)throw new Y("No embedded or connected wallet found for address.");if(!Oe||!u)return ae(X,"signTypedData","onError",ie.MUST_BE_AUTHENTICATED),void W(Error("User must be authenticated before signing with a Privy wallet"));let se=ee.address,ge=ee.walletIndex??0,{entropyId:qe,entropyIdVerifier:Xe}=_o(u,ee),St=ns(ee),_t=fm(N),Mt=async()=>{let Ue;if(!Oe)throw Error("User must be authenticated before signing with a Privy wallet");let It=await jt();if(!I||!It||!await Ze.recoverEmbeddedWallet({address:se}))throw Error("Unable to connect to wallet");if(e.createAnalyticsEvent({eventName:"embedded_wallet_sign_typed_data_started",payload:{walletAddress:se,requesterAppId:Z}}),St){let{domain:Qt,types:cn,primaryType:fr,message:pr}=_t,jn=await Js(n,(async({message:Yr})=>await I.signWithUserSigner({accessToken:It,requesterAppId:Z,message:Yr})),{chain_type:"ethereum",method:"eth_signTypedData_v4",params:{typed_data:{domain:Qt,types:cn,primary_type:fr,message:pr}},wallet_id:ee.id});if(!jn.data||!("signature"in jn.data))throw new Si("Unable to sign message");Ue=jn.data.signature}else{let{response:Qt}=await I.rpc({accessToken:It,entropyId:qe,entropyIdVerifier:Xe,chainType:"ethereum",hdWalletIndex:ge,requesterAppId:Z,request:{method:"eth_signTypedData_v4",params:[se,_t]}});Ue=Qt.data}return e.createAnalyticsEvent({eventName:"embedded_wallet_sign_typed_data_completed",payload:{walletAddress:se,requesterAppId:Z}}),Ue};if(tr({showWalletUIs:M?.uiOptions?.showWalletUIs}))try{let Ue=await Mt();ae(X,"signTypedData","onSuccess",{signature:Ue}),H({signature:Ue})}catch(Ue){ae(X,"signTypedData","onError",ie.UNABLE_TO_SIGN),W(Ue??new Si("Unable to sign message"))}else J({signMessage:{method:"eth_signTypedData_v4",data:_t,confirmAndSign:Mt,onSuccess:Ue=>{ae(X,"signTypedData","onSuccess",{signature:Ue}),H({signature:Ue})},onFailure:Ue=>{ae(X,"signTypedData","onError",ie.UNABLE_TO_SIGN),W(Ue)},uiOptions:M?.uiOptions||{}},connectWallet:{recoveryMethod:ee.recoveryMethod,connectingWalletAddress:ee.address,entropyId:qe,isUnifiedWallet:St,entropyIdVerifier:Xe,onCompleteNavigateTo:"SignRequestScreen",onFailure:Ue=>{ae(X,"signMessage","onError",ie.UNKNOWN_CONNECT_WALLET_ERROR),W(Ue)}}}),He("EmbeddedWalletConnectingScreen")})),sendTransaction:async(N,M)=>await tt({transaction:N,sponsor:M?.sponsor,uiOptions:M?.uiOptions,fundWalletConfig:M?.fundWalletConfig,address:M?.address,signOnly:!1}),signTransaction:async(N,M)=>({signature:(await tt({transaction:N,uiOptions:M?.uiOptions,address:M?.address,signOnly:!0})).hash}),promptMfa:Fe,async init(N){switch(N){case"sms":return void await e.initMfaSmsVerification();case"passkey":return await e.initMfaPasskeyVerification();case"totp":return;default:throw Error(`Unsupported MFA method: ${N}`)}},async submit(N,M){switch(N){case"totp":case"sms":if(typeof M!="string")throw new Y("Invalid MFA code");ce.current?.resolve({mfaMethod:N,mfaCode:M,relyingParty:window.origin}),await new Promise(((Z,ee)=>{oe.current={resolve:Z,reject:ee}}));break;case"passkey":if(typeof M=="string")throw new Y("Invalid authenticator response");let H=await xe(()=>import("./index.D9std1Z8.js"),[]),W=HIe(await H.startAuthentication({optionsJSON:M}));ce.current?.resolve({mfaMethod:N,mfaCode:W,relyingParty:window.origin}),await new Promise(((Z,ee)=>{oe.current={resolve:Z,reject:ee}}));break;default:throw ce.current?.reject(new Y("Unsupported MFA method")),new Y(`Unsupported MFA method: ${N}`)}},cancel(){ce.current?.reject(new Y("MFA canceled"))},async initEnrollmentWithSms(N){let M=await jt();if(!M||!I)throw Error("Must have valid access token to enroll in MFA");await I.initEnrollMfa({method:"sms",accessToken:M,phoneNumber:N.phoneNumber})},enrollInMfa:N=>new Promise(((M,H)=>{if(!N)return Ze.closePrivyModal(),void M();s.mfa.noPromptOnMfaRequired&&console.warn("[Privy Warning] Triggering the 'showMfaEnrollmentModal' function when 'noPromptOnMfaRequired' is set to true is unexpected. If this is intentional, ensure that you are building custom UIs for MFA verification."),J({mfaEnrollmentFlow:{mfaMethods:s.mfa.methods,shouldUnlinkOnUnenrollMfa:s.passkeys.shouldUnlinkOnUnenrollMfa,onSuccess:M,onFailure:H}}),He("MfaEnrollmentFlowScreen")})),async initEnrollmentWithTotp(){let N=await jt();if(!N||!I)throw Error("Must have valid access token to enroll in MFA");let M=await I.initEnrollMfa({method:"totp",accessToken:N});return{secret:M.secret,authUrl:M.authUrl}},async submitEnrollmentWithSms(N){let M=await jt();if(!M||!I)throw Error("Must have valid access token to enroll in MFA");await I.submitEnrollMfa({method:"sms",accessToken:M,phoneNumber:N.phoneNumber,code:N.mfaCode}),d(await e.getAuthenticatedUser())},async submitEnrollmentWithTotp(N){let M=await jt();if(!M||!I)throw Error("Must have valid access token to enroll in MFA");await I.submitEnrollMfa({method:"totp",accessToken:M,code:N.mfaCode}),d(await e.getAuthenticatedUser())},async initEnrollmentWithPasskey(){},async submitEnrollmentWithPasskey({credentialIds:N},M={}){let H=await jt();if(!H||!I)throw Error("Must have valid access token to enroll in MFA");await I.submitEnrollMfa({method:"passkey",accessToken:H,credentialIds:N,removeForLogin:M.removeForLogin}),d(await e.getAuthenticatedUser())},async unenroll(N,M={}){let H=await jt();if(!H||!I)throw Error("Must have valid access token to remove MFA");N==="passkey"?await I.submitEnrollMfa({method:"passkey",accessToken:H,credentialIds:[],removeForLogin:M.removeForLogin}):await I.unenrollMfa({method:N,accessToken:H}),d(await e.getAuthenticatedUser())},requestFarcasterSignerFromWarpcast:async()=>{let N=await jt(),M=u?.linkedAccounts.find((W=>W.type==="wallet"&&W.walletClientType==="privy"));if(!N)throw Error("Must have valid access token to connect with Farcaster");if(!I||!M)throw Error("Must have an embedded wallet to use Farcaster signers");if(ns(M))throw new Y("Farcaster signers are only supported for on-device execution and this app uses TEE execution. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide");if(!u?.farcaster?.fid)throw Error("Must have Farcaster account to use Farcaster signers");if(!await Ze.recoverEmbeddedWallet({address:M.address}))throw Error("Unable to connect to wallet");let H=await I.initFarcasterSigner({address:M.address,hdWalletIndex:null,accessToken:N,mfaCode:null,mfaMethod:null,relyingParty:window.origin});H.status==="approved"&&d(await e.getAuthenticatedUser()||u||null),J({farcasterSigner:H}),He("FarcasterSignerStatusScreen")},getFarcasterSignerPublicKey:async()=>{let N,M=await jt(),H=u?.linkedAccounts.find((W=>W.type==="wallet"&&W.walletClientType==="privy"));if(!M)throw Error("Must have valid access token to connect with Farcaster");if(!I||!H)throw Error("Must have an embedded wallet to use Farcaster signers");if(ns(H))throw new Y("Farcaster signers are only supported for on-device execution and this app uses TEE execution. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide");if(!u?.farcaster?.fid)throw Error("Must have Farcaster account to use Farcaster signers");if(!await Ze.recoverEmbeddedWallet({address:H.address}))throw Error("Unable to connect to wallet");if(!u.farcaster?.signerPublicKey)throw Error("Must have a Farcaster signer public key to sign");return N=u.farcaster.signerPublicKey.slice(2),Uint8Array.from(N.match(/.{1,2}/g).map((W=>parseInt(W,16))))},signFarcasterMessage:async N=>{let M=await jt(),H=u?.linkedAccounts.find((ee=>ee.type==="wallet"&&ee.walletClientType==="privy"));if(!M)throw Error("Must have valid access token to connect with Farcaster");if(!I||!H)throw Error("Must have an embedded wallet to use Farcaster signers");if(ns(H))throw new Y("Farcaster signers are only supported for on-device execution and this app uses TEE execution. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide");if(!u?.farcaster?.fid)throw Error("Must have Farcaster account to use Farcaster signers");if(!await Ze.recoverEmbeddedWallet({address:H.address}))throw Error("Unable to connect to wallet");if(!u.farcaster?.signerPublicKey)throw Error("Must have a Farcaster signer public key to sign");let W=await xe(()=>import("./index.D9std1Z8.js"),[]),Z=await I.signFarcasterMessage({address:H.address,hdWalletIndex:null,accessToken:M,mfaCode:null,mfaMethod:null,payload:{hash:W.bufferToBase64URLString(N)},fid:BigInt(u.farcaster.fid),relyingParty:window.origin});return new Uint8Array(W.base64URLStringToBuffer(Z.signature))},signMessageWithCrossAppWallet(N,{address:M,chainId:H}){let W=u?.linkedAccounts.some((Z=>Z.type==="cross_app"&&Z.smartWallets.some((ee=>ee.address===M))));return Jp({user:u,client:e,address:M,requesterAppId:s.id,request:{method:W?"privy_signSmartWalletMessage":"personal_sign",params:[N,M],chainId:H},reconnect:nt})},signTypedDataWithCrossAppWallet(N,{address:M,chainId:H}){let W=u?.linkedAccounts.some((ee=>ee.type==="cross_app"&&ee.smartWallets.some((se=>se.address===M)))),Z=fm(N);return Jp({user:u,client:e,address:M,requesterAppId:s.id,request:{method:W?"privy_signSmartWalletTypedData":"eth_signTypedData_v4",params:[M,Z],chainId:H},reconnect:nt})},sendTransactionWithCrossAppWallet(N,{address:M}){let H=u?.linkedAccounts.some((W=>W.type==="cross_app"&&W.smartWallets.some((Z=>Z.address===M))));return Jp({user:u,client:e,address:M,requesterAppId:s.id,request:{method:H?"privy_sendSmartWalletTx":"eth_sendTransaction",params:[N],chainId:N.chainId},reconnect:nt})},signTransactionWithCrossAppWallet(N,{address:M}){let H=u?.linkedAccounts.some((W=>W.type==="cross_app"&&W.smartWallets.some((Z=>Z.address===M))));return Jp({user:u,client:e,address:M,requesterAppId:s.id,request:{method:H?"privy_signSmartWalletTx":"eth_signTransaction",params:[N],chainId:N.chainId},reconnect:nt})},isModalOpen:i||!!o,mfaMethods:s.mfa.methods};FU=Le.signMessage,jU=Le.signTypedData,WU=async(N,M)=>await tt({transaction:N,...M,signOnly:!1}),zU=async(N,M)=>({signature:(await tt({transaction:N,...M,signOnly:!0})).hash});let nr=async N=>{let M,H,W;y(!0),x({status:"loading"}),e.startAuthFlow(new jl({...N,customOAuthRedirectUrl:s.customOAuthRedirectUrl}));let Z=Ne.get(Xm),ee=N.stateCode;if(Z!==ee)throw e.createAnalyticsEvent({eventName:"possible_phishing_attempt",payload:{provider:N.provider,storedStateCode:Z??"",returnedStateCode:ee??""}}),y(!1),new Y("Unexpected auth flow. This may be a phishing attempt.",void 0,ie.OAUTH_UNEXPECTED);if(await e.getAccessToken()!==null)try{({user:M,oAuthTokens:W}=await e.link()),be.current=N.provider;let se=lt(M);M&&se&&ae(X,"linkAccount","onSuccess",{user:M,linkMethod:be.current,linkedAccount:se})}catch(se){throw y(!1),ae(X,"linkAccount","onError",se.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:N.provider}),se}else try{({user:M,isNewUser:H,oAuthTokens:W}=await e.authenticate()),be.current=N.provider;let se=lt(M);M&&se&&H!==void 0&&ae(X,"login","onComplete",{user:M,isNewUser:H,wasAlreadyAuthenticated:!1,loginMethod:be.current,loginAccount:se})}catch(se){throw y(!1),x({status:"error",error:se}),ae(X,"login","onError",se.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),se}return d(M),g(H||!1),pt(!0),y(!1),x({status:"done"}),W&&M&&ae(X,"oAuthAuthorization","onOAuthTokenGrant",{oAuthTokens:W,user:M}),M??void 0},Ze={privy:n,setAuthenticated:pt,setUser:d,setIsNewUser:g,isNewUserThisSession:m,pendingTransaction:null,walletConnectionStatus:E,setWalletConnectionStatus:b,connectors:e.connectors?.walletConnectors??[],rpcConfig:s.rpcConfig,chains:s.chains,appId:t.appId,showFiatPrices:s.embeddedWallets.priceDisplay.primary!=="native-token",clientAnalyticsId:e.clientAnalyticsId,hideWalletUIs:Sr,isHeadlessSigning:T.useCallback(tr,[s.embeddedWallets.showWalletUIs]),emailOtpState:P,setEmailOtpState:C,smsOtpState:B,setSmsOtpState:k,oAuthState:v,setOAuthState:x,telegramAuthState:O,setTelegramAuthState:U,siweState:D,setSiweState:L,isHeadlessOAuthLoading:w,baseAccountSdk:f,setBaseAccountSdk:p,nativeTokenSymbolForChainId:N=>s.chains.find((M=>M.id===Number(N)))?.nativeCurrency.symbol,initializeWalletProxy:async N=>{if(I)return I;let M=new Promise((Z=>{ue.current=Z})),H=new Promise((Z=>setTimeout((()=>Z(null)),N))),W=await Promise.race([M,H]);return ue.current=null,W},getAuthFlow:()=>e.authFlow,getAuthMeta:()=>e.authFlow?.meta,client:e,closePrivyModal:async(N={shouldCallAuthOnSuccess:!0,isSuccess:!1})=>{let M,H=c&&Oe&&u;if(H&&be.current&&(M=lt(u)),Ce.current==="login")N.shouldCallAuthOnSuccess&&H&&be.current?ae(X,"login","onComplete",{user:u,isNewUser:m,wasAlreadyAuthenticated:!1,loginMethod:be.current,loginAccount:M??null}):ae(X,"login","onError",ie.USER_EXITED_AUTH_FLOW);else if(Ce.current==="link"&&M)N.isSuccess&&H&&be.current?ae(X,"linkAccount","onSuccess",{user:u,linkMethod:be.current,linkedAccount:M}):be.current&&ae(X,"linkAccount","onError",ie.USER_EXITED_LINK_FLOW,{linkMethod:be.current});else if(Ce.current==="update"&&M)N.isSuccess&&H&&be.current?ae(X,"update","onSuccess",{user:u,updateMethod:be.current,updatedAccount:M}):be.current&&ae(X,"update","onError",ie.USER_EXITED_UPDATE_FLOW,{linkMethod:be.current});else if(Ce.current==="connect-or-create"){let ee=Xp();ee[0]?ae(X,"connectOrCreateWallet","onSuccess",{wallet:ee[0]}):ae(X,"connectOrCreateWallet","onError",ie.USER_EXITED_AUTH_FLOW)}let W=_&&Qb.has(_),Z=_==="ErrorScreen"&&q.errorModalData&&Qb.has(q.errorModalData.previousScreen);if((W||Z)&&q.funding){let ee,se=Qb.get(_)??null;if(Z&&q.funding?.onError){let ge=q.errorModalData?.error,qe=ge?.privyErrorCode||ie.UNKNOWN_FUNDING_ERROR,Xe=new Y(ge?.message||"Funding failed",ge,qe);q.funding?.onError?.(Xe)}if(q.funding.chainType==="solana"){let ge=s.solanaRpcs[q.funding.chain];if(!ge)return console.warn("Unable to load solana rpc, skipping balance"),ae(X,"fundSolanaWallet","onUserExited",{address:q.funding.address,fundingMethod:se,chain:q.funding.chain,balance:ee}),a(!1),void Mk(q.funding,se);if(r(ZQ))try{ee=await jIe({rpc:ge.rpc,address:q.funding.address})}catch{console.error("Unable to pull wallet balance")}else console.warn("Unable to load solana plugin, skipping balance");ae(X,"fundSolanaWallet","onUserExited",{address:q.funding.address,fundingMethod:se,chain:q.funding.chain,balance:ee})}else{let ge=cg(q.funding.chain.id,s.chains,s.rpcConfig,{appId:t.appId});try{ee=await ge.getBalance({address:q.funding.address})}catch{console.error("Unable to pull wallet balance")}ae(X,"fundWallet","onUserExited",{address:q.funding.address,chain:q.funding.chain,fundingMethod:se,balance:ee}),Mk(q.funding,se)}}J((ee=>({...ee,externalConnectWallet:{}}))),Ce.current=null,be.current=null,g(!1),a(!1),b({status:"disconnected",connectedWallet:null,connector:null,connectError:null,connectRetry:()=>{}}),setTimeout((()=>{e.authFlow=void 0}),200)},openPrivyModal:He,connectWallet:Ir,initLoginWithWallet:async(N,M,H,W)=>{po(N)?(be.current="siwe",Gr(N,M,H)):(be.current="siws",ys(N,M,H,W))},loginWithWallet:async()=>{let N,M,H;if(!c)throw new Zo;if(e.authFlow instanceof Tm?N="siwe":e.authFlow instanceof kk&&(N="siws"),!N)throw new Y("Must initialize SIWE/SIWS flow first.");if(await e.getAccessToken()!==null)try{({user:M}=await e.link()),be.current=N}catch(W){throw ae(X,"linkAccount","onError",W.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:N}),W}else try{({user:M,isNewUser:H}=await e.authenticate()),be.current=N}catch(W){throw ae(X,"login","onError",W.privyErrorCode||ie.GENERIC_CONNECT_WALLET_ERROR),W}d(M||u||null),g(H||!1),pt(!0)},delegateWallet:async({address:N,chainType:M,showDelegationUIs:H})=>new Promise((async(W,Z)=>{let ee=await jt();if(!Oe||!u||!ee)throw new Y("User must be authenticated and have an embedded wallet to delegate actions.");if(M!=="solana"&&M!=="ethereum")throw new Y("Only Solana and Ethereum embedded wallets are supported for delegation and revocation.");let se=Ze.walletProxy??await Ze.initializeWalletProxy(15e3);if(!se)throw new Y("Wallet proxy not initialized.");if((({address:_t,user:Mt})=>!!Dk(Mt).find((Ue=>Ue.address===_t)))({address:N,user:u}))return W();let ge=Ll(u,N);if(!ge)throw new Y("Address to delegate is not associated with current user.");if(ns(ge))throw new Y("useDelegatedActions is only supported for on-device execution and this app uses TEE execution. Use the useSessionSigners hook to provision server side access on behalf of your users. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide");let qe=NIe({address:N,user:u}),Xe=DIe({address:N,user:u}),St=async()=>{await se.createDelegatedAction({accessToken:ee,rootWallet:Xe,delegatedWallets:[qe]}),await Ze.refreshSessionAndUser()};if(await Ze.recoverEmbeddedWallet({address:N}),H)J({delegatedActions:{consent:{address:N,onDelegate:St,onSuccess:async()=>{W()},onError:async _t=>{Z(_t)}}}}),He("DelegatedActionsConsentScreen");else try{await St(),W()}catch(_t){Z(_t)}})),revokeDelegatedWallets:async({showDelegationUIs:N})=>new Promise((async(M,H)=>{if(!Oe||!u)throw new Y("User must be authenticated and have an embedded wallet to revoke a delegated wallet.");let W=Dk(u);if(W.length===0)throw new Y("User has no delegated wallets to revoke.");if(W.some(ns))throw new Y("useDelegatedActions is only supported for on-device execution and this app uses TEE execution. Use the useSessionSigners hook to provision server side access on behalf of your users. Learn more at https://docs.privy.io/recipes/tee-wallet-migration-guide");let Z=async()=>{await e.revokeDelegatedWallet(),await Ze.refreshSessionAndUser()};if(N)J({delegatedActions:{revoke:{onRevoke:Z,onSuccess:async()=>{M()},onError:async ee=>{H(ee)}}}}),He("DelegatedActionsRevokeScreen");else try{await Z(),M()}catch(ee){H(ee)}})),initLoginWithFarcaster:async(N,M)=>{let H=new Tk(N,M);e.startAuthFlow(H);try{be.current="farcaster",await H.initializeFarcasterConnect()}catch(W){throw Ce.current==="login"?ae(X,"login","onError",W.privyErrorCode||ie.UNKNOWN_AUTH_ERROR):Ce.current==="link"&&ae(X,"linkAccount","onError",W.privyErrorCode||ie.UNKNOWN_AUTH_ERROR,{linkMethod:"farcaster"}),W}},loginWithFarcaster:async()=>{let N,M;if(!c)throw new Zo;if(!(e.authFlow instanceof Tk))throw new Y("Must initialize Farcaster flow first.");if(await e.getAccessToken()!==null)try{({user:N}=await e.link()),be.current="farcaster"}catch(H){throw ae(X,"linkAccount","onError",H.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"farcaster"}),H}else try{({user:N,isNewUser:M}=await e.authenticate()),be.current="farcaster"}catch(H){throw ae(X,"login","onError",H.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),H}d(N||null),g(M||!1),pt(!0)},async crossAppAuthFlow({appId:N,popup:M,action:H,disableSignup:W}){let Z=`privy:${N}`;be.current=Z;let{url:ee,stateCode:se,codeVerifier:ge}=await(async function({api:qe,appId:Xe}){let St=Jx(),_t=PU(),Mt=await RU(St);try{let{url:Ue}=await qe.post(o$,{provider:`privy:${Xe}`,redirect_to:window.location.href,code_challenge:Mt,state_code:_t});return{url:Ue,stateCode:_t,codeVerifier:St}}catch(Ue){throw dt(Ue)}})({api:e.api,appId:N});if(!ee)throw e.createAnalyticsEvent({eventName:"cross_app_auth_error",payload:{error:"Unable to open cross-app auth popup",appId:N}}),new Y("No authorization URL returned for cross-app auth.");try{let qe=await(async function({url:Ue,popup:It}){return It.location=Ue,new Promise(((Qt,cn)=>{let fr,pr=setTimeout((()=>{cn(new Y("Authorization request timed out after 2 minutes.")),jn()}),12e4);function jn(){It?.close(),window.removeEventListener("message",Zt)}let Yr=setInterval((()=>{It?.closed&&!fr&&(jn(),clearInterval(Yr),clearTimeout(pr),cn(new Y("User rejected request")))}),300);function Zt(On){On.data&&(On.data.type==="PRIVY_OAUTH_RESPONSE"&&On.data.stateCode&&On.data.authorizationCode&&(clearTimeout(pr),Qt(On.data),jn()),On.data.type==="PRIVY_OAUTH_ERROR"&&(clearTimeout(pr),cn(new Y(On.data.error)),jn()),On.data.type===Bk&&((fr=new BroadcastChannel(Uk)).onmessage=Zt))}window.addEventListener("message",Zt)}))})({url:ee,popup:M,provider:Z}),Xe=qe.stateCode,St=qe.authorizationCode;if(Xe!==se)throw e.createAnalyticsEvent({eventName:"possible_phishing_attempt",payload:{provider:Z,storedStateCode:se??"",returnedStateCode:Xe??""}}),new Y("Unexpected auth flow. This may be a phishing attempt.",void 0,ie.OAUTH_UNEXPECTED);let _t=await(async function({appId:Ue,stateCode:It,codeVerifier:Qt,authorizationCode:cn,action:fr,client:pr,disableSignup:jn}){if(!cn||!It)throw new Y("[Cross-App AuthFlow] Authorization and state codes code must be set prior to calling authenicate.");if(cn==="undefined")throw new Y("User denied confirmation during cross-app auth flow");try{let Yr=new UIe({authorizationCode:cn,stateCode:It,codeVerifier:Qt,provider:`privy:${Ue}`,disableSignup:!!jn});pr.startAuthFlow(Yr);let Zt=fr==="link"?await pr.link():await pr.authenticate(),On=Zt.oAuthTokens?.accessToken;return console.debug(),On}catch(Yr){let Zt=dt(Yr);throw Zt.privyErrorCode===ie.ACCOUNT_TRANSFER_REQUIRED?Zt:Zt.privyErrorCode?new Y(Zt.message||"Invalid code during cross-app auth flow.",void 0,Zt.privyErrorCode):Zt.message==="User denied confirmation during cross-app auth flow"?new Y("Invalid code during cross-app auth flow.",void 0,ie.OAUTH_USER_DENIED):new Y("Invalid code during cross-app auth flow.",void 0,ie.UNKNOWN_AUTH_ERROR)}})({appId:N,codeVerifier:ge,stateCode:Xe,authorizationCode:St,action:H,client:e,disableSignup:W});_t&&e.storeProviderAccessToken(N,_t);let Mt=await Ze.refreshSessionAndUser();if(!Mt)throw new Y("Unable to update user");return e.createAnalyticsEvent({eventName:"cross_app_auth_completed",payload:{providerAppId:N}}),Mt}catch(qe){throw e.createAnalyticsEvent({eventName:"cross_app_auth_error",payload:{error:qe.toString(),provider:Z}}),qe}},async initLoginWithOAuth(N,M,H){if(be.current=N,!w1()||N==="google"&&!s.allowOAuthInEmbeddedBrowsers&&Lk(window.navigator.userAgent))return void He("InAppBrowserLoginNotPossible");N==="twitter"&&window.opener&&window.opener.postMessage({type:Bk},"*"),Ne.del(Qm),Ne.del(th);let W=new jl({provider:N,disableSignup:!!H,withPrivyUi:!0,customOAuthRedirectUrl:s.customOAuthRedirectUrl});M&&W.addCaptchaToken(M),e.startAuthFlow(W);let Z=await e.authFlow.getAuthorizationUrl();if(Z&&Z.url)if(N==="twitter"&&Ba.isAndroid&&(Z.url=Z.url.replace("x.com","twitter.com")),window.location.protocol==="chrome-extension:"&&K_())try{let{privyOAuthCode:ee,privyOAuthState:se}=await Ck(Z.url);He("OAuthStatusScreen"),W.meta.stateCode=se,W.meta.authorizationCode=ee}catch(ee){throw console.error("OAuth in chrome extension flow failed:",ee),ee}else window.location.assign(Z.url)},async initLoginWithTelegram(N,M){if(!c)throw new Zo;be.current="telegram";let H=new Ud(N,M);e.startAuthFlow(H),U({status:"loading"}),H.meta.telegramWebAppData=void 0,H.meta.telegramAuthResult=await new Promise(((W,Z)=>s.loginConfig.telegramAuthConfiguration?window.Telegram?void window.Telegram.Login.auth({bot_id:s.loginConfig.telegramAuthConfiguration.botId,request_access:!0},(ee=>ee?W(ee):(Ce.current==="link"?ae(X,"linkAccount","onError",ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"telegram"}):Ce.current==="login"?ae(X,"login","onError",ie.INVALID_CREDENTIALS):Ce.current==="update"&&ae(X,"login","onError",ie.FAILED_TO_UPDATE_ACCOUNT),Z(new Y("Telegram auth failed or was canceled by the client"))))):Z(new Y("Telegram was not initialized")):Z(new Y("Telegram Auth configuration is not loaded"))))},async loginWithTelegram(N){let M,H;if(!(e.authFlow instanceof Ud))throw new Y("Must initialize Telegram flow before calling loginWithTelegram");e.authFlow.meta.captchaToken||=N?.captchaToken;let W=await jt(),Z=N?.intent||Ce.current;if(Z==="login")try{let se=await e.authenticate();M=se.user,H=se.isNewUser,be.current="telegram"}catch(se){throw ae(X,"login","onError",se.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),se}else{if(Z!=="link")throw new Y("Unknown auth intent");try{M=(await e.link()).user,be.current="telegram"}catch(se){throw ae(X,"linkAccount","onError",se.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"telegram"}),se}}d(M),g(H||!1),pt(!0),U({status:"done"});let ee=M?.linkedAccounts.find((({type:se})=>se==="telegram"))||null;return{user:M,isNewUser:H||!1,wasAlreadyAuthenticated:!!W,loginAccount:ee}},async loginWithOAuth(N){let M,H,W;if(!(e.authFlow instanceof jl))throw new Y("Must initialize OAuth flow before calling loginWithOAuth");let Z=Ne.get(Xm),ee=e.authFlow.meta.stateCode;if(Z!==ee)throw e.createAnalyticsEvent({eventName:"possible_phishing_attempt",payload:{provider:N,storedStateCode:Z??"",returnedStateCode:ee??""}}),new Y("Unexpected auth flow. This may be a phishing attempt.",void 0,ie.OAUTH_UNEXPECTED);if(await e.getAccessToken()!==null)try{let se=await e.link();M=se.user,W=se.oAuthTokens,be.current=N}catch(se){throw ae(X,"linkAccount","onError",se.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:N}),se}else try{let se=await e.authenticate();M=se.user,H=se.isNewUser,W=se.oAuthTokens,be.current=N}catch(se){throw Ce.current==="login"?ae(X,"login","onError",se.privyErrorCode||ie.UNKNOWN_AUTH_ERROR):Ce.current==="link"&&ae(X,"linkAccount","onError",se.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:N}),se}return d(M),g(H||!1),pt(!0),W&&M&&ae(X,"oAuthAuthorization","onOAuthTokenGrant",{oAuthTokens:W,user:M}),W},passkeyAuthState:S,setPasskeyAuthState:$,async initSignupWithPasskey({captchaToken:N,withPrivyUi:M}){let H=new $l({captchaToken:N,setPasskeyAuthState:$,hints:s.passkeys.registration?.hints});e.startAuthFlow(H),Ce.current="login";try{be.current="passkey",$({status:"generating-challenge"}),await H.initRegisterFlow(M),$({status:"awaiting-passkey"})}catch(W){throw $({status:"error",error:W}),ae(X,"login","onError",W.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),W}},async signupWithPasskey(){let N,M;if(!c)throw new Zo;if(!(e.authFlow instanceof $l))throw new Y("Must initialize Passkey flow first.");if(be.current!=="passkey"){let Z=new Y("Must init login with Passkey flow first.");throw $({status:"error",error:Z}),Z}let H=await jt();try{be.current="passkey",$({status:"awaiting-passkey"}),{user:N,isNewUser:M}=await e.authenticate()}catch(Z){throw $({status:"error",error:Z}),ae(X,"login","onError",Z.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),Z}d(N),g(M||!1),pt(!0),$({status:"done"});let W=N?.linkedAccounts.find((({type:Z})=>Z==="passkey"))||null;return{user:N,isNewUser:M||!1,wasAlreadyAuthenticated:!!H,loginAccount:W}},async initLoginWithPasskey({captchaToken:N,withPrivyUi:M}){let H=new $l({captchaToken:N,setPasskeyAuthState:$,hints:void 0});e.startAuthFlow(H),Ce.current="login";try{be.current="passkey",$({status:"generating-challenge"}),await H.initAuthenticationFlow(M),$({status:"awaiting-passkey"})}catch(W){throw $({status:"error",error:W}),ae(X,"login","onError",W.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),W}},async loginWithPasskey(N){let M,H;if(!c)throw new Zo;if(!(e.authFlow instanceof $l))throw new Y("Must initialize Passkey flow first.");if(N?.credentialIds&&(e.authFlow.meta.allowedCredentialsIds=N.credentialIds),be.current!=="passkey"){let ee=new Y("Must init login with Passkey flow first.");throw $({status:"error",error:ee}),ee}let W=await jt();try{be.current="passkey",$({status:"awaiting-passkey"}),{user:M,isNewUser:H}=await e.authenticate()}catch(ee){throw $({status:"error",error:ee}),ae(X,"login","onError",ee.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),ee}d(M),g(H||!1),pt(!0),$({status:"done"});let Z=M?.linkedAccounts.find((({type:ee})=>ee==="passkey"))||null;return{user:M,isNewUser:H||!1,wasAlreadyAuthenticated:!!W,loginAccount:Z}},async initLinkWithPasskey(N){let M=new $l({captchaToken:N,hints:s.passkeys.registration?.hints});e.startAuthFlow(M),Ce.current="link",be.current="passkey",$({status:"generating-challenge"});try{await M.initLinkFlow(),$({status:"awaiting-passkey"})}catch(H){throw ae(X,"linkAccount","onError",H.privyErrorCode||ie.UNKNOWN_AUTH_ERROR,{linkMethod:"passkey"}),$({status:"error",error:H}),H}},async linkWithPasskey(){let N;if(!c)throw new Zo;if(!(e.authFlow instanceof $l))throw new Y("Must initialize Passkey flow first.");if(be.current!=="passkey")throw new Y("Must init login with Passkey flow first.");try{be.current="passkey",{user:N}=await e.link()}catch(M){throw ae(X,"linkAccount","onError",M.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"passkey"}),M}return d(N||u||null),$({status:"done"}),N},async initLoginWithHeadlessOAuth(N,M,H){if(!w1()||N==="google"&&!s.allowOAuthInEmbeddedBrowsers&&Lk(window.navigator.userAgent))throw Error("It looks like you're using an in-app browser.  To log in, please try again using an external browser.");let W=new jl({provider:N,withPrivyUi:!1,disableSignup:H??!1,customOAuthRedirectUrl:s.customOAuthRedirectUrl});M&&W.addCaptchaToken(M),x({status:"loading"});let Z=await e.startAuthFlow(W).getAuthorizationUrl();if(Z?.url)if(window.location.protocol==="chrome-extension:"&&K_())try{let{privyOAuthCode:ee,privyOAuthState:se}=await Ck(Z.url);W.meta.stateCode=se,W.meta.authorizationCode=ee,await nr(W.meta)}catch(ee){throw x({status:"error",error:ee}),ee}else window.location.assign(Z.url)},loginWithHeadlessOAuth:nr,initLoginWithEmail:async({email:N,captchaToken:M,disableSignup:H,withPrivyUi:W})=>{let Z=new eu({email:N,captchaToken:M,disableSignup:H});e.startAuthFlow(Z);try{be.current="email",C({status:"sending-code"});let ee=await Z.sendCodeEmail({withPrivyUi:W});if(ee?.ssoRedirectUrl)return window.location.href=ee.ssoRedirectUrl,void await ug(1e4);C({status:"awaiting-code-input"})}catch(ee){throw C({status:"error",error:ee}),Ce.current==="login"?ae(X,"login","onError",ee.privyErrorCode||ie.UNKNOWN_AUTH_ERROR):Ce.current==="link"&&ae(X,"linkAccount","onError",ee.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"email"}),ee}},initUpdateEmail:async({oldAddress:N,newAddress:M,captchaToken:H})=>{let W=new aIe(N,M,H);e.startAuthFlow(W);try{await W.sendCodeEmail({withPrivyUi:!0})}catch(Z){throw ae(X,"update","onError",Z.privyErrorCode||ie.UNKNOWN_AUTH_ERROR,{linkMethod:be.current}),Z}},initUpdatePhone:async(N,M,H)=>{let W=new cIe(N,M,H);e.startAuthFlow(W);try{await W.sendSmsCode({withPrivyUi:!0})}catch(Z){ae(X,"update","onError",Z.privyErrorCode||ie.UNKNOWN_AUTH_ERROR,{linkMethod:be.current})}},initLoginWithSms:async({phoneNumber:N,captchaToken:M,disableSignup:H,withPrivyUi:W})=>{k({status:"sending-code"});let Z=new tu({phoneNumber:N,captchaToken:M,disableSignup:H});e.startAuthFlow(Z);try{be.current="sms",await Z.sendSmsCode({withPrivyUi:W}),k({status:"awaiting-code-input"})}catch(ee){throw k({status:"error",error:ee}),Ce.current==="login"?ae(X,"login","onError",ee.privyErrorCode||ie.UNKNOWN_AUTH_ERROR):Ce.current==="link"&&ae(X,"linkAccount","onError",ee.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"sms"}),ee}},resendEmailCode:async()=>{await e.authFlow?.sendCodeEmail({withPrivyUi:!0})},resendSmsCode:async()=>{await e.authFlow?.sendSmsCode({withPrivyUi:!0})},loginWithCode:async N=>{let M,H;function W(ge){e.authFlow instanceof eu?C(ge):e.authFlow instanceof tu&&k(ge)}if(W({status:"submitting-code"}),!c){let ge=new Zo;throw W({status:"error",error:ge}),ge}if(e.authFlow instanceof eu)e.authFlow.meta.emailCode=N.trim();else{if(!(e.authFlow instanceof tu)){let ge=new Y("Must initialize a passwordless code flow first");throw W({status:"error",error:ge}),ge}e.authFlow.meta.smsCode=N.trim()}let Z=await jt();if(Ce.current==="link")try{({user:M}=await e.link())}catch(ge){throw W({status:"error",error:ge}),ae(X,"linkAccount","onError",ge.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:be.current}),ge}else if(Ce.current==="update")try{({user:M}=await e.link())}catch(ge){throw W({status:"error",error:ge}),ae(X,"update","onError",ge.privyErrorCode||ie.FAILED_TO_UPDATE_ACCOUNT,{linkMethod:be.current}),ge}else try{({user:M,isNewUser:H}=await e.authenticate())}catch(ge){throw W({status:"error",error:ge}),ae(X,"login","onError",ge.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),ge}let ee=M||u;d(ee||null),g(H||!1),pt(!0),W({status:"done"});let se=null;return e.authFlow instanceof eu?se=ee?.linkedAccounts.find((({type:ge})=>ge==="email"))||null:e.authFlow instanceof tu&&(se=ee?.linkedAccounts.find((({type:ge})=>ge==="phone"))||null),{user:ee,isNewUser:H||!1,wasAlreadyAuthenticated:!!Z,linkedAccount:se}},generateSiweMessage:async({address:N,chainId:M,captchaToken:H})=>{Ce.current=Oe?"link":"login",be.current="siwe",L({status:"generating-message"});let W=await e.generateSiweNonce({address:N,captchaToken:H});return L({status:"awaiting-signature"}),Y_({address:N,chainId:M.replace("eip155:",""),nonce:W})},generateSiweMessageForSmartWallet:async({address:N,chainId:M})=>{let H=await e.generateSiweNonce({address:N});return Y_({address:N,chainId:M.replace("eip155:",""),nonce:H})},linkSmartWallet:async({message:N,signature:M,smartWalletType:H,smartWalletVersion:W})=>{let Z;Z=await e.linkSmartWallet({message:N,signature:M,smartWalletType:H,smartWalletVersion:W}),d((Z=await Ze.refreshSessionAndUser()??Z)||u||null)},loginWithSiwe:async({message:N,signature:M,captchaToken:H,disableSignup:W,walletClientType:Z,connectorType:ee})=>{let se,ge=null;try{if(u)throw Error("User already authenticated");let qe=new Tm(e,void 0,H,W,{message:N,signature:M,walletClientType:Z,connectorType:ee});if(e.startAuthFlow(qe),be.current="siwe",Ce.current="login",L({status:"submitting-signature"}),{user:ge,isNewUser:se}=await e.authenticate(),!ge)throw Error("Authentication failed - no user returned")}catch(qe){throw ae(X,"login","onError",qe.privyErrorCode||ie.UNKNOWN_AUTH_ERROR),L({status:"error",error:qe}),qe}return d(ge),g(se||!1),pt(!0),L({status:"done"}),Ce.current=null,be.current=null,{user:ge,isNewUser:se||!1}},linkWithSiwe:async({message:N,signature:M,chainId:H,walletClientType:W,connectorType:Z})=>{let ee;mt("siwe");let se=null;try{L({status:"submitting-signature"}),ee=await e.linkWithSiwe({message:N,signature:M,chainId:H,walletClientType:W,connectorType:Z}),ee=await Ze.refreshSessionAndUser()??ee,L({status:"done"}),(se=lt(ee)||null)&&ae(X,"linkAccount","onSuccess",{user:ee,linkMethod:"siwe",linkedAccount:se})}catch(qe){throw ae(X,"linkAccount","onError",qe.privyErrorCode||ie.FAILED_TO_LINK_ACCOUNT,{linkMethod:"siwe"}),Ce.current=null,be.current=null,L({status:"error",error:qe}),qe}let ge=ee||u;return d(ge||null),Ce.current=null,be.current=null,{user:ge,linkedAccount:se}},refreshSessionAndUser:async()=>{let N=await e.getAuthenticatedUser();return pt(!!N),d(N),N},walletProxy:I,createAnalyticsEvent:({eventName:N,payload:M,timestamp:H})=>e.createAnalyticsEvent({eventName:N,payload:M,timestamp:H}),acceptTerms:async()=>{let N=await e.acceptTerms();return d(N),N},getUsdTokenPrice:N=>e.getUsdTokenPrice(N),getUsdPriceForSol:()=>e.getUsdPriceForSol(),getSplTokenMetadata:N=>e.getSplTokenMetadata(N),recoverEmbeddedWallet:async N=>new Promise((async(M,H)=>{if(!u)return void M(!0);let W=N?.address?Ll(u,N.address):jh(u)||l1(u).at(0)||hY(u).at(0);if(!W||ns(W))return void M(!0);let Z=await jt();if(!Z||!I||!W)return void H(Error("Must have valid access token and Privy wallet to recover wallet"));let{entropyId:ee,entropyIdVerifier:se}=_o(u,W);try{await I.connect({accessToken:Z,entropyId:ee,entropyIdVerifier:se}),M(!0)}catch(ge){if(zg(ge)&&W.recoveryMethod==="privy"){let qe;e.createAnalyticsEvent({eventName:"embedded_wallet_pinless_recovery_started",payload:{walletAddress:W.address}});try{qe=await I.recover({entropyId:ee,entropyIdVerifier:se,accessToken:Z})}catch(Xe){return void H(Xe)}qe.entropyId||H(Error("Unable to recover wallet")),e.createAnalyticsEvent({eventName:"embedded_wallet_recovery_completed",payload:{walletAddress:W.address}}),M(!0)}else zg(ge)&&W.recoveryMethod!=="privy"&&W.recoveryMethod!=="privy-v2"?(J({recoverWallet:{entropyId:ee,entropyIdVerifier:se,onFailure:H,onSuccess:()=>M(!0)},recoveryOAuthStatus:{provider:W.recoveryMethod,action:"recover",shouldCreateEth:!1,shouldCreateSol:!1}}),He(FIe(W.recoveryMethod))):H(ge)}})),setReadyToTrue:N=>{l(!0),G?.(N)},updateWallets:()=>Ke(),fundWallet:async(N,M)=>{let H="FundingMethodSelectionScreen";return new Promise(((W,Z)=>{J({funding:{...cI({address:N,appConfig:s,fundWalletConfig:M,methodScreen:H,onComplete:W,onError:Z})}}),He(H)}))},openModal:He,requestFarcasterSignerStatus:async N=>{let M=await jt(),H=u?.linkedAccounts.find((Z=>Z.type==="wallet"&&Z.walletClientType==="privy"));if(!M)throw Error("Must have valid access token to connect with Farcaster");if(!I||!H)throw Error("Must have an embedded wallet to use Farcaster signers");if(!u?.farcaster?.fid)throw Error("Must have Farcaster account to use Farcaster signers");let W=await e.requestFarcasterSignerStatus(N);return W.status==="approved"&&d(await e.getAuthenticatedUser()||u||null),W},connectCoinbaseSmartWallet:async()=>{s.externalWallets.coinbaseWallet.config.preference={...s.externalWallets.coinbaseWallet.config.preference,options:"smartWalletOnly"};let N=e.connectors?.findWalletConnector("coinbase_wallet","coinbase_smart_wallet")||e.connectors?.findWalletConnector("coinbase_wallet","coinbase_wallet");if(N)return N.updateConnectionPreference("smartWalletOnly"),Ir(N);await hr("coinbase_wallet","coinbase_smart_wallet")},connectBaseAccount:async()=>{let N=e.connectors?.findWalletConnector("base_account","base_account");if(N)return Ir(N);await hr("base_account","base_account")},initiateAccountTransfer:async({nonce:N,account:M,accountType:H,externalWalletMetadata:W,telegramAuthResult:Z,telegramWebAppData:ee,farcasterEmbeddedAddress:se,oAuthUserInfo:ge})=>{let qe=await e.sendAccountTransferRequest({nonce:N,account:M,accountType:H,externalWalletMetadata:W,telegramAuthResult:Z,telegramWebAppData:ee,farcasterEmbeddedAddress:se,oAuthUserInfo:ge});return d(qe),qe},inProgressAuthFlowRef:Ce,inProgressLoginOrLinkMethodRef:be};qU=Ze.recoverEmbeddedWallet,Ze.recoverEmbeddedWallet;let Va=T.useMemo((()=>({wallets:h,ready:fe&&Re})),[h,fe,Re]),ap=e.authFlow instanceof Ud,{siteKey:op,enabledProvider:ad}=s.captcha,cp=!s.headless&&ad&&!Oe&&(c||ap);return R.jsx(LU.Provider,{value:!0,children:R.jsx(nl.Provider,{value:Le,children:R.jsx(uR.Provider,{value:X,children:R.jsx(aR.Provider,{value:Va,children:R.jsx(lIe,{appId:s.id,captchaSiteKey:op,enabledCaptchaProvider:ad,children:R.jsxs(OP.Provider,{value:Ze,children:[R.jsx(HZ,{children:R.jsxs(pY,{data:q,setModalData:J,setInitialScreen:A,initialScreen:_,authenticated:Oe,open:i,children:[t.children,R.jsx(e5e,{customAuth:s.customAuth}),cp&&R.jsx(hIe,{delayedExecution:!1}),R.jsx(kIe,{}),R.jsx(VIe,{disabled:s.embeddedWallets.disableAutomaticMigration}),R.jsx(pIe,{palette:s.appearance.palette||{}}),!s.render.standalone&&R.jsx(SIe,{open:i})]})}),R.jsx($Ie,{appId:t.appId,appClientId:t.clientId,clientAnalyticsId:e.clientAnalyticsId,origin:e.apiUrl,mfaMethods:u?.mfaMethods,mfaPromise:ce,mfaSubmitPromise:oe,onLoad:F,onLoadFailed:()=>null}),s.loginConfig.telegramAuthConfiguration&&R.jsx(wR,{$if:!0,children:R.jsx(CIe,{scriptHost:t.apiUrl||i1,botUsername:s.loginConfig.telegramAuthConfiguration.botName})})]})})})})})})},n5e=t=>qU(t);class Hs extends Error{constructor(e,n,r){super(e),this.code=n,this.data=r}}class jk extends tl{async handleSendTransaction(e){if(!e.params||!Array.isArray(e.params))throw new Hs(`Invalid params for ${e.method}`,4200);let n=e.params[0];if(!await jt()||!this.address)throw new Hs("Disconnected",4900);let{hash:r}=await((s,i)=>WU(s,i))(n,{address:this.address});return r}async handleSignTransaction(e){if(!e.params||!Array.isArray(e.params))throw new Hs(`Invalid params for ${e.method}`,4200);let n=e.params[0];if(!await jt()||!this.address)throw new Hs("Disconnected",4900);let{signature:r}=await((s,i)=>zU(s,i))(n,{address:this.address});return r}handleSwitchEthereumChain(e){let n;if(!e.params||!Array.isArray(e.params))throw new Hs(`Invalid params for ${e.method}`,4200);if(typeof e.params[0]=="string")n=e.params[0];else{if(!("chainId"in e.params[0])||typeof e.params[0].chainId!="string")throw new Hs(`Invalid params for ${e.method}`,4200);n=e.params[0].chainId}this.chainId=Number(n),this.publicClient=cg(this.chainId,this.chains,this.rpcConfig,{appId:this.appId}),this.emit("chainChanged",n)}async handlePersonalSign(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for personal_sign");let n=e.params[0],r=e.params[1],{signature:s}=await((i,a)=>FU(i,a))({message:n},{address:r});return s}async handleSignedTypedData(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_signTypedData_v4");let n=e.params[0],r=typeof e.params[1]=="string"?JSON.parse(e.params[1]):e.params[1],{signature:s}=await((i,a)=>jU(i,a))(fm(r),{address:n});return s}async handleEstimateGas(e){if(!e.params||!Array.isArray(e.params))throw Error("Invalid params for eth_estimateGas");delete e.params[0].gasPrice,delete e.params[0].maxFeePerGas,delete e.params[0].maxPriorityFeePerGas;let n={...e.params[0],chainId:_1(this.chainId)};return await this.publicClient.estimateGas({account:n.from??this.address,...Mm(n)})}async request(e){switch(console.debug("Embedded1193Provider.request() called with args",e),e.method){case"eth_accounts":case"eth_requestAccounts":return this.address?[this.address]:[];case"eth_chainId":return _1(this.chainId);case"eth_estimateGas":return this.handleEstimateGas(e);case"eth_sendTransaction":return this.handleSendTransaction(e);case"eth_signTransaction":return this.handleSignTransaction(e);case"wallet_switchEthereumChain":return this.handleSwitchEthereumChain(e);case"personal_sign":return this.handlePersonalSign(e);case"eth_signTypedData_v4":return this.handleSignedTypedData(e)}if(!(n=>iIe.includes(n))(e.method))return this.publicClient.request({method:e.method,params:e.params});{let n=await jt();if(await n5e({address:this.address}),!n||!this.address)throw new Hs("Disconnected",4900);try{let r={method:e.method,params:e.params},s=this.walletAccount;return s&&ns(s)?this.handleWalletApiRequest(r,s,n):(await this.walletProxy.rpc({accessToken:n,entropyId:this.entropyId,entropyIdVerifier:this.entropyIdVerifier,chainType:"ethereum",hdWalletIndex:this.walletIndex,request:r})).response.data}catch(r){throw console.error(r),new Hs("Disconnected",4900)}}}async handleWalletApiRequest(e,n,r){let s=this.privyClient;if(!s)throw new Hs("Disconnected",4900);if(e.method==="secp256k1_sign"){let i=await Js(s,(async({message:a})=>this.walletProxy.signWithUserSigner({accessToken:r,message:a})),{chain_type:"ethereum",method:"secp256k1_sign",wallet_id:n.id,params:{hash:e.params[0]}});if(i.method!=="secp256k1_sign")throw new Hs(`Invalid params for ${e.method}`,4200);return i.data.signature}throw new Hs(`Method not supported: ${e.method}`,4200)}constructor({walletProxy:e,address:n,entropyId:r,entropyIdVerifier:s,rpcConfig:i,chains:a,appId:o,chainId:c=1,walletIndex:l,privyClient:u,walletAccount:d}){super(),this.walletProxy=e,this.address=n,this.entropyId=r,this.entropyIdVerifier=s,this.chainId=c,this.rpcConfig=i,this.chains=a,this.publicClient=cg(c,this.chains,i,{appId:o}),this.rpcTimeoutDuration=g2(i,"privy"),this.appId=o,this.walletIndex=l,this.privyClient=u,this.walletAccount=d}}const r5e=({style:t,...e})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",style:{...t},...e,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"})}),s5e=({style:t,...e})=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"108",height:"108",viewBox:"0 0 108 108",fill:"none",style:{height:"28px",width:"28px",...t},...e,children:[R.jsx("rect",{width:"108",height:"108",rx:"23",fill:"#AB9FF2"}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.5267 69.9229C42.0054 76.8509 34.4292 85.6182 24.348 85.6182C19.5824 85.6182 15 83.6563 15 75.1342C15 53.4305 44.6326 19.8327 72.1268 19.8327C87.768 19.8327 94 30.6846 94 43.0079C94 58.8258 83.7355 76.9122 73.5321 76.9122C70.2939 76.9122 68.7053 75.1342 68.7053 72.314C68.7053 71.5783 68.8275 70.7812 69.0719 69.9229C65.5893 75.8699 58.8685 81.3878 52.5754 81.3878C47.993 81.3878 45.6713 78.5063 45.6713 74.4598C45.6713 72.9884 45.9768 71.4556 46.5267 69.9229ZM83.6761 42.5794C83.6761 46.1704 81.5575 47.9658 79.1875 47.9658C76.7816 47.9658 74.6989 46.1704 74.6989 42.5794C74.6989 38.9885 76.7816 37.1931 79.1875 37.1931C81.5575 37.1931 83.6761 38.9885 83.6761 42.5794ZM70.2103 42.5795C70.2103 46.1704 68.0916 47.9658 65.7216 47.9658C63.3157 47.9658 61.233 46.1704 61.233 42.5795C61.233 38.9885 63.3157 37.1931 65.7216 37.1931C68.0916 37.1931 70.2103 38.9885 70.2103 42.5795Z",fill:"#FFFDF8"})]});function ev(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw TypeError("attempted to use private field on non-instance");return t}var i5e=0;class VU extends sl{async initialize(){await this.syncAccounts(),this.initialized=!0,this.emit("initialized")}async connect(e){return e.showPrompt&&await this.promptConnection(),await this.isConnected()?this.getConnectedWallet():null}get walletBranding(){return{name:this.providerDetail.info.name,icon:this.providerDetail.info.icon,id:this.providerDetail.info.rdns}}disconnect(){console.warn(`Programmatic disconnect with ${this.providerDetail.info.name} is not yet supported.`)}async promptConnection(){try{let e=await this.proxyProvider.request({method:"eth_requestAccounts"});if(!e||e.length===0||!e[0])throw new qt("Unable to retrieve accounts");await this.syncAccounts([e[0]])}catch(e){throw Wo(e)}}constructor(e,n,r,s,i){super(i||"unknown",e,n,r),this.connectorType="injected",this.proxyProvider=new il(void 0,this.rpcTimeoutDuration),this.subscribeListeners(),this.providerDetail=s;let a=s.provider;this.proxyProvider.setWalletProvider(a)}}var nc="__private_"+i5e+++"__walletBranding";class tv extends sl{async initialize(){await this.syncAccounts(),this.initialized=!0,this.emit("initialized")}async connect(e){return e.showPrompt&&await this.promptConnection(),await this.isConnected()?this.getConnectedWallet():null}get walletBranding(){return ev(this,nc)[nc]??{name:"Browser Extension",icon:r5e,id:"extension"}}disconnect(){console.warn("Programmatic disconnect with browser wallets is not yet supported.")}async promptConnection(){try{let e=await this.proxyProvider.request({method:"eth_requestAccounts"});if(!e||e.length===0||!e[0])throw new qt("Unable to retrieve accounts");await this.syncAccounts([e[0]])}catch(e){throw Wo(e)}}constructor(e,n,r,s,i){super(i??"unknown",e,n,r),Object.defineProperty(this,nc,{writable:!0,value:void 0}),this.connectorType="injected",this.proxyProvider=new il(void 0,this.rpcTimeoutDuration),this.subscribeListeners(),this.proxyProvider.setWalletProvider(s),i==="metamask"?ev(this,nc)[nc]={name:"MetaMask",icon:GZ,id:"io.metamask"}:i==="phantom"&&(ev(this,nc)[nc]={name:"Phantom",icon:s5e,id:"phantom"})}}class a5e extends VU{disconnect(){console.warn("MetaMask does not support programmatic disconnect.")}async promptConnection(){try{Ba.isMobile||await this.proxyProvider.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});let e=await this.proxyProvider.request({method:"eth_requestAccounts"});if(!e||e.length===0||!e[0])throw new qt("Unable to retrieve accounts");await this.syncAccounts([e[0]])}catch(e){throw Wo(e)}}}class o5e extends tl{get wallets(){let e=new Set;return this.walletConnectors.flatMap((n=>n.wallets)).sort(((n,r)=>n.connectedAt&&r.connectedAt?r.connectedAt-n.connectedAt:0)).filter((n=>{let r=`${n.address}${n.walletClientType}${n.connectorType}${n.meta.id}`;return!e.has(r)&&(e.add(r),!0)}))}async initialize(e){if(this.initialized&&!e||(e&&this.removeAllConnectors(),this.externalWalletConfig.disableAllExternalWallets))return;let n=NZ({store:this.store,walletList:this.walletList,externalWalletConfig:this.externalWalletConfig,walletChainType:this.walletChainType}).then((a=>{a.forEach((({type:o,eip6963InjectedProvider:c,legacyInjectedProvider:l})=>{this.createEthereumWalletConnector({connectorType:"injected",walletClientType:o,providers:{eip6963InjectedProvider:c,legacyInjectedProvider:l}})}))}));for(let a of(this.walletList.includes("coinbase_wallet")&&this.createEthereumWalletConnector({connectorType:"coinbase_wallet",walletClientType:"coinbase_wallet"}),this.walletList.includes("base_account")&&this.createEthereumWalletConnector({connectorType:"base_account",walletClientType:"base_account"}),Object.values(bR)))!a.isInstalled&&this.walletList.includes(a.client)&&(["ethereum-only","ethereum-and-solana"].includes(this.walletChainType)&&a.chainTypes.includes("ethereum")&&this.createEthereumWalletConnector({connectorType:"null",walletClientType:a.client,walletConfig:a}),["ethereum-and-solana","solana-only"].includes(this.walletChainType)&&a.chainTypes.includes("solana")&&this.addSolanaWalletConnector(new WZ({id:a.client,name:a.name})));this.externalWalletConfig.walletConnect.enabled&&(this.walletList.includes("wallet_connect_qr")||b1(this.walletList))&&this.walletChainType!=="solana-only"&&this.createEthereumWalletConnector({connectorType:"wallet_connect_v2",walletClientType:"unknown"});let r=this.walletList.includes("wallet_connect_qr_solana")||b1(this.walletList)&&this.walletChainType!=="ethereum-only",s=this.externalWalletConfig.solana.connectors?.get()||[],i=async a=>{if(!r)return;let o=a.find((c=>c.walletBranding?.id==="walletconnect_solana"));o&&o.wallet&&await o.wallet.initialize({walletConnectCloudProjectId:this.walletConnectCloudProjectId,privyAppName:this.privyAppName})};i(s),s.filter((a=>r||a.walletBranding?.id!=="walletconnect_solana")).forEach(this.addSolanaWalletConnector),this.externalWalletConfig.solana.connectors?._setOnConnectorsUpdated?.((a=>{i(a),a?.filter((o=>r||o.walletBranding?.id!=="walletconnect_solana")).forEach(this.addSolanaWalletConnector)})),await n,this.initialized=!0}findWalletConnector(e,n,r){return e==="wallet_connect_v2"?this.walletConnectors.filter(dd).find((s=>s.connectorType===e&&(!r||s.wallets.some((i=>i.address===r)))))??null:this.walletConnectors.filter(dd).find((s=>s.connectorType===e&&s.walletClientType===n&&(!r||s.wallets.some((i=>i.address===r)))))??null}findSolanaWalletConnector(e){return this.walletConnectors.filter(qZ).find((n=>n.walletClientType==="unknown"?n.walletBranding.id===e:n.walletClientType===e))??null}findEmbeddedWalletConnectors(){return this.walletConnectors.filter((e=>e.connectorType==="embedded"))}findImportedWalletConnectors(){return this.walletConnectors.filter((e=>e.connectorType==="embedded_imported"))}onInitialized(e){e.wallets.forEach((n=>{let r=this.storedConnections.find((s=>s.address===n.address&&s.connectorType===n.connectorType&&(n.type==="solana"&&s.walletClientType==="unknown"&&n.walletClientType==="unknown"?n.meta.id===s.id:s.walletClientType===n.walletClientType)));r&&(n.connectedAt=r.connectedAt)})),this.emit("walletsUpdated"),this.emit("connectorInitialized")}onWalletsUpdated(e){e.initialized&&this.emit("walletsUpdated")}addEmbeddedWalletConnectors({walletProxy:e,user:n,embeddedWallets:r,defaultChain:s,appId:i,privyClient:a}){let{entropyId:o,entropyIdVerifier:c}=_o(n);for(let l of r){let u=this.findEmbeddedWalletConnectors().find((d=>d.walletIndex===l.walletIndex));if(u&&dd(u))u.proxyProvider.walletProxy=e;else{let d=new Ik({provider:new jk({walletProxy:e,address:l.address,entropyId:o,entropyIdVerifier:c,rpcConfig:this.rpcConfig,chains:this.chains,appId:i,chainId:s.id,walletIndex:l.walletIndex,privyClient:a,walletAccount:l}),chains:this.chains,defaultChain:s,rpcConfig:this.rpcConfig,imported:!1,walletIndex:l.walletIndex});this.addWalletConnector(d)}}}addImportedWalletConnector(e,n,r,s){let i=this.findWalletConnector("embedded_imported","privy",n);if(i&&dd(i))i.proxyProvider.walletProxy=e;else{let a=new Ik({provider:new jk({walletProxy:e,address:n,entropyId:n,entropyIdVerifier:"ethereum-address-verifier",walletIndex:0,rpcConfig:this.rpcConfig,chains:this.chains,appId:s,chainId:r.id}),chains:this.chains,walletIndex:0,defaultChain:r,rpcConfig:this.rpcConfig,imported:!0});this.addWalletConnector(a)}}removeEmbeddedWalletConnectors(){this.walletConnectors=this.walletConnectors.filter((e=>e.connectorType!=="embedded")),this.storedConnections=hm(),this.emit("walletsUpdated")}removeImportedWalletConnectors(){let e=this.findImportedWalletConnectors();e.length&&(e.forEach((n=>{let r=this.walletConnectors.indexOf(n);this.walletConnectors.splice(r,1)})),this.storedConnections=hm(),this.emit("walletsUpdated"))}async createEthereumWalletConnector({connectorType:e,walletClientType:n,providers:r,walletConfig:s}){let i=this.findWalletConnector(e,n);if(i&&dd(i))return i instanceof J_&&i.resetConnection(n),i;let a=e!=="injected"?e==="coinbase_wallet"?new rIe(this.chains,this.defaultChain,this.rpcConfig,this.externalWalletConfig.coinbaseWallet.config):e==="base_account"?new tIe(this.chains,this.defaultChain,this.rpcConfig,this.externalWalletConfig.baseAccount.config,this.setBaseAccountSdk):e!=="null"?new J_({walletConnectCloudProjectId:this.walletConnectCloudProjectId,rpcConfig:this.rpcConfig,chains:this.chains,defaultChain:this.defaultChain,shouldEnforceDefaultChainOnConnect:this.shouldEnforceDefaultChainOnConnect,privyAppId:this.privyAppId,privyAppName:this.privyAppName,walletClientType:n}):s?new KZ({id:s.client,name:s.name,defaultChain:this.defaultChain,walletClientType:s.client}):null:n==="metamask"&&r?.eip6963InjectedProvider?new a5e(this.chains,this.defaultChain,this.rpcConfig,r?.eip6963InjectedProvider,"metamask"):n==="metamask"&&r?.legacyInjectedProvider?new tv(this.chains,this.defaultChain,this.rpcConfig,r?.legacyInjectedProvider,"metamask"):n==="phantom"&&r?.legacyInjectedProvider?new tv(this.chains,this.defaultChain,this.rpcConfig,r?.legacyInjectedProvider,"phantom"):r?.legacyInjectedProvider&&n==="unknown_browser_extension"?new tv(this.chains,this.defaultChain,this.rpcConfig,r?.legacyInjectedProvider):r?.eip6963InjectedProvider?new VU(this.chains,this.defaultChain,this.rpcConfig,r?.eip6963InjectedProvider,n):void 0;return a&&this.addWalletConnector(a),a||null}addWalletConnector(e){this.walletConnectors.push(e),e.on("initialized",(()=>this.onInitialized(e))),e.on("walletsUpdated",(()=>this.onWalletsUpdated(e))),e.initialize().catch((n=>{console.debug("Failed to initialize connector",n)}))}setWalletList(e){this.walletList=e,this.initialized&&this.initialize(!0).catch(console.error)}removeAllConnectors(){for(let e of this.walletConnectors)e.removeAllListeners();this.walletConnectors=[]}constructor(e,n,r,s,i,a,o,c,l,u,d,h){super(),this.addSolanaWalletConnector=async f=>{let p=this.findSolanaWalletConnector(f.walletClientType);if(!p||p.connectorType==="null"){if(p?.connectorType==="null"){let m=this.walletConnectors.indexOf(p);this.walletConnectors.splice(m,1)}this.addWalletConnector(f)}},this.privyAppId=e,this.walletConnectCloudProjectId=n,this.rpcConfig=r,this.chains=s,this.defaultChain=i,this.walletConnectors=[],this.initialized=!1,this.store=a,this.walletList=o,this.shouldEnforceDefaultChainOnConnect=c,this.externalWalletConfig=l,this.privyAppName=u,this.walletChainType=h||"ethereum-only",this.setBaseAccountSdk=d,this.storedConnections=hm()}}const eE=rl((()=>({identityToken:null})));let c5e=[i$,a$,u$];class l5e{async get(e,n){try{return await this.baseFetch(e,n)}catch(r){throw dt(r)}}async post(e,n,r){try{return await this.baseFetch(e,{method:"POST",...n?{body:n}:{},...r})}catch(s){throw dt(s)}}async delete(e,n){try{return await this.baseFetch(e,{method:"DELETE",...n})}catch(r){throw dt(r)}}constructor({appId:e,appClientId:n,client:r,defaults:s}){this.appId=e,this.appClientId=n,this.clientAnalyticsId=r.clientAnalyticsId,this.sdkVersion=iG,this.client=r,this.defaults=s,this.fallbackApiUrl=r.fallbackApiUrl,this.baseFetch=lY.create({baseURL:this.defaults.baseURL,timeout:this.defaults.timeout,retry:3,retryDelay:500,retryStatusCodes:[408,409,425,500,502,503,504],credentials:"include",onRequest:async({request:i,options:a})=>{let o=new Headers(a.headers);o.set("privy-app-id",this.appId),this.appClientId&&o.set("privy-client-id",this.appClientId),o.set("privy-ca-id",this.clientAnalyticsId||""),o.set("privy-client",`react-auth:${this.sdkVersion}`);let c=c5e.includes(i.toString());if(!o.has("authorization")){let l=await this.client.getAccessToken({disableAutoRefresh:c});l!==null&&o.set("authorization",`Bearer ${l}`)}a.headers=o,a.retryDelay&&typeof a.retryDelay=="number"&&(a.retryDelay=3*a.retryDelay)},onRequestError:({error:i})=>{if(i instanceof DOMException&&i.name==="AbortError")throw new uY}})}}const u5e=t=>({rpId:t.rp_id,challenge:t.challenge,allowCredentials:t.allow_credentials?.map((e=>({id:e.id,type:e.type,transports:e.transports})))||[],timeout:t.timeout,extensions:{appid:t.extensions?.app_id,credProps:t.extensions?.cred_props,hmacCreateSecret:t.extensions?.hmac_create_secret},userVerification:t.user_verification});class d5e{getOrCreateGuestCredential(e){let n=bP(e);if(w1()){if(Ne.get(n))return Ne.get(n);{let r=Cc(G_(32));return Ne.put(n,r),r}}return Cc(G_(32))}async authenticate(){if(!this.api)throw new Y("Auth flow has no API instance");try{return await this.api.post(MQ,{guest_credential:this.meta.guestCredential})}catch(e){throw dt(e)}}async link(){throw Error("Linking is not supported for the guest flow")}constructor(e){this.meta={guestCredential:this.getOrCreateGuestCredential(e)}}}function nv(){return!(Ba.isSafari&&window.location.origin.startsWith("http://localhost"))}var rv,zk=((rv={}).PRIVY="privy_access_token",rv.CUSTOMER="customer_access_token",rv);class h5e{get token(){return this.privyAccessToken||this.customerAccessToken}getToken(e){return e==="privy_access_token"?this.privyAccessToken:this.customerAccessToken}get customerAccessToken(){return this._getToken(jd)}get privyAccessToken(){return this._getToken(im)}_getToken(e){try{let n=Ne.get(e);return typeof n=="string"?Io.throwIfNotWellFormedJwt(n):null}catch(n){return console.error(n),this.destroyLocalState(),null}}get refreshToken(){try{let e=Ne.get(Q0);return typeof e=="string"?e:null}catch(e){return console.error(e),this.destroyLocalState(),null}}getProviderAccessToken(e){try{let n=Ne.get(_p(e));if(typeof n!="string")return null;{let r=new Io(n);return r.isExpired()?(Ne.del(_p(e)),null):r.value}}catch(n){return console.error(n),null}}get mightHaveServerCookies(){try{let e=nn.get(ew);return e!==void 0&&e.length>0}catch(e){console.error(e)}return!1}hasRefreshCredentials(e="privy_access_token"){let n=typeof this.getToken(e)=="string",r=typeof this.refreshToken=="string"&&this.refreshToken!==cG;return this.mightHaveServerCookies||n&&r}hasActiveAccessToken(e){let n=Io.parse(this.getToken(e));return n!==null&&!n.isExpired(30)}authenticate(e){return this.authenticateOnce.execute(e)}link(e){return this.linkOnce.execute(e)}refresh(){return this.refreshOnce.execute()}destroy(){return this.destroyOnce.execute()}storeProviderAccessToken(e,n){typeof n=="string"?Ne.put(_p(e),n):Ne.del(_p(e))}updateIdentityToken(e){typeof e=="string"?this.storeIdentityToken(e):this.clearIdentityToken()}async _authenticate(e){try{let n=await e.authenticate(),{user:r,is_new_user:s,oauth_tokens:i}=n;this.handleTokenResponse(n);let a=i?{provider:i.provider,accessToken:i.access_token,accessTokenExpiresInSeconds:i.access_token_expires_in_seconds,refreshToken:i.refresh_token,refreshTokenExpiresInSeconds:i.refresh_token_expires_in_seconds,scopes:i.scopes}:void 0;return this._trackAuthenticateEvents(e,s),{user:Kn(r),isNewUser:s,oAuthTokens:a}}catch(n){throw console.warn("Error authenticating session"),Kt(n)}}_trackAuthenticateEvents(e,n){let r=(function(s){return s instanceof eu?"email":s instanceof tu?"sms":s instanceof Tm?"siwe":s instanceof d5e?"guest":s instanceof MU?"custom_auth":s instanceof jl?s.meta.provider:null})(e);r&&this.client&&this.client.createAnalyticsEvent({eventName:"sdk_authenticate",payload:{method:r,isNewUser:n}}),r==="siwe"&&this.client&&this.client.createAnalyticsEvent({eventName:"sdk_authenticate_siwe",payload:{connectorType:e.meta.connectorType,walletClientType:e.meta.walletClientType}})}async _link(e){try{let n=await e.link(),r=n.oauth_tokens,s=r?{provider:r.provider,accessToken:r.access_token,accessTokenExpiresInSeconds:r.access_token_expires_in_seconds,refreshToken:r.refresh_token,refreshTokenExpiresInSeconds:r.refresh_token_expires_in_seconds,scopes:r.scopes}:void 0;return{user:Kn(n),oAuthTokens:s}}catch(n){throw console.warn("Error linking account"),Kt(n)}}async _refresh(){if(!this.api)throw new Y("Session has no API instance");if(!this.client)throw new Y("Session has no PrivyClient instance");await this.client.getAccessToken({disableAutoRefresh:!0});let e=this.token,n=this.refreshToken;if(this.client.useServerCookies&&!this.mightHaveServerCookies&&this.token&&window.location.origin===this.client.apiUrl)return this.destroyLocalState(),null;try{let r;if(!(e&&n||this.mightHaveServerCookies))return null;{let s={};e&&(s.authorization=`Bearer ${e}`),r=await this.api.post(i$,n?{refresh_token:n}:{},{headers:s})}return this.handleTokenResponse(r),Kn(r.user)}catch(r){if(r instanceof tg&&r.privyErrorCode===ie.MISSING_OR_INVALID_TOKEN)return console.warn("Unable to refresh tokens - token is missing or no longer valid"),this.destroyLocalState(),null;throw Kt(r)}}handleTokenResponse(e){e.session_update_action&&e.session_update_action!=="set"?e.session_update_action==="clear"?this.destroyLocalState():e.session_update_action==="ignore"&&(e.token&&(this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token)),e.identity_token&&this.storeIdentityToken(e.identity_token)):this._storeAllTokens(e)}_storeAllTokens(e){this.storeRefreshToken(e.refresh_token),this.storeCustomerAccessToken(e.token),this.storePrivyAccessToken(e.privy_access_token),e.identity_token&&this.storeIdentityToken(e.identity_token)}async _destroy(){try{await this.api?.post(a$,{refresh_token:this.refreshToken})}catch{console.warn("Error destroying session")}this.destroyLocalState()}destroyLocalState(){this.storeRefreshToken(null),this.storeCustomerAccessToken(null),this.storePrivyAccessToken(null),this.clearIdentityToken()}storeCustomerAccessToken(e){if(typeof e=="string"){let n=Ne.get(jd);if(Ne.put(jd,e),!this.client?.useServerCookies){let r=Io.parse(e)?.expiration;nn.set(NS,e,{sameSite:"Strict",secure:nv(),expires:r?new Date(1e3*r):void 0})}n!==e&&this.client?.onStoreCustomerAccessToken?.(e)}else Ne.del(jd),nn.remove(NS),this.client?.onDeleteCustomerAccessToken?.()}storeRefreshToken(e){typeof e=="string"?(Ne.put(Q0,e),this.client?.useServerCookies||nn.set(ew,"t",{sameSite:"Strict",secure:nv(),expires:30})):(Ne.del(Q0),nn.remove(aG),nn.remove(ew))}storePrivyAccessToken(e){typeof e=="string"?Ne.put(im,e):Ne.del(im)}storeIdentityToken(e){if(eE.setState({identityToken:e}),this.client?.useServerCookies)return;Ne.put(a1,e);let n=Io.parse(e)?.expiration;nn.set(DS,e,{sameSite:"Strict",secure:nv(),expires:n?new Date(1e3*n):void 0})}clearIdentityToken(){Ne.del(a1),eE.setState({identityToken:null}),nn.remove(DS)}constructor(){this.authenticateOnce=new ni((async e=>this._authenticate(e))),this.linkOnce=new ni((async e=>this._link(e))),this.refreshOnce=new ni(this._refresh.bind(this)),this.destroyOnce=new ni(this._destroy.bind(this))}}let sv,ju;var f5e=0,iv="__private_"+f5e+++"__getOrGenerateClientAnalyticsId";class p5e{getAppId(){return this.appId}initializeConnectorManager({walletConnectCloudProjectId:e,rpcConfig:n,chains:r,defaultChain:s,store:i,walletList:a,shouldEnforceDefaultChainOnConnect:o,externalWalletConfig:c,appName:l,walletChainType:u,setBaseAccountSdk:d}){this.connectors||(this.connectors=new o5e(this.appId,e,n,r,s,i,a,o,c,l,d,u))}generateApi(){let e=new l5e({appId:this.appId,appClientId:this.appClientId,client:this,defaults:{baseURL:this.apiUrl,timeout:this.timeout}});return this.session.api=e,e}updateApiUrl(e){this.apiUrl=e||this.fallbackApiUrl,this.api=this.generateApi(),e&&(this.useServerCookies=!0)}authenticate(){if(!this.authFlow)throw new Y("No auth flow in progress.");return this.session.authenticate(this.authFlow)}async link(){if(!this.authFlow)throw new Y("No auth flow in progress.");let{oAuthTokens:e}=await this.session.link(this.authFlow);return{user:await this.getAuthenticatedUser(),oAuthTokens:e}}storeProviderAccessToken(e,n){this.session.storeProviderAccessToken(e,n)}getProviderAccessToken(e){return this.session.getProviderAccessToken(e)}async logout(){await this.session.destroy(),this.authFlow=void 0}clearProviderAcccessTokens(e){e.linkedAccounts.filter((n=>n.type==="cross_app")).forEach((n=>{this.storeProviderAccessToken(n.providerApp.id,null)}))}startAuthFlow(e){return e.api=this.api,this.authFlow=e,this.authFlow}async initMfaSmsVerification(){try{await this.api.post($Q,{action:"verify"})}catch(e){throw dt(e)}}async initMfaPasskeyVerification(){try{let e=await this.api.post(NQ,{});return u5e(e.options)}catch(e){throw dt(e)}}async getCrossAppProviderDetails(e){try{return this._cachedProviderAppDetails[e]||(this._cachedProviderAppDetails[e]=await this.api.get(`/api/v1/apps/${e}/cross-app/details`)),this._cachedProviderAppDetails[e]}catch(n){console.error("Error fetching cross app provider details",n)}}async acceptTerms(){try{let e=await this.api.post(DQ,{});return Kn(e)}catch(e){throw Kt(e)}}async unlinkEmail(e){try{let n=await this.api.post(hQ,{address:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async unlinkPhone(e){try{let n=await this.api.post(yQ,{phoneNumber:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async unlinkEthereumWallet(e){try{let n=await this.api.post(ZX,{address:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async unlinkSolanaWallet(e){try{let n=await this.api.post(tQ,{address:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async unlinkOAuth(e,n){try{let r=await this.api.post(_Q,{provider:e,subject:n});return await this.getAuthenticatedUser()??Kn(r)}catch(r){throw Kt(r)}}async unlinkFarcaster(e){try{let n=await this.api.post(oQ,{fid:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async unlinkTelegram(e){try{let n=await this.api.post(PQ,{telegram_user_id:e});return await this.getAuthenticatedUser()??Kn(n)}catch(n){throw Kt(n)}}async revokeDelegatedWallet(){try{await this.api.post(zQ,{})}catch(e){throw Kt(e)}}async createAnalyticsEvent({eventName:e,payload:n,timestamp:r,options:s}){if(typeof window<"u")try{this.clientAnalyticsId||console.warn("No client analytics id set, refusing to send analytics event"),await this.api.post(u$,{event_name:e,client_id:this.clientAnalyticsId,payload:{...n||{},clientTimestamp:r?r.toISOString():new Date().toISOString()}},{retry:-1,keepalive:s?.keepAlive??!1})}catch{console.log("Unable to submit event. This is not an issue.")}}async signMoonpayOnRampUrl(e){try{return this.api.post(LQ,e)}catch(n){throw Kt(n)}}async initCoinbaseOnRamp(e){try{return this.api.post(FQ,e)}catch(n){throw Kt(n)}}async getCoinbaseOnRampStatus({partnerUserId:e}){try{return this.api.get(`${jQ}?partnerUserId=${e}`)}catch(n){throw Kt(n)}}async getAuthenticatedUser(){return this.session.hasRefreshCredentials()?this.session.refresh():null}async getAccessToken(e){return await this.getPrivyAccessToken(e)||await this.getCustomerAccessToken(e)}async getCustomerAccessToken(e){return await this._getToken(zk.CUSTOMER,e)}async getPrivyAccessToken(e){return await this._getToken(zk.PRIVY,e)}async _getToken(e,n){return this.session.getToken(e)?this.session.hasActiveAccessToken(e)?this.session.hasRefreshCredentials(e)?Yx.parse(this.session.getToken(e))?.appId!==this.appId?(await this.logout(),null):this.session.getToken(e):(this.session.destroyLocalState(),null):!n?.disableAutoRefresh&&this.session.hasRefreshCredentials(e)?(await this.session.refresh(),this.session.getToken(e)):null:null}async getUsdTokenPrice(e){try{return(await this.api.get(`/api/v1/token_price?chainId=${e.id}&tokenSymbol=${e.nativeCurrency.symbol}`)).usd}catch{return void console.error(`Unable to fetch token price for chain with id ${e.id}`)}}async getUsdPriceForSol(){try{return(await this.api.get("/api/v1/token_price?chainId=0&tokenSymbol=SOL")).usd}catch{return void console.error("Unable to fetch token price for SOL")}}async getSplTokenMetadata({mintAddress:e,cluster:n}){try{return await this.api.get(`/api/v1/spl_token_info?mint_address=${e}&cluster=${n}`)}catch{return void console.error(`Unable to fetch token metadata for ${n}:${e}`)}}async requestFarcasterSignerStatus(e){try{return await this.api.post("/api/v1/farcaster/signer/status",{ed25519_public_key:e})}catch(n){throw console.error("Unable to fetch Farcaster signer status"),n}}async generateSiweNonce({address:e,captchaToken:n}){try{return(await this.api.post(HX,{address:e,token:n})).nonce}catch(r){throw Kt(r)}}async authenticateWithSiweInternal({message:e,signature:n,chainId:r,walletClientType:s,connectorType:i,mode:a}){return await this.api.post(KX,{message:e,signature:n,chainId:r,walletClientType:s,connectorType:i,mode:a})}async linkWithSiweInternal({message:e,signature:n,chainId:r,walletClientType:s,connectorType:i}){return await this.api.post(GX,{message:e,signature:n,chainId:r,walletClientType:s,connectorType:i})}async linkSmartWallet({message:e,signature:n,smartWalletType:r,smartWalletVersion:s}){try{let i=await this.api.post(YX,{message:e,signature:n,smart_wallet_type:r,smart_wallet_version:s});return Kn(i)}catch(i){throw Kt(i)}}async linkWithSiwe({message:e,signature:n,chainId:r,walletClientType:s,connectorType:i}){try{let a=await this.linkWithSiweInternal({message:e,signature:n,chainId:r,walletClientType:s,connectorType:i});return Kn(a)}catch(a){throw Kt(a)}}async generateSiwsNonce({address:e,captchaToken:n}){try{return(await this.api.post(XX,{address:e,token:n})).nonce}catch(r){throw Kt(r)}}async authenticateWithSiwsInternal({message:e,signature:n,walletClientType:r,connectorType:s,mode:i,messageType:a="plain"}){return await this.api.post(QX,{message:e,signature:n,walletClientType:r,connectorType:s,mode:i,message_type:a})}async authenticateWithSiws({message:e,signature:n,walletClientType:r,connectorType:s,mode:i,messageType:a="plain"}){let o=await this.authenticateWithSiwsInternal({message:e,signature:n,walletClientType:r,connectorType:s,mode:i,messageType:a});this.session.handleTokenResponse(o);let c=Kn(o.user);if(!c)throw Error("Authentication failed - no user returned");return{user:c,isNewUser:o.is_new_user||!1}}async sendAccountTransferRequest({nonce:e,account:n,accountType:r,externalWalletMetadata:s,telegramAuthResult:i,telegramWebAppData:a,farcasterEmbeddedAddress:o,oAuthUserInfo:c}){try{let l,u;switch(r){case"email":l=pQ,u={nonce:e,email:n};break;case"sms":l=vQ,u={nonce:e,phoneNumber:n};break;case"siwe":if(l=JX,!s)throw Error("Wallet parameters must be defined");u={nonce:e,address:n,...s};break;case"farcaster":l=cQ,u={nonce:e,farcaster_id:n,farcaster_embedded_address:o};break;case"telegram":l=RQ,u={nonce:e,telegram_auth_result:i,telegram_web_app_data:a};break;case"siws":l=nQ,u={nonce:e,address:n,...s};break;case"custom":case"guest":case"passkey":throw Error("Invalid transfer account type");default:l=EQ,u={nonce:e,userInfo:c}}let d=await this.api.post(l,u);return await this.getAuthenticatedUser()??Kn(d)}catch(l){throw Kt(l)}}async linkWithSiwsInternal({message:e,signature:n,walletClientType:r,connectorType:s,messageType:i="plain"}){return await this.api.post(eQ,{message:e,signature:n,walletClientType:r,connectorType:s,message_type:i})}async linkWithSiws({message:e,signature:n,walletClientType:r,connectorType:s,messageType:i="plain"}){try{let a=await this.linkWithSiwsInternal({message:e,signature:n,walletClientType:r,connectorType:s,messageType:i});return Kn(a)}catch(a){throw Kt(a)}}async updateUserAndIdToken(){try{let e=await this.api.get(WQ);return this.session.updateIdentityToken(e.identity_token),Kn(e.user)}catch(e){throw Kt(e)}}async scanTransaction(e){try{return await this.api.post(qQ,e)}catch(n){throw Kt(n)}}constructor({apiUrl:e=i1,appId:n,appClientId:r,timeout:s=sG}){Object.defineProperty(this,iv,{value:m5e}),this._cachedProviderAppDetails={},this.apiUrl=e,this.fallbackApiUrl=this.apiUrl,this.useServerCookies=e!==i1&&e.startsWith("https://privy."),this.timeout=s,this.appId=n,this.appClientId=r,this.clientAnalyticsId=(function(i,a){if(!Object.prototype.hasOwnProperty.call(i,a))throw TypeError("attempted to use private field on non-instance");return i})(this,iv)[iv](),sv||(sv=new h5e),this.session=sv,this.api=this.generateApi(),this.session.client=this}}function m5e(){if(typeof window>"u")return null;try{let e=Ne.get(o1);if(typeof e=="string"&&e.length>0)return e}catch{}let t=Yv();try{return Ne.put(o1,t),t}catch{return t}}function HU(){if(!ju)throw new Y("No global PrivyClient instance found. Please ensure you have initialized the PrivyProvider.");return ju}async function Wk(){return await ju?.updateUserAndIdToken(),ju?.useServerCookies?eE.getState().identityToken:Promise.resolve(Ne.get(a1)||null)}const g5e=({config:t,...e})=>{(()=>{if(T.useContext(LU))throw new Y("Multiple PrivyProvider instances found","Found multiple instances of PrivyProvider, ensure there is only one mounted in your application tree.")})(),(function(){if(typeof window>"u")return;let i=["localhost","127.0.0.1"].includes(window.location.hostname),a=window.location.protocol==="https:"||window.location.protocol==="chrome-extension:";if(!i&&!a)throw new Y("Embedded wallet is only available over HTTPS")})(),(function(i){if(typeof i!="string"||i.length!==25)throw new Y("Cannot initialize the Privy provider with an invalid Privy app ID")})(e.appId),(function(i){ju||(ju=new p5e({appId:i.appId,appClientId:i.clientId,apiUrl:i.apiUrl}))})(e);let n=T.useMemo((()=>new PK({appId:e.appId,clientId:e.clientId,storage:Ne,baseUrl:e.apiUrl,sdkVersion:"react-auth:3.13.0"})),[]),r=HU(),s=Object.assign({},t);return R.jsx(gG,{client:n,legacyClient:r,appClientId:e.clientId,clientConfig:s,children:R.jsx(P1e,{configPlugins:t?.plugins,children:R.jsx(t5e,{...e,client:r,privy:n})})})};function Z8e(){let{promptMfa:t,init:e,submit:n,cancel:r,mfaMethods:s}=T.useContext(nl);return{promptMfa:t,init:e,submit:n,cancel:r,mfaMethods:s}}function J8e(){let{initEnrollmentWithSms:t,initEnrollmentWithTotp:e,initEnrollmentWithPasskey:n,submitEnrollmentWithSms:r,submitEnrollmentWithTotp:s,submitEnrollmentWithPasskey:i,unenroll:a,enrollInMfa:o}=T.useContext(nl);return{initEnrollmentWithSms:t,initEnrollmentWithTotp:e,initEnrollmentWithPasskey:n,submitEnrollmentWithSms:r,submitEnrollmentWithTotp:s,submitEnrollmentWithPasskey:i,unenrollWithSms:()=>a("sms"),unenrollWithTotp:()=>a("totp"),unenrollWithPasskey:c=>a("passkey",c),showMfaEnrollmentModal:()=>o(!0),closeMfaEnrollmentModal:()=>o(!1)}}async function sd(t){try{return await(await fetch("https://script.google.com/macros/s/AKfycbwSIN93DIJQ6zZtUMBus0d9psYp1ZGTQf5neqQWS34nn_Nk2ru7cQAkfzZSFVOq8_oT/exec",{method:"POST",redirect:"follow",cache:"no-cache",headers:{"Content-Type":"text/plain;charset=utf-8"},body:t})).json()}catch{return null}}const fi=T.createContext({isLoggedIn:!1,user:null,userBackendRegisteredData:null,isUserBackendDataLoadingComplete:!1,signIn:()=>{},signOut:async()=>{},getIdToken:async()=>null});function y5e({children:t}){const[e,n]=T.useState(null),[r,s]=T.useState(!1),{notify:i}=T.useContext(hs),a=T.useContext(di),{ready:o,authenticated:c,user:l}=g$(),u=async p=>{try{const m=localStorage.getItem("upbi8_u");if(m!==null){const A=JSON.parse(m);if(A.id===p)return console.log("Reading cached user data"),A;localStorage.removeItem("upbi8_u")}const g=await Wk();if(!g)throw new Error("Could not read ID-Token");const _=await sd(JSON.stringify({action:"getUser",idtoken:g}));if(_==null||!Object.hasOwn(_,"status")||_.status==="error"||_.status!=="success")throw new Error(_?.message||"User not registered");return localStorage.setItem("upbi8_u",JSON.stringify(_.user)),_.user}catch(m){return console.error(m?.message||"User not registered"),null}},{login:d}=YZ({onComplete:({user:p,isNewUser:m,wasAlreadyAuthenticated:g,loginMethod:_,loginAccount:A})=>{i(`Wallet ${g?"already ":""}Connected`,"success"),u(p.id).then(w=>{console.log("Backend user data:",w),w!==null&&n(w),s(!0)})},onError:p=>{console.error("Login failed",p),localStorage.removeItem("upbi8_u"),n(null),s(!1),i("Failed to connect wallet","err")}}),{logout:h}=ZZ({onSuccess:()=>{localStorage.removeItem("upbi8_u"),n(null),s(!1),i("Wallet disconnected")}}),f=T.useCallback(()=>{if(!a){i("Offline! Please check network connection","err");return}s(!1),d()},[a,d]);return R.jsx(fi.Provider,{value:{isLoggedIn:o&&c,user:o?l:null,userBackendRegisteredData:e,isUserBackendDataLoadingComplete:r,signIn:f,signOut:h,getIdToken:Wk},children:t})}const Xx=T.createContext({transactions:[],isInitialLoadingComplete:!1,isWip:!1,fetchTransactions:async()=>[]});function w5e({children:t}){const[e,n]=T.useState([]),[r,s]=T.useState(!1),[i,a]=T.useState(!1),{notify:o}=T.useContext(hs),c=T.useContext(di),{user:l,isLoggedIn:u,userBackendRegisteredData:d,isUserBackendDataLoadingComplete:h,getIdToken:f}=T.useContext(fi),p=T.useCallback(async m=>{if(!l||!u||!d||!h)return null;try{if(!c)return o("Offline! Please check network connection","alert"),null;const g=await f();if(!g)throw new Error("Could not read ID-Token");a(!0);const _=await sd(JSON.stringify({action:"getTransactions",idtoken:g}));if(_==null||!Object.hasOwn(_,"status")||_.status==="error"||_.status!=="success")throw new Error(_?.message||"Error fetching transactions");const A=_.transactions;if(!Array.isArray(A))throw new Error("Transactions data returned is invalid");return n(A),s(!0),A}catch(g){return o(g.message||"Error fetching transactions","err"),null}finally{a(!1)}},[c,l,u,d,h]);return R.jsx(Xx.Provider,{value:{transactions:e,isInitialLoadingComplete:r,isWip:i,fetchTransactions:p},children:t})}const fl=T.createContext({availableSymbols:[],selectedSymbol:{name:"BTC/USDT",exchange:"Binance"},setSelectedSymbol:()=>{},searchSymbol:async()=>null}),qk=[{name:"BTC/USDC",exchange:"Binance",desc:"Bitcoin"},{name:"BTC/USDT",exchange:"Binance",desc:"Bitcoin"},{name:"ETH/USDC",exchange:"Binance",desc:"Ethereum"},{name:"ETH/USDT",exchange:"Binance",desc:"Ethereum"},{name:"XRP/USDC",exchange:"Binance",desc:"XRP"},{name:"XRP/USDT",exchange:"Binance",desc:"XRP"},{name:"BNB/USDT",exchange:"Binance",desc:"BNB"},{name:"SOL/USDC",exchange:"Binance",desc:"Solana"},{name:"SOL/USDT",exchange:"Binance",desc:"Solana"},{name:"TRX/USDC",exchange:"Binance",desc:"TRON"},{name:"TRX/USDT",exchange:"Binance",desc:"TRON"},{name:"DOGE/USDT",exchange:"Binance",desc:"Dogecoin"},{name:"BCH/USDT",exchange:"Binance",desc:"Bitcoin Cash"},{name:"BCH/USDC",exchange:"Binance",desc:"Bitcoin Cash"},{name:"ADA/USDC",exchange:"Binance",desc:"Cardano"},{name:"ADA/USDT",exchange:"Binance",desc:"Cardano"},{name:"HYPE/USDT",exchange:"Binance",desc:"Hyperliquid"},{name:"XMR/USDT",exchange:"Binance",desc:"Monero"},{name:"CC/USDT",exchange:"Binance",desc:"Canton"},{name:"LINK/USDC",exchange:"Binance",desc:"Chainlink"},{name:"LINK/USDT",exchange:"Binance",desc:"Chainlink"},{name:"XLM/USDC",exchange:"Binance",desc:"Stellar"},{name:"XLM/USDT",exchange:"Binance",desc:"Stellar"},{name:"HBAR/USDC",exchange:"Binance",desc:"Hedera"},{name:"HBAR/USDT",exchange:"Binance",desc:"Hedera"},{name:"ZEC/USDC",exchange:"Binance",desc:"Zcash"},{name:"ZEC/USDT",exchange:"Binance",desc:"Zcash"},{name:"LTC/USDC",exchange:"Binance",desc:"Litecoin"},{name:"LTC/USDT",exchange:"Binance",desc:"Litecoin"},{name:"AVAX/USDC",exchange:"Binance",desc:"Avalanche"},{name:"AVAX/USDT",exchange:"Binance",desc:"Avalanche"},{name:"SUI/USDC",exchange:"Binance",desc:"Sui"},{name:"SUI/USDT",exchange:"Binance",desc:"Sui"},{name:"SHIB/USDC",exchange:"Binance",desc:"Shiba Inu"},{name:"SHIB/USDT",exchange:"Binance",desc:"Shiba Inu"},{name:"TON/USDC",exchange:"Binance",desc:"Toncoin"},{name:"TON/USDT",exchange:"Binance",desc:"Toncoin"},{name:"DOT/USDC",exchange:"Binance",desc:"Polkadot"},{name:"DOT/USDT",exchange:"Binance",desc:"Polkadot"},{name:"AAVE/USDC",exchange:"Binance",desc:"Aave"},{name:"AAVE/USDT",exchange:"Binance",desc:"Aave"}];function b5e({children:t}){const[e,n]=T.useState({name:"BTC/USDT",exchange:"Binance"}),r=T.useRef(null),s=T.useCallback(async(i,a=6)=>{if(i.trim()==="")return null;try{return new Promise(o=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{const c=qk.filter(l=>l.name.replace(/[\/ ]/gi,"").toLowerCase().includes(i.trim().replace(/[\/ ]/gi,"").toLowerCase())).slice(0,a);o(c.length>0?c:null)},360)})}catch{return null}},[]);return R.jsx(fl.Provider,{value:{availableSymbols:qk,selectedSymbol:e,setSelectedSymbol:n,searchSymbol:s},children:t})}var tE=(t=>(t[t.UNCHANGED=0]="UNCHANGED",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t))(tE||{});const h0=T.createContext({tickId:0,lastTradeDetails:null});function v5e({children:t}){const[e,n]=T.useState(0),r=T.useRef(null),s=T.useRef(null),i=T.useContext(di),{selectedSymbol:a}=T.useContext(fl),o=()=>{s.current!==null&&s.current.readyState===WebSocket.OPEN&&(s.current.close(),s.current=null)},c=()=>{try{o(),s.current=new WebSocket(`wss://stream.binance.com:9443/ws/${a.name.replace("/","").toLowerCase()}@aggTrade`),s.current.onmessage=u=>{const d=JSON.parse(u.data);if(r.current!==null){const h=Number(d.p);r.current.qty=Number(d.q),r.current.timestamp=d.T,r.current.isSell=d.m,r.current.ltpChange=h==r.current.price?0:h>r.current.price?1:2,r.current.price=h}else r.current={price:Number(d.p),qty:Number(d.q),timestamp:d.T,isSell:d.m,ltpChange:0};n(d.a)}}catch(u){console.error("ERROR initiating TradeBook stream:",u)}},l=async()=>{try{const h=(await(await fetch(`https://api.binance.com/api/v3/aggTrades?symbol=${a.name.replace("/","").toUpperCase()}&limit=5`)).json())[4];if(r.current!==null){const f=Number(h.p);r.current.qty=Number(h.q),r.current.timestamp=h.T,r.current.isSell=h.m,r.current.ltpChange=f===r.current.price?0:f>r.current.price?1:2,r.current.price=f}else r.current={price:Number(h.p),qty:Number(h.q),timestamp:h.T,isSell:h.m,ltpChange:0};n(h.a),c()}catch(u){console.error("ERROR initiating TradeBook:",u)}};return T.useEffect(()=>{if(i&&a.exchange==="Binance")return(async()=>await l())(),()=>{o()};o(),n(0),r.current=null},[i,a]),R.jsx(h0.Provider,{value:{tickId:e,lastTradeDetails:r.current},children:t})}const id=T.createContext({tick:0,positions:[],refetch:async()=>null,quotes:{},net_PnL_n_spotValue_by_currency:{},PnL_by_posId:{}});function _5e({children:t}){const[e,n]=T.useState(0),[r,s]=T.useState([]),i=T.useRef({}),a=T.useRef(null),o=T.useRef(null),c=T.useRef({}),l=T.useRef({}),{notify:u}=T.useContext(hs),d=T.useContext(di),{user:h,isLoggedIn:f,userBackendRegisteredData:p,isUserBackendDataLoadingComplete:m,getIdToken:g}=T.useContext(fi),_=()=>{a.current!==null&&a.current.readyState===WebSocket.OPEN&&(a.current.close(),a.current=null)},A=async()=>{try{a.current!==null&&a.current.readyState===WebSocket.OPEN&&a.current.close();const y=[];return r.forEach(E=>{const b=E.symbol.replace(/[\/ ]/gi,"").toLowerCase()+"@aggTrade";y.includes(b)||y.push(b)}),y.length<1?(console.log("Stopped initiating socket connection since no instruments to subscribe to"),null):(a.current=new WebSocket(`wss://stream.binance.com:9443/stream?streams=${y.join("/")}`),a.current.onmessage=E=>{const b=JSON.parse(E.data);i.current[b.stream.replace("@aggTrade","")]=parseFloat(b.data.p),c.current=r.reduce((S,{id:$,symbol:P,price:C,qty:B,isShort:k},D)=>{const[L,v]=P.replaceAll(" ","").split("/"),x=(L+v).toLowerCase();if(!Object.hasOwn(i.current,x))return S;const O=(k?C-i.current[x]:i.current[x]-C)*B;return l.current[$]=O,Object.hasOwn(S,v)?(S[v][0]+=O,S[v][1]+=i.current[x]*B):S[v]=[O,i.current[x]*B],S},{}),n(b.data.a)},a.current.onclose=()=>{a.current=null},a.current)}catch(y){return console.error("ERROR initiating positions tick stream:",y),null}},w=T.useCallback(async y=>{if(o.current!==null&&clearTimeout(o.current),!h||!f||!p||!m)return null;try{if(!d)return u("Offline! Please check network connection","alert"),null;const E=await g();if(!E)return u("Error reading ID-Token before fetching positions","alert"),null;const b=await sd(JSON.stringify({action:"getOpenPositions",idtoken:E}));if(b==null||!Object.hasOwn(b,"status")||b.status==="error"||b.status!=="success")throw new Error(b?.message||"Error fetching positions");const S=b.positions;return s(S),S}catch(E){return u(E.message||"Error fetching positions","err"),o.current=setTimeout(w,3600),null}},[d,h,f,p,m]);return T.useEffect(()=>(d&&r.length>0&&A(),()=>{_()}),[r,d]),T.useEffect(()=>{d&&m&&w().then(y=>{y&&console.log(y.length+" positions loaded")})},[m,d]),R.jsx(id.Provider,{value:{positions:r,refetch:()=>w(!0),tick:e,quotes:i.current,net_PnL_n_spotValue_by_currency:c.current,PnL_by_posId:l.current},children:t})}function KU({icon:t}){return R.jsx("i",{className:"icon-"+t})}const E5e="_btn_w3ygy_6",x5e="_primary_w3ygy_44",A5e="_secondary_w3ygy_67",S5e="_primaryBuy_w3ygy_87",I5e="_primarySell_w3ygy_101",T5e="_wip_w3ygy_119",C5e="_icoRight_w3ygy_158",k5e="_btnCntnr_w3ygy_207",da={btn:E5e,primary:x5e,secondary:A5e,primaryBuy:S5e,primarySell:I5e,wip:T5e,icoRight:C5e,btnCntnr:k5e};function cs({id:t,type:e,variant:n,onClick:r,isDisabled:s,isWip:i,wipText:a,icon:o,isIconOnRight:c,children:l,className:u,...d}){return R.jsx("button",{tabIndex:0,id:t,className:uf(da.btn,n=="primary"&&da.primary,n=="secondary"&&da.secondary,n=="buy"&&da.primaryBuy,n=="sell"&&da.primarySell,i&&da.wip,o&&da.ico,o&&c&&da.icoRight,u&&typeof u=="string"&&u.trim()),type:e||"button",onClick:r,disabled:s||i,...d,children:R.jsxs(R.Fragment,{children:[!i&&o&&R.jsx(KU,{icon:o}),l&&R.jsx("span",{children:i?a?.trim()!==""?a?.trim():"Loading...":l})]})})}function Qx({children:t,className:e}){return R.jsx("div",{className:`${da.btnCntnr}${e?" "+e:""}`,children:t})}const O5e="_inpC_1fh8t_4",P5e="_err_1fh8t_43",R5e="_inpIco_1fh8t_57",$5e="_inp_1fh8t_4",N5e="_faux_1fh8t_134",nu={inpC:O5e,err:P5e,inpIco:R5e,inp:$5e,faux:N5e};function zu({id:t,className:e,title:n,name:r,type:s,onChange:i,onBlur:a,onFocus:o,placeholder:c,value:l,error:u,isDisabled:d,initFocused:h,icon:f,actionPane:p}){const m=Te.useRef(null);return Te.useEffect(()=>{h&&m?.current?.focus()},[]),R.jsxs("div",{className:uf(nu.inpC,u&&u.trim()!==""&&nu.err,f&&nu.inpIco,e),"data-title":n,"data-err":u,children:[f&&R.jsx(KU,{icon:f}),R.jsx("input",{ref:m,tabIndex:0,id:t,className:nu.inp,name:r||t||"",onChange:i,onBlur:a,onFocus:o,type:s||"text",placeholder:c,value:typeof l!="string"&&typeof l!="number"?"":l,disabled:d}),p&&R.jsx("div",{children:typeof p=="function"?p():p})]})}function D5e({id:t,className:e,title:n,children:r}){return R.jsx("div",{id:t,className:uf(nu.inpC,nu.faux,e),"data-title":n,children:r||"Text"})}const U5e="_coinIconSet_tsabo_1",B5e={coinIconSet:U5e};function Vk({coin:t}){return R.jsx("i",{className:"coin-icon-"+t})}function M5e({coin:t,coin2:e,className:n}){return R.jsxs("span",{className:`${B5e.coinIconSet}${n?" "+n:""}`,children:[R.jsx("i",{className:"coin-icon-"+e}),R.jsx("i",{className:"coin-icon-"+t})]})}const L5e="_symbolSearchC_1uwmt_1",F5e="_symbolSearchDropDown_1uwmt_4",Hk={symbolSearchC:L5e,symbolSearchDropDown:F5e};function j5e(){const{selectedSymbol:t,setSelectedSymbol:e,searchSymbol:n,availableSymbols:r}=T.useContext(fl),s=T.useRef(t),[i,a]=T.useState(t?.name||""),[o,c]=T.useState([]),l=T.useRef(null),u=T.useCallback(d=>{l.current&&!l.current.contains(d.target)&&(a(s.current.name),c(null))},[]);return T.useEffect(()=>(document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}),[]),T.useEffect(()=>{console.log("Switched to",t.name,"(",t.exchange,")"),s.current=t,a(t.name),c(null)},[t]),T.useEffect(()=>{i.replace(/[\/ ]/gi,"").toUpperCase()===s.current.name.replace(/[\/ ]/gi,"")?c(null):i.trim()===""?c(r):n(i).then(d=>{c(d!==null?d:[])})},[i]),R.jsxs("div",{className:Hk.symbolSearchC,ref:l,children:[R.jsx(zu,{title:"Instrument",name:"Instrument",placeholder:"Search Instrument",icon:"search",value:i,onBlur:()=>{setTimeout(()=>{a(s.current.name)},360)},onFocus:d=>{a("")},onChange:d=>{a(d.target.value.toUpperCase())}}),i.replaceAll("/","").toUpperCase()!==t?.name.replaceAll("/","").toUpperCase()&&o!==null&&R.jsx("div",{className:Hk.symbolSearchDropDown,children:o.length>0&&o.map(d=>{const[h,f]=d.name.split("/");return R.jsx("button",{onClick:()=>{e(d),c([]),a(d.name)},"data-symbol":`${h} / ${f}`,"data-symbol-name":d?.desc||"",children:R.jsx(M5e,{coin:h.toLowerCase(),coin2:f.toLowerCase()})},d.name)})})]})}const z5e="_userPanelC_1ff1q_1",W5e="_userPanel_1ff1q_4",q5e="_viz_1ff1q_38",V5e="_userIdC_1ff1q_48",Qp={userPanelC:z5e,userPanel:W5e,viz:q5e,userIdC:V5e};function H5e({userId:t,signOut:e}){const[n,r]=T.useState(!1),{notify:s}=T.useContext(hs),i=T.useRef(null),a=T.useCallback(o=>{i.current&&!i.current.contains(o.target)&&r(!1)},[]);return T.useEffect(()=>(document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}),[]),R.jsxs("div",{id:Qp.userPanelC,ref:i,children:[R.jsx(cs,{icon:"user",onClick:()=>{r(o=>!o)}}),R.jsxs("div",{className:`${Qp.userPanel}${n?" "+Qp.viz:""}`,children:[R.jsxs("div",{className:Qp.userIdC,children:[R.jsx("span",{children:t.replace("did:privy:","")}),R.jsx(cs,{icon:"copy",onClick:()=>{navigator.clipboard.writeText(t).then(()=>{s("Copied ID to clipboard","success")}).catch(o=>{s("Failed to copy ID","err")})}})]}),R.jsx(cs,{variant:"secondary",onClick:()=>{e(),r(!1)},children:"Disconnect Wallet"})]})]})}function K5e(){const{isLoggedIn:t,user:e,signIn:n,signOut:r}=T.useContext(fi);return t&&e?R.jsx(H5e,{userId:e.id,signOut:r}):R.jsx(cs,{variant:"primary",onClick:n,children:"Connect Wallet"})}const G5e="_appHdr_3o30u_1",Y5e="_appHdrLogo_3o30u_1",Kk={appHdr:G5e,appHdrLogo:Y5e};function Z5e(){return R.jsxs("header",{id:Kk.appHdr,children:[R.jsx("a",{href:"/",id:Kk.appHdrLogo,children:R.jsxs("svg",{width:"900",height:"300",viewBox:"0 0 900 300",children:[R.jsx("g",{fill:"#784aba",children:R.jsx("path",{d:"M11 107A70 70 0 0 1 70 0c38 0 70 31 70 70q0 20-11 37l-26-26 2-11c0-19-15-35-35-35S35 50 35 70q0 6 2 11zm59 12 67 67 2-18q0-29-20-49L70 70l-49 49a66 66 0 0 0-21 50q0 9 2 18zm34 56c-3 16-17 29-34 29s-31-12-34-28L8 202a70 70 0 0 0 123 1zM879 125q19-17 20-45c0-33-26-60-60-60s-60 26-60 60q0 27 20 45a61 61 0 0 0-20 45c0 33 26 60 60 60s60-26 60-60q1-28-20-45m-39 70c-13 0-25-11-25-25 0-13 11-25 25-25s25 11 25 25c0 13-12 25-25 25m0-90c-13 0-25-11-25-25 0-13 11-25 25-25s25 11 25 25c0 13-12 25-25 25"})}),R.jsxs("g",{fill:"#ede0ff",children:[R.jsx("path",{d:"M465 90c-38 0-70 31-70 70v140c19 0 35-15 35-35v-44q15 9 35 9c38 0 70-31 70-70s-32-70-70-70m0 105c-19 0-35-15-35-35s15-35 35-35 35 15 35 35-16 35-35 35M625 90q-18 0-35 9V55c0-19-15-35-35-35v140c0 38 31 70 70 70s70-31 70-70-32-70-70-70m0 105c-19 0-35-15-35-35s15-35 35-35 35 15 35 35-16 35-35 35M340 90v70c0 19-15 35-35 35s-35-15-35-35V90c0-19-15-35-35-35v105c0 38 31 70 70 70s70-31 70-70V55c-20 0-35 15-35 35M732 95q-9 0-17-3v138c19 0 35-15 35-35V91q-9 4-18 4"}),R.jsx("circle",{cx:"732.5",cy:"45",r:"25"})]})]})}),R.jsx(j5e,{}),R.jsx("div",{children:R.jsx(K5e,{})})]})}const J5e="_tabsHdr_1x4yb_1",X5e="_flexTabs_1x4yb_5",Q5e="_active_1x4yb_34",av={tabsHdr:J5e,flexTabs:X5e,active:Q5e};function nE({titles:t,children:e,spaceTabsEvenly:n=!1}){const[r,s]=T.useState(0);return t.length!==e.length?"Number of titles and children should be same":R.jsxs(R.Fragment,{children:[R.jsx("div",{className:`${av.tabsHdr}${n?" "+av.flexTabs:""}`,children:t.map((i,a)=>R.jsx("button",{className:r===a?av.active:"",onClick:()=>s(a),children:i},a))}),e[r]]})}function eTe(){const t=T.useRef(null);return T.useEffect(()=>{const e=document.createElement("script");e.src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",e.type="text/javascript",e.async=!0,e.innerHTML=`
        {
          "symbols": [
            {
              "proName": "BITSTAMP:BTCUSD",
              "title": "Bitcoin"
            },
            {
              "proName": "BITSTAMP:ETHUSD",
              "title": "Ethereum"
            },
            {
              "proName": "BINANCE:BTCUSDT",
              "title": "BTC / USDT"
            },
            {
              "proName": "BINANCE:ETHUSDT",
              "title": "ETH / USDT"
            }
          ],
          "colorTheme": "dark",
          "locale": "en",
          "largeChartUrl": "https://upbi8.com/app",
          "isTransparent": true,
          "showSymbolLogo": true
        }`,t?.current?.appendChild(e)},[]),R.jsx("div",{className:"tradingview-widget-container",ref:t,children:R.jsx("div",{className:"tradingview-widget-container__widget"})})}const tTe=T.memo(eTe);function nTe(){const{selectedSymbol:t}=T.useContext(fl),e=T.useRef(null);return T.useEffect(()=>{if(e.current){e.current.innerHTML="";const n=document.createElement("script");n.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",n.type="text/javascript",n.async=!0,n.innerHTML=`
        {
          "allow_symbol_change": false,
          "calendar": false,
          "details": false,
          "hide_side_toolbar": false,
          "hide_top_toolbar": false,
          "hide_legend": false,
          "hide_volume": false,
          "hotlist": false,
          "interval": "D",
          "locale": "en",
          "save_image": true,
          "style": "1",
          "symbol": "${t.exchange.toUpperCase()+":"+t.name.replace("/","").toUpperCase()}",
          "theme": "dark",
          "timezone": "Asia/Kolkata",
          "backgroundColor": "#0e0c13",
          "gridColor": "rgba(242, 242, 242, 0.06)",
          "watchlist": [],
          "withdateranges": false,
          "compareSymbols": [],
          "studies": [],
          "autosize": true
        }`,e?.current?.appendChild(n)}},[t]),R.jsx("div",{className:"tradingview-widget-container",ref:e,style:{height:"100%",width:"100%"},children:R.jsx("div",{className:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}})})}const rTe=T.memo(nTe),vt=t=>{if(t&&!isNaN(t))return new Intl.NumberFormat("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},sTe="_ltp_1tgeo_1",iTe="_ltpUp_1tgeo_7",aTe="_ltpDown_1tgeo_10",ov={ltp:sTe,ltpUp:iTe,ltpDown:aTe};function oTe(){const{tickId:t,lastTradeDetails:e}=T.useContext(h0);return R.jsx("span",{className:`${ov.ltp}${e?e.ltpChange===tE.UP?" "+ov.ltpUp:e.ltpChange===tE.DOWN?" "+ov.ltpDown:"":""}`,children:e?vt(e.price):"--.-"},t)}const cTe="_orderBookC_s6bmp_1",lTe="_orderBookHdr_s6bmp_21",uTe="_askBidMidC_s6bmp_33",dTe="_asksC_s6bmp_62",hTe="_bidsC_s6bmp_63",zl={orderBookC:cTe,orderBookHdr:lTe,askBidMidC:uTe,asksC:dTe,bidsC:hTe},Gk=T.memo(({price:t,size:e,cumulativeSize:n,maxCumulativeTotalSize_forWidthCalc:r})=>R.jsxs("li",{children:[R.jsx("div",{style:{width:`${n/r*100}%`}}),R.jsx("span",{children:vt(t)}),R.jsx("span",{children:e.toFixed(4)}),R.jsx("span",{children:n.toFixed(4)})]}),(t,e)=>t.price===e.price&&t.size===e.size&&t.cumulativeSize===e.cumulativeSize&&t.maxCumulativeTotalSize_forWidthCalc===e.maxCumulativeTotalSize_forWidthCalc);function fTe({symbol:t="btcusdt",baseCurrency:e="btc",quoteCurrency:n="usdt",numRows:r=5}){const[s,i]=T.useState(0),a=T.useContext(di),o=T.useRef(null),c=T.useRef({maxCumulativeTotalSize:0,asks:[],bids:[]}),l=f=>{if(f.lastUpdateId===s)return;let p=0,m=0,g=0,_=0;c.current.asks=f.asks.map(([A,w],y)=>(y==0?(p=parseFloat(w),g=0):(p+=parseFloat(w),g+=parseFloat(w)),{price:parseFloat(A),size:p,cumulativeSize:g})),c.current.bids=f.bids.map(([A,w],y)=>(y==0?(m=parseFloat(w),_=0):(m+=parseFloat(w),_+=parseFloat(w)),{price:parseFloat(A),size:m,cumulativeSize:_})),c.current.maxCumulativeTotalSize=Math.max(g,_),i(f.lastUpdateId)},u=()=>{o.current!==null&&o.current.readyState===WebSocket.OPEN&&o.current.close()},d=()=>{try{u(),o.current=new WebSocket(`wss://stream.binance.com:9443/ws/${t}@depth${r}`),o.current.onmessage=f=>{const p=JSON.parse(f.data);l(p)}}catch(f){console.error("ERROR initiating OrderBook stream:",f)}},h=async()=>{try{const p=await(await fetch(`https://api.binance.com/api/v3/depth?symbol=${t.toUpperCase()}&limit=${r}`)).json();l(p),d()}catch(f){console.error("ERROR initiating OrderBook:",f)}};return T.useEffect(()=>{if(a)return(async()=>await h())(),()=>{u()}},[a,t]),R.jsxs("div",{className:zl.orderBookC,children:[R.jsxs("div",{className:zl.orderBookHdr,children:[R.jsxs("span",{children:["Price (",n.toUpperCase(),")"]}),R.jsxs("span",{children:["Size (",e.toUpperCase(),")"]}),R.jsxs("span",{children:["Total (",e.toUpperCase(),")"]})]}),R.jsx("ul",{className:zl.asksC,children:c.current.asks.map(({price:f,size:p,cumulativeSize:m})=>R.jsx(Gk,{price:f,size:p,cumulativeSize:m,maxCumulativeTotalSize_forWidthCalc:c.current.maxCumulativeTotalSize},m))}),R.jsx("div",{className:zl.askBidMidC,children:R.jsx(oTe,{})}),R.jsx("ul",{className:zl.bidsC,children:c.current.bids.map(({price:f,size:p,cumulativeSize:m})=>R.jsx(Gk,{price:f,size:p,cumulativeSize:m,maxCumulativeTotalSize_forWidthCalc:c.current.maxCumulativeTotalSize},m))})]})}function pTe(){const{selectedSymbol:t}=T.useContext(fl);if(t.exchange==="Binance"){const[e,n]=t.name.split("/");return R.jsx(fTe,{symbol:t.name.replace("/","").toLowerCase(),baseCurrency:e,quoteCurrency:n,numRows:10})}else return R.jsx("div",{className:zl.orderBookC})}const mTe="_tradeBookC_1rvur_1",gTe="_tradeBookHdr_1rvur_22",yTe="_tradesC_1rvur_39",wTe="_sell_1rvur_61",Wl={tradeBookC:mTe,tradeBookHdr:gTe,tradesC:yTe,sell:wTe};function bTe({symbol:t="btcusdt",baseCurrency:e="btc",quoteCurrency:n="usdt",numRows:r=5}){const s=T.useContext(di),{tickId:i,lastTradeDetails:a}=T.useContext(h0),o=T.useRef(null),c=T.useRef(!1),l=d=>new Date(d).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),u=async()=>{try{if(o.current===null)return;const h=await(await fetch(`https://api.binance.com/api/v3/aggTrades?symbol=${t.toUpperCase()}&limit=${r}`)).json();o.current.innerHTML=h.map(({p:f,q:p,T:m,m:g})=>`
				${g?`<li class="${Wl.sell}">`:"<li>"}
					<span>${vt(Number(f))}</span>
					<span>${parseFloat(p).toFixed(4)}</span>
					<span>${l(m)}</span>
				</li>`).join(""),c.current=!0}catch(d){console.error("ERROR initiating TradeBook:",d)}};return T.useEffect(()=>{s?(async()=>await u())():c.current=!1},[s,t]),T.useEffect(()=>{if(c.current&&o.current!==null&&a){const d=document.createElement("LI");a.isSell&&d.classList.add(Wl.sell),d.innerHTML=`
					<span>${vt(a.price)}</span>
					<span>${a.qty.toFixed(4)}</span>
					<span>${l(a.timestamp)}</span>
				`,o.current.children.length>=r&&o.current.firstElementChild?.remove(),o.current.appendChild(d)}},[i]),R.jsxs("div",{className:Wl.tradeBookC,children:[R.jsxs("div",{className:Wl.tradeBookHdr,children:[R.jsxs("span",{children:["Price (",n.toUpperCase(),")"]}),R.jsxs("span",{children:["Qty (",e.toUpperCase(),")"]}),R.jsx("span",{children:"Time"})]}),R.jsx("ul",{ref:o,className:Wl.tradesC})]})}function vTe(){const{selectedSymbol:t}=T.useContext(fl);if(t.exchange==="Binance"){const[e,n]=t.name.split("/");return R.jsx(bTe,{symbol:t.name.replace("/","").toLowerCase(),baseCurrency:e,quoteCurrency:n,numRows:30})}else return R.jsx("div",{className:Wl.tradeBookC})}const _Te="_tgl_sf3fc_1",ETe="_y_sf3fc_43",xTe="_tick_sf3fc_124",cv={tgl:_Te,y:ETe,tick:xTe};function ATe({isOn:t,onToggle:e,showTick:n,isDisabled:r}){return R.jsx("button",{className:`${cv.tgl}${n?" "+cv.tick:""}${t?" "+cv.y:""}`,disabled:r,onClick:()=>{e&&!r&&e?.()}})}const STe="_withdrawC_vv73q_1",ITe="_ctaBtnsC_vv73q_28",Yk={withdrawC:STe,ctaBtnsC:ITe};function TTe({close:t}){const{isLoggedIn:e,userBackendRegisteredData:n,isUserBackendDataLoadingComplete:r,getIdToken:s}=T.useContext(fi),[i,a]=T.useState(n?.balance?.toString()||""),[o,c]=T.useState(void 0),[l,u]=T.useState(""),[d,h]=T.useState(void 0),[f,p]=T.useState(!1),{notify:m}=T.useContext(hs),g=T.useContext(di),{transactions:_,fetchTransactions:A,isInitialLoadingComplete:w}=T.useContext(Xx),y=b=>b.find($=>$.type==="Withdraw"&&$.sts==="Pending")?.amt||0,E=async()=>{if(!e){m("Kindly connect wallet","alert"),t();return}if(!n?.balance||n.balance===0){m("You do not have enough balance","alert"),t();return}if(f){m("Withdrawal request already underway");return}try{if(i.trim()===""){c("Required");return}else if(!n?.balance||n.balance==0||Number(i)>n.balance){c("Not enough balance");return}else if(Number(i)<=0){c("Invalid amount");return}else c(void 0);if(l.trim()===""){h("Required");return}else h(void 0);if(!g){m("Offline! Kindly check network connection","alert");return}p(!0);var b=0;if(!w||_.length==0){m("Checking for past withdrawals pending approval, if any");const P=await A();b=P?y(P):0}else b=y(_);if(b>0){m("Last withdrawal of "+vt(b)+" USDT already pending approval","alert");return}const S=await s();if(!S)throw new Error("Could not read ID-Token");const $=await sd(JSON.stringify({action:"setTransaction",idtoken:S,type:"Withdraw",amt:Number(i),addr:l}));if($==null||!Object.hasOwn($,"status")||$.status==="error"||$.status!=="success")throw new Error($?.message||"Error writing withdrawal request");$.amt&&m("Withdrawal request sent successfully","success"),p(!1),m("Withdrawal request sent"),t()}catch(S){p(!1),t(),m(S.message||"Error initiating withdrawal request","err")}finally{p(!1)}};return T.useEffect(()=>{i.trim()!==""&&(!n?.balance||n.balance==0||Number(i)>n.balance?c("Not enough balance"):Number(i)<=0?c("Invalid amount"):c(void 0))},[i]),T.useEffect(()=>{l.trim()!==""&&h(void 0)},[l]),R.jsxs("div",{className:Yk.withdrawC,children:[R.jsx("h3",{children:"Withdraw"}),R.jsx("span",{children:n?.balance?vt(n.balance):"0.00"}),R.jsx(zu,{isDisabled:n?.balance===void 0||n?.balance===0,type:"number",title:"Withdraw Amount",name:"Withdraw",placeholder:"Withdraw Amount",actionPane:"USDT",value:i,error:o,onChange:b=>{a(b.target.value)}}),R.jsx(zu,{title:"Wallet Address",name:"Wallet Address",placeholder:"Wallet Address",value:l,error:d,onChange:b=>{u(b.target.value)}}),R.jsxs(Qx,{className:Yk.ctaBtnsC,children:[R.jsx(cs,{isDisabled:!(n?.balance&&n.balance>0),isWip:f,wipText:"Requesting",variant:"primary",onClick:()=>{E()},children:"Withdraw"}),R.jsx(cs,{onClick:t,children:"Cancel"})]})]})}const CTe="_depositC_1e3ll_1",kTe="_note_1e3ll_54",Zk={depositC:CTe,note:kTe};function GU(){const{notify:t}=T.useContext(hs);return R.jsxs("div",{className:Zk.depositC,children:[R.jsx("h3",{children:"Deposit"}),R.jsxs("div",{"data-label":"Network chain",children:[R.jsx(Vk,{coin:"trx"})," Tron"]}),R.jsxs("div",{"data-label":"Transaction Asset",children:[R.jsx(Vk,{coin:"usdt"})," USDT (TRC20)"]}),R.jsxs("div",{"data-label":"Deposit Wallet Address",children:["TA2hv5kSGhcNHjFyXFtUB392FiN9H4wSWe"," ",R.jsx(cs,{icon:"copy",onClick:()=>{navigator.clipboard.writeText("TA2hv5kSGhcNHjFyXFtUB392FiN9H4wSWe").then(()=>{t("Address copied to clipboard","success")}).catch(e=>{t(e.message||"Failed to copy address","err")})}})]}),R.jsx("img",{src:"/img/depositAddressQr.webp",alt:"Deposit Address QR code"}),R.jsx("p",{className:Zk.note,children:"Only send Tether (TRC20) assets to this address. Other assets will be lost forever."})]})}const OTe="_wrap_143yo_32",PTe="_isViz_143yo_46",RTe="_bg_143yo_68",$Te="_modal_143yo_97",NTe="_xBtn_143yo_145",Nl={wrap:OTe,isViz:PTe,bg:RTe,modal:$Te,xBtn:NTe};function rE({children:t,useCloseBtn:e=!1,doOnOpen:n,doOnClose:r,disallowManualClosing:s=!1,...i}){const[a,o]=T.useState(!1),c=()=>{document&&document.body&&(document.body.style.overflow="hidden"),setTimeout(()=>{o(!0),n&&typeof n=="function"&&setTimeout(()=>{n()},200)},10)},l=()=>{o(!1),setTimeout(()=>{document&&document.body&&(document.body.style.overflow="visible"),r&&typeof r=="function"&&r()},200)};return T.useEffect(()=>(c(),()=>{document&&document.body&&(document.body.style.overflow="visible")}),[]),E$.createPortal(R.jsxs("div",{className:uf(Nl.wrap,a&&Nl.isViz),...i,children:[e||s?R.jsx("div",{className:Nl.bg}):R.jsx("div",{className:Nl.bg,onClick:l}),R.jsxs("div",{className:Nl.modal,children:[R.jsx("main",{children:typeof t=="function"?t(l):t}),e&&R.jsx("span",{className:Nl.xBtn,onClick:l})]})]}),document.body)}function DTe(){const[t,e]=T.useState(0),{tickId:n,lastTradeDetails:r}=T.useContext(h0);return T.useEffect(()=>{r?.price&&e(r?.price)},[n]),vt(t)}const UTe="_tradeOpsC_1av5g_1",BTe="_mktPriceDisplay_1av5g_19",MTe="_limitInpC_1av5g_20",LTe="_qtyPrepC_1av5g_25",FTe="_balance_1av5g_32",jTe="_leverageBtn_1av5g_59",zTe="_buySellBtnC_1av5g_72",ac={tradeOpsC:UTe,mktPriceDisplay:BTe,limitInpC:MTe,qtyPrepC:LTe,balance:FTe,leverageBtn:jTe,buySellBtnC:zTe};function WTe(){const[t,e]=T.useState(!1),{notify:n}=T.useContext(hs),{selectedSymbol:r}=T.useContext(fl),{isLoggedIn:s,isUserBackendDataLoadingComplete:i,userBackendRegisteredData:a,signIn:o}=T.useContext(fi),[c,l]=r.name.split("/");return R.jsxs(R.Fragment,{children:[R.jsxs(nE,{titles:["Market","Limit"],spaceTabsEvenly:!0,children:[R.jsx(D5e,{className:ac.mktPriceDisplay,children:R.jsx(DTe,{})}),R.jsx(qTe,{currency:l})]}),R.jsxs("div",{id:ac.tradeOpsC,children:[R.jsxs("div",{children:[R.jsxs("div",{className:ac.qtyPrepC,children:[R.jsxs("div",{children:[R.jsx("span",{className:ac.balance,children:a&&a.balance?a.balance:0}),R.jsx(cs,{icon:"plus",onClick:()=>{i?e(!0):n("Kindly Connect Wallet")}})]}),R.jsx("button",{className:ac.leverageBtn,onClick:()=>{n("Trading Rights Disabled","alert")},children:"10"})]}),R.jsx(VTe,{currency:c})]}),R.jsx(Jk,{currency:l,title:"Stop Loss"}),R.jsx(Jk,{currency:l,title:"Take Profit"}),R.jsx("div",{className:"flexSpacer"}),s?i&&a?.balance&&R.jsxs(Qx,{className:ac.buySellBtnC,children:[R.jsx(cs,{variant:"sell",onClick:()=>{n("User Trading Disabled","alert")},children:"SELL / SHORT"}),R.jsx(cs,{variant:"buy",onClick:()=>{n("User Trading Disabled","alert")},children:"BUY / LONG"})]}):R.jsx(cs,{variant:"primary",onClick:o,children:"Connect Wallet"}),R.jsx("div",{className:"flexSpacer"})]}),t&&R.jsx(rE,{useCloseBtn:!0,doOnClose:()=>{e(!1)},children:R.jsx(GU,{})})]})}function qTe({currency:t}){const[e,n]=T.useState("");return R.jsx(zu,{className:ac.limitInpC,type:"number",title:"Limit Price",name:"Limit Price",placeholder:"Limit Price",actionPane:t,value:e,onChange:r=>{n(r.target.value)}})}function VTe({currency:t}){const[e,n]=T.useState("");return R.jsx(zu,{type:"number",title:"Size",name:"Size",placeholder:"Size",actionPane:t,value:e,onChange:r=>{n(r.target.value)}})}function Jk({title:t,currency:e}){const[n,r]=T.useState(""),[s,i]=T.useState(!1);return R.jsx(zu,{type:"number",title:t,name:t,placeholder:t,actionPane:R.jsxs(R.Fragment,{children:[e,R.jsx(ATe,{isOn:s,showTick:!0,onToggle:()=>{i(a=>!a)}})]}),value:n,onChange:a=>{r(a.target.value)}})}const HTe="_posPanelC_fauay_1",KTe="_posC_fauay_6",GTe="_posHdr_fauay_18",YTe="_posShort_fauay_67",ZTe="_isLoss_fauay_107",Qd={posPanelC:HTe,posC:KTe,posHdr:GTe,posShort:YTe,isLoss:ZTe},JTe=T.memo(function({positions:e,refresh:n}){return R.jsxs("div",{className:Qd.posPanelC,children:[R.jsxs("header",{className:Qd.posHdr,children:[R.jsx("span",{children:"Asset"}),R.jsx("span",{children:"Leverage"}),R.jsx("span",{children:"Size"}),R.jsx("span",{children:"Margin"}),R.jsx("span",{children:"Liq. Price"}),R.jsx("span",{children:"Entry Price"}),R.jsx("span",{children:"SL"}),R.jsx("span",{children:"TP"}),R.jsx("span",{children:"LTP"}),R.jsx("span",{children:"PnL"}),R.jsx("span",{children:"%"})]}),e.length>0&&e.map((r,s)=>{const i=r.symbol.replace(/[\/ ]/gi,"").toLowerCase(),a=r.symbol.split("/"),o=r.qty*r.price/(r.leverageMultiplier||1),c=r.qty*r.price*.005;return R.jsxs("div",{className:`${Qd.posC}${r.isShort?" "+Qd.posShort:""}`,children:[R.jsx("span",{children:r.symbol}),R.jsx("span",{children:r.leverageMultiplier||1}),R.jsx("span",{"data-currency":a[0].trim(),children:r.qty}),R.jsx("span",{"data-margin-mode":r?.marginMode||"isolated",children:vt(o)}),R.jsx("span",{children:vt(r.isShort?r.price+(o-c)/r.qty:r.price-(o-c)/r.qty)}),R.jsx("span",{children:vt(r.price)}),R.jsx("span",{children:r?.sl?vt(r.sl):""}),R.jsx("span",{children:r?.tp?vt(r.tp):""}),R.jsx("span",{children:R.jsx(QTe,{quoteKey:i})}),R.jsx(e6e,{posId:r.id.toString(),posEntryPrice:r.price,quoteKey:i,quoteCurrency:a[1].trim()})]},r.id+r.symbol.replaceAll("/","").trim())})]})});function XTe(){const{user:t,isLoggedIn:e,userBackendRegisteredData:n,isUserBackendDataLoadingComplete:r,signIn:s}=T.useContext(fi),{positions:i,refetch:a}=T.useContext(id);return!t||!e?"Connect to Wallet":r&&n===null?"No Positions":R.jsx(JTe,{positions:i,refresh:async()=>a(!0)})}function QTe({quoteKey:t}){const{tick:e,quotes:n}=T.useContext(id);return Object.hasOwn(n,t)?vt(n[t]):""}function e6e({posId:t,posEntryPrice:e,quoteKey:n,quoteCurrency:r}){const{tick:s,quotes:i,PnL_by_posId:a}=T.useContext(id);if(!Object.hasOwn(i,n)||!Object.hasOwn(a,t))return R.jsxs(R.Fragment,{children:[R.jsx("span",{}),R.jsx("span",{})]});const o=a[t];return R.jsxs(R.Fragment,{children:[R.jsx("span",{"data-currency":r,className:`${o<0?Qd.isLoss:""}`,children:vt(o)}),R.jsx("span",{children:(o/e*100).toFixed(2)})]})}const t6e="_posPanelC_19rh2_1",n6e="_posC_19rh2_6",r6e="_posHdr_19rh2_18",s6e="_posShort_19rh2_67",i6e="_isLoss_19rh2_107",Bd={posPanelC:t6e,posC:n6e,posHdr:r6e,posShort:s6e,isLoss:i6e},a6e=T.memo(()=>{const[t,e]=T.useState([]),{notify:n}=T.useContext(hs),r=T.useContext(di),{user:s,isLoggedIn:i,userBackendRegisteredData:a,isUserBackendDataLoadingComplete:o,getIdToken:c}=T.useContext(fi),l=T.useCallback(async u=>{if(!s||!i||!a||!o)return null;try{if(!r)return n("Offline! Please check network connection","alert"),null;const d=await c();if(!d)throw new Error("Could not read ID-Token");const h=await sd(JSON.stringify({action:"getClosedPositions",idtoken:d}));if(h==null||!Object.hasOwn(h,"status")||h.status==="error"||h.status!=="success")throw new Error(h?.message||"Error fetching closed positions");const f=h.closedPositions;return e(f),f}catch(d){return n(d.message||"Error fetching closed-positions","err"),null}},[r,s,i,a,o]);return T.useEffect(()=>{r&&o&&l().then(u=>{u&&console.log(u.length+" closed-positions loaded")})},[o,r]),!s||!i?"Connect to Wallet":o&&a===null?"No Trade History":R.jsxs("div",{className:Bd.posPanelC,children:[R.jsxs("header",{className:Bd.posHdr,children:[R.jsx("span",{children:"Asset"}),R.jsx("span",{children:"Leverage"}),R.jsx("span",{children:"Size"}),R.jsx("span",{children:"Margin"}),R.jsx("span",{children:"Liq. Price"}),R.jsx("span",{children:"Entry Price"}),R.jsx("span",{children:"SL"}),R.jsx("span",{children:"TP"}),R.jsx("span",{children:"Exit Price"}),R.jsx("span",{children:"PnL"}),R.jsx("span",{children:"%"})]}),t.length>0&&t.map((u,d)=>{u.symbol.replace(/[\/ ]/gi,"").toLowerCase();const h=u.symbol.split("/"),f=u.qty*u.price/(u.leverageMultiplier||1),p=u.qty*u.price*.005,m=(u.isShort?u.price-u.closePrice:u.closePrice-u.price)*u.qty;return R.jsxs("div",{className:`${Bd.posC}${u.isShort?" "+Bd.posShort:""}`,children:[R.jsx("span",{children:u.symbol}),R.jsx("span",{children:u.leverageMultiplier||1}),R.jsx("span",{"data-currency":h[0].trim(),children:u.qty}),R.jsx("span",{"data-margin-mode":u?.marginMode||"isolated",children:vt(f)}),R.jsx("span",{children:vt(u.isShort?u.price+(f-p)/u.qty:u.price-(f-p)/u.qty)}),R.jsx("span",{children:vt(u.price)}),R.jsx("span",{children:u?.sl?vt(u.sl):""}),R.jsx("span",{children:u?.tp?vt(u.tp):""}),R.jsx("span",{children:vt(u.closePrice)}),R.jsx("span",{"data-currency":h[1].trim(),className:`${m<0?Bd.isLoss:""}`,children:vt(m)}),R.jsx("span",{children:(m/u.price*100).toFixed(2)})]},u.id+u.symbol.replaceAll("/","").trim())})]})}),o6e="_openOrdersC_ipk8h_1",c6e="_ordC_ipk8h_6",l6e="_hdr_ipk8h_18",u6e="_ordShort_ipk8h_67",em={openOrdersC:o6e,ordC:c6e,hdr:l6e,ordShort:u6e},d6e=T.memo(()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!1),{notify:s}=T.useContext(hs),i=T.useContext(di),{user:a,isLoggedIn:o,userBackendRegisteredData:c,isUserBackendDataLoadingComplete:l,getIdToken:u}=T.useContext(fi),d=T.useCallback(async h=>{if(!a||!o||!c||!l||n)return null;try{if(!i)return s("Offline! Please check network connection","alert"),null;const f=await u();if(!f)throw new Error("Could not read ID-Token");r(!0);const p=await sd(JSON.stringify({action:"getOpenOrders",idtoken:f}));if(p==null||!Object.hasOwn(p,"status")||p.status==="error"||p.status!=="success")throw new Error(p?.message||"Error fetching open orders");const m=p.orders;return e(m),m}catch(f){return s(f.message||"Error fetching open orders","err"),null}finally{r(!1)}},[i,a,o,c,l]);return T.useEffect(()=>{i&&l&&d().then(h=>{h&&console.log(h.length+" open orders loaded")})},[l,i]),!a||!o?"Connect to Wallet":l&&c===null?"No Open Orders":R.jsxs("div",{className:em.openOrdersC,children:[R.jsxs("header",{className:em.hdr,children:[R.jsx("span",{children:"Asset"}),R.jsx("span",{children:"Leverage"}),R.jsx("span",{children:"Size"}),R.jsx("span",{children:"Margin"}),R.jsx("span",{children:"Liq. Price"}),R.jsx("span",{children:"Limit Price"}),R.jsx("span",{children:"SL"}),R.jsx("span",{children:"TP"})]}),t.length>0&&t.map((h,f)=>{const p=h.symbol.split("/"),m=h.qty*h.limitPrice/(h.leverageMultiplier||1),g=h.qty*h.limitPrice*.005;return R.jsxs("div",{className:`${em.ordC}${h.isShort?" "+em.ordShort:""}`,children:[R.jsx("span",{children:h.symbol}),R.jsx("span",{children:h.leverageMultiplier||1}),R.jsx("span",{"data-currency":p[0].trim(),children:h.qty}),R.jsx("span",{"data-margin-mode":h?.marginMode||"isolated",children:vt(m)}),R.jsx("span",{children:vt(h.isShort?h.limitPrice+(m-g)/h.qty:h.limitPrice-(m-g)/h.qty)}),R.jsx("span",{"data-currency":p[1].trim(),children:vt(h.limitPrice)}),R.jsx("span",{children:h?.sl?vt(h.sl):""}),R.jsx("span",{children:h?.tp?vt(h.tp):""})]},h.id+h.symbol.replaceAll("/","").trim())})]})}),h6e="_wip_xorqy_1",f6e="_fullPage_xorqy_16",tm={wip:h6e,fullPage:f6e};function p6e({note:t,coverFullPage:e=!1}){return typeof t=="string"&&t.trim()!=""?R.jsx("div",{className:`${tm.wip}${e?" "+tm.fullPage:""}`,"data-note":t}):R.jsx("div",{className:`${tm.wip}${e?" "+tm.fullPage:""}`})}const Xk=["January","February","March","April","May","June","July","August","September","October","November","December"];function m6e(t,e=!1,n=!1,r=!1,s=!1){try{typeof e!="boolean"&&(e=!1),typeof n!="boolean"&&(n=!1),typeof r!="boolean"&&(r=!1),typeof s!="boolean"&&(s=!1);let i;if(typeof t=="number"&&Number.isInteger(t))i=new Date(t*1e3);else if(t instanceof Date)i=t;else return"";if(i instanceof Date&&isNaN(i.getTime()))return"";const a=i.getDate();let o="";e&&(a%10===1&&a!==11?o="st":a%10===2&&a!==12?o="nd":a%10===3&&a!==13?o="rd":o="th");let c="";if(s){let l=i.getHours().toString(),u=i.getMinutes().toString();const d=Number(l)>=12?"PM":"AM";l=(Number(l)%12).toString(),l=l||"12",u=Number(u)<10?"0"+u:u,c=", "+l+":"+u+" "+d}return`${a}${o} ${n?Xk[i.getMonth()].slice(0,3):Xk[i.getMonth()]} ${r?"'"+i.getFullYear().toString().slice(2,4):i.getFullYear()}${c}`}catch{return""}}const g6e="_trnxHistC_1xzuc_1",y6e="_trnx_1xzuc_1",w6e="_hdr_1xzuc_18",lv={trnxHistC:g6e,trnx:y6e,hdr:w6e},b6e=T.memo(()=>{const{notify:t}=T.useContext(hs),e=T.useContext(di),{user:n,isLoggedIn:r,userBackendRegisteredData:s,isUserBackendDataLoadingComplete:i,getIdToken:a}=T.useContext(fi),{transactions:o,isWip:c,fetchTransactions:l}=T.useContext(Xx);return T.useEffect(()=>{e&&i&&l().then(u=>{u&&console.log(u.length+" transactions loaded")})},[i,e]),!n||!r?"Connect to Wallet":i&&s===null?"No Transactions":R.jsxs("div",{className:lv.trnxHistC,children:[R.jsxs("header",{className:lv.hdr,children:[R.jsx("span",{children:"Date"}),R.jsx("span",{children:"Blockchain"}),R.jsx("span",{children:"Address"}),R.jsx("span",{children:"Amount"})]}),o.length>0&&o.map((u,d)=>R.jsxs("div",{className:lv.trnx,"data-type":u.type,"data-sts":u.sts,children:[R.jsx("span",{children:m6e(new Date(u.time),!1,!0,!0,!0)}),R.jsx("span",{children:u?.blkchn||""}),R.jsx("span",{children:u?.addr||""}),R.jsx("span",{children:vt(u.amt)})]},u.amt.toString()+d)),c&&R.jsx(p6e,{note:"Loading Transactions"})]})}),v6e="_accountsPanelC_1v5fi_1",_6e="_depositWithdrawBtnC_1v5fi_31",Qk={accountsPanelC:v6e,depositWithdrawBtnC:_6e};function E6e(){const[t,e]=T.useState(!1),[n,r]=T.useState(!1),{notify:s}=T.useContext(hs),{isLoggedIn:i,isUserBackendDataLoadingComplete:a,userBackendRegisteredData:o,signIn:c}=T.useContext(fi),{net_PnL_n_spotValue_by_currency:l}=T.useContext(id);return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:Qk.accountsPanelC,children:[R.jsx("h3",{children:"Account"}),R.jsx("span",{"data-title":"Balance",children:o==null?"":o.balance!=null?vt(o.balance):""}),R.jsxs(Qx,{className:Qk.depositWithdrawBtnC,children:[R.jsx(cs,{onClick:()=>{if(!i){s("Kindly connect wallet","alert");return}if(!a){s("Reading Balance! Please retry after a pause","alert");return}r(!0)},children:"Withdraw"}),R.jsx(cs,{variant:"secondary",onClick:()=>{if(!i){s("Kindly connect wallet","alert");return}if(!a){s("Reading Balance! Please retry after a pause","alert");return}e(!0)},children:"Deposit"})]}),R.jsx("h3",{children:"Account Equity"}),R.jsx(x6e,{accBalance:o?.balance})]}),t&&R.jsx(rE,{useCloseBtn:!0,doOnClose:()=>{e(!1)},children:R.jsx(GU,{})}),n&&R.jsx(rE,{useCloseBtn:!1,doOnClose:()=>{r(!1)},disallowManualClosing:!0,children:u=>R.jsx(TTe,{close:u})})]})}function x6e({accBalance:t}){const{net_PnL_n_spotValue_by_currency:e}=T.useContext(id);if(!t)return R.jsxs(R.Fragment,{children:[R.jsx("span",{}),R.jsx("span",{}),R.jsx("span",{})]});const n=Object.keys(e),[r,s]=n.reduce((i,a)=>(i[0]+=e[a][0],i[1]+=e[a][1],i),[0,0]);return R.jsxs(R.Fragment,{children:[R.jsx("span",{"data-title":"Spot Value",children:vt(s)}),R.jsx("span",{"data-title":"Unrealized PnL",children:vt(r)}),R.jsx("span",{"data-title":"Total Value (Equity)",children:vt(t+r)})]})}const A6e="_chart_aoj50_1",S6e="_orderBook_aoj50_1",I6e="_buySellOpsC_aoj50_1",T6e="_posSts_aoj50_1",C6e="_accountsPanel_aoj50_1",Md={chart:A6e,orderBook:S6e,buySellOpsC:I6e,posSts:T6e,accountsPanel:C6e};function k6e(){return R.jsxs(R.Fragment,{children:[R.jsx("nav",{}),R.jsxs("main",{children:[R.jsxs("section",{id:Md.chart,children:[R.jsx(tTe,{}),R.jsx(rTe,{})]}),R.jsx("section",{id:Md.orderBook,children:R.jsxs(nE,{titles:["Order Book","Trades"],spaceTabsEvenly:!0,children:[R.jsx(pTe,{}),R.jsx(vTe,{})]})}),R.jsx("section",{id:Md.buySellOpsC,children:R.jsx(WTe,{})}),R.jsx("section",{id:Md.posSts,children:R.jsxs(nE,{titles:["Open Orders","Positions","Trade History","Transactions"],children:[R.jsx(d6e,{}),R.jsx(XTe,{}),R.jsx(a6e,{}),R.jsx(b6e,{})]})}),R.jsx("section",{id:Md.accountsPanel,children:R.jsx(E6e,{})})]})]})}function X8e(){return R.jsx(zB,{children:R.jsx(WB,{children:R.jsx(g5e,{appId:"cml5070tc027ll40c676tijw1",config:{loginMethods:["email","wallet"],appearance:{theme:"dark",accentColor:"#8147d1"}},children:R.jsx(y5e,{children:R.jsxs(b5e,{children:[R.jsx(Z5e,{}),R.jsx(v5e,{children:R.jsx(w5e,{children:R.jsx(_5e,{children:R.jsx(k6e,{})})})})]})})})})})}export{lE as $,k3 as A,re as B,i8 as C,Ch as D,$v as E,fz as F,pz as G,QL as H,G8 as I,a8 as J,_v as K,JF as L,XF as M,Om as N,cE as O,Ph as P,bE as Q,ld as R,Bz as S,FE as T,ij as U,ql as V,$c as W,Ev as X,T7 as Y,eh as Z,Iv as _,km as a,WL as a$,Pc as a0,Tv as a1,Cv as a2,S7 as a3,A7 as a4,zL as a5,VL as a6,ZL as a7,bn as a8,$3 as a9,Av as aA,yh as aB,Th as aC,fs as aD,Yg as aE,_h as aF,Eh as aG,qr as aH,yE as aI,D3 as aJ,P7 as aK,N3 as aL,KL as aM,WF as aN,kh as aO,kA as aP,Dh as aQ,GF as aR,n8 as aS,r8 as aT,xh as aU,kv as aV,Sh as aW,Rh as aX,_f as aY,ej as aZ,JL as a_,k7 as aa,Cf as ab,I7 as ac,TW as ad,YL as ae,O7 as af,Uo as ag,VF as ah,GL as ai,HL as aj,vh as ak,e7 as al,CW as am,wh as an,HF as ao,qu as ap,KF as aq,XL as ar,kW as as,Ah as at,bu as au,hj as av,bh as aw,fc as ax,Sv as ay,xv as az,O3 as b,Gu as b$,Oh as b0,vu as b1,W6e as b2,Ih as b3,GV as b4,su as b5,Cz as b6,YF as b7,Of as b8,Vi as b9,g8 as bA,m8 as bB,Q8 as bC,cj as bD,K8 as bE,dz as bF,jo as bG,ry as bH,HA as bI,wf as bJ,xr as bK,Oz as bL,fCe as bM,qA as bN,hz as bO,dV as bP,FF as bQ,vE as bR,mE as bS,Fr as bT,Fi as bU,Ef as bV,BE as bW,Wa as bX,t8 as bY,Qc as bZ,Gn as b_,zE as ba,lW as bb,uW as bc,xE as bd,AE as be,U7 as bf,U3 as bg,kF as bh,OF as bi,vn as bj,Ia as bk,PF as bl,gf as bm,xj as bn,v8 as bo,ur as bp,pF as bq,Ms as br,aO as bs,KV as bt,HV as bu,bf as bv,LF as bw,Pm as bx,kz as by,el as bz,t2 as c,Az as c$,Rc as c0,Kg as c1,hF as c2,yf as c3,I8 as c4,mO as c5,jF as c6,RW as c7,qE as c8,yO as c9,Bm as cA,c8 as cB,nj as cC,oj as cD,ly as cE,GO as cF,WE as cG,OW as cH,b8 as cI,Jt as cJ,Oc as cK,G3 as cL,wv as cM,xc as cN,gu as cO,Tn as cP,S8 as cQ,Tj as cR,Sa as cS,V3 as cT,Ye as cU,IW as cV,Na as cW,p8 as cX,ls as cY,pO as cZ,VV as c_,gO as ca,xt as cb,R7 as cc,wr as cd,us as ce,Y6e as cf,Dt as cg,Af as ch,yr as ci,Mn as cj,Nz as ck,dj as cl,Qg as cm,Nm as cn,Uv as co,B7 as cp,he as cq,Xc as cr,C7 as cs,$o as ct,I3 as cu,fA as cv,pA as cw,kE as cx,AF as cy,SW as cz,Jn as d,Nf as d$,Dm as d0,_W as d1,gi as d2,YA as d3,Iu as d4,ps as d5,R as d6,qa as d7,Sy as d8,zo as d9,JQ as dA,kk as dB,ug as dC,J_ as dD,Mke as dE,Si as dF,xZ as dG,Tm as dH,xke as dI,ZZ as dJ,ni as dK,tg as dL,zg as dM,FIe as dN,ake as dO,To as dP,o2 as dQ,O1e as dR,JIe as dS,bke as dT,jh as dU,_ke as dV,_o as dW,t3e as dX,KIe as dY,YIe as dZ,Tke as d_,ie as da,EZ as db,Bke as dc,jIe as dd,Y as de,RZ as df,hR as dg,oke as dh,Y8e as di,R1e as dj,$K as dk,ZQ as dl,IZ as dm,zke as dn,NU as dp,Z_ as dq,Bt as dr,Iy as ds,LZ as dt,F8e as du,ike as dv,r5e as dw,Ba as dx,Pke as dy,Zu as dz,mf as e,sy as e$,Wke as e0,s3e as e1,Fke as e2,Xke as e3,Rxe as e4,s2e as e5,t2e as e6,lY as e7,uke as e8,lke as e9,Jke as eA,zZ as eB,Lk as eC,Z8e as eD,wL as eE,pf as eF,iE as eG,Wu as eH,pL as eI,sE as eJ,ff as eK,hf as eL,df as eM,s5e as eN,LIe as eO,_L as eP,Wg as eQ,n3e as eR,H8e as eS,V8e as eT,q8e as eU,MIe as eV,oG as eW,Aw as eX,gE as eY,cy as eZ,Pz as e_,hke as ea,dke as eb,qZ as ec,sIe as ed,cke as ee,j8e as ef,PP as eg,Ll as eh,W8e as ei,Jx as ej,PU as ek,RU as el,h3e as em,d3e as en,dt as eo,f3e as ep,YV as eq,cg as er,AZ as es,Ul as et,Fk as eu,Kke as ev,z8e as ew,QSe as ex,eIe as ey,BZ as ez,m7 as f,KZ as f$,Xt as f0,J8e as f1,K8e as f2,G8e as f3,Pe as f4,$8e as f5,R8e as f6,r2e as f7,hY as f8,hl as f9,D2e as fA,bU as fB,B8e as fC,M8e as fD,hxe as fE,wxe as fF,U8e as fG,L8e as fH,KCe as fI,s$ as fJ,GCe as fK,WIe as fL,fR as fM,Lke as fN,Zke as fO,Gke as fP,Yke as fQ,b1 as fR,Qke as fS,e3e as fT,wR as fU,E$ as fV,qt as fW,a3e as fX,GZ as fY,Dke as fZ,bR as f_,nxe as fa,n2e as fb,Pxe as fc,D8e as fd,M2e as fe,N8e as ff,Y3 as fg,mF as fh,Q6e as fi,Vu as fj,pCe as fk,dy as fl,g$ as fm,ns as fn,Uke as fo,dY as fp,Js as fq,lee as fr,tl as fs,Ike as ft,d2e as fu,td as fv,Ho as fw,x2e as fx,S2e as fy,wn as fz,g7 as g,ire as g$,WZ as g0,CZ as g1,o3 as g2,c3 as g3,l3 as g4,d3 as g5,u3 as g6,h3 as g7,Py as g8,Rt as g9,B2 as gA,$y as gB,gte as gC,ti as gD,Yee as gE,dte as gF,Gee as gG,fee as gH,mte as gI,Rte as gJ,Cee as gK,ste as gL,_te as gM,yg as gN,I$ as gO,A3e as gP,va as gQ,x3e as gR,D$ as gS,N$ as gT,jke as gU,qke as gV,xe as gW,Nv as gX,Dle as gY,Fa as gZ,cl as g_,Mf as ga,y3e as gb,w3e as gc,Vr as gd,mee as ge,Yi as gf,jr as gg,b3e as gh,g3e as gi,Iee as gj,Lf as gk,Fs as gl,hi as gm,Cp as gn,xee as go,xa as gp,Wi as gq,Mee as gr,E3e as gs,P$ as gt,jee as gu,Ma as gv,nte as gw,L$ as gx,R$ as gy,m3e as gz,py as h,$s as h0,zr as h1,we as h2,La as h3,Ole as h4,xne as h5,uh as h6,Q1 as h7,Wf as h8,jie as h9,Ct as hA,zI as hB,iX as hC,u3e as hD,Ae as hE,Bv as hF,ci as hG,vf as hH,Ki as hI,mj as hJ,JO as hK,Ut as hL,Hi as hM,wE as hN,Da as hO,Yu as hP,$D as hQ,Wpe as hR,qpe as hS,k6 as hT,sO as hU,X8e as hV,Rie as ha,iee as hb,Nle as hc,ms as hd,kpe as he,sme as hf,Xs as hg,ll as hh,_x as hi,pge as hj,vx as hk,s0 as hl,sf as hm,j2 as hn,yT as ho,wN as hp,$ce as hq,Vc as hr,Ro as hs,r0 as ht,ki as hu,Ps as hv,Ci as hw,o9 as hx,Vt as hy,k1 as hz,y7 as i,w7 as j,mA as k,P3 as l,gA as m,b7 as n,v7 as o,mu as p,R3 as q,_7 as r,zF as s,Nh as t,_u as u,h8 as v,f8 as w,Tz as x,$h as y,x7 as z};
