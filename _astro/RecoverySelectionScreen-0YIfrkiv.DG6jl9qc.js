import{d4 as b,dz as R,d5 as O,d7 as E,dU as M,d6 as e,eA as l,eV as P,dr as $}from"./app.Dbs6V_q1.js";import{F as I}from"./LockClosedIcon.BdsZvISU.js";import{r as n}from"./index.Crn7-fJZ.js";import{T as W,b as L,F as B,m as D}from"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import{o as v}from"./ScreenHeader-CHmc4-Lu.CDB8Kfz5.js";import{o as U,d as G,e as H,p as V}from"./styles-BsotlekN.C9CSHUEw.js";function Y({title:o,titleId:s,...c},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},c),o?n.createElement("title",{id:s},o):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const q=n.forwardRef(Y);let d=$.div`
  width: 24px;
  height: 24px;
  display: flex;
  justify-content: center;
  align-items: center;
`,T={"google-drive":"Google Drive",icloud:"iCloud","user-passcode":"password",privy:"Privy","privy-v2":"Privy"},z=({onClose:o})=>e.jsxs(V,{children:[e.jsx(v,{title:"Why do I need to secure my account?",icon:e.jsx(B,{width:48}),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Your app uses cryptography to secure your account. App secrets are split and encrypted so only you can access them."}),e.jsx("p",{children:"To use this app on new devices, secure account secrets using a password, your Google or your Apple account. It’s important you don’t lose access to the method you choose."})]})}),e.jsx(D,{onClick:o,children:"Select backup method"})]});const _={component:()=>{let[o,s]=n.useState(!1),{navigate:c,lastScreen:a,navigateBack:x,setModalData:m,data:i,onUserCloseViaDialogOrKeybindRef:g}=b(),{user:j}=R(),{embeddedWallets:f}=O(),{closePrivyModal:w}=E(),t=M(j),u=t===null,{isInAccountCreateFlow:C,isResettingPassword:S,shouldCreateEth:k,shouldCreateSol:A}=i.recoverySelection,h=t&&t.recoveryMethod!=="privy",F=h?e.jsxs("span",{children:["Your account is currently secured using"," ",e.jsx("strong",{children:T[t?.recoveryMethod||"user-passcode"]}),"."]}):"Select a method for logging in on new devices and recovering your account.";function p(r){m({recoveryOAuthStatus:{provider:r,action:u?"create-wallet":"set-recovery",isInAccountCreateFlow:C,shouldCreateEth:k,shouldCreateSol:A}}),c("RecoveryOAuthScreen")}function y(){i?.setWalletPassword?.onFailure(Error("User exited set recovery flow")),w({shouldCallAuthOnSuccess:i?.setWalletPassword?.callAuthOnSuccessOnClose??!1})}return g.current=y,e.jsxs(e.Fragment,{children:[e.jsx(W,{onClose:y,backFn:o?()=>s(!1):a?x:void 0,infoFn:a||o?void 0:()=>s(!0)},"header"),o?e.jsx(z,{onClose:()=>s(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:h?"Update backup method":"Secure your account",icon:e.jsx(I,{width:48}),description:F}),e.jsx(U,{children:f.userOwnedRecoveryOptions.filter((r=>!["icloud","google-drive"].includes(t?.recoveryMethod||"")||r!==t?.recoveryMethod)).sort().map((r=>{switch(r){case"google-drive":return e.jsxs(l,{onClick:()=>p("google-drive"),children:[e.jsx(d,{children:e.jsx(H,{style:{width:18}})}),"Back up to Google Drive"]},r);case"icloud":return e.jsxs(l,{onClick:()=>p("icloud"),children:[e.jsx(d,{children:e.jsx(G,{style:{width:24}})}),"Back up to Apple iCloud"]},r);case"user-passcode":return e.jsxs(l,{onClick:()=>{c(P({isCreatingWallet:u,skipSplashScreen:!0}))},children:[e.jsx(d,{children:e.jsx(q,{style:{width:18}})}),S?"Reset your":"Set a"," password"]},r);default:return null}}))})]}),e.jsx(L,{})]})}};export{_ as RecoverySelectionScreen,_ as default};
