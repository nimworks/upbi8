import{d7 as C,d6 as e,dX as V,d5 as L,eA as u,e3 as j,eS as Y,eT as H,eU as O,db as U,er as X,eu as z,cU as D,dr as J}from"./app.Dbs6V_q1.js";import{E as N,l as p,s as Q,x as v,c as T,d as g,V as W,b as f,w as b,F as B,T as E,p as F,u as q}from"./PinInput-3SLvbnQa.DL2jOvCl.js";import{F as G}from"./FingerPrintIcon.f1l06IJ0.js";import{F as A}from"./PhoneIcon.BLDp5Qmc.js";import{F as I}from"./ShieldCheckIcon.C49qVTY6.js";import{T as y,m as K,g as m,$ as S}from"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import{n as Z}from"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import{r as a}from"./index.Crn7-fJZ.js";import{F as _}from"./ExclamationTriangleIcon.CbWlQoeb.js";import{i as ee}from"./StackedContainer-B2vaEl56.CD0ocOGA.js";import{c as re}from"./useGetTokenPrice-YObgUU6L.Bdidc-9R.js";import{$ as se}from"./TransactionDetails-BMVu0qlz.59B78Oj6.js";function ne({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const oe=a.forwardRef(ne),fe=({handleClose:s,mfaMethods:r,onSelect:n})=>e.jsxs(Z,{title:"Verify your identity",subtitle:"Choose a verification method",icon:I,iconVariant:"subtle",onClose:s,showClose:!0,watermark:!0,children:[e.jsxs(q,{children:[r.includes("totp")&&e.jsxs(u,{onClick:()=>n("totp"),children:[e.jsx(j,{children:e.jsx(B,{})}),"Authenticator app"]},"totp"),r.includes("sms")&&e.jsxs(u,{onClick:()=>n("sms"),children:[e.jsx(j,{children:e.jsx(A,{})}),"SMS"]},"sms"),r.includes("passkey")&&e.jsxs(u,{onClick:()=>n("passkey"),children:[e.jsx(j,{children:e.jsx(G,{})}),"Passkey"]},"passkey")]}),e.jsx(m,{})]}),k=({pendingTransaction:s})=>{let{wallets:r}=U(),{walletProxy:n,rpcConfig:o,chains:i,appId:c,nativeTokenSymbolForChainId:d}=C(),[t,R]=a.useState(null),[l,$]=a.useState(s),{tokenPrice:M}=re(l.chainId),P=d(s.chainId)||"ETH",h=a.useMemo((()=>r.find((x=>x.walletClientType==="privy"))),[r]);return a.useEffect((()=>{(async function(){if(!n||!h)return l;let x=X(l.chainId,i,o,{appId:c}),w=await z(l,x,h.address);return R(D(BigInt(w.gas??0))),w})().then($).catch(console.error)}),[n]),h?e.jsx(te,{children:e.jsx(se,{from:h.address,to:l.to,txn:l,gas:t??void 0,tokenPrice:M,tokenSymbol:P})}):null};let te=J.div`
  width: 100%;
  padding: 1rem 0;
`;const ye=({hasBlockingError:s,error:r,onClose:n,onBack:o,handleSubmit:i,account:c,submitSuccess:d})=>{let{pendingTransaction:t}=C();return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:n},"header"),e.jsx(ee,{children:e.jsxs("div",{children:[e.jsx(V,{success:d,fail:!!r}),e.jsx(r?_:N,{style:{width:"38px",height:"38px"}})]})}),e.jsx(p,{style:{marginTop:"1rem"},children:"Verifying with passkey"}),e.jsxs(Q,{children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(I,{})}),"Approve this action using your touch, face, PIN, or hardware key."]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(oe,{})}),"You last added a passkey on"," ",c?.firstVerifiedAt?.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),"."]})]}),t&&e.jsx(g,{children:e.jsx(k,{pendingTransaction:t})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(W,{style:{marginTop:"1.25rem"},children:r.message}),e.jsx(K,{disabled:s,onClick:i,style:{margin:"1.25rem auto 0"},children:"Try again"})]}),o&&e.jsx(f,{style:{marginTop:"1rem"},onClick:o,children:"Choose another method"}),e.jsx(m,{})]})},ke=({selectedMethod:s,submitSuccess:r,hasBlockingError:n,onClose:o,onBack:i,handleSubmitCode:c})=>{let d=L(),{pendingTransaction:t}=C();switch(s){case"sms":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(A,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code sent to your ",e.jsx("strong",{children:"mobile device"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});case"totp":return e.jsxs(e.Fragment,{children:[e.jsx(y,{onClose:o},"header"),e.jsx(b,{style:{marginBottom:"1.5rem"},children:e.jsx(B,{})}),e.jsx(p,{children:"Enter verification code"}),e.jsxs(g,{children:[e.jsx(E,{success:r,disabled:n,onChange:c}),e.jsxs(F,{children:["To continue, please enter the 6-digit code generated from your"," ",e.jsx("strong",{children:"authenticator app"})]}),t&&e.jsx(k,{pendingTransaction:t})]}),i&&e.jsx(f,{theme:d?.appearance.palette.colorScheme,onClick:i,children:"Choose another method"}),e.jsx(S,{onClick:o,children:"Cancel"}),e.jsx(m,{})]});default:return null}},Ce=s=>Y(s)?{isBlocking:!0,error:Error("You have exceeded the maximum number of attempts. Please close this window and try again in 10 seconds.")}:H(s)?{isBlocking:!1,error:Error("The code you entered is not valid")}:O(s)?{isBlocking:!0,error:Error("You have exceeded the time limit for code entry. Please try again in 30 seconds.")}:(console.error(s),{isBlocking:!1,error:Error("Something went wrong.")});export{ye as Q,ke as R,Ce as X,fe as z};
