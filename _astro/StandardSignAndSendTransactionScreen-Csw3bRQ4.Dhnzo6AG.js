import{f4 as Q,f5 as ot,f6 as st,f7 as ct,d4 as dt,d7 as lt,d5 as ut,dz as pt,f8 as mt,dU as ft,d6 as p,f9 as gt,fa as Z,fb as ht,ev as yt,dr as tt,fc as wt,fd as kt,fe as bt,ff as At}from"./app.Dbs6V_q1.js";import{r as I}from"./index.Crn7-fJZ.js";import{t as xt}from"./useGetSolPrice-DwwjjGbd.Cs3YiPXK.js";import{ErrorScreenView as St}from"./ErrorScreen-8UMMZ6is.0ylxDhjt.js";import{F as vt}from"./CheckCircleIcon.DG4NyxCY.js";import{T as It,b as Ot,m as Tt}from"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import{s as $t}from"./Layouts-BlFm53ED.DNAcEX9b.js";import{o as jt}from"./ScreenHeader-CHmc4-Lu.CDB8Kfz5.js";import{t as Ct,s as B,e as R,n as U}from"./Value-tcJV9e0L.CCQPdIyi.js";import{f as G,v as _t}from"./WalletLink-CZTmkBKu.CwUyBa3G.js";import{i as Et}from"./StackedContainer-B2vaEl56.CD0ocOGA.js";import{n as Lt,Y as Ft}from"./TransactionErrorView-C6AZ1RC0.CHEYFltS.js";import{t as Y}from"./transaction-CnfuREWo.DxjkYrBU.js";import{d as Pt,c as nt,l as Bt,u as Rt,f as Ut}from"./useSolanaRpcClient-BTAchFxj.8tytr2RI.js";import{C as Dt,e as Mt,n as Jt,a as D,o as Nt,d as qt,r as zt,t as Wt}from"./getFormattedUsdFromLamports-B6EqSEho.C-HCdwKa.js";import{i as j}from"./formatters.DtIZsRmK.js";import"./reservoir-0wfhnc0j.e4oV4U26.js";import"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import"./Screen-5StC6JLQ.BNbtfsff.js";import"./index-Dq_xe9dz.CYFAvuPJ.js";import"./createLucideIcon.RSj0tFkk.js";import"./lock.RVFbxoA7.js";import"./LoadingSkeleton-U6-3yFwI.DhgKuR2U.js";import"./ethers-DrSqg5wi.D-a06N_R.js";import"./ErrorMessage-D8VaAP5m.NPlgZ3Xt.js";import"./LabelXs-oqZNqbm_.5zQfQihM.js";import"./Subtitle-CV-2yKE4.DJhYHDeo.js";import"./Title-BnzYV3Is.B74pnAvd.js";import"./Address-BuCMjci7.5xYW3BaW.js";import"./check.BWO2M5QN.js";import"./copy.Ukg_M5w7.js";import"./WalletInfoCard-TfOxho0A.gLlbiR7I.js";import"./shared-FM0rljBt.uRznKemR.js";import"./Checkbox-BhNoOKjX.CsfsqpBs.js";import"./ErrorBanner-CQERa7bL.BqgviVhf.js";import"./ExclamationCircleIcon.CBeQh4pz.js";import"./WarningBanner-c8L53pJ2.BDeOScMT.js";import"./ExclamationTriangleIcon.CbWlQoeb.js";import"./ChevronDownIcon.zw1eklKi.js";function Vt(t){return!("exists"in t)||"exists"in t&&t.exists}function Ht(t){const e=t.filter(n=>Vt(n)&&n.data instanceof Uint8Array);if(e.length>0){const n=e.map(a=>a.address);throw new Q(ot,{addresses:n})}}function Yt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=ct().encode(e.data[0]);return Object.freeze({...et(e),address:t,data:n,exists:!0})}function Kt(t,e){if(!e)return Object.freeze({address:t,exists:!1});const n=e.data.parsed.info||{};return(e.data.program||e.data.parsed.type)&&(n.parsedAccountMeta={program:e.data.program,type:e.data.parsed.type}),Object.freeze({...et(e),address:t,data:n,exists:!0})}function et(t){return Object.freeze({executable:t.executable,lamports:t.lamports,programAddress:t.owner,space:t.space})}async function Xt(t,e,n={}){const{abortSignal:a,...i}=n;return(await t.getMultipleAccounts(e,{...i,encoding:"jsonParsed"}).send({abortSignal:a})).value.map((u,c)=>u&&typeof u=="object"&&"parsed"in u.data?Kt(e[c],u):Yt(e[c],u))}function Gt(t){const e=t.filter(n=>!n.exists);if(e.length>0){const n=e.map(a=>a.address);throw new Q(st,{addresses:n})}}async function Qt(t,e,n){if(t.length===0)return{};const a=await Xt(e,t,n);return Ht(a),Gt(a),a.reduce((i,s)=>({...i,[s.address]:s.data.addresses}),{})}const Zt=tt.span`
  && {
    width: 82px;
    height: 82px;
    border-width: 4px;
    border-style: solid;
    border-color: ${t=>t.color??"var(--privy-color-accent)"};
    background-color: ${t=>t.color??"var(--privy-color-accent)"};
    border-radius: 50%;
    display: inline-block;
    box-sizing: border-box;
  }
`,tn=({instruction:t,fees:e,transactionInfo:n,solPrice:a,chain:i})=>p.jsxs(Ct,{children:[n?.action&&p.jsxs(B,{children:[p.jsx(R,{children:"Action"}),p.jsx(U,{children:n.action})]}),t?.total!=null&&p.jsxs(B,{children:[p.jsx(R,{children:"Total"}),p.jsx(U,{children:t.total})]}),!t?.total&&t?.amount!=null&&p.jsxs(B,{children:[p.jsx(R,{children:"Total"}),p.jsx(U,{children:p.jsx(G,{quantities:[t.amount,e],tokenPrice:a})})]}),p.jsxs(B,{children:[p.jsx(R,{children:"Fees"}),p.jsx(U,{children:p.jsx(G,{quantities:[e],tokenPrice:a})})]}),t?.to&&p.jsxs(B,{children:[p.jsx(R,{children:"To"}),p.jsx(U,{children:p.jsx(_t,{walletAddress:t.to,chainId:i,chainType:"solana"})})]})]}),nn=({fees:t,onClose:e,receiptHeader:n,receiptDescription:a,transactionInfo:i,solPrice:s,signOnly:u,instruction:c,chain:m})=>p.jsxs(p.Fragment,{children:[p.jsx(It,{onClose:e}),p.jsx(Et,{style:{marginBottom:"16px"},children:p.jsxs("div",{children:[p.jsx(Zt,{color:"var(--privy-color-success-light)"}),p.jsx(vt,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),p.jsx(jt,{title:n??`Transaction ${u?"signed":"complete"}!`,description:a??"You're all set."}),p.jsx(tn,{solPrice:s,instruction:c,fees:t,transactionInfo:i,chain:m}),p.jsx(yt,{}),p.jsx(en,{loading:!1,onClick:e,children:"Close"}),p.jsx($t,{}),p.jsx(Ot,{})]});let en=tt(Tt)`
  && {
    margin-top: 24px;
  }
  transition:
    color 350ms ease,
    background-color 350ms ease;
`;async function F(t,e){try{return await t}catch{return e}}function an(t){switch(t){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function O({privyClient:t,chain:e,mint:n}){let a=Wt[e];if(!a[n]){let i=await t.getSplTokenMetadata({mintAddress:n,cluster:an(e)});i&&(a[n]={address:n,symbol:i.symbol,decimals:i.decimals})}return a[n]}async function rn({tx:t,solanaClient:e,privyClient:n,checkFunds:a}){let i=Z().decode(nt(t)),s=i.staticAccounts[0]??"",u=await Bt({solanaClient:e,tx:t}),c=a?await F(Rt({solanaClient:e,tx:t})):void 0,m=c?.hasFunds??!0,x={},f=[],k=await(async function({solanaClient:b,message:r}){if(!("addressTableLookups"in r)||!r.addressTableLookups)return[...r.staticAccounts];let d=r.addressTableLookups.map((g=>g.lookupTableAddress)),T=await Qt(d,b.rpc),E=d.map(((g,A)=>[...r.addressTableLookups[A]?.writableIndexes.map((C=>{let $=T[g]?.[C];if($)return{key:$,isWritable:!0,altIdx:A}}))??[],...r.addressTableLookups[A]?.readonlyIndexes.map((C=>{let $=T[g]?.[C];if($)return{key:$,isWritable:!1,altIdx:A}}))??[]])).flat().filter((g=>!!g)).sort(((g,A)=>g.isWritable!==A.isWritable?g.isWritable?-1:1:g.altIdx-A.altIdx)).map((({key:g})=>g));return[...r.staticAccounts,...E]})({solanaClient:e,message:i});for(let b of i.instructions){let r=i.staticAccounts[b.programAddressIndex]||"";if(r!==Mt&&r!==Jt)if(r!==D){if(r===Nt){let d=await F((function(T,E,g){let[A,C,$,_]=T.accountIndices?.map((M=>E[M]))??[];return{type:"ata-creation",program:g,payer:A,ata:C,owner:$,mint:_}})(b,k,r));if(!d){f.push({type:"unknown",program:r,discriminator:b.data?.[0]});continue}if(f.push(d),d.ata&&d.owner&&d.mint){x[d.ata]={owner:d.owner,mint:d.mint};continue}}if(qt.includes(r)){let d=await F(cn(b,k,e,n,r));if(!d){f.push({type:"unknown",program:r,discriminator:b.data?.[0]});continue}f.push(d)}else if(zt.includes(r)){let d=await F(dn(b,k,e,n,r));if(!d){f.push({type:"unknown",program:r,discriminator:b.data?.[0]});continue}f.push(d)}else f.push({type:"unknown",program:r,discriminator:b.data?.[0]})}else{let d=await F(sn(b,k));if(!d){f.push({type:"unknown",program:r,discriminator:b.data?.[0]});continue}f.push(d)}else{let d=await F(on(b,k,e,n,x,r));if(!d){f.push({type:"unknown",program:r,discriminator:b.data?.[0]});continue}f.push(d),d.type==="spl-transfer"&&(d.fromAta&&d.fromAccount&&d.token.address&&(x[d.fromAta]??={owner:d.fromAccount,mint:d.token.address}),d.toAta&&d.toAccount&&d.token.address&&(x[d.toAta]??={owner:d.toAccount,mint:d.token.address}))}}return{spender:s,fee:u,instructions:f,hasFunds:!!m}}function S(t,e=0){try{return(function(a,i=0){let s=0n;for(let u=0;u<8;u++)s|=BigInt(a[i+u])<<BigInt(8*u);return s})(t,e)}catch{}try{return t.readBigInt64LE(e)}catch{}let n=Ut(t);try{return((a,i=0)=>{let s=a[i],u=a[i+7];if(!s||!u)throw Error(`Buffer offset out of range: first: ${s}, last: ${u}.`);return(BigInt(a[i+4]+256*a[i+5]+65536*a[i+6]+(u<<24))<<32n)+BigInt(s+256*a[++i]+65536*a[++i]+16777216*a[++i])})(n)}catch{}try{return n.subarray(e).readBigInt64LE()}catch{}try{return n.readBigInt64LE(e)}catch{}return 0n}async function on(t,e,n,a,i,s){let u=t.data?.[0],c=t.accountIndices?.map((m=>e[m]))??[];if(u===1){let[m,x,f]=c;return{type:"spl-init-account",program:s,account:m,mint:x,owner:f}}if(u===3){let m,x,[f,k,b]=c,r="",d=k?i[k]:void 0;if(d)m=d.owner,r=d.mint;else if(k){let g=await n.rpc.getAccountInfo(k,{commitment:"confirmed",encoding:"jsonParsed"}).send(),A=g.value?.data;m=A?.parsed?.info?.owner,r=A?.parsed?.info?.mint??"",x=A?.parsed?.info?.tokenAmount?.decimals}!r&&f&&(r=(await n.rpc.getAccountInfo(f,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value?.data?.parsed?.info?.mint??"");let T=await O({privyClient:a,chain:n.chain,mint:r}),E=T?.symbol??"";return x??=T?.decimals??9,{type:"spl-transfer",program:s,fromAta:f,fromAccount:b,toAta:k,toAccount:m,value:S(t.data,1),token:{symbol:E,decimals:x,address:r}}}if(u===9){let[m,x,f]=c;return{type:"spl-close-account",program:s,source:m,destination:x,owner:f}}if(u===17)return{type:"spl-sync-native",program:s};throw Error(`Token program instruction type ${u} not supported`)}async function sn(t,e){let n=t.data?.[0],a=t.accountIndices?.map((i=>e[i]))??[];if(n===0){let[,i]=a;return{type:"create-account",program:D,account:i?.toString(),value:S(t.data,4),withSeed:!1}}if(n===2){let[i,s]=a;return{type:"sol-transfer",program:D,fromAccount:i,toAccount:s,token:{symbol:"SOL",decimals:9},value:S(t.data,4),withSeed:!1}}if(n===3){let[,i]=a;return{type:"create-account",program:D,account:i,withSeed:!0,value:S(t.data.slice(t.data.length-32-8-8))}}if(n===11){let[i,s]=a;return{type:"sol-transfer",program:D,fromAccount:i,toAccount:s,value:S(t.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error(`System program instruction type ${n} not supported`)}async function cn(t,e,n,a,i){let s=t.accountIndices?.map((c=>e[c]))??[],u=t.data?.[0];if(u===143){let c=s[10],m=s[11];return{type:"raydium-swap-base-input",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,amountIn:S(t.data,8),minimumAmountOut:S(t.data,16)}}if(u===55){let c=s[10],m=s[11];return{type:"raydium-swap-base-output",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,maxAmountIn:S(t.data,8),amountOut:S(t.data,16)}}throw Error(`Raydium swap program instruction type ${u} not supported`)}async function dn(t,e,n,a,i){let s=t.data?.[0],u=t.accountIndices?.map((c=>e[c]))??[];if([208,51,239,151,123,43,237,92].includes(s)){let c=u[5],m=u[6];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(s)){let c=u[7],m=u[8];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,outAmount:S(t.data,t.data.length-1-2-8-8),quotedInAmount:S(t.data,t.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(s)){let c=u[7],m=u[8];return{type:"jupiter-swap-shared-accounts-route",program:i,mintIn:c,mintOut:m,tokenIn:c?await O({privyClient:a,chain:n.chain,mint:c}):void 0,tokenOut:m?await O({privyClient:a,chain:n.chain,mint:m}):void 0,inAmount:S(t.data,t.data.length-1-2-8-8),quotedOutAmount:S(t.data,t.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(s)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(s)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(s)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(s)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(s)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(s)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(s)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(s)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(s)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error(`Jupiter swap program instruction type ${s} not supported`)}const Kn={component:()=>{let{data:t,onUserCloseViaDialogOrKeybindRef:e,setModalData:n,navigate:a}=dt(),{client:i,closePrivyModal:s,walletProxy:u,showFiatPrices:c}=lt(),m=ut(),{user:x}=pt(),f=Pt()(t?.standardSignAndSendTransaction?.chain??"solana:mainnet"),[k,b]=I.useState(t?.standardSignAndSendTransaction?.transaction),[r,d]=I.useState(),[T,E]=I.useState(),[g,A]=I.useState({value:0n,isLoading:!1}),[C,$]=I.useState(!1),[_,M]=I.useState({}),[J,K]=I.useState(),v=t?.standardSignAndSendTransaction?.account,z=!!t?.standardSignAndSendTransaction?.signOnly,at=v?.imported?mt(x).find((l=>l.address===v.address)):ft(x),{solPrice:N,isSolPriceLoading:W}=xt({enabled:c}),P=I.useMemo((()=>{if(!r)return;let l=r.spender,h=Y(r.fee),y=Y(g.value,3,!0),w=r.instructions.filter((L=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(L.type))),o=w.at(0);return!o||w.length>1?{fee:h,spender:l,balance:y}:o.type==="sol-transfer"?{fee:h,spender:l,balance:y,total:Y(o.value)}:o.type==="spl-transfer"?{fee:h,spender:l,balance:y,total:`${j({amount:o.value,decimals:o.token.decimals})} ${o.token.symbol}`}:o.type==="raydium-swap-base-input"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.amountIn,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.minimumAmountOut,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="raydium-swap-base-output"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.maxAmountIn,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.amountOut,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="jupiter-swap-shared-accounts-route"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.inAmount,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.quotedOutAmount,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:o.type==="jupiter-swap-exact-out-route"&&o.tokenIn&&o.tokenOut?{fee:h,spender:l,balance:y,swap:`${`${j({amount:o.quotedInAmount,decimals:o.tokenIn.decimals})} ${o.tokenIn.symbol}`} → ${`${j({amount:o.outAmount,decimals:o.tokenOut.decimals})} ${o.tokenOut.symbol}`}`}:{fee:h,spender:l,balance:y}}),[r,v?.address,g]),V=I.useMemo((()=>{let l;if(!r||!c||!N||W)return;function h(...o){return Dt(o.reduce(((L,it)=>L+it),0n),N??0)}v?.address===r.spender&&(l=h(r.fee));let y=h(g.value),w=r.instructions.filter((o=>o.type==="sol-transfer"||o.type==="spl-transfer")).at(0);return!w||r.instructions.length>1?{fee:l,balance:y}:w.type==="sol-transfer"?{fee:l,balance:y,total:h(w.value,v?.address===r.spender?r.fee:0n)}:w.type==="spl-transfer"?{fee:l,balance:y,total:`${j({amount:w.value,decimals:w.token.decimals})} ${w.token.symbol}`}:{fee:l,balance:y}}),[r,c,N,W,v?.address,g]);if(I.useEffect((()=>{(async function(){if(k&&i)try{E(void 0);let l=await rn({tx:k,solanaClient:f,privyClient:i,checkFunds:!z});d(l)}catch(l){console.error("Failed to prepare transaction",l),E(l)}})()}),[k,f,i,z]),I.useEffect((()=>{(async function(){if(!v)return;A({value:g.value,isLoading:!0});let{value:l}=await f.rpc.getBalance(v.address,{commitment:"confirmed"}).send();A({value:l??0n,isLoading:!1})})().catch(console.error)}),[r]),!k||!t?.standardSignAndSendTransaction||!v){let l=Error("Invalid transaction request");return p.jsx(St,{error:l,allowlistConfig:m.allowlistConfig,onRetry:()=>{t?.standardSignAndSendTransaction?.onFailure(l),s({shouldCallAuthOnSuccess:!1})}})}let q=()=>{if(!C)return _.signature||_.signedTransaction?t?.standardSignAndSendTransaction?.onSuccess({signature:_.signature,signedTransaction:_.signedTransaction}):t?.standardSignAndSendTransaction?.onFailure(J??T??Error("User exited the modal before submitting the transaction")),s({shouldCallAuthOnSuccess:!1})};e.current=q;let rt=t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?p.jsx("img",{src:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:t.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,H=!!(t.funding&&t.funding.supportedOptions.length>0),X=!r?.hasFunds&&H;if(_.signature||_.signedTransaction){let l=r?.instructions.filter((y=>y.type==="sol-transfer"||y.type==="spl-transfer")),h=l?.length===1?l?.at(0):void 0;return p.jsx(nn,{fees:_.fees??0n,onClose:q,transactionInfo:t.standardSignAndSendTransaction?.uiOptions.transactionInfo,solPrice:N,receiptHeader:t.standardSignAndSendTransaction?.uiOptions.successHeader,receiptDescription:t.standardSignAndSendTransaction?.uiOptions.successDescription,chain:f.chain,signOnly:z,instruction:h?.type==="sol-transfer"?{to:h.toAccount,amount:h.value}:{to:h?.toAccount||h?.toAta,total:P?.total}})}return J?p.jsx(Lt,{transactionError:J,chainId:f.chain,onClose:q,chainType:"solana",onRetry:async()=>{K(void 0);let{value:l}=await f.rpc.getLatestBlockhash().send();var h,y;b((h=k,y=l,gt(Z().decode(nt(h)),(w=>At(w)),(w=>bt(y,w)),(w=>kt(w)),(w=>new Uint8Array(wt().encode(w))))))}}):p.jsx(Ft,{img:rt,title:t.standardSignAndSendTransaction?.uiOptions?.transactionInfo?.title||"Confirm transaction",subtitle:t.standardSignAndSendTransaction?.uiOptions?.description||`${m.name} wants your permission to approve the following transaction.`,cta:X?"Add funds":t.standardSignAndSendTransaction?.uiOptions?.buttonText||"Approve",instructions:r?.instructions??[],network:f.chain=="solana:mainnet"?"Solana":f.chain.replace("solana:",""),blockExplorerUrl:f.blockExplorerUrl,total:c?V?.total:P?.total,fee:c?V?.fee:P?.fee,balance:c?V?.balance:P?.balance,swap:P?.swap,transactingWalletAddress:v.address,disabled:!r?.hasFunds&&!H,isSubmitting:C,isPreparing:!r||g.isLoading,isTokenPriceLoading:c&&W,isMissingFunds:!r?.hasFunds,submitError:J??void 0,isSponsored:!!t.standardSignAndSendTransaction?.isSponsored,parseError:T,onClick:X?async()=>{if(!v)return;if(!H)throw Error("Funding wallet is not enabled");let l="FundingMethodSelectionScreen";n({...t,funding:{...t.funding,methodScreen:l},solanaFundingData:t?.solanaFundingData}),a(l)}:async()=>{try{if($(!0),C||!v||!u||!x||!at)return;let l=await t.standardSignAndSendTransaction.onConfirm(k);if("signature"in l){let h=await(async function({solanaClient:y,signature:w}){let o=ht().decode(w),L=await y.rpc.getTransaction(o,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch((()=>null));return L?{fee:L.meta?.fee??0n}:null})({solanaClient:f,signature:l.signature});return void M({...l,fees:h?.fee})}M(l)}catch(l){console.warn({transaction:k,error:l}),K(l)}finally{$(!1)}},onClose:q})}};export{Kn as StandardSignAndSendTransactionScreen,Kn as default};
