import{d4 as p,dz as c,d7 as b,d6 as u}from"./app.Dbs6V_q1.js";import{F as h}from"./PhoneIcon.BLDp5Qmc.js";import{r as d}from"./index.Crn7-fJZ.js";import{w as S}from"./ConnectPhoneForm-DMcfvHG9.B7vcsMKV.js";import{n as f}from"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import"./Chip-D2-wZOHJ.DezdPRVM.js";import"./LoadingSkeleton-U6-3yFwI.DhgKuR2U.js";import"./Screen-5StC6JLQ.BNbtfsff.js";import"./index-Dq_xe9dz.CYFAvuPJ.js";const w=({title:o="Update your phone number",subtitle:a="Add the phone number you'd like to use going forward. We'll send you a confirmation code",onSubmit:r,isSubmitting:t=!1})=>{let[e,n]=d.useState(null);return u.jsx(f,{title:o,subtitle:a,icon:h,primaryCta:{label:t?"Submitting":"Update",onClick:async()=>{e?.qualifiedPhoneNumber&&await r(e)},disabled:!e?.isValid||t},watermark:!0,children:u.jsx(S,{onChange:i=>{n(i)},onSubmit:async()=>{},noIncludeSubmitButton:!0,hideRecent:!0})})},M={component:()=>{let{currentScreen:o,data:a,navigate:r,setModalData:t}=p(),{user:e}=c(),{initUpdatePhone:n}=b(),[i,s]=d.useState(!1);return u.jsx(w,{onSubmit:async m=>{s(!0);try{if(!e?.phone?.number)throw Error("User is required to have an phone number to update it.");await n(e?.phone?.number,m.qualifiedPhoneNumber),r("AwaitingPasswordlessCodeScreen")}catch(l){t({errorModalData:{error:l,previousScreen:a?.errorModalData?.previousScreen||o||"LinkPhoneScreen"}}),r("ErrorScreen")}finally{s(!1)}},isSubmitting:i})}};export{M as UpdatePhoneScreen,w as UpdatePhoneScreenView,M as default};
