import{d7 as K,d4 as V,d5 as Z,db as ee,ec as ne,d6 as l,ex as le,ey as te,ez as P,eA as X,e1 as ae,dc as oe,eB as ie,dx as q,dE as ce,eC as re,dr as R}from"./app.Dbs6V_q1.js";import{r as H}from"./index.Crn7-fJZ.js";import{T as se,b as Q}from"./ModalHeader-CSfzkWxZ.KQF0IT9H.js";import{o as pe}from"./ScreenHeader-CHmc4-Lu.CDB8Kfz5.js";import{t as de}from"./FundWalletMethodHeader-Dujd1j7J.DOTw7rnz.js";import{n as L}from"./Chip-D2-wZOHJ.DezdPRVM.js";import{r as ye}from"./Subtitle-CV-2yKE4.DJhYHDeo.js";import{l as ue}from"./WalletOverflowButton-C0Ysaik4.Dd1V1Kvv.js";import{i as me}from"./InjectedWalletIcon-DLcYOGDj.CyAbXwSp.js";import{n as we}from"./styles-C3H3yhVT.DXoQsb_B.js";import"./LoadingSkeleton-U6-3yFwI.DhgKuR2U.js";import"./createLucideIcon.RSj0tFkk.js";import"./WalletIcon.DW8etFtk.js";import"./LinkPasskeyScreen-jzRj6Yq0.CHUIblrj.js";import"./TodoList-CgrU7uwu.CdzoNajJ.js";import"./check.BWO2M5QN.js";import"./ScreenLayout-C2Le_YIv.CCTYs10k.js";import"./Screen-5StC6JLQ.BNbtfsff.js";import"./index-Dq_xe9dz.CYFAvuPJ.js";import"./circle-check-big.BEG3gtjL.js";import"./fingerprint-pattern.Bk_3pvPW.js";const y=({provider:u,displayName:v,logo:C,connectOnly:o,connector:c})=>{let S,{navigate:f,setModalData:E}=V(),{connectWallet:B}=K(),$=ae(),b=oe(u),g=c.connectorType==="wallet_connect_v2"?u:c.walletClientType,W=window.matchMedia("(display-mode: standalone)").matches,x=ie({connectorType:c.connectorType,walletClientType:g});S=x&&x.chainTypes.includes(c.chainType)?()=>{x.isInstalled||c.chainType==="solana"&&"isInstalled"in c&&c.isInstalled?(B(c,g),f(o?"ConnectOnlyStatusScreen":"ConnectionStatusScreen")):q.isMobile?(E({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("WalletInterstitialScreen")):(E({installWalletModalData:{walletConfig:x,chainType:c.chainType,connectOnly:o}}),f("InstallWalletScreen"))}:c.connectorType!=="coinbase_wallet"||c.coinbaseWalletConfig.preference?.options!=="eoaOnly"||!q.isMobile||W||ce()?()=>{(!re(window.navigator.userAgent)||event?.isTrusted)&&(B(c,g),o?c.connectorType==="wallet_connect_v2"?(E((M=>({...M,externalConnectWallet:{...M?.externalConnectWallet,preSelectedWalletId:"wallet_connect_qr"}}))),f("ConnectOnlyLandingScreen")):f("ConnectOnlyStatusScreen"):f("ConnectionStatusScreen"))}:()=>{window.location.href=`https://go.cb-w.com/dapp?cb_url=${encodeURI(window.location.href)}`};let _=v||b?.metadata?.shortName||b?.name||c.walletClientType;return l.jsxs(he,{onClick:S,children:[l.jsx(me,{icon:C||b?.image_url?.md,name:_}),l.jsx("span",{children:_}),l.jsxs(fe,{id:"chip-container",children:[$?.walletClientType===g&&$?.chainType===c.chainType?l.jsx(G,{color:"gray",children:"Recent"}):l.jsx("span",{id:"connect-text",children:"Connect"}),c.chainType==="solana"&&l.jsx(G,{color:"gray",children:"Solana"})]})]})};let he=R(X)`
  /* Wallet name text color */
  > span {
    color: var(--privy-color-foreground);
  }

  /* Show "Connect" on hover */
  > #chip-container > #connect-text {
    font-weight: 500;
    color: var(--privy-color-accent);
    opacity: 0;
    transition: opacity 0.1s ease-out;
  }

  :hover > #chip-container > #connect-text {
    opacity: 1;
  }

  @media (max-width: 440px) {
    > #chip-container > #connect-text {
      display: none;
    }
  }
`,G=R(L)`
  margin-left: auto;
`,fe=R.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-left: auto;
`;const Te=["coinbase_wallet","base_account"];let Ce=["metamask","okx_wallet","rainbow","uniswap","bybit_wallet","ronin_wallet","haha_wallet","uniswap_extension","zerion","rabby_wallet","cryptocom","binance","kraken_wallet"];const ge=["safe"],xe=["phantom","backpack","solflare","jupiter","universal_profile"],Pe={component:()=>{let u,{connectors:v}=K(),{setModalData:C,data:o,navigate:c}=V(),S=Z(),{wallets:f}=ee(),E=v.filter(ne).flatMap((e=>e.wallets)),[B,$]=H.useState("default"),b=o?.funding?.chainType==="solana",g=!!o?.funding?.crossChainBridgingEnabled;u=o?.funding?.chainType==="ethereum"?o.funding.erc20Address&&!o.funding.isUSDC?"ethereum-only":g&&!o.funding.chain.testnet?"ethereum-and-solana":"ethereum-only":g&&!o.funding?.isUSDC?"ethereum-and-solana":"solana-only";let W=f.filter((e=>e.walletClientType!=="privy")),x=W.map((e=>e.walletClientType)),_=E.filter((e=>e.walletClientType!=="privy")),M=_.map((e=>e.walletClientType)),T=[],k={...o.funding};k.usingDefaultFundingMethod&&(k.usingDefaultFundingMethod=!1);let U=({wallet:e,walletChainType:a})=>{C({...o,funding:{...k,connectedWallet:e,onContinueWithExternalWallet:()=>c(z({destChainType:b?"solana":"ethereum",sourceChainType:a}))},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e.address,walletClientType:e.walletClientType}}:void 0}),c("FundingAmountEditScreen")};u!=="solana-only"&&T.push(...W.map(((e,a)=>l.jsx(J,{onClick:()=>U({wallet:e,walletChainType:"ethereum"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),u!=="ethereum-only"&&T.push(..._.map(((e,a)=>l.jsx(J,{onClick:()=>U({wallet:e,walletChainType:"solana"}),icon:e.meta.icon,name:e.meta.name,chainType:e.type},a)))),T.push(...(({walletList:e,walletChainType:a,connectors:I,connectOnly:p,ignore:O,walletConnectEnabled:j,forceWallet:F})=>{let m=[],A=[],N=[],w=I.filter((d=>a==="ethereum-only"?d.chainType==="ethereum":a!=="solana-only"||d.chainType==="solana")),D=w.find((d=>d.connectorType==="wallet_connect_v2"));for(let[d,n]of(F?[F.wallet]:e).entries()){if(n==="detected_ethereum_wallets")for(let[i,t]of w.filter((({chainType:r,connectorType:s,walletClientType:h})=>r!=="solana"&&(h==="uniswap_wallet_extension"||h==="uniswap_extension"?!O.includes("uniswap"):h==="crypto.com_wallet_extension"||h==="crypto.com_onchain"?!O.includes("cryptocom"):s==="injected"&&!O.includes(h)))).entries()){let{walletClientType:r,walletBranding:s,chainType:h}=t;(r==="unknown"?A:m).push(l.jsx(y,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:t},`${d}-${n}-${r}-${h}-${i}`))}if(n==="detected_solana_wallets")for(let[i,t]of w.filter((({chainType:r,walletClientType:s})=>{if(r==="solana")return a!=="ethereum-only"&&!O.includes(s)})).entries()){let{walletClientType:r,walletBranding:s,chainType:h}=t;(r==="unknown"?A:m).push(l.jsx(y,{connectOnly:p,provider:r,logo:s.icon,displayName:s.name,connector:t},`${d}-${n}-${r}-${h}-${i}`))}if(xe.includes(n)){let i=w.find((t=>t.connectorType==="injected"&&t.walletClientType===n||t.connectorType===n));if(i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));t&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(Ce.includes(n)){let i=w.find((t=>n==="uniswap"?t.walletClientType==="uniswap_wallet_extension"||t.walletClientType==="uniswap_extension":n==="cryptocom"?t.walletClientType==="crypto.com_wallet_extension"||t.walletClientType==="crypto.com_onchain":t.connectorType==="injected"&&t.walletClientType===n));if(j&&!i&&(i=D),i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,logo:i.connectorType==="injected"?i.walletBranding.icon:void 0,displayName:i.connectorType==="injected"?i.walletBranding.name:void 0},`${d}-${n}`)),a==="solana-only"||a==="ethereum-and-solana"){let t=w.find((({chainType:r,walletClientType:s})=>r==="solana"&&s===n));t&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:t},`${n}-solana`))}}else if(Te.includes(n)){let i=w.find((({connectorType:t})=>t===n));i&&m.push(l.jsx(y,{connectOnly:p,provider:n,connector:i,displayName:i.walletClientType==="coinbase_wallet"?"Coinbase":"Base",logo:i.walletClientType==="coinbase_wallet"?le:te},`${d}-${n}`))}else if(ge.includes(n))D&&N.push(l.jsx(y,{connectOnly:p,provider:n,connector:D},`${d}-${n}`));else if(n==="wallet_connect")D&&N.push(l.jsx(y,{connectOnly:p,provider:n,connector:D,logo:D.walletBranding.icon,displayName:"WalletConnect"},`${d}-${n}`));else if(n===F?.wallet){let i=F.chainType==="ethereum"&&e.includes("detected_ethereum_wallets"),t=F.chainType==="solana"&&e.includes("detected_solana_wallets");if(i||t){let r=w.find((({walletClientType:s})=>s===n));r&&m.push(l.jsx(y,{connectOnly:p,provider:n,displayName:r.walletBranding?.name,logo:r.walletBranding?.icon,connector:r},`${d}-${n}`))}}}return[...A,...m,...N]})({walletList:S.appearance.walletList.filter((e=>!W.some((a=>a.walletClientType===e))&&!_.some((a=>a.walletClientType===e)))),walletChainType:u,connectors:v,connectOnly:!0,ignore:[...S.appearance.walletList,...x,...M],walletConnectEnabled:S.externalWallets.walletConnect.enabled}));let Y=l.jsx(ue,{text:"More wallets",onClick:()=>$("overflow")}),z=({sourceChainType:e,destChainType:a})=>e==="ethereum"&&a==="solana"?"AwaitingEvmToSolBridgingScreen":e==="ethereum"&&a==="ethereum"?"AwaitingExternalEthereumTransferScreen":e==="solana"&&a==="ethereum"?"AwaitingSolToEvmBridgingScreen":k.externalSolanaFundingScreen;return H.useEffect((()=>{C({...o,externalConnectWallet:{onCompleteNavigateTo:({address:e,walletClientType:a,walletChainType:I})=>{let p=I??"ethereum",O=p==="ethereum"?W.find((j=>j.address===e&&j.walletClientType===a)):_.find((j=>j.address===e&&j.walletClientType===a));return C({...o,funding:{...k,connectedWallet:O,onContinueWithExternalWallet:()=>{c(z({destChainType:b?"solana":"ethereum",sourceChainType:p}))}},solanaFundingData:o?.solanaFundingData?{...o.solanaFundingData,sourceWalletData:{address:e||"",walletClientType:a||""}}:void 0}),"FundingAmountEditScreen"}}})}),[]),l.jsxs(l.Fragment,B==="overflow"?{children:[l.jsx(se,{backFn:()=>$("default")},"header"),l.jsxs(P,{children:[l.jsx(ye,{style:{color:"var(--privy-color-foreground-3)",textAlign:"left"},children:"More wallets"}),T]}),l.jsx(Q,{})]}:{children:[l.jsx(de,{}),l.jsx(pe,{title:"Transfer from wallet",description:"Connect a wallet to deposit funds or send funds manually to your wallet address."}),l.jsxs(P,{children:[T.length>4?T.slice(0,3):T,T.length>4&&Y]}),l.jsx(Q,{})]})}};let J=({onClick:u,icon:v,name:C,chainType:o})=>l.jsxs(X,{onClick:u,children:[l.jsx(we,{style:{width:20},children:l.jsx("img",{src:v})}),C,l.jsx(L,{color:"gray",style:{marginLeft:"auto"},children:"Connected"}),o==="solana"&&l.jsx(L,{color:"gray",children:"Solana"})]});export{Pe as TransferFromWalletScreen,Pe as default};
